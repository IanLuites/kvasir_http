!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=216)}([function(e,t,n){"use strict";e.exports=n(90)},function(e,t,n){e.exports=n(95)()},function(e,t){e.exports=function(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}},function(e,t){e.exports=function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}},function(e,t,n){var i=n(50),o=n(94),r=n(51);e.exports=function(e,t){return i(e)||o(e,t)||r()}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=function(e){return o.test("number"==typeof e?i(e):e.charAt(0))};var i=String.fromCharCode,o=/\s/},function(e,t,n){e.exports={sidebar:"_1OwgBM-KuYJuwAjkgs-A7b","sidebar-toggle":"_2RSjYNCVxib9WuleX1HQKL",menu:"_3TOTjCK-CLzTBj3MpNSY6y","menu-items":"_31SNaVZVKdMWxF0mdWGpa9",collapsed:"_2ix76o_hgEfQkTlZtKUc2A",expanded:"_3s3TMXJ2na_ILnzgY4sM8s","sub-collapsed":"_2FEfz2PKZF5gAMRZS3KWMW","sub-expanded":"qGUUyDOy5Gxb7KgFRFAfu","menu-item-1":"_3gM3Sd0Q0tMWAfYFVoTMk9","menu-item-2":"_3L3tsunluLxyuTrPGOd7QH","menu-item-3":"_1xRUhXFtxvcyyr5b9km3lL","menu-item-4":"_3GzVbUIhtr1ZKpN5sxnJkN","menu-item-5":"_2FCOS9EuW4FtdgRbtuxMGp","menu-sub-1":"_2WEuOVcbLDlp3kvLgugjTD","menu-sub-2":"_26c4xy3S2LtEM6VgcTMiXl","menu-sub-3":"_13i1kK85LSdGx9hY2RxMh","menu-sub-4":"_1pmhl7zByvPt2U3rwsw16y","menu-sub-5":"_36Nh7CgpolYhMVC-V6zVMr",selected:"CocfMxjAw--X4xC8rx0S3"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var i=n(18),o=n.n(i),r=function(e){return e.split(".").slice(-1).pop().split("_").map((function(e){return function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(e)})).join(" ").replace(/(^|\W)Id($|\W)/,"$1ID$2").replace(/(^|\W)Ip($|\W)/,"$1IP$2")},s=function e(t,n){if(n=n||"",null===t)return"null";if(!0===t)return"true";if(!1===t)return"false";if(Array.isArray(t))return n+"[\n"+t.map((function(t){return e(t,n+"    ")})).join("\n, ")+"\n".concat(n,"  ]");switch(o()(t)){case"number":return"".concat(n).concat(t);case"string":return n+JSON.stringify(t);case"object":switch(t.constructor&&t.constructor.name){case"Date":return"".concat(n).concat(t);default:return n+"{\n}"+Object.keys(t).map((function(i){return"".concat(n,"    ").concat(i,": ").concat(e(t[i]))})).join(",\n")+"\n".concat(n,"  }")}default:return"".concat(n).concat(t)}}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var o in i)n.call(i,o)&&(e[o]=i[o])}return e};var n=Object.prototype.hasOwnProperty},function(e,t,n){e.exports={row:"_2HeT1Y29e3XVmS6NXE0IDZ",column:"_2CGpwkStE5IiyTRYZRrJGp",live:"_1KDko06ctBmapEg226G0G_",table:"s-MAM_3F_D2JPFSEAgz47","topic-select":"_1wz0sy_X_YxIfE-7Zc_Rna"}},function(e,t,n){var i,o,r;o=[n(204)],void 0===(r="function"==typeof(i=function(e){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";return e.setLocale=function(t){e.Msg=e.Msg||{},Object.keys(t).forEach((function(n){e.Msg[n]=t[n]}))},e})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));var i=n(7),o=n.n(i),r=n(17),s=n.n(r),a=n(4),l=n.n(a),c=n(0),u=n.n(c);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={architecture:null},f=Object(c.createContext)(e),g=f.Provider;function m(e){var t=Object(c.useReducer)((function(e,t){switch(t.type){case"set_architecture":return d({},e,{architecture:t.architecture});default:throw new Error}}),p),n=l()(t,2),i=n[0],r=n[1];return u.a.createElement(g,o()({value:{state:i,dispatch:r}},e))}function v(){var e=Object(c.useContext)(f),t=e.state,n=e.dispatch;return d({},t,{setArchitecture:function(e){return n({type:"set_architecture",architecture:e})}})}}).call(this,n(8))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));var i=n(7),o=n.n(i),r=n(17),s=n.n(r),a=n(4),l=n.n(a),c=n(0),u=n.n(c);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={spec:null},f=Object(c.createContext)(e),g=f.Provider;function m(e){var t=Object(c.useReducer)((function(e,t){switch(t.type){case"set_spec":return d({},e,{spec:t.spec});default:throw new Error}}),p),n=l()(t,2),i=n[0],r=n[1];return u.a.createElement(g,o()({value:{state:i,dispatch:r}},e))}function v(){var e=Object(c.useContext)(f),t=e.state,n=e.dispatch;return d({},t,{setSpec:function(e){return n({type:"set_spec",spec:e})}})}}).call(this,n(8))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){e.exports={app:"_2L3ycz3IphKN3PoKNiS2Zs",content:"_2bmirqzl-WohT43nWGvtsj",contents:"OzvR-vL0DWLGAOHGmnsRa",collapsed:"_7-G_V0-7hB29UTzeN1K2j",expanded:"_2YwU_Fntj4OscRb0YBUFUc"}},function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){var i=n(50),o=n(63),r=n(51);e.exports=function(e){return i(e)||o(e)||r()}},function(e,t,n){"use strict";var i=n(40),o=n(59),r=n(60);e.exports=function(e){var t,n,s=e.space,a=e.mustUseProperty||[],l=e.attributes||{},c=e.properties,u=e.transform,h={},d={};for(t in c)n=new r(t,u(l,t),c[t],s),-1!==a.indexOf(t)&&(n.mustUseProperty=!0),h[t]=n,d[i(t)]=t,d[i(n.attribute)]=t;return new o(h,d,s)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){e.exports={example:"_9lPY6QOI-SWafiLAB11Tk",random:"_1v6jof0N9A0MAIMaeWR-gt","lang-button":"pazv1MTMVQrgink-3d7Q4","lang-selected":"_2XrkC9waI195fgoBW_ML_U",lang:"_20LobVO77MKAQsH8Jwo7b1"}},function(e,t,n){"use strict";var i=n(120),o=n(121),r=n(26),s=n(122),a=n(123),l=n(124);e.exports=function(e,t){var n,r,s={};t||(t={});for(r in d)n=t[r],s[r]=null==n?d[r]:n;(s.position.indent||s.position.start)&&(s.indent=s.position.indent||[],s.position=s.position.start);return function(e,t){var n,r,s,d,W,H,U,$,V,G,z,X,j,K,Y,q,J,Z,Q,ee=t.additional,te=t.nonTerminated,ne=t.text,ie=t.reference,oe=t.warning,re=t.textContext,se=t.referenceContext,ae=t.warningContext,le=t.position,ce=t.indent||[],ue=e.length,he=0,de=-1,pe=le.column||1,fe=le.line||1,ge="",me=[];"string"==typeof ee&&(ee=ee.charCodeAt(0));q=_e(),$=oe?function(e,t){var n=_e();n.column+=t,n.offset+=t,oe.call(ae,B[e],n,e)}:h,he--,ue++;for(;++he<ue;)if(W===f&&(pe=ce[de]||1),(W=e.charCodeAt(he))===v){if((U=e.charCodeAt(he+1))===p||U===f||U===g||U===m||U===v||U===y||U!=U||ee&&U===ee){ge+=u(W),pe++;continue}for(X=j=he+1,Q=j,U===T?(Q=++X,(U=e.charCodeAt(Q))===E||U===w?(K=C,Q=++X):K=x):K=S,n="",z="",d="",Y=R[K],Q--;++Q<ue&&(U=e.charCodeAt(Q),Y(U));)d+=u(U),K===S&&c.call(i,d)&&(n=d,z=i[d]);(s=e.charCodeAt(Q)===_)&&(Q++,(r=K===S&&l(d))&&(n=d,z=r)),Z=1+Q-j,(s||te)&&(d?K===S?(s&&!z?$(D,1):(n!==d&&(Q=X+n.length,Z=1+Q-X,s=!1),s||(V=n?I:M,t.attribute?(U=e.charCodeAt(Q))===b?($(V,Z),z=null):a(U)?z=null:$(V,Z):$(V,Z))),H=z):(s||$(O,Z),H=parseInt(d,A[K]),(ve=H)>=55296&&ve<=57343||ve>1114111?($(P,Z),H=u(k)):H in o?($(N,Z),H=o[H]):(G="",F(H)&&$(N,Z),H>65535&&(G+=u((H-=65536)>>>10|55296),H=56320|1023&H),H=G+u(H))):K!==S&&$(L,Z)),H?(ye(),q=_e(),he=Q-1,pe+=Q-j+1,me.push(H),(J=_e()).offset++,ie&&ie.call(se,H,{start:q,end:J},e.slice(j-1,Q)),q=J):(d=e.slice(j-1,Q),ge+=d,pe+=d.length,he=Q-1)}else 10===W&&(fe++,de++,pe=0),W==W?(ge+=u(W),pe++):ye();var ve;return me.join("");function _e(){return{line:fe,column:pe,offset:he+(le.offset||0)}}function ye(){ge&&(me.push(ge),ne&&ne.call(re,ge,{start:q,end:_e()}),ge="")}}(e,s)};var c={}.hasOwnProperty,u=String.fromCharCode,h=Function.prototype,d={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},p=9,f=10,g=12,m=32,v=38,_=59,y=60,b=61,T=35,E=88,w=120,k=65533,S="named",C="hexadecimal",x="decimal",A={};A[C]=16,A[x]=10;var R={};R[S]=a,R[x]=r,R[C]=s;var I=1,O=2,M=3,L=4,D=5,N=6,P=7,B={};function F(e){return e>=1&&e<=8||11===e||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||65535==(65535&e)||65534==(65535&e)}B[I]="Named character references must be terminated by a semicolon",B[O]="Numeric character references must be terminated by a semicolon",B[M]="Named character references cannot be empty",B[L]="Numeric character references cannot be empty",B[D]="Named character references must be known",B[N]="Numeric character references cannot be disallowed",B[P]="Numeric character references cannot be outside the permissible Unicode range"},function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}},function(e,t,n){"use strict";e.exports=a;var i=n(131),o=i.CONTINUE,r=i.SKIP,s=i.EXIT;function a(e,t,n,o){"function"==typeof t&&"function"!=typeof n&&(o=n,n=t,t=null),i(e,t,(function(e,t){var i=t[t.length-1],o=i?i.children.indexOf(e):null;return n(e,o,i)}),o)}a.CONTINUE=o,a.SKIP=r,a.EXIT=s},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));var i=n(7),o=n.n(i),r=n(17),s=n.n(r),a=n(4),l=n.n(a),c=n(0),u=n.n(c);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={lang:"elixir",theme:"dark"},f=Object(c.createContext)(e),g=f.Provider;function m(e){var t=Object(c.useReducer)((function(e,t){switch(t.type){case"set_lang":return d({},e,{lang:t.lang});default:throw new Error}}),p),n=l()(t,2),i=n[0],r=n[1];return u.a.createElement(g,o()({value:{state:i,dispatch:r}},e))}function v(){var e=Object(c.useContext)(f),t=e.state,n=e.dispatch;return d({},t,{setLang:function(e){return n({type:"set_lang",lang:e})}})}}).call(this,n(8))},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(18),o=n.n(i),r=n(6),s=n.n(r),a=n(5),l=n.n(a),c=n(2),u=n.n(c),h=n(3),d=n.n(h),p=function(){function e(t,n){var i=this;s()(this,e),f.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:"1.0.0"}),m.set(this,{writable:!0,value:{}}),v.set(this,{writable:!0,value:{}}),"string"==typeof n?n=JSON.parse(n):"undefined"===o()(n)&&(n={});var r=n,a=r.meta,l=r.payload,c=r.version;d()(this,f,t),d()(this,m,a||{}),d()(this,g,c||u()(this,f).version),d()(this,v,{}),u()(this,f).fields.forEach((function(e){u()(i,v)[e.name]=e.parse(l[e.name])}))}return l()(e,[{key:"getSpec",value:function(){return u()(this,f)}},{key:"getKey",value:function(){return u()(this,m).key}},{key:"getTopic",value:function(){return u()(this,m).topic}},{key:"getPartition",value:function(){return u()(this,m).partition}},{key:"getOffset",value:function(){return u()(this,m).offset}},{key:"field",value:function(e){return u()(this,v)[e]||null}}]),e}(),f=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap},function(e,t,n){"use strict";var i=n(6),o=n.n(i),r=n(5),s=n.n(r),a=n(2),l=n.n(a),c=n(3),u=n.n(c),h=n(18),d=n.n(h),p={any:function(e){return e},atom:function(e){if("string"==typeof e)return e;throw"Invalid atom."},boolean:function(e){if(d()(e)===d()(!0))return e;throw"Invalid boolean."},date:function(e){return e},email:function(e){return e},float:function(e){var t=parseFloat(e);if(isNaN(t))throw"Invalid float.";return t},integer:function(e){var t=parseInt(e);if(isNaN(t))throw"Invalid integer.";return t},ip:function(e){return e},list:function(e){return e},map:function(e){return e},non_neg_integer:function(e){var t=parseInt(e);if(isNaN(t))throw"Invalid integer.";if(t<0)throw"Invalid integer range.";return t},pos_integer:function(e){var t=parseInt(e);if(isNaN(t))throw"Invalid integer.";if(t<=0)throw"Invalid integer range.";return t},string:function(e){return e},timestamp:function(e){return new Date(e)}},f=function(e){return e};n.d(t,"a",(function(){return g}));var g=function(){function e(){o()(this,e),m.set(this,{writable:!0,value:""}),v.set(this,{writable:!0,value:""}),_.set(this,{writable:!0,value:""}),y.set(this,{writable:!0,value:!1}),b.set(this,{writable:!0,value:!1}),T.set(this,{writable:!0,value:void 0})}return s()(e,[{key:"parse",value:function(e){if(void 0===e){if(void 0!==l()(this,T))return l()(this,T);if(l()(this,b))return null;throw"Missing none optional/default value."}return function(e,t){return(p[e]||f)(t)}(l()(this,v),e)}},{key:"name",get:function(){return l()(this,m)}},{key:"type",get:function(){return l()(this,v)}},{key:"description",get:function(){return l()(this,_)}},{key:"sensitive",get:function(){return l()(this,y)}}],[{key:"fromJSON",value:function(t,n){"string"==typeof n&&(n=JSON.parse(n));var i=n,o=i.type,r=i.settings,s=r.doc,a=r.sensitive,l=r.optional,c=new e;return u()(c,m,t),u()(c,v,o),u()(c,_,s.trim()),u()(c,y,void 0!==a&&a),u()(c,b,void 0!==l&&l),u()(c,T,n.settings.default),c}}]),e}(),m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,b=new WeakMap,T=new WeakMap},function(e,t,n){var i=n(17);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(Object(n));"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){i(e,t,n[t])}))}return e}},function(e,t,n){e.exports={blocks:"_3AsqnETRMAF-CTOQNuaTDf",collapsed:"_1Qz80HbTMfblyu1xuN3Adq",expanded:"_2RziJmrnYmMeFFvhAhZ_pI"}},,function(e,t,n){"use strict";e.exports=n(98)},function(e,t){var n,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&p())}function p(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var i,o="";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(i!==e||void 0===i)i=e,o="";else if(o.length>=n)return o.substr(0,n);for(;n>o.length&&t>1;)1&t&&(o+=e),t>>=1,e+=e;return o=(o+=e).substr(0,n)}},function(e,t,n){"use strict";e.exports=function(e){var t=String(e),n=t.length;for(;t.charAt(--n)===i;);return t.slice(0,n+1)};var i="\n"},function(e,t,n){"use strict";e.exports=function(e,t,n,i){var o,r,s,a,l,c,u=["pedantic","commonmark"],h=u.length,d=e.length,p=-1;for(;++p<d;){for(o=e[p],r=o[1]||{},s=o[0],a=-1,c=!1;++a<h;)if(void 0!==r[l=u[a]]&&r[l]!==n.options[l]){c=!0;break}if(!c&&t[s].apply(n,i))return!0}return!1}},function(e,t,n){"use strict";var i=n(144);e.exports=function(e){return i(e).toLowerCase()}},function(e,t,n){"use strict";e.exports=function(e){return e.toLowerCase()}},function(e,t,n){"use strict";var i=0;function o(){return Math.pow(2,++i)}t.boolean=o(),t.booleanish=o(),t.overloadedBoolean=o(),t.number=o(),t.spaceSeparated=o(),t.commaSeparated=o(),t.commaOrSpaceSeparated=o()},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(91)},function(e,t,n){"use strict";function i(e){e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/#?[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/#?[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}|(?!\${)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}}}),e.languages.markup&&e.languages.markup.tag.addInlined("script","javascript"),e.languages.js=e.languages.javascript}e.exports=i,i.displayName="javascript",i.aliases=["js"]},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){var i=n(97);e.exports=p,e.exports.parse=r,e.exports.compile=function(e,t){return a(r(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var o=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function r(e,t){for(var n,i=[],r=0,s=0,a="",u=t&&t.delimiter||"/";null!=(n=o.exec(e));){var h=n[0],d=n[1],p=n.index;if(a+=e.slice(s,p),s=p+h.length,d)a+=d[1];else{var f=e[s],g=n[2],m=n[3],v=n[4],_=n[5],y=n[6],b=n[7];a&&(i.push(a),a="");var T=null!=g&&null!=f&&f!==g,E="+"===y||"*"===y,w="?"===y||"*"===y,k=n[2]||u,S=v||_;i.push({name:m||r++,prefix:g||"",delimiter:k,optional:w,repeat:E,partial:T,asterisk:!!b,pattern:S?c(S):b?".*":"[^"+l(k)+"]+?"})}}return s<e.length&&(a+=e.substr(s)),a&&i.push(a),i}function s(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),o=0;o<e.length;o++)"object"==typeof e[o]&&(n[o]=new RegExp("^(?:"+e[o].pattern+")$",h(t)));return function(t,o){for(var r="",a=t||{},l=(o||{}).pretty?s:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!=typeof u){var h,d=a[u.name];if(null==d){if(u.optional){u.partial&&(r+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(i(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(h=l(d[p]),!n[c].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");r+=(0===p?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!n[c].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');r+=u.prefix+h}}else r+=u}return r}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){i(t)||(n=t||n,t=[]);for(var o=(n=n||{}).strict,r=!1!==n.end,s="",a=0;a<e.length;a++){var c=e[a];if("string"==typeof c)s+=l(c);else{var d=l(c.prefix),p="(?:"+c.pattern+")";t.push(c),c.repeat&&(p+="(?:"+d+p+")*"),s+=p=c.optional?c.partial?d+"("+p+")?":"(?:"+d+"("+p+"))?":d+"("+p+")"}}var f=l(n.delimiter||"/"),g=s.slice(-f.length)===f;return o||(s=(g?s.slice(0,-f.length):s)+"(?:"+f+"(?=$))?"),s+=r?"$":o&&g?"":"(?="+f+"|$)",u(new RegExp("^"+s,h(n)),t)}function p(e,t,n){return i(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):i(e)?function(e,t,n){for(var i=[],o=0;o<e.length;o++)i.push(p(e[o],t,n).source);return u(new RegExp("(?:"+i.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(r(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";(function(t){var i,o,r=(o=(i="Prism"in t)?t.Prism:void 0,function(){i?t.Prism=o:delete t.Prism,i=void 0,o=void 0});("undefined"==typeof window?"undefined"==typeof self?{}:self:window).Prism={manual:!0,disableWorkerMessageHandler:!0};var s=n(178),a=n(25),l=n(193),c=n(194),u=n(195),h=n(196),d=n(43);r();var p={}.hasOwnProperty;function f(){}f.prototype=l;var g=new f;function m(e){if("function"!=typeof e||!e.displayName)throw new Error("Expected `function` for `grammar`, got `"+e+"`");void 0===g.languages[e.displayName]&&e(g)}e.exports=g,g.highlight=function(e,t){var n,i=l.highlight;if("string"!=typeof e)throw new Error("Expected `string` for `value`, got `"+e+"`");if("Object"===g.util.type(t))n=t,t=null;else{if("string"!=typeof t)throw new Error("Expected `string` for `name`, got `"+t+"`");if(!p.call(g.languages,t))throw new Error("Unknown language: `"+t+"` is not registered");n=g.languages[t]}return i.call(this,e,n,t)},g.register=m,g.alias=function(e,t){var n,i,o,r,s=g.languages,a=e;t&&((a={})[e]=t);for(n in a)for(i=a[n],o=(i="string"==typeof i?[i]:i).length,r=-1;++r<o;)s[i[r]]=s[n]},g.registered=function(e){if("string"!=typeof e)throw new Error("Expected `string` for `language`, got `"+e+"`");return p.call(g.languages,e)},g.listLanguages=function(){var e,t=g.languages,n=[];for(e in t)p.call(t,e)&&"object"==typeof t[e]&&n.push(e);return n},m(c),m(u),m(h),m(d),g.util.encode=function(e){return e},g.Token.stringify=function(e,t,n){var i;if("string"==typeof e)return{type:"text",value:e};if("Array"===g.util.type(e))return function(e,t){var n,i=[],o=e.length,r=-1;for(;++r<o;)""!==(n=e[r])&&null!=n&&i.push(n);r=-1,o=i.length;for(;++r<o;)n=i[r],i[r]=g.Token.stringify(n,t,i);return i}(e,t);i={type:e.type,content:g.Token.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n},e.alias&&(i.classes=i.classes.concat(e.alias));return g.hooks.run("wrap",i),s(i.tag+"."+i.classes.join("."),function(e){var t;for(t in e)e[t]=a(e[t]);return e}(i.attributes),i.content)}}).call(this,n(8))},function(e,t,n){var i=n(214),o=n(63),r=n(215);e.exports=function(e){return i(e)||o(e)||r()}},,function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,l=s(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))o.call(n,u)&&(l[u]=n[u]);if(i){a=i(n);for(var h=0;h<a.length;h++)r.call(n,a[h])&&(l[a[h]]=n[a[h]])}}return l}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){(function(e){function n(e,t){for(var n=0,i=e.length-1;i>=0;i--){var o=e[i];"."===o?e.splice(i,1):".."===o?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}t.resolve=function(){for(var t="",o=!1,r=arguments.length-1;r>=-1&&!o;r--){var s=r>=0?arguments[r]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,o="/"===s.charAt(0))}return(o?"/":"")+(t=n(i(t.split("/"),(function(e){return!!e})),!o).join("/"))||"."},t.normalize=function(e){var r=t.isAbsolute(e),s="/"===o(e,-1);return(e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"))||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=i(e.split("/")),r=i(n.split("/")),s=Math.min(o.length,r.length),a=s,l=0;l<s;l++)if(o[l]!==r[l]){a=l;break}var c=[];for(l=a;l<o.length;l++)c.push("..");return(c=c.concat(r.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,i=-1,o=!0,r=e.length-1;r>=1;--r)if(47===(t=e.charCodeAt(r))){if(!o){i=r;break}}else o=!1;return-1===i?n?"/":".":n&&1===i?"/":e.slice(0,i)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,i=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===i&&(o=!1,i=t+1);return-1===i?"":e.slice(n,i)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,i=-1,o=!0,r=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===i&&(o=!1,i=s+1),46===a?-1===t?t=s:1!==r&&(r=1):-1!==t&&(r=-1);else if(!o){n=s+1;break}}return-1===t||-1===i||0===r||1===r&&t===i-1&&t===n+1?"":e.slice(t,i)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(35))},function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}},function(e,t,n){"use strict";e.exports={position:!0,gfm:!0,commonmark:!1,footnotes:!1,pedantic:!1,blocks:n(128)}},function(e,t,n){"use strict";e.exports=function(e){var t,n=0,o=0,r=e.charAt(n),s={};for(;r in i;)t=i[r],o+=t,t>1&&(o=Math.floor(o/t)*t),s[o]=n,r=e.charAt(++n);return{indent:o,stops:s}};var i={" ":1,"\t":4}},function(e,t,n){"use strict";var i="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\u0000-\\u0020]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",o="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";t.openCloseTag=new RegExp("^(?:"+i+"|"+o+")"),t.tag=new RegExp("^(?:"+i+"|"+o+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Za-z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)")},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("<",t)}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("[",t),i=e.indexOf("![",t);if(-1===i)return n;return n<i?n:i}},function(e,t,n){"use strict";e.exports=o;var i=o.prototype;function o(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}i.space=null,i.normal={},i.property={}},function(e,t,n){"use strict";var i=n(61),o=n(41);e.exports=a,a.prototype=new i,a.prototype.defined=!0;var r=["boolean","booleanish","overloadedBoolean","number","commaSeparated","spaceSeparated","commaOrSpaceSeparated"],s=r.length;function a(e,t,n,a){var c,u=-1;for(l(this,"space",a),i.call(this,e,t);++u<s;)l(this,c=r[u],(n&o[c])===o[c])}function l(e,t,n){n&&(e[t]=n)}},function(e,t,n){"use strict";e.exports=o;var i=o.prototype;function o(e,t){this.property=e,this.attribute=t}i.space=null,i.attribute=null,i.property=null,i.boolean=!1,i.booleanish=!1,i.overloadedBoolean=!1,i.number=!1,i.commaSeparated=!1,i.spaceSeparated=!1,i.commaOrSpaceSeparated=!1,i.mustUseProperty=!1,i.defined=!1},function(e,t,n){"use strict";var i=n(185);e.exports=function(e,t){return i(e,t.toLowerCase())}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t,n){(function(e,n){var i=200,o="__lodash_hash_undefined__",r=1,s=2,a=9007199254740991,l="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",h="[object Boolean]",d="[object Date]",p="[object Error]",f="[object Function]",g="[object GeneratorFunction]",m="[object Map]",v="[object Number]",_="[object Null]",y="[object Object]",b="[object Proxy]",T="[object RegExp]",E="[object Set]",w="[object String]",k="[object Symbol]",S="[object Undefined]",C="[object ArrayBuffer]",x="[object DataView]",A=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[l]=I[c]=I[C]=I[h]=I[x]=I[d]=I[p]=I[f]=I[m]=I[v]=I[y]=I[T]=I[E]=I[w]=I["[object WeakMap]"]=!1;var O="object"==typeof e&&e&&e.Object===Object&&e,M="object"==typeof self&&self&&self.Object===Object&&self,L=O||M||Function("return this")(),D=t&&!t.nodeType&&t,N=D&&"object"==typeof n&&n&&!n.nodeType&&n,P=N&&N.exports===D,B=P&&O.process,F=function(){try{return B&&B.binding&&B.binding("util")}catch(e){}}(),W=F&&F.isTypedArray;function H(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function U(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function $(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var V,G,z,X=Array.prototype,j=Function.prototype,K=Object.prototype,Y=L["__core-js_shared__"],q=j.toString,J=K.hasOwnProperty,Z=(V=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"",Q=K.toString,ee=RegExp("^"+q.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=P?L.Buffer:void 0,ne=L.Symbol,ie=L.Uint8Array,oe=K.propertyIsEnumerable,re=X.splice,se=ne?ne.toStringTag:void 0,ae=Object.getOwnPropertySymbols,le=te?te.isBuffer:void 0,ce=(G=Object.keys,z=Object,function(e){return G(z(e))}),ue=Fe(L,"DataView"),he=Fe(L,"Map"),de=Fe(L,"Promise"),pe=Fe(L,"Set"),fe=Fe(L,"WeakMap"),ge=Fe(Object,"create"),me=$e(ue),ve=$e(he),_e=$e(de),ye=$e(pe),be=$e(fe),Te=ne?ne.prototype:void 0,Ee=Te?Te.valueOf:void 0;function we(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ke(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ce(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Se;++t<n;)this.add(e[t])}function xe(e){var t=this.__data__=new ke(e);this.size=t.size}function Ae(e,t){var n=ze(e),i=!n&&Ge(e),o=!n&&!i&&Xe(e),r=!n&&!i&&!o&&Je(e),s=n||i||o||r,a=s?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],l=a.length;for(var c in e)!t&&!J.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ue(c,l))||a.push(c);return a}function Re(e,t){for(var n=e.length;n--;)if(Ve(e[n][0],t))return n;return-1}function Ie(e){return null==e?void 0===e?S:_:se&&se in Object(e)?function(e){var t=J.call(e,se),n=e[se];try{e[se]=void 0;var i=!0}catch(e){}var o=Q.call(e);i&&(t?e[se]=n:delete e[se]);return o}(e):function(e){return Q.call(e)}(e)}function Oe(e){return qe(e)&&Ie(e)==l}function Me(e,t,n,i,o){return e===t||(null==e||null==t||!qe(e)&&!qe(t)?e!=e&&t!=t:function(e,t,n,i,o,a){var u=ze(e),f=ze(t),g=u?c:He(e),_=f?c:He(t),b=(g=g==l?y:g)==y,S=(_=_==l?y:_)==y,A=g==_;if(A&&Xe(e)){if(!Xe(t))return!1;u=!0,b=!1}if(A&&!b)return a||(a=new xe),u||Je(e)?Ne(e,t,n,i,o,a):function(e,t,n,i,o,a,l){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case C:return!(e.byteLength!=t.byteLength||!a(new ie(e),new ie(t)));case h:case d:case v:return Ve(+e,+t);case p:return e.name==t.name&&e.message==t.message;case T:case w:return e==t+"";case m:var c=U;case E:var u=i&r;if(c||(c=$),e.size!=t.size&&!u)return!1;var f=l.get(e);if(f)return f==t;i|=s,l.set(e,t);var g=Ne(c(e),c(t),i,o,a,l);return l.delete(e),g;case k:if(Ee)return Ee.call(e)==Ee.call(t)}return!1}(e,t,g,n,i,o,a);if(!(n&r)){var R=b&&J.call(e,"__wrapped__"),I=S&&J.call(t,"__wrapped__");if(R||I){var O=R?e.value():e,M=I?t.value():t;return a||(a=new xe),o(O,M,n,i,a)}}if(!A)return!1;return a||(a=new xe),function(e,t,n,i,o,s){var a=n&r,l=Pe(e),c=l.length,u=Pe(t).length;if(c!=u&&!a)return!1;var h=c;for(;h--;){var d=l[h];if(!(a?d in t:J.call(t,d)))return!1}var p=s.get(e);if(p&&s.get(t))return p==t;var f=!0;s.set(e,t),s.set(t,e);var g=a;for(;++h<c;){d=l[h];var m=e[d],v=t[d];if(i)var _=a?i(v,m,d,t,e,s):i(m,v,d,e,t,s);if(!(void 0===_?m===v||o(m,v,n,i,s):_)){f=!1;break}g||(g="constructor"==d)}if(f&&!g){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(f=!1)}return s.delete(e),s.delete(t),f}(e,t,n,i,o,a)}(e,t,n,i,Me,o))}function Le(e){return!(!Ye(e)||function(e){return!!Z&&Z in e}(e))&&(je(e)?ee:A).test($e(e))}function De(e){if(n=(t=e)&&t.constructor,i="function"==typeof n&&n.prototype||K,t!==i)return ce(e);var t,n,i,o=[];for(var r in Object(e))J.call(e,r)&&"constructor"!=r&&o.push(r);return o}function Ne(e,t,n,i,o,a){var l=n&r,c=e.length,u=t.length;if(c!=u&&!(l&&u>c))return!1;var h=a.get(e);if(h&&a.get(t))return h==t;var d=-1,p=!0,f=n&s?new Ce:void 0;for(a.set(e,t),a.set(t,e);++d<c;){var g=e[d],m=t[d];if(i)var v=l?i(m,g,d,t,e,a):i(g,m,d,e,t,a);if(void 0!==v){if(v)continue;p=!1;break}if(f){if(!H(t,(function(e,t){if(r=t,!f.has(r)&&(g===e||o(g,e,n,i,a)))return f.push(t);var r}))){p=!1;break}}else if(g!==m&&!o(g,m,n,i,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function Pe(e){return function(e,t,n){var i=t(e);return ze(e)?i:function(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}(i,n(e))}(e,Ze,We)}function Be(e,t){var n,i,o=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Fe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Le(n)?n:void 0}we.prototype.clear=function(){this.__data__=ge?ge(null):{},this.size=0},we.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},we.prototype.get=function(e){var t=this.__data__;if(ge){var n=t[e];return n===o?void 0:n}return J.call(t,e)?t[e]:void 0},we.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:J.call(t,e)},we.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ge&&void 0===t?o:t,this},ke.prototype.clear=function(){this.__data__=[],this.size=0},ke.prototype.delete=function(e){var t=this.__data__,n=Re(t,e);return!(n<0)&&(n==t.length-1?t.pop():re.call(t,n,1),--this.size,!0)},ke.prototype.get=function(e){var t=this.__data__,n=Re(t,e);return n<0?void 0:t[n][1]},ke.prototype.has=function(e){return Re(this.__data__,e)>-1},ke.prototype.set=function(e,t){var n=this.__data__,i=Re(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Se.prototype.clear=function(){this.size=0,this.__data__={hash:new we,map:new(he||ke),string:new we}},Se.prototype.delete=function(e){var t=Be(this,e).delete(e);return this.size-=t?1:0,t},Se.prototype.get=function(e){return Be(this,e).get(e)},Se.prototype.has=function(e){return Be(this,e).has(e)},Se.prototype.set=function(e,t){var n=Be(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Ce.prototype.add=Ce.prototype.push=function(e){return this.__data__.set(e,o),this},Ce.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.clear=function(){this.__data__=new ke,this.size=0},xe.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},xe.prototype.get=function(e){return this.__data__.get(e)},xe.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ke){var o=n.__data__;if(!he||o.length<i-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Se(o)}return n.set(e,t),this.size=n.size,this};var We=ae?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,i=null==e?0:e.length,o=0,r=[];++n<i;){var s=e[n];t(s,n,e)&&(r[o++]=s)}return r}(ae(e),(function(t){return oe.call(e,t)})))}:function(){return[]},He=Ie;function Ue(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function $e(e){if(null!=e){try{return q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ve(e,t){return e===t||e!=e&&t!=t}(ue&&He(new ue(new ArrayBuffer(1)))!=x||he&&He(new he)!=m||de&&"[object Promise]"!=He(de.resolve())||pe&&He(new pe)!=E||fe&&"[object WeakMap]"!=He(new fe))&&(He=function(e){var t=Ie(e),n=t==y?e.constructor:void 0,i=n?$e(n):"";if(i)switch(i){case me:return x;case ve:return m;case _e:return"[object Promise]";case ye:return E;case be:return"[object WeakMap]"}return t});var Ge=Oe(function(){return arguments}())?Oe:function(e){return qe(e)&&J.call(e,"callee")&&!oe.call(e,"callee")},ze=Array.isArray;var Xe=le||function(){return!1};function je(e){if(!Ye(e))return!1;var t=Ie(e);return t==f||t==g||t==u||t==b}function Ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Ye(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qe(e){return null!=e&&"object"==typeof e}var Je=W?function(e){return function(t){return e(t)}}(W):function(e){return qe(e)&&Ke(e.length)&&!!I[Ie(e)]};function Ze(e){return null!=(t=e)&&Ke(t.length)&&!je(t)?Ae(e):De(e);var t}n.exports=function(e,t){return Me(e,t)}}).call(this,n(8),n(23)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.editorOptions=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"];t.editorEvents=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"];t.getAceInstance=function(){var e;return window.ace?(e=window.ace).acequire=window.ace.require||window.ace.acequire:e=n(66),e};t.debounce=function(e,t){var n=null;return function(){var i=this,o=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(i,o)}),t)}}},function(e,t,n){(function(e){!function(){var e=function(){return this}();e||"undefined"==typeof window||(e=window);var t=function(e,n,i){"string"==typeof e?(2==arguments.length&&(i=n),t.modules[e]||(t.payloads[e]=i,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};t.modules={},t.payloads={};var n,i,o=function(e,t,n){if("string"==typeof t){var i=a(e,t);if(null!=i)return n&&n(),i}else if("[object Array]"===Object.prototype.toString.call(t)){for(var o=[],s=0,l=t.length;s<l;++s){var c=a(e,t[s]);if(null==c&&r.original)return;o.push(c)}return n&&n.apply(null,o)||!0}},r=function(e,t){var n=o("",e,t);return null==n&&r.original?r.original.apply(this,arguments):n},s=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return s(e,n[0])+"!"+s(e,n[1])}if("."==t.charAt(0))for(t=e.split("/").slice(0,-1).join("/")+"/"+t;-1!==t.indexOf(".")&&i!=t;){var i=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return t},a=function(e,n){n=s(e,n);var i=t.modules[n];if(!i){if("function"==typeof(i=t.payloads[n])){var r={},a={id:n,uri:"",exports:r,packaged:!0};r=i((function(e,t){return o(n,e,t)}),r,a)||a.exports,t.modules[n]=r,delete t.payloads[n]}i=t.modules[n]=r||i}return i};i=e,(n="ace")&&(e[n]||(e[n]={}),i=e[n]),i.define&&i.define.packaged||(t.original=i.define,i.define=t,i.define.packaged=!0),i.require&&i.require.packaged||(r.original=i.require,i.require=r,i.require.packaged=!0)}(),ace.define("ace/lib/regexp",["require","exports","module"],(function(e,t,n){"use strict";var i,o={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},r=void 0===o.exec.call(/()??/,"")[1],s=(i=/^/g,o.test.call(i,""),!i.lastIndex);function a(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function l(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var i=n||0;i<e.length;i++)if(e[i]===t)return i;return-1}s&&r||(RegExp.prototype.exec=function(e){var t,n,i=o.exec.apply(this,arguments);if("string"==typeof e&&i){if(!r&&i.length>1&&l(i,"")>-1&&(n=RegExp(this.source,o.replace.call(a(this),"g","")),o.replace.call(e.slice(i.index),n,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(i[e]=void 0)}))),this._xregexp&&this._xregexp.captureNames)for(var c=1;c<i.length;c++)(t=this._xregexp.captureNames[c-1])&&(i[t]=i[c]);!s&&this.global&&!i[0].length&&this.lastIndex>i.index&&this.lastIndex--}return i},s||(RegExp.prototype.test=function(e){var t=o.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))})),ace.define("ace/lib/es5-shim",["require","exports","module"],(function(e,t,n){function i(){}Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError("Function.prototype.bind called on incompatible "+t);var n=d.call(arguments,1),o=function(){if(this instanceof o){var i=t.apply(this,n.concat(d.call(arguments)));return Object(i)===i?i:this}return t.apply(e,n.concat(d.call(arguments)))};return t.prototype&&(i.prototype=t.prototype,o.prototype=new i,i.prototype=null),o});var o,r,s,a,l,c=Function.prototype.call,u=Array.prototype,h=Object.prototype,d=u.slice,p=c.bind(h.toString),f=c.bind(h.hasOwnProperty);if((l=f(h,"__defineGetter__"))&&(o=c.bind(h.__defineGetter__),r=c.bind(h.__defineSetter__),s=c.bind(h.__lookupGetter__),a=c.bind(h.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t,n=[];if(n.splice.apply(n,e(20)),n.splice.apply(n,e(26)),t=n.length,n.splice(5,0,"XXX"),n.length,t+1==n.length)return!0}()){var g=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?g.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(d.call(arguments,2))):[]}}else Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):null==e?e=0:e<0&&(e=Math.max(n+e,0)),e+t<n||(t=n-e);var i=this.slice(e,e+t),o=d.call(arguments,2),r=o.length;if(e===n)r&&this.push.apply(this,o);else{var s=Math.min(t,n-e),a=e+s,l=a+r-s,c=n-a,u=n-s;if(l<a)for(var h=0;h<c;++h)this[l+h]=this[a+h];else if(l>a)for(h=c;h--;)this[l+h]=this[a+h];if(r&&e===u)this.length=u,this.push.apply(this,o);else for(this.length=u+r,h=0;h<r;++h)this[e+h]=o[h]}return i};Array.isArray||(Array.isArray=function(e){return"[object Array]"==p(e)});var m,v,_=Object("a"),y="a"!=_[0]||!(0 in _);if(Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=M(this),n=y&&"[object String]"==p(this)?this.split(""):t,i=arguments[1],o=-1,r=n.length>>>0;if("[object Function]"!=p(e))throw new TypeError;for(;++o<r;)o in n&&e.call(i,n[o],o,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=M(this),n=y&&"[object String]"==p(this)?this.split(""):t,i=n.length>>>0,o=Array(i),r=arguments[1];if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");for(var s=0;s<i;s++)s in n&&(o[s]=e.call(r,n[s],s,t));return o}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,n=M(this),i=y&&"[object String]"==p(this)?this.split(""):n,o=i.length>>>0,r=[],s=arguments[1];if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");for(var a=0;a<o;a++)a in i&&(t=i[a],e.call(s,t,a,n)&&r.push(t));return r}),Array.prototype.every||(Array.prototype.every=function(e){var t=M(this),n=y&&"[object String]"==p(this)?this.split(""):t,i=n.length>>>0,o=arguments[1];if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");for(var r=0;r<i;r++)if(r in n&&!e.call(o,n[r],r,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=M(this),n=y&&"[object String]"==p(this)?this.split(""):t,i=n.length>>>0,o=arguments[1];if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");for(var r=0;r<i;r++)if(r in n&&e.call(o,n[r],r,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=M(this),n=y&&"[object String]"==p(this)?this.split(""):t,i=n.length>>>0;if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,r=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(r in n){o=n[r++];break}if(++r>=i)throw new TypeError("reduce of empty array with no initial value")}for(;r<i;r++)r in n&&(o=e.call(void 0,o,n[r],r,t));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=M(this),n=y&&"[object String]"==p(this)?this.split(""):t,i=n.length>>>0;if("[object Function]"!=p(e))throw new TypeError(e+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,r=i-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(r in n){o=n[r--];break}if(--r<0)throw new TypeError("reduceRight of empty array with no initial value")}do{r in this&&(o=e.call(void 0,o,n[r],r,t))}while(r--);return o}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var t=y&&"[object String]"==p(this)?this.split(""):M(this),n=t.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=O(arguments[1])),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var t=y&&"[object String]"==p(this)?this.split(""):M(this),n=t.length>>>0;if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,O(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in t&&e===t[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__||(e.constructor?e.constructor.prototype:h)}),!Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(f(e,t)){var n;if(n={enumerable:!0,configurable:!0},l){var i=e.__proto__;e.__proto__=h;var o=s(e,t),r=a(e,t);if(e.__proto__=i,o||r)return o&&(n.get=o),r&&(n.set=r),n}return n.value=e[t],n}}}(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),Object.create)||(m=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(e,t){var n;if(null===e)n=m();else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var i=function(){};i.prototype=e,(n=new i).__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n});function b(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(e){}}if(Object.defineProperty){var T=b({}),E="undefined"==typeof document||b(document.createElement("div"));if(!T||!E)var w=Object.defineProperty}if(!Object.defineProperty||w){Object.defineProperty=function(e,t,n){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.defineProperty called on non-object: "+e);if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError("Property description must be an object: "+n);if(w)try{return w.call(Object,e,t,n)}catch(e){}if(f(n,"value"))if(l&&(s(e,t)||a(e,t))){var i=e.__proto__;e.__proto__=h,delete e[t],e[t]=n.value,e.__proto__=i}else e[t]=n.value;else{if(!l)throw new TypeError("getters & setters can not be defined on this javascript engine");f(n,"get")&&o(e,t,n.get),f(n,"set")&&r(e,t,n.set)}return e}}Object.defineProperties||(Object.defineProperties=function(e,t){for(var n in t)f(t,n)&&Object.defineProperty(e,n,t[n]);return e}),Object.seal||(Object.seal=function(e){return e}),Object.freeze||(Object.freeze=function(e){return e});try{Object.freeze((function(){}))}catch(e){Object.freeze=(v=Object.freeze,function(e){return"function"==typeof e?e:v(e)})}if(Object.preventExtensions||(Object.preventExtensions=function(e){return e}),Object.isSealed||(Object.isSealed=function(e){return!1}),Object.isFrozen||(Object.isFrozen=function(e){return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)===e)throw new TypeError;for(var t="";f(e,t);)t+="?";e[t]=!0;var n=f(e,t);return delete e[t],n}),!Object.keys){var k=!0,S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],C=S.length;for(var x in{toString:null})k=!1;Object.keys=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var t=[];for(var n in e)f(e,n)&&t.push(n);if(k)for(var i=0,o=C;i<o;i++){var r=S[i];f(e,r)&&t.push(r)}return t}}Date.now||(Date.now=function(){return(new Date).getTime()});var A="\t\n\v\f\r                　\u2028\u2029\ufeff";if(!String.prototype.trim){A="["+A+"]";var R=new RegExp("^"+A+A+"*"),I=new RegExp(A+A+"*$");String.prototype.trim=function(){return String(this).replace(R,"").replace(I,"")}}function O(e){return(e=+e)!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}var M=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}})),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],(function(e,t,n){"use strict";e("./regexp"),e("./es5-shim"),"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",["require","exports","module"],(function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var i="object"==typeof navigator?navigator:{},o=(/mac|win|linux/i.exec(i.platform)||["other"])[0].toLowerCase(),r=i.userAgent||"",s=i.appName||"";t.isWin="win"==o,t.isMac="mac"==o,t.isLinux="linux"==o,t.isIE="Microsoft Internet Explorer"==s||s.indexOf("MSAppHost")>=0?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=r.match(/ Gecko\/\d+/),t.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(r.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(r.split(" Chrome/")[1])||void 0,t.isEdge=parseFloat(r.split(" Edge/")[1])||void 0,t.isAIR=r.indexOf("AdobeAIR")>=0,t.isAndroid=r.indexOf("Android")>=0,t.isChromeOS=r.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(r)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("./useragent");if(t.buildDom=function e(t,n,i){if("string"==typeof t&&t){var o=document.createTextNode(t);return n&&n.appendChild(o),o}if(!Array.isArray(t))return t;if("string"!=typeof t[0]||!t[0]){for(var r=[],s=0;s<t.length;s++){var a=e(t[s],n,i);a&&r.push(a)}return r}var l=document.createElement(t[0]),c=t[1],u=1;c&&"object"==typeof c&&!Array.isArray(c)&&(u=2);for(s=u;s<t.length;s++)e(t[s],l,i);return 2==u&&Object.keys(c).forEach((function(e){var t=c[e];"class"===e?l.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e?l[e]=t:"ref"===e?i&&(i[t]=l):null!=t&&l.setAttribute(e,t)})),n&&n.appendChild(l),l},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},t.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},t.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var i=n.indexOf(t);if(-1==i)break;n.splice(i,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),i=!0;;){var o=n.indexOf(t);if(-1==o)break;i=!1,n.splice(o,1)}return i&&n.push(t),e.className=n.join(" "),i},t.setCssClass=function(e,n,i){i?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n,i=0;if(n=(t=t||document).querySelectorAll("style"))for(;i<n.length;)if(n[i++].id===e)return!0},t.importCssString=function(e,n,i){var o=i;i&&i.getRootNode&&(o=i.getRootNode())&&o!=i||(o=document);var r=o.ownerDocument||o;if(n&&t.hasCssString(n,o))return null;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */");var s=t.createElement("style");s.appendChild(r.createTextNode(e)),n&&(s.id=n),o==r&&(o=t.getDocumentHead(r)),o.insertBefore(s,o.firstChild)},t.importCssStylsheet=function(e,n){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=t.createElement("ace_outer"),o=i.style;o.position="absolute",o.left="-10000px",o.overflow="hidden",o.width="200px",o.minWidth="0px",o.height="150px",o.display="block",i.appendChild(n);var r=e.documentElement;r.appendChild(i);var s=n.offsetWidth;o.overflow="scroll";var a=n.offsetWidth;return s==a&&(a=i.clientWidth),r.removeChild(i),s-a},"undefined"==typeof document&&(t.importCssString=function(){}),t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=!i.isWin||"undefined"!=typeof window&&window.devicePixelRatio>=1.5,"undefined"!=typeof document){var o=document.createElement("div");t.HI_DPI&&void 0!==o.style.transform&&(t.HAS_CSS_TRANSFORMS=!0),i.isEdge||void 0===o.style.animationName||(t.HAS_CSS_ANIMATION=!0),o=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:t.translate=function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}})),ace.define("ace/lib/oop",["require","exports","module"],(function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(e,t,n){"use strict";var i=e("./oop"),o=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter((function(e){return t&n.KEY_MODS[e]})).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(t,o),t.keyCodeToString=function(e){var t=o[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("./keys"),o=e("./useragent"),r=null,s=0;t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var i=function(){n.call(e,window.event)};n._wrapper=i,e.attachEvent("on"+t,i)}},t.removeListener=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||o.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,n,i){function o(e){n&&n(e),i&&i(e),t.removeListener(document,"mousemove",n,!0),t.removeListener(document,"mouseup",o,!0),t.removeListener(document,"dragstart",o,!0)}return t.addListener(document,"mousemove",n,!0),t.addListener(document,"mouseup",o,!0),t.addListener(document,"dragstart",o,!0),o},t.addMouseWheelListener=function(e,n){"onmousewheel"in e?t.addListener(e,"mousewheel",(function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),n(e)})):"onwheel"in e?t.addListener(e,"wheel",(function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}n(e)})):t.addListener(e,"DOMMouseScroll",(function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),n(e)}))},t.addMultiMouseDownListener=function(e,n,i,r){var s,a,l,c=0,u={2:"dblclick",3:"tripleclick",4:"quadclick"};function h(e){if(0!==t.getButton(e)?c=0:e.detail>1?++c>4&&(c=1):c=1,o.isIE){var h=Math.abs(e.clientX-s)>5||Math.abs(e.clientY-a)>5;l&&!h||(c=1),l&&clearTimeout(l),l=setTimeout((function(){l=null}),n[c-1]||600),1==c&&(s=e.clientX,a=e.clientY)}if(e._clicks=c,i[r]("mousedown",e),c>4)c=0;else if(c>1)return i[r](u[c],e)}function d(e){c=2,l&&clearTimeout(l),l=setTimeout((function(){l=null}),n[c-1]||600),i[r]("mousedown",e),i[r](u[c],e)}Array.isArray(e)||(e=[e]),e.forEach((function(e){t.addListener(e,"mousedown",h),o.isOldIE&&t.addListener(e,"dblclick",d)}))};var a=!o.isMac||!o.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};function l(e,t,n){var l=a(t);if(!o.isMac&&r){if(t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(l|=8),r.altGr){if(3==(3&l))return;r.altGr=0}if(18===n||17===n){var c="location"in t?t.location:t.keyLocation;if(17===n&&1===c)1==r[n]&&(s=t.timeStamp);else if(18===n&&3===l&&2===c){t.timeStamp-s<50&&(r.altGr=!0)}}}if((n in i.MODIFIER_KEYS&&(n=-1),!l&&13===n)&&(3===(c="location"in t?t.location:t.keyLocation)&&(e(t,l,-n),t.defaultPrevented)))return;if(o.isChromeOS&&8&l){if(e(t,l,n),t.defaultPrevented)return;l&=-9}return!!(l||n in i.FUNCTION_KEYS||n in i.PRINTABLE_KEYS)&&e(t,l,n)}function c(){r=Object.create(null)}if(t.getModifierString=function(e){return i.KEY_MODS[a(e)]},t.addCommandKeyListener=function(e,n){var i=t.addListener;if(o.isOldGecko||o.isOpera&&!("KeyboardEvent"in window)){var s=null;i(e,"keydown",(function(e){s=e.keyCode})),i(e,"keypress",(function(e){return l(n,e,s)}))}else{var a=null;i(e,"keydown",(function(e){r[e.keyCode]=(r[e.keyCode]||0)+1;var t=l(n,e,e.keyCode);return a=e.defaultPrevented,t})),i(e,"keypress",(function(e){a&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),a=null)})),i(e,"keyup",(function(e){r[e.keyCode]=null})),r||(c(),i(window,"focus",c))}},"object"==typeof window&&window.postMessage&&!o.isOldIE){var u=1;t.nextTick=function(e,n){n=n||window;var i="zero-timeout-message-"+u++,o=function(r){r.data==i&&(t.stopPropagation(r),t.removeListener(n,"message",o),e())};t.addListener(n,"message",o),n.postMessage(i,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout((function n(){t.$idleBlocked?setTimeout(n,100):e()}),n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout((function(){t.$idleBlocked=!1}),e||100)},t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}})),ace.define("ace/range",["require","exports","module"],(function(e,t,n){"use strict";var i=function(e,t,n,i){this.start={row:e,column:t},this.end={row:n,column:i}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,i=e.start;return 1==(t=this.compare(n.row,n.column))?1==(t=this.compare(i.row,i.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(i.row,i.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)n={row:e,column:0};if(this.start.row>t)var o={row:t+1,column:0};else if(this.start.row<e)o={row:e,column:0};return i.fromPoints(o||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var o={row:e,column:t};else var r={row:e,column:t};return i.fromPoints(o||this.start,r||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i})),ace.define("ace/lib/lang",["require","exports","module"],(function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var i=/^\s\s*/,o=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(i,"")},t.stringTrimRight=function(e){return e.replace(o,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,i=e.length;n<i;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function e(t){if("object"!=typeof t||!t)return t;var n;if(Array.isArray(t)){n=[];for(var i=0;i<t.length;i++)n[i]=e(t[i]);return n}if("[object Object]"!==Object.prototype.toString.call(t))return t;for(var i in n={},t)n[i]=e(t[i]);return n},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,(function(e){n.push({offset:arguments[arguments.length-2],length:e.length})})),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},i=function(e){return i.cancel(),t=setTimeout(n,e||0),i};return i.schedule=i,i.call=function(){return this.cancel(),e(),i},i.cancel=function(){return clearTimeout(t),t=null,i},i.isPending=function(){return t},i},t.delayedCall=function(e,t){var n=null,i=function(){n=null,e()},o=function(e){null==n&&(n=setTimeout(i,e||t))};return o.delay=function(e){n&&clearTimeout(n),n=setTimeout(i,e||t)},o.schedule=o,o.call=function(){this.cancel(),e()},o.cancel=function(){n&&clearTimeout(n),n=null},o.isPending=function(){return n},o}})),ace.define("ace/clipboard",["require","exports","module"],(function(e,t,n){"use strict";var i;n.exports={lineMode:!1,pasteCancelled:function(){return!!(i&&i>Date.now()-50)||(i=!1)},cancel:function(){i=Date.now()}}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],(function(e,t,n){"use strict";var i=e("../lib/event"),o=e("../lib/useragent"),r=e("../lib/dom"),s=e("../lib/lang"),a=e("../clipboard"),l=o.isChrome<18,c=o.isIE,u=o.isChrome>63,h=e("../lib/keys"),d=h.KEY_MODS,p=o.isIOS,f=p?/\s/:/\n/;t.TextInput=function(e,t){var n=r.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",e.insertBefore(n,e.firstChild);var g=!1,m=!1,v=!1,_=!1,y="";o.isMobile||(n.style.fontSize="1px");var b=!1,T=!1,E="",w=0,k=0,S=0;try{var C=document.activeElement===n}catch(e){}i.addListener(n,"blur",(function(e){T||(t.onBlur(e),C=!1)})),i.addListener(n,"focus",(function(e){if(!T){if(C=!0,o.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),o.isEdge?setTimeout(x):x()}})),this.$focusScroll=!1,this.focus=function(){if(y||u||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var e=n.style.top;n.style.position="fixed",n.style.top="0px";try{var t=0!=n.getBoundingClientRect().top}catch(e){return}var i=[];if(t)for(var o=n.parentElement;o&&1==o.nodeType;)i.push(o),o.setAttribute("ace_nocontext",!0),o=!o.parentElement&&o.getRootNode?o.getRootNode().host:o.parentElement;n.focus({preventScroll:!0}),t&&i.forEach((function(e){e.removeAttribute("ace_nocontext")})),setTimeout((function(){n.style.position="","0px"==n.style.top&&(n.style.top=e)}),0)},this.blur=function(){n.blur()},this.isFocused=function(){return C},t.on("beforeEndOperation",(function(){t.curOp&&"insertstring"==t.curOp.command.name||(v&&(E=n.value="",F()),x())}));var x=p?function(e){if(C&&(!g||e)&&!_){e||(e="");var i="\n ab"+e+"cde fg\n";i!=n.value&&(n.value=E=i);var o=4+(e.length||(t.selection.isEmpty()?0:1));4==w&&k==o||n.setSelectionRange(4,o),w=4,k=o}}:function(){if(!v&&!_&&(C||R)){v=!0;var e=t.selection,i=e.getRange(),o=e.cursor.row,r=i.start.column,s=i.end.column,a=t.session.getLine(o);if(i.start.row!=o){var l=t.session.getLine(o-1);r=i.start.row<o-1?0:r,s+=l.length+1,a=l+"\n"+a}else if(i.end.row!=o){var c=t.session.getLine(o+1);s=i.end.row>o+1?c.length:s,s+=a.length+1,a=a+"\n"+c}a.length>400&&(r<400&&s<400?a=a.slice(0,400):(a="\n",r=0,s=1));var u=a+"\n\n";if(u!=E&&(n.value=E=u,w=k=u.length),R&&(w=n.selectionStart,k=n.selectionEnd),k!=s||w!=r||n.selectionEnd!=k)try{n.setSelectionRange(r,s),w=r,k=s}catch(e){}v=!1}};C&&t.onFocus();var A=null;this.setInputHandler=function(e){A=e},this.getInputHandler=function(){return A};var R=!1,I=function(e,i){if(R&&(R=!1),m)return x(),e&&t.onPaste(e),m=!1,"";for(var o=n.selectionStart,r=n.selectionEnd,s=w,a=E.length-k,l=e,c=e.length-o,u=e.length-r,h=0;s>0&&E[h]==e[h];)h++,s--;for(l=l.slice(h),h=1;a>0&&E.length-h>w-1&&E[E.length-h]==e[e.length-h];)h++,a--;c-=h-1,u-=h-1;var d=l.length-h+1;return d<0&&(s=-d,d=0),l=l.slice(0,d),i||l||c||s||a||u?(_=!0,l&&!s&&!a&&!c&&!u||b?t.onTextInput(l):t.onTextInput(l,{extendLeft:s,extendRight:a,restoreStart:c,restoreEnd:u}),_=!1,E=e,w=o,k=r,S=u,l):""},O=function(e){if(v)return B();if(e&&e.inputType){if("historyUndo"==e.inputType)return t.execCommand("undo");if("historyRedo"==e.inputType)return t.execCommand("redo")}var i=n.value,o=I(i,!0);(i.length>500||f.test(o))&&x()},M=function(e,t,n){var i=e.clipboardData||window.clipboardData;if(i&&!l){var o=c||n?"Text":"text/plain";try{return t?!1!==i.setData(o,t):i.getData(o)}catch(e){if(!n)return M(e,t,!0)}}},L=function(e,o){var r=t.getCopyText();if(!r)return i.preventDefault(e);M(e,r)?(p&&(x(r),g=r,setTimeout((function(){g=!1}),10)),o?t.onCut():t.onCopy(),i.preventDefault(e)):(g=!0,n.value=r,n.select(),setTimeout((function(){g=!1,x(),o?t.onCut():t.onCopy()})))},D=function(e){L(e,!0)},N=function(e){L(e,!1)},P=function(e){var r=M(e);a.pasteCancelled()||("string"==typeof r?(r&&t.onPaste(r,e),o.isIE&&setTimeout(x),i.preventDefault(e)):(n.value="",m=!0))};i.addCommandKeyListener(n,t.onCommandKey.bind(t)),i.addListener(n,"select",(function(e){v||(g?g=!1:function(e){return 0===e.selectionStart&&e.selectionEnd>=E.length&&e.value===E&&E&&e.selectionEnd!==k}(n)&&(t.selectAll(),x()))})),i.addListener(n,"input",O),i.addListener(n,"cut",D),i.addListener(n,"copy",N),i.addListener(n,"paste",P),"oncut"in n&&"oncopy"in n&&"onpaste"in n||i.addListener(e,"keydown",(function(e){if((!o.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:N(e);break;case 86:P(e);break;case 88:D(e)}}));var B=function(){if(v&&t.onCompositionUpdate&&!t.$readOnly){if(b)return W();if(v.useTextareaForIME)t.onCompositionUpdate(n.value);else{var e=n.value;I(e),v.markerRange&&(v.context&&(v.markerRange.start.column=v.selectionStart=v.context.compositionStartOffset),v.markerRange.end.column=v.markerRange.start.column+k-v.selectionStart+S)}}},F=function(e){t.onCompositionEnd&&!t.$readOnly&&(v=!1,t.onCompositionEnd(),t.off("mousedown",W),e&&O())};function W(){T=!0,n.blur(),n.focus(),T=!1}var H,U=s.delayedCall(B,50).schedule.bind(null,null);function $(){clearTimeout(H),H=setTimeout((function(){y&&(n.style.cssText=y,y=""),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()}),0)}i.addListener(n,"compositionstart",(function(e){if(!v&&t.onCompositionStart&&!t.$readOnly&&(v={},!b)){setTimeout(B,0),t.on("mousedown",W);var i=t.getSelectionRange();i.end.row=i.start.row,i.end.column=i.start.column,v.markerRange=i,v.selectionStart=w,t.onCompositionStart(v),v.useTextareaForIME?(n.value="",E="",w=0,k=0):(n.msGetInputContext&&(v.context=n.msGetInputContext()),n.getInputContext&&(v.context=n.getInputContext()))}})),i.addListener(n,"compositionupdate",B),i.addListener(n,"keyup",(function(e){27==e.keyCode&&n.value.length<n.selectionStart&&(v||(E=n.value),w=k=-1,x()),U()})),i.addListener(n,"keydown",U),i.addListener(n,"compositionend",F),this.getElement=function(){return n},this.setCommandMode=function(e){b=e,n.readOnly=!1},this.setReadOnly=function(e){b||(n.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){R=!0,x(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,s){y||(y=n.style.cssText),n.style.cssText=(s?"z-index:100000;":"")+(o.isIE?"opacity:0.1;":"")+"text-indent: -"+(w+k)*t.renderer.characterWidth*.5+"px;";var a=t.container.getBoundingClientRect(),l=r.computedStyle(t.container),c=a.top+(parseInt(l.borderTopWidth)||0),u=a.left+(parseInt(a.borderLeftWidth)||0),h=a.bottom-c-n.clientHeight-2,d=function(e){r.translate(n,e.clientX-u-2,Math.min(e.clientY-c-2,h))};d(e),"mousedown"==e.type&&(t.renderer.$isMousePressed=!0,clearTimeout(H),o.isWin&&i.capture(t.container,d,$))},this.onContextMenuClose=$;var V=function(e){t.textInput.onContextMenu(e),$()};i.addListener(n,"mouseup",V),i.addListener(n,"mousedown",(function(e){e.preventDefault(),$()})),i.addListener(t.renderer.scroller,"contextmenu",V),i.addListener(n,"contextmenu",V),p&&function(e,t,n){var i=null,o=!1;n.addEventListener("keydown",(function(e){i&&clearTimeout(i),o=!0}),!0),n.addEventListener("keyup",(function(e){i=setTimeout((function(){o=!1}),100)}),!0);var r=function(e){if(document.activeElement===n&&!(o||v||t.$mouseHandler.isMousePressed||g)){var i=n.selectionStart,r=n.selectionEnd,s=null,a=0;if(0==i?s=h.up:1==i?s=h.home:r>k&&"\n"==E[r]?s=h.end:i<w&&" "==E[i-1]?(s=h.left,a=d.option):i<w||i==w&&k!=w&&i==r?s=h.left:r>k&&E.slice(0,r).split("\n").length>2?s=h.down:r>k&&" "==E[r-1]?(s=h.right,a=d.option):(r>k||r==k&&k!=w&&i==r)&&(s=h.right),i!==r&&(a|=d.shift),s){if(!t.onCommandKey({},a,s)&&t.commands){s=h.keyCodeToString(s);var l=t.commands.findKeyCommand(a,s);l&&t.execCommand(l)}w=i,k=r,x("")}}};document.addEventListener("selectionchange",r),t.on("destroy",(function(){document.removeEventListener("selectionchange",r)}))}(0,t,n)}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/useragent");function o(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(t){e[t]=this[t]}),this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function r(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var o=this.editor,r=e.getButton();return 0!==r?((o.getSelectionRange().isEmpty()||1==r)&&o.selection.moveToPosition(n),void(2==r&&(o.textInput.onContextMenu(e.domEvent),i.isMozilla||e.preventDefault()))):(this.mousedownEvent.time=Date.now(),!t||o.isFocused()||(o.focus(),!this.$focusTimeout||this.$clickSelection||o.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(-1==i)e=this.$clickSelection.end;else if(1==i)e=this.$clickSelection.start;else{var o=r(this.$clickSelection,n);n=o.cursor,e=o.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),o=n.selection[e](i.row,i.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(o.start),a=this.$clickSelection.comparePoint(o.end);if(-1==s&&a<=0)t=this.$clickSelection.end,o.end.row==i.row&&o.end.column==i.column||(i=o.start);else if(1==a&&s>=0)t=this.$clickSelection.start,o.start.row==i.row&&o.start.column==i.column||(i=o.end);else if(-1==s&&1==a)i=o.end,t=o.start;else{var l=r(this.$clickSelection,i);i=l.cursor,t=l.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(i),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e,t,n,i,o=(e=this.mousedownEvent.x,t=this.mousedownEvent.y,n=this.x,i=this.y,Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))),r=Date.now();(o>0||r-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,i=n.session.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,i=e.domEvent.timeStamp,o=i-n.t,r=o?e.wheelX/o:n.vx,s=o?e.wheelY/o:n.vy;o<550&&(r=(r+n.vx)/2,s=(s+n.vy)/2);var a=Math.abs(r/s),l=!1;if(a>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(l=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(l=!0),l)n.allowed=i;else if(i-n.allowed<550){Math.abs(r)<=1.5*Math.abs(n.vx)&&Math.abs(s)<=1.5*Math.abs(n.vy)?(l=!0,n.allowed=i):n.allowed=0}return n.t=i,n.vx=r,n.vy=s,l?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(o.prototype),t.DefaultHandlers=o})),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(e,t,n){"use strict";e("./lib/oop");var i=e("./lib/dom");function o(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(o.prototype),t.Tooltip=o})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(e,t,n){"use strict";var i=e("../lib/dom"),o=e("../lib/oop"),r=e("../lib/event"),s=e("../tooltip").Tooltip;function a(e){s.call(this,e)}o.inherits(a,s),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,o=this.getWidth(),r=this.getHeight();(e+=15)+o>n&&(e-=e+o-n),(t+=15)+r>i&&(t-=20+r),s.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=function(e){var t,n,o,s=e.editor,l=s.renderer.$gutterLayer,c=new a(s.container);function u(){t&&(t=clearTimeout(t)),o&&(c.hide(),o=null,s._signal("hideGutterTooltip",c),s.removeEventListener("mousewheel",u))}function h(e){c.setPosition(e.x,e.y)}e.editor.setDefaultHandler("guttermousedown",(function(t){if(s.isFocused()&&0==t.getButton()&&"foldWidgets"!=l.getRegion(t)){var n=t.getDocumentPosition().row,i=s.session.selection;if(t.getShiftKey())i.selectTo(n,0);else{if(2==t.domEvent.detail)return s.selectAll(),t.preventDefault();e.$clickSelection=s.selection.getLineRange(n)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}})),e.editor.setDefaultHandler("guttermousemove",(function(r){var a=r.domEvent.target||r.domEvent.srcElement;if(i.hasCssClass(a,"ace_fold-widget"))return u();o&&e.$tooltipFollowsMouse&&h(r),n=r,t||(t=setTimeout((function(){t=null,n&&!e.isMousePressed?function(){var t=n.getDocumentPosition().row,i=l.$annotations[t];if(!i)return u();if(t==s.session.getLength()){var r=s.renderer.pixelToScreenCoordinates(0,n.y).row,a=n.$pos;if(r>s.session.documentToScreenRow(a.row,a.column))return u()}if(o!=i)if(o=i.text.join("<br/>"),c.setHtml(o),c.show(),s._signal("showGutterTooltip",c),s.on("mousewheel",u),e.$tooltipFollowsMouse)h(n);else{var d=n.domEvent.target.getBoundingClientRect(),p=c.getElement().style;p.left=d.right+"px",p.top=d.bottom+"px"}}():u()}),50))})),r.addListener(s.renderer.$gutter,"mouseout",(function(e){n=null,o&&!t&&(t=setTimeout((function(){t=null,u()}),50))})),s.on("changeSession",u)}})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/event"),o=e("../lib/useragent"),r=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=o.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(r.prototype)})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/dom"),o=e("../lib/event"),r=e("../lib/useragent"),s=200,a=200,l=5;function c(e){var t=e.editor,n=i.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",r.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(t){e[t]=this[t]}),this),t.addEventListener("mousedown",this.onMouseDown.bind(e));var c,h,d,p,f,g,m,v,_,y,b,T=t.container,E=0;function w(){var e=g;(function(e,n){var i=Date.now(),o=!n||e.row!=n.row,r=!n||e.column!=n.column;!y||o||r?(t.moveCursorToPosition(e),y=i,b={x:h,y:d}):u(b.x,b.y,h,d)>l?y=null:i-y>=a&&(t.renderer.scrollCursorIntoView(),y=null)})(g=t.renderer.screenToTextCoordinates(h,d),e),function(e,n){var i=Date.now(),o=t.renderer.layerConfig.lineHeight,r=t.renderer.layerConfig.characterWidth,a=t.renderer.scroller.getBoundingClientRect(),l={x:{left:h-a.left,right:a.right-h},y:{top:d-a.top,bottom:a.bottom-d}},c=Math.min(l.x.left,l.x.right),u=Math.min(l.y.top,l.y.bottom),p={row:e.row,column:e.column};c/r<=2&&(p.column+=l.x.left<l.x.right?-3:2),u/o<=1&&(p.row+=l.y.top<l.y.bottom?-1:1);var f=e.row!=p.row,g=e.column!=p.column,m=!n||e.row!=n.row;f||g&&!m?_?i-_>=s&&t.renderer.scrollCursorIntoView(p):_=i:_=null}(g,e)}function k(){f=t.selection.toOrientedRange(),c=t.session.addMarker(f,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(p),w(),p=setInterval(w,20),E=0,o.addListener(document,"mousemove",x)}function S(){clearInterval(p),t.session.removeMarker(c),c=null,t.selection.fromOrientedRange(f),t.isFocused()&&!v&&t.$resetCursorStyle(),f=null,g=null,E=0,_=null,y=null,o.removeListener(document,"mousemove",x)}this.onDragStart=function(e){if(this.cancelDrag||!T.draggable){var i=this;return setTimeout((function(){i.startSelect(),i.captureMouse(e)}),0),e.preventDefault()}f=t.getSelectionRange();var o=e.dataTransfer;o.effectAllowed=t.getReadOnly()?"copy":"copyMove",r.isOpera&&(t.container.appendChild(n),n.scrollTop=0),o.setDragImage&&o.setDragImage(n,0,0),r.isOpera&&t.container.removeChild(n),o.clearData(),o.setData("Text",t.session.getTextRange()),v=!0,this.setState("drag")},this.onDragEnd=function(e){if(T.draggable=!1,v=!1,this.setState(null),!t.getReadOnly()){var n=e.dataTransfer.dropEffect;m||"move"!=n||t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!t.getReadOnly()&&A(e.dataTransfer))return h=e.clientX,d=e.clientY,c||k(),E++,e.dataTransfer.dropEffect=m=R(e),o.preventDefault(e)},this.onDragOver=function(e){if(!t.getReadOnly()&&A(e.dataTransfer))return h=e.clientX,d=e.clientY,c||(k(),E++),null!==C&&(C=null),e.dataTransfer.dropEffect=m=R(e),o.preventDefault(e)},this.onDragLeave=function(e){if(--E<=0&&c)return S(),m=null,o.preventDefault(e)},this.onDrop=function(e){if(g){var n=e.dataTransfer;if(v)switch(m){case"move":f=f.contains(g.row,g.column)?{start:g,end:g}:t.moveText(f,g);break;case"copy":f=t.moveText(f,g,!0)}else{var i=n.getData("Text");f={start:g,end:t.session.insert(g,i)},t.focus(),m=null}return S(),o.preventDefault(e)}},o.addListener(T,"dragstart",this.onDragStart.bind(e)),o.addListener(T,"dragend",this.onDragEnd.bind(e)),o.addListener(T,"dragenter",this.onDragEnter.bind(e)),o.addListener(T,"dragover",this.onDragOver.bind(e)),o.addListener(T,"dragleave",this.onDragLeave.bind(e)),o.addListener(T,"drop",this.onDrop.bind(e));var C=null;function x(){null==C&&(C=setTimeout((function(){null!=C&&c&&S()}),20))}function A(e){var t=e.types;return!t||Array.prototype.some.call(t,(function(e){return"text/plain"==e||"Text"==e}))}function R(e){var t=["copy","copymove","all","uninitialized"],n=r.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return n&&t.indexOf(i)>=0?o="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(i)>=0?o="move":t.indexOf(i)>=0&&(o="copy"),o}}function u(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var t=r.isWin?"default":"move";e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;r.isIE&&"dragReady"==this.state&&(u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&t.dragDrop());"dragWait"===this.state&&(u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition())))},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),i=e.getButton();if(1===(e.domEvent.detail||1)&&0===i&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in o&&(o.unselectable="on"),t.getDragDelay()){if(r.isWebKit)this.cancelDrag=!0,t.container.draggable=!0;this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(c.prototype),t.DragdropHandler=c})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("./mouse_event").MouseEvent,o=e("../lib/dom");t.addTouchListeners=function(e,t){var n,r,s,a,l,c,u,h,d,p="scroll",f=0,g=0,m=0,v=0;function _(){var e=window.navigator&&window.navigator.clipboard,n=!1,i=function(i){var r,s,a=i.target.getAttribute("action");if("more"==a||!n)return n=!n,r=t.getCopyText(),s=t.session.getUndoManager().hasUndo(),void d.replaceChild(o.buildDom(n?["span",!r&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],r&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],r&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],e&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],s&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),d.firstChild);"paste"==a?e.readText().then((function(e){t.execCommand(a,e)})):a&&("cut"!=a&&"copy"!=a||(e?e.writeText(t.getCopyText()):document.execCommand("copy")),t.execCommand(a)),d.firstChild.style.display="none",n=!1,"openCommandPallete"!=a&&t.focus()};d=o.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(e){p="menu",e.stopPropagation(),e.preventDefault(),t.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),i(e)},onclick:i},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],t.container)}function y(){d||_();var e=t.selection.cursor,n=t.renderer.textToScreenCoordinates(e.row,e.column),i=t.container.getBoundingClientRect();d.style.top=n.pageY-i.top-3+"px",d.style.right="10px",d.style.display="",d.firstChild.style.display="none",t.on("input",b)}function b(e){d&&(d.style.display="none"),t.off("input",b)}function T(){l=null,clearTimeout(l);var e=t.selection.getRange(),n=e.contains(u.row,u.column);!e.isEmpty()&&n||(t.selection.moveToPosition(u),t.selection.selectWord()),p="wait",y()}e.addEventListener("contextmenu",(function(e){h&&t.textInput.getElement().focus()})),e.addEventListener("touchstart",(function(e){var o=e.touches;if(l||o.length>1)return clearTimeout(l),l=null,s=-1,void(p="zoom");h=t.$mouseHandler.isMousePressed=!0;var c=t.renderer.layerConfig.lineHeight,d=t.renderer.layerConfig.lineHeight,_=e.timeStamp;a=_;var y=o[0],b=y.clientX,E=y.clientY;Math.abs(n-b)+Math.abs(r-E)>c&&(s=-1),n=e.clientX=b,r=e.clientY=E,m=v=0;var w=new i(e,t);if(u=w.getDocumentPosition(),_-s<500&&1==o.length&&!f)g++,e.preventDefault(),e.button=0,function(){l=null,clearTimeout(l),t.selection.moveToPosition(u);var e=g>=2?t.selection.getLineRange(u.row):t.session.getBracketRange(u);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),p="wait"}();else{g=0;var k=t.selection.cursor,S=t.selection.isEmpty()?k:t.selection.anchor,C=t.renderer.$cursorLayer.getPixelPosition(k,!0),x=t.renderer.$cursorLayer.getPixelPosition(S,!0),A=t.renderer.scroller.getBoundingClientRect(),R=function(e,t){return(e/=d)*e+(t=t/c-.75)*t};if(e.clientX<A.left)return void(p="zoom");var I=R(e.clientX-A.left-C.left,e.clientY-A.top-C.top),O=R(e.clientX-A.left-x.left,e.clientY-A.top-x.top);I<3.5&&O<3.5&&(p=I>O?"cursor":"anchor"),p=O<3.5?"anchor":I<3.5?"cursor":"scroll",l=setTimeout(T,450)}s=_})),e.addEventListener("touchend",(function(e){h=t.$mouseHandler.isMousePressed=!1,c&&clearInterval(c),"zoom"==p?(p="",f=0):l?(t.selection.moveToPosition(u),f=0,y()):"scroll"==p?(f+=60,c=setInterval((function(){f--<=0&&(clearInterval(c),c=null),Math.abs(m)<.01&&(m=0),Math.abs(v)<.01&&(v=0),f<20&&(m*=.9),f<20&&(v*=.9);var e=t.session.getScrollTop();t.renderer.scrollBy(10*m,10*v),e==t.session.getScrollTop()&&(f=0)}),10),e.preventDefault(),b()):y(),clearTimeout(l),l=null})),e.addEventListener("touchmove",(function(e){l&&(clearTimeout(l),l=null);var o=e.touches;if(!(o.length>1||"zoom"==p)){var s=o[0],c=n-s.clientX,u=r-s.clientY;if("wait"==p){if(!(c*c+u*u>4))return e.preventDefault();p="cursor"}n=s.clientX,r=s.clientY,e.clientX=s.clientX,e.clientY=s.clientY;var h=e.timeStamp,d=h-a;if(a=h,"scroll"==p){var f=new i(e,t);f.speed=1,f.wheelX=c,f.wheelY=u,10*Math.abs(c)<Math.abs(u)&&(c=0),10*Math.abs(u)<Math.abs(c)&&(u=0),0!=d&&(m=c/d,v=u/d),t._emit("mousewheel",f),f.propagationStopped||(m=v=0)}else{var g=new i(e,t).getDocumentPosition();"cursor"==p?t.selection.moveCursorToPosition(g):"anchor"==p&&t.selection.setSelectionAnchor(g.row,g.column),t.renderer.scrollCursorIntoView(g),e.preventDefault()}}}))}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=i.getDocumentHead(),o=document.createElement("script");o.src=e,n.appendChild(o),o.onload=o.onreadystatechange=function(e,n){!n&&o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(o=o.onload=o.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(e,t,n){"use strict";var i={},o=function(){this.propagationStopped=!0},r=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],i=this._defaultHandlers[e];if(n.length||i){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=o),t.preventDefault||(t.preventDefault=r),n=n.slice();for(var s=0;s<n.length&&(n[s](t,this),!t.propagationStopped);s++);return i&&!t.defaultPrevented?i(t,this):void 0}},i._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](t,this)}},i.once=function(e,t){var n=this;if(this.addEventListener(e,(function i(){n.removeEventListener(e,i),t.apply(null,arguments)})),!t)return new Promise((function(e){t=e}))},i.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var i=n[e],o=n._disabled_[e];o||(n._disabled_[e]=o=[]),o.push(i);var r=o.indexOf(t);-1!=r&&o.splice(r,1)}n[e]=t},i.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var i=n._disabled_[e];if(n[e]==t)i&&this.setDefaultHandler(e,i.pop());else if(i){var o=i.indexOf(t);-1!=o&&i.splice(o,1)}}},i.on=i.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[e];return i||(i=this._eventRegistry[e]=[]),-1==i.indexOf(t)&&i[n?"unshift":"push"](t),t},i.off=i.removeListener=i.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}},i.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=i})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){var i=e("./oop"),o=e("./event_emitter").EventEmitter,r={setOptions:function(e){Object.keys(e).forEach((function(t){this.setOption(t,e[t])}),this)},getOptions:function(e){var t={};if(e)Array.isArray(e)||(t=e,e=Object.keys(t));else{var n=this.$options;e=Object.keys(n).filter((function(e){return!n[e].hidden}))}return e.forEach((function(e){t[e]=this.getOption(e)}),this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];if(!n)return s('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:s('misspelled option "'+e+'"')}};function s(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function a(e,t){var n=new Error(e);n.data=t,"object"==typeof console&&console.error&&console.error(n),setTimeout((function(){throw n}))}var l=function(){this.$defaultOptions={}};(function(){i.implement(this,o),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach((function(t){var i=n[t];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=t),e.$options[i.name]=i,"initialValue"in i&&(e["$"+i.name]=i.initialValue)})),i.implement(e,r),this},this.resetOptions=function(e){Object.keys(e.$options).forEach((function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)}))},this.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var i=this.$defaultOptions[e]||(this.$defaultOptions[e]={});i[t]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,t,n):i[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach((function(n){this.setDefaultValue(e,n,t[n])}),this)},this.warn=s,this.reportError=a}).call(l.prototype),t.AppConfig=l})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],(function(e,t,i){var o=e("./lib/lang"),r=(e("./lib/oop"),e("./lib/net")),s=e("./lib/app_config").AppConfig;i.exports=t=new s;var a=function(){return this||"undefined"!=typeof window&&window}(),l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};t.get=function(e){if(!l.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return l[e]},t.set=function(e,t){if(l.hasOwnProperty(e))l[e]=t;else if(0==this.setDefaultValue("",e,t))throw new Error("Unknown config key: "+e)},t.all=function(){return o.copyObject(l)},t.$modes={},t.moduleUrl=function(e,t){if(l.$moduleUrls[e])return l.$moduleUrls[e];var n=e.split("/"),i="snippets"==(t=t||n[n.length-2]||"")?"/":"-",o=n[n.length-1];if("worker"==t&&"-"==i){var r=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");o=o.replace(r,"")}(!o||o==t)&&n.length>1&&(o=n[n.length-2]);var s=l[t+"Path"];return null==s?s=l.basePath:"/"==i&&(t=i=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+t+i+o+this.get("suffix")},t.setModuleUrl=function(e,t){return l.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,i){var o,s;Array.isArray(n)&&(s=n[0],n=n[1]);try{o=e(n)}catch(e){}if(o&&!t.$loading[n])return i&&i(o);if(t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(i),!(t.$loading[n].length>1)){var a=function(){e([n],(function(e){t._emit("load.module",{name:n,module:e});var i=t.$loading[n];t.$loading[n]=null,i.forEach((function(t){t&&t(e)}))}))};if(!t.get("packaged"))return a();r.loadScript(t.moduleUrl(n,s),a),c()}};var c=function(){l.basePath||l.workerPath||l.modePath||l.themePath||Object.keys(l.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),c=function(){})};function u(o){if(a&&a.document){l.packaged=o||e.packaged||i.packaged||a.define&&n(67).packaged;for(var r,s={},c="",u=document.currentScript||document._currentScript,h=(u&&u.ownerDocument||document).getElementsByTagName("script"),d=0;d<h.length;d++){var p=h[d],f=p.src||p.getAttribute("src");if(f){for(var g=p.attributes,m=0,v=g.length;m<v;m++){var _=g[m];0===_.name.indexOf("data-ace-")&&(s[(r=_.name.replace(/^data-ace-/,""),r.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=_.value)}var y=f.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);y&&(c=y[1])}}for(var b in c&&(s.base=s.base||c,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base,s)void 0!==s[b]&&t.set(b,s[b])}}u(!0),t.init=u,t.version="1.4.7"})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(e,t,n){"use strict";var i=e("../lib/event"),o=e("../lib/useragent"),r=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,a=e("./mouse_event").MouseEvent,l=e("./dragdrop_handler").DragdropHandler,c=e("./touch_handler").addTouchListeners,u=e("../config"),h=function(e){var t=this;this.editor=e,new r(this),new s(this),new l(this);var n=function(t){(!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement()))&&window.focus(),e.focus()},a=e.renderer.getMouseEventTarget();i.addListener(a,"click",this.onMouseEvent.bind(this,"click")),i.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove")),i.addMultiMouseDownListener([a,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),i.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel")),c(e.container,e);var u=e.renderer.$gutter;i.addListener(u,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),i.addListener(u,"click",this.onMouseEvent.bind(this,"gutterclick")),i.addListener(u,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),i.addListener(u,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),i.addListener(a,"mousedown",n),i.addListener(u,"mousedown",n),o.isIE&&e.renderer.scrollBarV&&(i.addListener(e.renderer.scrollBarV.element,"mousedown",n),i.addListener(e.renderer.scrollBarH.element,"mousedown",n)),e.on("mousemove",(function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var i=e.renderer.screenToTextCoordinates(n.x,n.y),o=e.session.selection.getRange(),r=e.renderer;!o.isEmpty()&&o.insideStart(i.row,i.column)?r.setCursorStyle("default"):r.setCursorStyle("")}}))};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new a(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new a(t,this.editor))},this.onMouseWheel=function(e,t){var n=new a(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,r=this.editor.renderer;r.$isMousePressed=!0;var s=this,l=function(e){if(e){if(o.isWebKit&&!e.which&&s.releaseMouse)return s.releaseMouse();s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new a(e,s.editor),s.$mouseMoved=!0}},c=function(e){n.off("beforeEndOperation",h),clearInterval(d),u(),s[s.state+"End"]&&s[s.state+"End"](e),s.state="",s.isMousePressed=r.$isMousePressed=!1,r.$keepTextAreaAtCursor&&r.$moveTextAreaToCursor(),s.$onCaptureMouseMove=s.releaseMouse=null,e&&s.onMouseEvent("mouseup",e),n.endOperation()},u=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(o.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout((function(){c(e)}));var h=function(e){s.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(s[s.state+"End"]&&s[s.state+"End"](),s.state="",s.releaseMouse())};n.on("beforeEndOperation",h),n.startOperation({command:{name:"mouse"}}),s.$onCaptureMouseMove=l,s.releaseMouse=i.capture(this.editor.container,l,c);var d=setInterval(u,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&i.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(h.prototype),u.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:o.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=h})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../lib/dom");t.FoldHandler=function(e){e.on("click",(function(t){var n=t.getDocumentPosition(),o=e.session,r=o.getFoldAt(n.row,n.column,1);r&&(t.getAccelKey()?o.removeFold(r):o.expandFold(r),t.stop());var s=t.domEvent&&t.domEvent.target;s&&i.hasCssClass(s,"ace_inline_button")&&i.hasCssClass(s,"ace_toggle_wrap")&&(o.setOption("wrap",!o.getUseWrapMode()),e.renderer.scrollCursorIntoView())})),e.on("gutterclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[n]&&e.session.onFoldWidgetClick(n,t),e.isFocused()||e.focus(),t.stop()}})),e.on("gutterdblclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,i=e.session,o=i.getParentFoldRangeData(n,!0),r=o.range||o.firstRange;if(r){n=r.start.row;var s=i.getFoldAt(n,i.getLine(n).length,1);s?i.removeFold(s):(i.addFold("...",r),e.renderer.scrollCursorIntoView({row:r.start.row,column:0}))}t.stop()}}))}})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(e,t,n){"use strict";var i=e("../lib/keys"),o=e("../lib/event"),r=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),null==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map((function(n){return n.getStatusText&&n.getStatusText(t,e)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,i){for(var r,s=!1,a=this.$editor.commands,l=this.$handlers.length;l--&&!((r=this.$handlers[l].handleKeyboard(this.$data,e,t,n,i))&&r.command&&((s="null"==r.command||a.exec(r.command,this.$editor,r.args,i))&&i&&-1!=e&&1!=r.passEvent&&1!=r.command.passEvent&&o.stopEvent(i),s)););return s||-1!=e||(r={command:"insertstring"},s=a.exec("insertstring",this.$editor,t)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",r),s},this.onCommandKey=function(e,t,n){var o=i.keyCodeToString(n);return this.$callKeyboardHandlers(t,o,n,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}).call(r.prototype),t.KeyBinding=r})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(e,t,n){"use strict";var i=0,o=0,r=!1,s=!1,a=!1,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u=1,h=0,d=1,p=2,f=3,g=4,m=5,v=6,_=7,y=8,b=9,T=10,E=11,w=12,k=13,S=14,C=15,x=16,A=17,R=18,I=[R,R,R,R,R,R,R,R,R,v,m,v,y,m,R,R,R,R,R,R,R,R,R,R,R,R,R,R,m,m,m,v,y,g,g,E,E,E,g,g,g,g,g,T,b,T,b,b,p,p,p,p,p,p,p,p,p,p,b,g,g,g,g,g,g,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,g,g,g,g,g,g,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,g,g,g,g,R,R,R,R,R,R,m,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,b,g,E,E,E,E,g,g,g,g,h,g,g,R,g,g,E,E,p,p,g,h,g,g,g,p,h,g,g,g,g,g],O=[y,y,y,y,y,y,y,y,y,y,y,R,R,R,h,d,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,y,m,k,S,C,x,A,b,E,E,E,E,E,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,b,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,y];function M(e,t,n){if(!(o<e))if(1!=e||i!=u||s)for(var r,a,l,c,h=n.length,d=0;d<h;){if(t[d]>=e){for(r=d+1;r<h&&t[r]>=e;)r++;for(a=d,l=r-1;a<l;a++,l--)c=n[a],n[a]=n[l],n[l]=c;d=r}d++}else n.reverse()}function L(e,t,n,o){var l,c,u,I,O=t[o];switch(O){case h:case d:r=!1;case g:case f:return O;case p:return r?f:p;case _:return r=!0,!0,d;case y:return g;case b:return o<1||o+1>=t.length||(l=n[o-1])!=p&&l!=f||(c=t[o+1])!=p&&c!=f?g:(r&&(c=f),c==l?c:g);case T:return(l=o>0?n[o-1]:m)==p&&o+1<t.length&&t[o+1]==p?p:g;case E:if(o>0&&n[o-1]==p)return p;if(r)return g;for(I=o+1,u=t.length;I<u&&t[I]==E;)I++;return I<u&&t[I]==p?p:g;case w:for(u=t.length,I=o+1;I<u&&t[I]==w;)I++;if(I<u){var M=e[o],L=M>=1425&&M<=2303||64286==M;if(l=t[I],L&&(l==d||l==_))return d}return o<1||(l=t[o-1])==m?g:n[o-1];case m:return r=!1,s=!0,i;case v:return a=!0,g;case k:case S:case x:case A:case C:r=!1;case R:return g}}function D(e){var t=e.charCodeAt(0),n=t>>8;return 0==n?t>191?h:I[t]:5==n?/[\u0591-\u05f4]/.test(e)?d:h:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?w:/[\u0660-\u0669\u066b-\u066c]/.test(e)?f:1642==t?E:/[\u06f0-\u06f9]/.test(e)?p:_:32==n&&t<=8287?O[255&t]:254==n&&t>=65136?_:g}t.L=h,t.R=d,t.EN=p,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="·",t.doBidiReorder=function(e,n,h){if(e.length<2)return{};var p=e.split(""),b=new Array(p.length),T=new Array(p.length),E=[];i=h?u:0,function(e,t,n,u){var h=i?c:l,d=null,p=null,f=null,g=0,_=null,b=-1,T=null,E=null,w=[];if(!u)for(T=0,u=[];T<n;T++)u[T]=D(e[T]);for(o=i,r=!1,!1,s=!1,a=!1,E=0;E<n;E++){if(d=g,w[E]=p=L(e,u,w,E),_=240&(g=h[d][p]),g&=15,t[E]=f=h[g][5],_>0)if(16==_){for(T=b;T<E;T++)t[T]=1;b=-1}else b=-1;if(h[g][6])-1==b&&(b=E);else if(b>-1){for(T=b;T<E;T++)t[T]=f;b=-1}u[E]==m&&(t[E]=0),o|=f}if(a)for(T=0;T<n;T++)if(u[T]==v){t[T]=i;for(var k=T-1;k>=0&&u[k]==y;k--)t[k]=i}}(p,E,p.length,n);for(var w=0;w<b.length;b[w]=w,w++);M(2,E,b),M(1,E,b);for(w=0;w<b.length-1;w++)n[w]===f?E[w]=t.AN:E[w]===d&&(n[w]>_&&n[w]<k||n[w]===g||n[w]===R)?E[w]=t.ON_R:w>0&&"ل"===p[w-1]&&/\u0622|\u0623|\u0625|\u0627/.test(p[w])&&(E[w-1]=E[w]=t.R_H,w++);p[p.length-1]===t.DOT&&(E[p.length-1]=t.B),"‫"===p[0]&&(E[0]=t.RLE);for(w=0;w<b.length;w++)T[w]=E[b[w]];return{logicalFromVisual:b,bidiLevels:T}},t.hasBidiCharacters=function(e,t){for(var n=!1,i=0;i<e.length;i++)t[i]=D(e.charAt(i)),n||t[i]!=d&&t[i]!=_&&t[i]!=f||(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(e,t,n){"use strict";var i=e("./lib/bidiutil"),o=e("./lib/lang"),r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=i,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=r.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&r.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var n,i=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(n=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===i;)i=n,e++;else e=this.currentRow;return e},this.updateRowLine=function(e,t){void 0===e&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var r=this.session.$wrapData[e];r&&(void 0===t&&(t=this.getSplitIndex()),t>0&&r.length?(this.wrapIndent=r.indent,this.wrapOffset=this.wrapIndent*this.charWidths[i.L],this.line=t<r.length?this.line.substring(r[t-1],r[t]):this.line.substring(r[r.length-1])):this.line=this.line.substring(0,r[t])),t==r.length&&(this.line+=this.showInvisibles?n:i.DOT)}else this.line+=this.showInvisibles?n:i.DOT;var s,a=this.session,l=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(e,t){return"\t"===e||a.isFullWidth(e.charCodeAt(0))?(s="\t"===e?a.getScreenTabSize(t+l):2,l+=s-1,o.stringRepeat(i.DOT,s)):e})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==i.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];i.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=i.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("ה");this.charWidths[i.L]=this.charWidths[i.EN]=this.charWidths[i.ON_R]=t,this.charWidths[i.R]=this.charWidths[i.AN]=n,this.charWidths[i.R_H]=.45*n,this.charWidths[i.B]=this.charWidths[i.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return!!this.$isRtl||(null!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(e,t){for(var n=e.getCursorPosition(),i=e.selection.getSelectionAnchor().row;i<=n.row;i++)t||e.session.getLine(i).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(i).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:i},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(i,0,1)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,o=i.getVisualFromLogicalIdx(n,this.bidiMap),r=this.bidiMap.bidiLevels,s=0;!this.session.getOverwrite()&&e<=t&&r[o]%2!=0&&o++;for(var a=0;a<o;a++)s+=this.charWidths[r[a]];return!this.session.getOverwrite()&&e>t&&r[o]%2==0&&(s+=this.charWidths[r[o]]),this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(s+=this.rtlLineOffset),s},this.getSelections=function(e,t){var n,i=this.bidiMap,o=i.bidiLevels,r=[],s=0,a=Math.min(e,t)-this.wrapIndent,l=Math.max(e,t)-this.wrapIndent,c=!1,u=!1,h=0;this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var d,p=0;p<o.length;p++)d=i.logicalFromVisual[p],n=o[p],(c=d>=a&&d<l)&&!u?h=s:!c&&u&&r.push({left:h,width:s-h}),s+=this.charWidths[n],u=c;if(c&&p===o.length&&r.push({left:h,width:s-h}),this.isRtlDir)for(var f=0;f<r.length;f++)r[f].left+=this.rtlLineOffset;return r},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,n=(e=Math.max(e,0),0),i=0,o=this.bidiMap.bidiLevels,r=this.charWidths[o[i]];for(this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);e>n+r/2;){if(n+=r,i===o.length-1){r=0;break}r=this.charWidths[o[++i]]}return i>0&&o[i-1]%2!=0&&o[i]%2==0?(e<n&&i--,t=this.bidiMap.logicalFromVisual[i]):i>0&&o[i-1]%2==0&&o[i]%2!=0?t=1+(e>n?this.bidiMap.logicalFromVisual[i]:this.bidiMap.logicalFromVisual[i-1]):this.isRtlDir&&i===o.length-1&&0===r&&o[i-1]%2==0||!this.isRtlDir&&0===i&&o[i]%2!=0?t=1+this.bidiMap.logicalFromVisual[i]:(i>0&&o[i-1]%2!=0&&0!==r&&i--,t=this.bidiMap.logicalFromVisual[i]),0===t&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(s.prototype),t.BidiHandler=s})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/lang"),r=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",(function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),t.$isEmpty||t.$silent||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)})),this.anchor.on("change",(function(){t.$anchorChanged=!0,t.$isEmpty||t.$silent||t._emit("changeSelection")}))};(function(){i.implement(this,r),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?s.fromPoints(t,t):this.isBackwards()?s.fromPoints(t,e):s.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,i=t?e.start:e.end;this.$setSelection(n.row,n.column,i.row,i.column)},this.$setSelection=function(e,t,n,i){var o=this.$isEmpty,r=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,i),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||o!=this.$isEmpty||r)&&this._emit("changeSelection")},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection((function(){this.moveCursorTo(e,t)}))},this.selectToPosition=function(e){this.$moveSelection((function(){this.moveCursorToPosition(e)}))},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(void 0===t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n,i="number"==typeof e?e:this.lead.row,o=this.session.getFoldLine(i);return o?(i=o.start.row,n=o.end.row):n=i,!0===t?new s(i,0,n,this.session.getLine(n).length):new s(i,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var i=e.column,o=e.column+t;return n<0&&(i=e.column-t,o=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(i,o).split(" ").length-1==t},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();t=this.lead;this.wouldMoveIntoSoftTab(t,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),i=this.session.screenToDocumentPosition(n,0),o=this.session.getDisplayLine(e,null,i.row,i.column).match(/^\s*/);o[0].length==t||this.session.$useEmacsStyleLineStart||(i.column+=o[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var i=n.search(/\s+$/);i>0&&(t.column=i)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(e,t,1);if(o)this.moveCursorTo(o.end.row,o.end.column);else{if(this.session.nonTokenRe.exec(i)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,i=n.substring(t)),t>=n.length)return this.moveCursorTo(e,n.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(i)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))this.moveCursorTo(e.start.row,e.start.column);else{var i=this.session.getFoldStringAt(t,n,-1);null==i&&(i=this.doc.getLine(t).substring(0,n));var r=o.stringReverse(i);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(r)&&(n-=this.session.nonTokenRe.lastIndex,r=r.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(r)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,n)}},this.$shortWordEndIndex=function(e){var t,n=0,i=/\s/,o=this.session.tokenRe;if(o.lastIndex=0,this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(t=e[n])&&i.test(t);)n++;if(n<1)for(o.lastIndex=0;(t=e[n])&&!o.test(t);)if(o.lastIndex=0,n++,i.test(t)){if(n>2){n--;break}for(;(t=e[n])&&i.test(t);)n++;if(n>2)break}}return o.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t),o=this.session.getFoldAt(e,t,1);if(o)return this.moveCursorTo(o.end.row,o.end.column);if(t==n.length){var r=this.doc.getLength();do{e++,i=this.doc.getLine(e)}while(e<r&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),t=0}var s=this.$shortWordEndIndex(i);this.moveCursorTo(e,t+s)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column);var i=this.session.getLine(t).substring(0,n);if(0===n){do{t--,i=this.doc.getLine(t)}while(t>0&&/^\s*$/.test(i));n=i.length,/\s+$/.test(i)||(i="")}var r=o.stringReverse(i),s=this.$shortWordEndIndex(r);return this.moveCursorTo(t,n-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n,i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(i.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(i.column),i.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=i.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column);var o=this.session.screenToDocumentPosition(i.row+e,i.column,n);0!==e&&0===t&&o.row===this.lead.row&&o.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[o.row]&&(o.row>0||e>0)&&o.row++,this.moveCursorTo(o.row,o.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var i=this.session.getFoldAt(e,t,1);i&&(e=i.start.row,t=i.start.column),this.$keepDesiredColumnOnChange=!0;var o=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(o.charAt(t))&&o.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var i=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return s.fromPoints(t,n)}catch(e){return s.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map((function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t}));else(e=this.getRange()).isBackwards=this.isBackwards();return e},this.fromJSON=function(e){if(null==e.start){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=s.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(a.prototype),t.Selection=a})),ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(e,t,n){"use strict";var i=e("./config"),o=2e3,r=function(e){for(var t in this.states=e,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[t],i=[],o=0,r=this.matchMappings[t]={defaultToken:"text"},s="g",a=[],l=0;l<n.length;l++){var c=n[l];if(c.defaultToken&&(r.defaultToken=c.defaultToken),c.caseInsensitive&&(s="gi"),null!=c.regex){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var u=c.regex,h=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(c.token)?1==c.token.length||1==h?c.token=c.token[0]:h-1!=c.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:c,groupCount:h-1}),c.token=c.token[0]):(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):"function"!=typeof c.token||c.onMatch||(c.onMatch=h>1?this.$applyToken:c.token),h>1&&(/\\\d/.test(c.regex)?u=c.regex.replace(/\\([0-9]+)/g,(function(e,t){return"\\"+(parseInt(t,10)+o+1)})):(h=1,u=this.removeCapturingGroups(c.regex)),c.splitRegex||"string"==typeof c.token||a.push(c)),r[o]=l,o+=h,i.push(u),c.onMatch||(c.onMatch=null)}}i.length||(r[0]=0,i.push("$")),a.forEach((function(e){e.splitRegex=this.createSplitterRegexp(e.regex,s)}),this),this.regExps[t]=new RegExp("("+i.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(e){o=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"==typeof n)return[{type:n,value:e}];for(var i=[],o=0,r=n.length;o<r;o++)t[o]&&(i[i.length]={type:n[o],value:t[o]});return i},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],i=this.tokenArray,o=0,r=i.length;o<r;o++)t[o+1]&&(n[n.length]={type:i[o],value:t[o+1]});return n},this.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(e,t){return t?"(?:":e}))},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,i=!1,o={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(e,t,r,s,a,l){return i?i="]"!=a:a?i=!0:s?(n==o.stack&&(o.end=l+1,o.stack=-1),n--):r&&(n++,1!=r.length&&(o.stack=n,o.start=l)),e})),null!=o.end&&/^\)*$/.test(e.substr(o.end))&&(e=e.substring(0,o.start)+e.substr(o.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);"#tmp"===(t=n[0])&&(n.shift(),t=n.shift())}else n=[];var i=t||"start",r=this.states[i];r||(i="start",r=this.states[i]);var s=this.matchMappings[i],a=this.regExps[i];a.lastIndex=0;for(var l,c=[],u=0,h=0,d={type:null,value:""};l=a.exec(e);){var p=s.defaultToken,f=null,g=l[0],m=a.lastIndex;if(m-g.length>u){var v=e.substring(u,m-g.length);d.type==p?d.value+=v:(d.type&&c.push(d),d={type:p,value:v})}for(var _=0;_<l.length-2;_++)if(void 0!==l[_+1]){p=(f=r[s[_]]).onMatch?f.onMatch(g,i,n,e):f.token,f.next&&(i="string"==typeof f.next?f.next:f.next(i,n),(r=this.states[i])||(this.reportError("state doesn't exist",i),i="start",r=this.states[i]),s=this.matchMappings[i],u=m,(a=this.regExps[i]).lastIndex=m),f.consumeLineEnd&&(u=m);break}if(g)if("string"==typeof p)f&&!1===f.merge||d.type!==p?(d.type&&c.push(d),d={type:p,value:g}):d.value+=g;else if(p){d.type&&c.push(d),d={type:null,value:""};for(_=0;_<p.length;_++)c.push(p[_])}if(u==e.length)break;if(u=m,h++>o){for(h>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});u<e.length;)d.type&&c.push(d),d={value:e.substring(u,u+=500),type:"overflow"};i="start",n=[];break}}return d.type&&c.push(d),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:c,state:n.length?n:i}},this.reportError=i.reportError}).call(r.prototype),t.Tokenizer=r})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(e,t,n){"use strict";var i=e("../lib/lang"),o=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var i=e[n],o=0;o<i.length;o++){var r=i[o];(r.next||r.onMatch)&&("string"==typeof r.next&&0!==r.next.indexOf(t)&&(r.next=t+r.next),r.nextState&&0!==r.nextState.indexOf(t)&&(r.nextState=t+r.nextState))}this.$rules[t+n]=i}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,o,r){var s="function"==typeof e?(new e).getRules():e;if(o)for(var a=0;a<o.length;a++)o[a]=t+o[a];else for(var l in o=[],s)o.push(t+l);if(this.addRules(s,t),n){var c=Array.prototype[r?"push":"unshift"];for(a=0;a<o.length;a++)c.apply(this.$rules[o[a]],i.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){var n=0,i=this.$rules;Object.keys(i).forEach((function o(r){var s=i[r];s.processed=!0;for(var a=0;a<s.length;a++){var l=s[a],c=null;Array.isArray(l)&&(c=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var u=l.next||l.push;if(u&&Array.isArray(u)){var h=l.stateName;h||("string"!=typeof(h=l.token)&&(h=h[0]||""),i[h]&&(h+=n++)),i[h]=u,l.next=h,o(h)}else"pop"==u&&(l.next=t);if(l.push&&(l.nextState=l.next||l.push,l.next=e,delete l.push),l.rules)for(var d in l.rules)i[d]?i[d].push&&i[d].push.apply(i[d],l.rules[d]):i[d]=l.rules[d];var p="string"==typeof l?l:l.include;if(p&&(c=Array.isArray(p)?p.map((function(e){return i[e]})):i[p]),c){var f=[a,1].concat(c);l.noEscape&&(f=f.filter((function(e){return!e.next}))),s.splice.apply(s,f),a--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}),this)},this.createKeywordMapper=function(e,t,n,i){var o=Object.create(null);return Object.keys(e).forEach((function(t){var r=e[t];n&&(r=r.toLowerCase());for(var s=r.split(i||"|"),a=s.length;a--;)o[s[a]]=t})),Object.getPrototypeOf(o)&&(o.__proto__=null),this.$keywordList=Object.keys(o),e=null,n?function(e){return o[e.toLowerCase()]||t}:function(e){return o[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(o.prototype),t.TextHighlightRules=o})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(e,t,n){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var n=(new e).getBehaviours(t);else n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(e){for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}return this.$behaviours}}).call(i.prototype),t.Behaviour=i})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("./range").Range,o=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var i=e.getTokenAt(t,n);this.$tokenIndex=i?i.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)n+=e[t-=1].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new i(this.$row,t,this.$row,t+e.value.length)}}).call(o.prototype),t.TokenIterator=o})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(e,t,n){"use strict";var i,o=e("../../lib/oop"),r=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],c=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],u={},h={'"':'"',"'":"'"},d=function(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,u.rangeCount!=e.multiSelect.rangeCount&&(u={rangeCount:e.multiSelect.rangeCount})),u[t])return i=u[t];i=u[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(e,t,n,i){var o=e.end.row-e.start.row;return{text:n+t+i,selection:[0,e.start.column+1,o,e.end.column+(o?0:1)]}},f=function(e){this.add("braces","insertion",(function(t,n,o,r,s){var l=o.getCursorPosition(),c=r.doc.getLine(l.row);if("{"==s){d(o);var u=o.getSelectionRange(),h=r.doc.getTextRange(u);if(""!==h&&"{"!==h&&o.getWrapBehavioursEnabled())return p(u,h,"{","}");if(f.isSaneInsertion(o,r))return/[\]\}\)]/.test(c[l.column])||o.inMultiSelectMode||e&&e.braces?(f.recordAutoInsert(o,r,"}"),{text:"{}",selection:[1,1]}):(f.recordMaybeInsert(o,r,"{"),{text:"{",selection:[1,1]})}else if("}"==s){if(d(o),"}"==c.substring(l.column,l.column+1))if(null!==r.$findOpeningBracket("}",{column:l.column+1,row:l.row})&&f.isAutoInsertedClosing(l,c,s))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==s||"\r\n"==s){d(o);var g="";if(f.isMaybeInsertedClosing(l,c)&&(g=a.stringRepeat("}",i.maybeInsertedBrackets),f.clearMaybeInsertedClosing()),"}"===c.substring(l.column,l.column+1)){var m=r.findMatchingBracket({row:l.row,column:l.column+1},"}");if(!m)return null;var v=this.$getIndent(r.getLine(m.row))}else{if(!g)return void f.clearMaybeInsertedClosing();v=this.$getIndent(c)}var _=v+r.getTabString();return{text:"\n"+_+"\n"+v+g,selection:[1,_.length,1,_.length]}}f.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(e,t,n,o,r){var s=o.doc.getTextRange(r);if(!r.isMultiLine()&&"{"==s){if(d(n),"}"==o.doc.getLine(r.start.row).substring(r.end.column,r.end.column+1))return r.end.column++,r;i.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(e,t,n,i,o){if("("==o){d(n);var r=n.getSelectionRange(),s=i.doc.getTextRange(r);if(""!==s&&n.getWrapBehavioursEnabled())return p(r,s,"(",")");if(f.isSaneInsertion(n,i))return f.recordAutoInsert(n,i,")"),{text:"()",selection:[1,1]}}else if(")"==o){d(n);var a=n.getCursorPosition(),l=i.doc.getLine(a.row);if(")"==l.substring(a.column,a.column+1))if(null!==i.$findOpeningBracket(")",{column:a.column+1,row:a.row})&&f.isAutoInsertedClosing(a,l,o))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(e,t,n,i,o){var r=i.doc.getTextRange(o);if(!o.isMultiLine()&&"("==r&&(d(n),")"==i.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)))return o.end.column++,o})),this.add("brackets","insertion",(function(e,t,n,i,o){if("["==o){d(n);var r=n.getSelectionRange(),s=i.doc.getTextRange(r);if(""!==s&&n.getWrapBehavioursEnabled())return p(r,s,"[","]");if(f.isSaneInsertion(n,i))return f.recordAutoInsert(n,i,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){d(n);var a=n.getCursorPosition(),l=i.doc.getLine(a.row);if("]"==l.substring(a.column,a.column+1))if(null!==i.$findOpeningBracket("]",{column:a.column+1,row:a.row})&&f.isAutoInsertedClosing(a,l,o))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(e,t,n,i,o){var r=i.doc.getTextRange(o);if(!o.isMultiLine()&&"["==r&&(d(n),"]"==i.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)))return o.end.column++,o})),this.add("string_dquotes","insertion",(function(e,t,n,i,o){var r=i.$mode.$quotes||h;if(1==o.length&&r[o]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(o))return;d(n);var s=o,a=n.getSelectionRange(),l=i.doc.getTextRange(a);if(!(""===l||1==l.length&&r[l])&&n.getWrapBehavioursEnabled())return p(a,l,s,s);if(!l){var c=n.getCursorPosition(),u=i.doc.getLine(c.row),f=u.substring(c.column-1,c.column),g=u.substring(c.column,c.column+1),m=i.getTokenAt(c.row,c.column),v=i.getTokenAt(c.row,c.column+1);if("\\"==f&&m&&/escape/.test(m.type))return null;var _,y=m&&/string|escape/.test(m.type),b=!v||/string|escape/.test(v.type);if(g==s)(_=y!==b)&&/string\.end/.test(v.type)&&(_=!1);else{if(y&&!b)return null;if(y&&b)return null;var T=i.$mode.tokenRe;T.lastIndex=0;var E=T.test(f);T.lastIndex=0;var w=T.test(f);if(E||w)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;var k=u[c.column-2];if(f==s&&(k==s||T.test(k)))return null;_=!0}return{text:_?s+s:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(e,t,n,i,o){var r=i.$mode.$quotes||h,s=i.doc.getTextRange(o);if(!o.isMultiLine()&&r.hasOwnProperty(s)&&(d(n),i.doc.getLine(o.start.row).substring(o.start.column+1,o.start.column+2)==s))return o.end.column++,o}))};f.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),i=new s(t,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",l)){if(/[)}\]]/.test(e.session.getLine(n.row)[n.column]))return!0;var o=new s(t,n.row,n.column+1);if(!this.$matchTokenType(o.getCurrentToken()||"text",l))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",c)},f.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},f.recordAutoInsert=function(e,t,n){var o=e.getCursorPosition(),r=t.doc.getLine(o.row);this.isAutoInsertedClosing(o,r,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=o.row,i.autoInsertedLineEnd=n+r.substr(o.column),i.autoInsertedBrackets++},f.recordMaybeInsert=function(e,t,n){var o=e.getCursorPosition(),r=t.doc.getLine(o.row);this.isMaybeInsertedClosing(o,r)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=o.row,i.maybeInsertedLineStart=r.substr(0,o.column)+n,i.maybeInsertedLineEnd=r.substr(o.column),i.maybeInsertedBrackets++},f.isAutoInsertedClosing=function(e,t,n){return i.autoInsertedBrackets>0&&e.row===i.autoInsertedRow&&n===i.autoInsertedLineEnd[0]&&t.substr(e.column)===i.autoInsertedLineEnd},f.isMaybeInsertedClosing=function(e,t){return i.maybeInsertedBrackets>0&&e.row===i.maybeInsertedRow&&t.substr(e.column)===i.maybeInsertedLineEnd&&t.substr(0,e.column)==i.maybeInsertedLineStart},f.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},f.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},o.inherits(f,r),t.CstyleBehaviour=f})),ace.define("ace/unicode",["require","exports","module"],(function(e,t,n){"use strict";for(var i=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],o=0,r=[],s=0;s<i.length;s+=2)r.push(o+=i[s]),i[s+1]&&r.push(45,o+=i[s+1]);t.wordChars=String.fromCharCode.apply(null,r)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(e,t,n){"use strict";var i=e("../config"),o=e("../tokenizer").Tokenizer,r=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour/cstyle").CstyleBehaviour,a=e("../unicode"),l=e("../lib/lang"),c=e("../token_iterator").TokenIterator,u=e("../range").Range,h=function(){this.HighlightRules=r};(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+a.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+a.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new o(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,i){var o=t.doc,r=!0,s=!0,a=1/0,c=t.getTabSize(),u=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))g=this.lineCommentStart.map(l.escapeRegExp).join("|"),p=this.lineCommentStart[0];else g=l.escapeRegExp(this.lineCommentStart),p=this.lineCommentStart;g=new RegExp("^(\\s*)(?:"+g+") ?"),u=t.getUseSoftTabs();_=function(e,t){var n=e.match(g);if(n){var i=n[1].length,r=n[0].length;d(e,i,r)||" "!=n[0][r-1]||r--,o.removeInLine(t,i,r)}};var h=p+" ",d=(v=function(e,t){r&&!/\S/.test(e)||(d(e,a,a)?o.insertInLine({row:t,column:a},h):o.insertInLine({row:t,column:a},p))},y=function(e,t){return g.test(e)},function(e,t,n){for(var i=0;t--&&" "==e.charAt(t);)i++;if(i%c!=0)return!1;for(i=0;" "==e.charAt(n++);)i++;return c>2?i%c!=c-1:i%c==0})}else{if(!this.blockComment)return!1;var p=this.blockComment.start,f=this.blockComment.end,g=new RegExp("^(\\s*)(?:"+l.escapeRegExp(p)+")"),m=new RegExp("(?:"+l.escapeRegExp(f)+")\\s*$"),v=function(e,t){y(e,t)||r&&!/\S/.test(e)||(o.insertInLine({row:t,column:e.length},f),o.insertInLine({row:t,column:a},p))},_=function(e,t){var n;(n=e.match(m))&&o.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(g))&&o.removeInLine(t,n[1].length,n[0].length)},y=function(e,n){if(g.test(e))return!0;for(var i=t.getTokens(n),o=0;o<i.length;o++)if("comment"===i[o].type)return!0}}function b(e){for(var t=n;t<=i;t++)e(o.getLine(t),t)}var T=1/0;b((function(e,t){var n=e.search(/\S/);-1!==n?(n<a&&(a=n),s&&!y(e,t)&&(s=!1)):T>e.length&&(T=e.length)})),a==1/0&&(a=T,r=!1,s=!1),u&&a%c!=0&&(a=Math.floor(a/c)*c),b(s?_:v)},this.toggleBlockComment=function(e,t,n,i){var o=this.blockComment;if(o){!o.start&&o[0]&&(o=o[0]);var r,s,a=(g=new c(t,i.row,i.column)).getCurrentToken(),l=(t.selection,t.selection.toOrientedRange());if(a&&/comment/.test(a.type)){for(var h,d;a&&/comment/.test(a.type);){if(-1!=(m=a.value.indexOf(o.start))){var p=g.getCurrentTokenRow(),f=g.getCurrentTokenColumn()+m;h=new u(p,f,p,f+o.start.length);break}a=g.stepBackward()}var g;for(a=(g=new c(t,i.row,i.column)).getCurrentToken();a&&/comment/.test(a.type);){var m;if(-1!=(m=a.value.indexOf(o.end))){p=g.getCurrentTokenRow(),f=g.getCurrentTokenColumn()+m;d=new u(p,f,p,f+o.end.length);break}a=g.stepForward()}d&&t.remove(d),h&&(t.remove(h),r=h.start.row,s=-o.start.length)}else s=o.start.length,r=n.start.row,t.insert(n.end,o.end),t.insert(n.start,o.start);l.start.row==r&&(l.start.column+=s),l.end.row==r&&(l.end.column+=s),t.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){for(var t in this.$embeds=[],this.$modes={},e)if(e[t]){var n=e[t],o=n.prototype.$id,r=i.$modes[o];r||(i.$modes[o]=r=new n),i.$modes[t]||(i.$modes[t]=r),this.$embeds.push(t),this.$modes[t]=r}var s=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(t=0;t<s.length;t++)!function(e){var n=s[t],i=e[n];e[s[t]]=function(){return this.$delegator(n,arguments,i)}}(this)},this.$delegator=function(e,t,n){var i=t[0]||"start";if("string"!=typeof i){if(Array.isArray(i[2])){var o=i[2][i[2].length-1];if(s=this.$modes[o])return s[e].apply(s,[i[1]].concat([].slice.call(t,1)))}i=i[0]||"start"}for(var r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var s,a=i.split(this.$embeds[r]);if(!a[0]&&a[1])return t[0]=a[1],(s=this.$modes[this.$embeds[r]])[e].apply(s,t)}var l=n.apply(this,t);return n?l:void 0},this.transformAction=function(e,t,n,i,o){if(this.$behaviour){var r=this.$behaviour.getBehaviours();for(var s in r)if(r[s][t]){var a=r[s][t].apply(this,arguments);if(a)return a}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var i in t)for(var o=t[i],r=0,s=o.length;r<s;r++)if("string"==typeof o[r].token)/keyword|support|storage/.test(o[r].token)&&n.push(o[r].regex);else if("object"==typeof o[r].token)for(var a=0,l=o[r].token.length;a<l;a++)if(/keyword|support|storage/.test(o[r].token[a])){i=o[r].regex.match(/\(.+?\)/g)[a];n.push(i.substr(1,i.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,i){return(this.$keywordList||this.$createKeywordList()).map((function(e){return{name:e,value:e,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(h.prototype),t.Mode=h})),ace.define("ace/apply_delta",["require","exports","module"],(function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var i=t.start.row,o=t.start.column,r=e[i]||"";switch(t.action){case"insert":if(1===t.lines.length)e[i]=r.substring(0,o)+t.lines[0]+r.substring(o);else{var s=[i,1].concat(t.lines);e.splice.apply(e,s),e[i]=r.substring(0,o)+e[i],e[i+t.lines.length-1]+=r.substring(o)}break;case"remove":var a=t.end.column,l=t.end.row;i===l?e[i]=r.substring(0,o)+r.substring(a):e.splice(i,l-i+1,r.substring(0,o)+e[l].substring(a))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,r=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),void 0===n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var i=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&i}i.implement(this,o),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if(!(t.start.row==t.end.row&&t.start.row!=this.row||t.start.row>this.row)){var n=function(t,n,i){var o="insert"==t.action,r=(o?1:-1)*(t.end.row-t.start.row),s=(o?1:-1)*(t.end.column-t.start.column),a=t.start,l=o?a:t.end;if(e(n,a,i))return{row:n.row,column:n.column};if(e(l,n,!i))return{row:n.row+r,column:n.column+(n.row==l.row?s:0)};return{row:a.row,column:a.column}}(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(e,t,n){var i;if(i=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=i.row||this.column!=i.column){var o={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._signal("change",{old:o,value:i})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(r.prototype)})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./apply_delta").applyDelta,r=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=e("./anchor").Anchor,l=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){i.implement(this,r),this.setValue=function(e){var t=this.getLength()-1;this.remove(new s(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new a(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{(t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),i=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[t]},!0),this.clonePos(i)},this.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:e<0?e=0:e>=n&&(e=n-1,t=void 0);var i=this.getLine(e);return null==t&&(t=i.length),{row:e,column:t=Math.min(Math.max(t,0),i.length)}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){var n=0;(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),i={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:t}),this.clonePos(i)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var i=this.clippedPos(e,t),o=this.clippedPos(e,n);return this.applyDelta({start:i,end:o,action:"remove",lines:this.getLinesForRange({start:i,end:o})},!0),this.clonePos(i)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var n=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&e>0,i=t<this.getLength()-1,o=n?e-1:e,r=n?this.getLine(o).length:0,a=i?t+1:t,l=i?0:this.getLine(a).length,c=new s(o,r,a,l),u=this.$lines.slice(e,t+1);return this.applyDelta({start:c.start,end:c.end,action:"remove",lines:this.getLinesForRange(c)}),u},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){return e instanceof s||(e=s.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty()?e.start:t==this.getTextRange(e)?e.end:(this.remove(e),t?this.insert(e.start,t):e.start)},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!s.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(o(this.$lines,e,t),this._signal("change",e)))},this.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,i=n.length-t+1,o=e.start.row,r=e.start.column,s=0,a=0;s<i;s=a){a+=t-1;var l=n.slice(s,a);l.push(""),this.applyDelta({start:this.pos(o+s,r),end:this.pos(o+a,r=0),action:e.action,lines:l},!0)}e.lines=n.slice(s),e.start.row=o+s,e.start.column=r,this.applyDelta(e,!0)},this.revertDelta=function(e){this.applyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,o=t||0,r=n.length;o<r;o++)if((e-=n[o].length+i)<0)return{row:o,column:e+n[o].length+i};return{row:r-1,column:e+n[r-1].length+i}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,o=0,r=Math.min(e.row,n.length),s=t||0;s<r;++s)o+=n[s].length+i;return o+e.column}}).call(l.prototype),t.Document=l})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,r=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,i=-1,o=n.doc,r=t;n.lines[t];)t++;var s=o.getLength(),a=0;for(n.running=!1;t<s;){n.$tokenizeRow(t),i=t;do{t++}while(n.lines[t]);if(++a%5==0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,-1==i&&(i=t),r<=i&&n.fireUpdateEvent(r,i)}}};(function(){i.implement(this,o),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],i=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=i.state+""?(this.states[e]=i.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=i.tokens}}).call(r.prototype),t.BackgroundTokenizer=r})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(e,t,n){"use strict";var i=e("./lib/lang"),o=(e("./lib/oop"),e("./range").Range),r=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,r){if(this.regExp)for(var s=r.firstRow,a=r.lastRow,l=s;l<=a;l++){var c=this.cache[l];null==c&&((c=i.getMatchOffsets(n.getLine(l),this.regExp)).length>this.MAX_RANGES&&(c=c.slice(0,this.MAX_RANGES)),c=c.map((function(e){return new o(l,e.offset,l,e.offset+e.length)})),this.cache[l]=c.length?c:"");for(var u=c.length;u--;)t.drawSingleLineMarker(e,c[u].toScreenRange(n),this.clazz,r)}}}).call(r.prototype),t.SearchHighlight=r})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("../range").Range;function o(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new i(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(e){e.setFoldLine(this)}),this)}(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach((function(t){t.start.row+=e,t.end.row+=e}))},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort((function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)})),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var i,o,r=0,s=this.folds,a=!0;null==t&&(t=this.end.row,n=this.end.column);for(var l=0;l<s.length;l++){if(-1==(o=(i=s[l]).range.compareStart(t,n)))return void e(null,t,n,r,a);if(!e(null,i.start.row,i.start.column,r,a)&&e(i.placeholder,i.start.row,i.start.column,r)||0===o)return;a=!i.sameRow,r=i.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){for(var n,i,o=0;o<this.folds.length;o++){if(-1==(i=(n=this.folds[o]).range.compareEnd(e,t)))return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var i,o,r=this.getNextFoldTo(e,t);if(r)if(i=r.fold,"inside"==r.kind&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){var s=(o=this.folds).indexOf(i);for(0===s&&(this.start.column+=n);s<o.length;s++){if((i=o[s]).start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var i=n.fold,r=this.folds,s=this.foldData,a=r.indexOf(i),l=r[a-1];this.end.row=l.end.row,this.end.column=l.end.column;var c=new o(s,r=r.splice(a,r.length-a));return s.splice(s.indexOf(this)+1,0,c),c},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var i=this.foldData;i.splice(i.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach((function(t){e.push("  "+t.toString())})),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if((e-=i.start.column-t)<0)return{row:i.start.row,column:i.start.column+e};if((e-=i.placeholder.length)<0)return i.start;t=i.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(o.prototype),t.FoldLine=o})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("./range").Range.comparePoints,o=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){for(var o=this.ranges,r=n||0;r<o.length;r++){var s=o[r],a=i(e,s.end);if(!(a>0)){var l=i(e,s.start);return 0===a?t&&0!==l?-r-2:r:l>0||0===l&&!t?r:-r-1}}return-r-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var i=this.pointIndex(e.end,t,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){for(var e,t=[],n=this.ranges,o=(n=n.sort((function(e,t){return i(e.start,t.start)})))[0],r=1;r<n.length;r++){e=o,o=n[r];var s=i(e.end,o.start);s<0||(0!=s||e.isEmpty()||o.isEmpty())&&(i(e.end,o.end)<0&&(e.end.row=o.end.row,e.end.column=o.end.column),n.splice(r,1),t.push(o),o=e,r--)}return this.ranges=n,t},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var i=this.pointIndex({row:e,column:0});i<0&&(i=-i-1);var o=this.pointIndex({row:t,column:0},i);o<0&&(o=-o-1);for(var r=[],s=i;s<o;s++)r.push(n[s]);return r},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t=e.start,n=e.end,i=t.row,o=n.row,r=this.ranges,s=0,a=r.length;s<a;s++){if((u=r[s]).end.row>=i)break}if("insert"==e.action)for(var l=o-i,c=-t.column+n.column;s<a;s++){if((u=r[s]).start.row>i)break;if(u.start.row==i&&u.start.column>=t.column&&(u.start.column==t.column&&this.$bias<=0||(u.start.column+=c,u.start.row+=l)),u.end.row==i&&u.end.column>=t.column){if(u.end.column==t.column&&this.$bias<0)continue;u.end.column==t.column&&c>0&&s<a-1&&u.end.column>u.start.column&&u.end.column==r[s+1].start.column&&(u.end.column-=c),u.end.column+=c,u.end.row+=l}}else for(l=i-o,c=t.column-n.column;s<a;s++){if((u=r[s]).start.row>o)break;u.end.row<o&&(i<u.end.row||i==u.end.row&&t.column<u.end.column)?(u.end.row=i,u.end.column=t.column):u.end.row==o?u.end.column<=n.column?(l||u.end.column>t.column)&&(u.end.column=t.column,u.end.row=t.row):(u.end.column+=c,u.end.row+=l):u.end.row>o&&(u.end.row+=l),u.start.row<o&&(i<u.start.row||i==u.start.row&&t.column<u.start.column)?(u.start.row=i,u.start.column=t.column):u.start.row==o?u.start.column<=n.column?(l||u.start.column>t.column)&&(u.start.column=t.column,u.start.row=t.row):(u.start.column+=c,u.start.row+=l):u.start.row>o&&(u.start.row+=l)}if(0!=l&&s<a)for(;s<a;s++){var u;(u=r[s]).start.row+=l,u.end.row+=l}}}).call(o.prototype),t.RangeList=o})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],(function(e,t,n){"use strict";var i=e("../range_list").RangeList,o=e("../lib/oop"),r=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};function s(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function a(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}o.inherits(r,i),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach((function(t){t.setFoldLine(e)}))},this.clone=function(){var e=this.range.clone(),t=new r(e,this.placeholder);return this.subFolds.forEach((function(e){t.subFolds.push(e.clone())})),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){var t,n;t=e,n=this.start,s(t.start,n),s(t.end,n);for(var i=e.start.row,o=e.start.column,r=0,a=-1;r<this.subFolds.length&&1==(a=this.subFolds[r].range.compare(i,o));r++);var l=this.subFolds[r],c=0;if(0==a){if(l.range.containsRange(e))return l.addSubFold(e);c=1}i=e.range.end.row,o=e.range.end.column;var u=r;for(a=-1;u<this.subFolds.length&&1==(a=this.subFolds[u].range.compare(i,o));u++);0==a&&u++;for(var h=this.subFolds.splice(r,u-r,e),d=0==a?h.length-1:h.length,p=c;p<d;p++)e.addSubFold(h[p]);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return function(e,t){a(e.start,t),a(e.end,t)}(e,this.start)}}.call(r.prototype)})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(e,t,n){"use strict";var i=e("../range").Range,o=e("./fold_line").FoldLine,r=e("./fold").Fold,s=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,n){var i=this.getFoldLine(e);if(!i)return null;for(var o=i.folds,r=0;r<o.length;r++){var s=o[r].range;if(s.contains(e,t)){if(1==n&&s.isEnd(e,t)&&!s.isEmpty())continue;if(-1==n&&s.isStart(e,t)&&!s.isEmpty())continue;return o[r]}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,i=this.$foldData,o=[];t.column+=1,n.column-=1;for(var r=0;r<i.length;r++){var s=i[r].range.compareRange(e);if(2!=s){if(-2==s)break;for(var a=i[r].folds,l=0;l<a.length;l++){var c=a[l];if(-2==(s=c.range.compareRange(e)))break;if(2!=s){if(42==s)break;o.push(c)}}}}return t.column-=1,n.column+=1,o},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach((function(e){t=t.concat(this.getFoldsInRange(e))}),this)}else t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var i=0;i<t[n].folds.length;i++)e.push(t[n].folds[i]);return e},this.getFoldStringAt=function(e,t,n,i){if(!(i=i||this.getFoldLine(e)))return null;for(var o,r,s={end:{column:0}},a=0;a<i.folds.length;a++){var l=(r=i.folds[a]).range.compareEnd(e,t);if(-1==l){o=this.getLine(r.start.row).substring(s.end.column,r.start.column);break}if(0===l)return null;s=r}return o||(o=this.getLine(r.start.row).substring(s.end.column)),-1==n?o.substring(0,t-s.end.column):1==n?o.substring(t-s.end.column):o},this.getFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0);i<n.length;i++){var o=n[i];if(o.start.row<=e&&o.end.row>=e)return o;if(o.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0);i<n.length;i++){var o=n[i];if(o.end.row>=e)return o}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,i=t-e+1,o=0;o<n.length;o++){var r=n[o],s=r.end.row,a=r.start.row;if(s>=t){a<t&&(a>=e?i-=t-a:i=0);break}s>=e&&(i-=a>=e?s-a:s-e+1)}return i},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort((function(e,t){return e.start.row-t.start.row})),e},this.addFold=function(e,t){var n,i=this.$foldData,s=!1;e instanceof r?n=e:(n=new r(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(n.range);var a=n.start.row,l=n.start.column,c=n.end.row,u=n.end.column,h=this.getFoldAt(a,l,1),d=this.getFoldAt(c,u,-1);if(h&&d==h)return h.addSubFold(n);h&&!h.range.isStart(a,l)&&this.removeFold(h),d&&!d.range.isEnd(c,u)&&this.removeFold(d);var p=this.getFoldsInRange(n.range);p.length>0&&(this.removeFolds(p),p.forEach((function(e){n.addSubFold(e)})));for(var f=0;f<i.length;f++){var g=i[f];if(c==g.start.row){g.addFold(n),s=!0;break}if(a==g.end.row){if(g.addFold(n),s=!0,!n.sameRow){var m=i[f+1];if(m&&m.start.row==c){g.merge(m);break}}break}if(c<=g.start.row)break}return s||(g=this.$addFoldLine(new o(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(e){e.forEach((function(e){this.addFold(e)}),this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,i=t.end.row,o=this.$foldData,r=t.folds;if(1==r.length)o.splice(o.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))r.pop(),t.end.row=r[r.length-1].end.row,t.end.column=r[r.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))r.shift(),t.start.row=r[0].start.row,t.start.column=r[0].start.column;else if(e.sameRow)r.splice(r.indexOf(e),1);else{var s=t.split(e.start.row,e.start.column);(r=s.folds).shift(),s.start.row=r[0].start.row,s.start.column=r[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach((function(e){this.removeFold(e)}),this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach((function(t){e.restoreRange(t),this.addFold(t)}),this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach((function(e){this.expandFold(e)}),this)},this.unfold=function(e,t){var n,o;if(null==e?(n=new i(0,0,this.getLength(),0),t=!0):n="number"==typeof e?new i(e,0,e,this.getLine(e).length):"row"in e?i.fromPoints(e,e):e,o=this.getFoldsInRangeList(n),t)this.removeFolds(o);else for(var r=o;r.length;)this.expandFolds(r),r=this.getFoldsInRangeList(n);if(o.length)return o},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,i,o){null==i&&(i=e.start.row),null==o&&(o=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var r=this.doc,s="";return e.walk((function(e,t,n,a){if(!(t<i)){if(t==i){if(n<o)return;a=Math.max(o,a)}s+=null!=e?e:r.getLine(t).substring(a,n)}}),t,n),s},this.getDisplayLine=function(e,t,n,i){var o,r=this.getFoldLine(e);return r?this.getFoldDisplayLine(r,e,t,n,i):(o=this.doc.getLine(e)).substring(i||0,t||o.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map((function(t){var n=t.folds.map((function(e){return e.clone()}));return new o(e,n)}))},this.toggleFold=function(e){var t,n,i=this.selection.getRange();if(i.isEmpty()){var o=i.start;if(t=this.getFoldAt(o.row,o.column))return void this.expandFold(t);(n=this.findMatchingBracket(o))?1==i.comparePoint(n)?i.end=n:(i.start=n,i.start.column++,i.end.column--):(n=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==i.comparePoint(n)?i.end=n:i.start=n,i.start.column++):i=this.getCommentFoldRange(o.row,o.column)||i}else{var r=this.getFoldsInRange(i);if(e&&r.length)return void this.expandFolds(r);1==r.length&&(t=r[0])}if(t||(t=this.getFoldAt(i.start.row,i.start.column)),t&&t.range.toString()==i.toString())this.expandFold(t);else{var s="...";if(!i.isMultiLine()){if((s=this.getTextRange(i)).length<4)return;s=s.trim().substring(0,2)+".."}this.addFold(s,i)}},this.getCommentFoldRange=function(e,t,n){var o=new s(this,e,t),r=o.getCurrentToken(),a=r.type;if(r&&/^comment|string/.test(a)){"comment"==(a=a.match(/comment|string/)[0])&&(a+="|doc-start");var l=new RegExp(a),c=new i;if(1!=n){do{r=o.stepBackward()}while(r&&l.test(r.type));o.stepForward()}if(c.start.row=o.getCurrentTokenRow(),c.start.column=o.getCurrentTokenColumn()+2,o=new s(this,e,t),-1!=n){var u=-1;do{if(r=o.stepForward(),-1==u){var h=this.getState(o.$row);l.test(h)||(u=o.$row)}else if(o.$row>u)break}while(r&&l.test(r.type));r=o.stepBackward()}else r=o.getCurrentToken();return c.end.row=o.getCurrentTokenRow(),c.end.column=o.getCurrentTokenColumn()+r.value.length-2,c}},this.foldAll=function(e,t,n){null==n&&(n=1e5);var i=this.foldWidgets;if(i){t=t||this.getLength();for(var o=e=e||0;o<t;o++)if(null==i[o]&&(i[o]=this.getFoldWidget(o)),"start"==i[o]){var r=this.getFoldWidgetRange(o);if(r&&r.isMultiLine()&&r.end.row<=t&&r.start.row>=e){o=r.end.row;try{var s=this.addFold("...",r);s&&(s.collapseChildren=n)}catch(e){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){this.$foldMode!=e&&(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var i,o=e-1;o>=0;){var r=n[o];if(null==r&&(r=n[o]=this.getFoldWidget(o)),"start"==r){var s=this.getFoldWidgetRange(o);if(i||(i=s),s&&s.end.row>=e)break}o--}return{range:-1!==o&&s,firstRange:i}},this.onFoldWidgetClick=function(e,t){var n={children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,n)){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),i=this.getLine(e),o="end"===n?-1:1,r=this.getFoldAt(e,-1===o?0:i.length,o);if(r)return t.children||t.all?this.removeFold(r):this.expandFold(r),r;var s=this.getFoldWidgetRange(e,!0);if(s&&!s.isMultiLine()&&(r=this.getFoldAt(s.start.row,s.start.column,1))&&s.isEqual(r.range))return this.removeFold(r),r;if(t.siblings){var a=this.getParentFoldRangeData(e);if(a.range)var l=a.range.start.row+1,c=a.range.end.row;this.foldAll(l,c,t.all?1e4:0)}else t.children?(c=s?s.end.row:this.getLength(),this.foldAll(e+1,c,t.all?1e4:0)):s&&(t.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var i=this.getParentFoldRangeData(t,!0);if(n=i.range||i.firstRange){t=n.start.row;var o=this.getFoldAt(t,this.getLine(t).length,1);o?this.removeFold(o):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,i)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(e,t,n){"use strict";var i=e("../token_iterator").TokenIterator,o=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],e):this.$findOpeningBracket(i[2],e):null},this.getBracketRange=function(e){var t,n=this.getLine(e.row),i=!0,r=n.charAt(e.column-1),s=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(s||(r=n.charAt(e.column),e={row:e.row,column:e.column+1},s=r&&r.match(/([\(\[\{])|([\)\]\}])/),i=!1),!s)return null;if(s[1]){if(!(a=this.$findClosingBracket(s[1],e)))return null;t=o.fromPoints(e,a),i||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a;if(!(a=this.$findOpeningBracket(s[2],e)))return null;t=o.fromPoints(a,e),i||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var o=this.$brackets[e],r=1,s=new i(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var l=t.column-s.getCurrentTokenColumn()-2,c=a.value;;){for(;l>=0;){var u=c.charAt(l);if(u==o){if(0==(r-=1))return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else u==e&&(r+=1);l-=1}do{a=s.stepBackward()}while(a&&!n.test(a.type));if(null==a)break;l=(c=a.value).length-1}return null}},this.$findClosingBracket=function(e,t,n){var o=this.$brackets[e],r=1,s=new i(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var l=t.column-s.getCurrentTokenColumn();;){for(var c=a.value,u=c.length;l<u;){var h=c.charAt(l);if(h==o){if(0==(r-=1))return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else h==e&&(r+=1);l+=1}do{a=s.stepForward()}while(a&&!n.test(a.type));if(null==a)break;l=0}return null}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/lang"),r=e("./bidihandler").BidiHandler,s=e("./config"),a=e("./lib/event_emitter").EventEmitter,l=e("./selection").Selection,c=e("./mode/text").Mode,u=e("./range").Range,h=e("./document").Document,d=e("./background_tokenizer").BackgroundTokenizer,p=e("./search_highlight").SearchHighlight,f=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++f.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new h(e)),this.setDocument(e),this.selection=new l(this),this.$bidiHandler=new r(this),s.resetOptions(this),this.setMode(t),s._signal("session",this)};f.$uid=0,function(){i.implement(this,a),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){for(var n=0,i=e.length-1;n<=i;){var o=n+i>>1,r=e[o];if(t>r)n=o+1;else{if(!(t<r))return o;i=o-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n,i=this.bgTokenizer.getTokens(e),o=0;if(null==t){var r=i.length-1;o=this.getLine(e).length}else for(r=0;r<i.length&&!((o+=i[r].value.length)>=t);r++);return(n=i[r])?(n.index=r,n.start=o-n.value.length,n):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=o.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?o.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,i){var o=this.$markerId++,r={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!i,id:o};return i?(this.$frontMarkers[o]=r,this._signal("changeFrontMarker")):(this.$backMarkers[o]=r,this._signal("changeBackMarker")),o},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];t&&(delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,i){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var o=new u(e,0,t,1/0);return o.id=this.addMarker(o,n,"fullLine",i),o},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var n=this.getLine(e),i=!1;if(t>0&&(i=!!n.charAt(t-1).match(this.tokenRe)),i||(i=!!n.charAt(t).match(this.tokenRe)),i)var o=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))o=/\s/;else o=this.nonTokenRe;var r=t;if(r>0){do{r--}while(r>=0&&n.charAt(r).match(o));r++}for(var s=t;s<n.length&&n.charAt(s).match(o);)s++;return new u(e,r,e,s)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=s.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,i=n.path}else i=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[i]&&!n)return this.$onChangeMode(this.$modes[i]),void(t&&t());this.$modeId=i,s.loadModule(["mode",i],function(e){if(this.$modeId!==i)return t&&t();this.$modes[i]&&!n?this.$onChangeMode(this.$modes[i]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[i]=e,e.$id=i),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(void 0!==n.addEventListener){var i=this.onReloadTokenizer.bind(this);n.addEventListener("update",i)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new d(n);var o=this;this.bgTokenizer.addEventListener("update",(function(e){o._signal("tokenizerUpdate",e)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){s.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach((function(t){t&&t.screenWidth>e&&(e=t.screenWidth)})),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,o=0,r=this.$foldData[o],s=r?r.start.row:1/0,a=t.length,l=0;l<a;l++){if(l>s){if((l=r.end.row+1)>=a)break;s=(r=this.$foldData[o++])?r.start.row:1/0}null==n[l]&&(n[l]=this.$getStringScreenWidth(t[l])[0]),n[l]>i&&(i=n[l])}this.screenWidth=i}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=e.length-1;-1!=n;n--){var i=e[n];"insert"==i.action||"remove"==i.action?this.doc.revertDelta(i):i.folds&&this.addFolds(i.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=0;n<e.length;n++){var i=e[n];"insert"!=i.action&&"remove"!=i.action||this.doc.applyDelta(i)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?"insert"!==e.action:"insert"===e.action}for(var i,o,r=0;r<e.length;r++){var s=e[r];s.start&&(i?n(s)?(o=s.start,-1==i.compare(o.row,o.column)&&i.setStart(o),o=s.end,1==i.compare(o.row,o.column)&&i.setEnd(o),!0):(o=s.start,-1==i.compare(o.row,o.column)&&(i=u.fromPoints(s.start,s.start)),!1):n(s)?(i=u.fromPoints(s.start,s.end),!0):(i=u.fromPoints(s.start,s.start),!1))}return i},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var i=this.getTextRange(e),o=this.getFoldsInRange(e),r=u.fromPoints(t,t);if(!n){this.remove(e);var s=e.start.row-e.end.row;(c=s?-e.end.column:e.start.column-e.end.column)&&(r.start.row==e.end.row&&r.start.column>e.end.column&&(r.start.column+=c),r.end.row==e.end.row&&r.end.column>e.end.column&&(r.end.column+=c)),s&&r.start.row>=e.end.row&&(r.start.row+=s,r.end.row+=s)}if(r.end=this.insert(r.start,i),o.length){var a=e.start,l=r.start,c=(s=l.row-a.row,l.column-a.column);this.addFolds(o.map((function(e){return(e=e.clone()).start.row==a.row&&(e.start.column+=c),e.end.row==a.row&&(e.end.column+=c),e.start.row+=s,e.end.row+=s,e})))}return r},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var i=e;i<=t;i++)this.doc.insertInLine({row:i,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new u(0,0,0,0),i=this.getTabSize(),o=t.start.row;o<=t.end.row;++o){var r=this.getLine(o);n.start.row=o,n.end.row=o;for(var s=0;s<i&&" "==r.charAt(s);++s);s<i&&"\t"==r.charAt(s)?(n.start.column=s,n.end.column=s+1):(n.start.column=0,n.end.column=s),this.remove(n)}},this.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),n<0){if((o=this.getRowFoldStart(e+n))<0)return 0;var i=o-e}else if(n>0){var o;if((o=this.getRowFoldEnd(t+n))>this.doc.getLength()-1)return 0;i=o-t}else{e=this.$clipRowToDocument(e);i=(t=this.$clipRowToDocument(t))-e+1}var r=new u(e,0,t,Number.MAX_VALUE),s=this.getFoldsInRange(r).map((function(e){return(e=e.clone()).start.row+=i,e.end.row+=i,e})),a=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+i,a),s.length&&this.addFolds(s),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var i=this.$constrainWrapLimit(e,n.min,n.max);return i!=this.$wrapLimit&&i>1&&(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,i=e.start,o=e.end,r=i.row,s=o.row,a=s-r,l=null;if(this.$updating=!0,0!=a)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(r,a);var c=this.$foldData;l=this.getFoldsInRange(e),this.removeFolds(l);var u=0;if(g=this.getFoldLine(o.row)){g.addRemoveChars(o.row,o.column,i.column-o.column),g.shiftRow(-a);var h=this.getFoldLine(r);h&&h!==g&&(h.merge(g),g=h),u=c.indexOf(g)+1}for(;u<c.length;u++){(g=c[u]).start.row>=o.row&&g.shiftRow(-a)}s=r}else{var d=Array(a);d.unshift(r,0);var p=t?this.$wrapData:this.$rowLengthCache;p.splice.apply(p,d);c=this.$foldData,u=0;if(g=this.getFoldLine(r)){var f=g.range.compareInside(i.row,i.column);0==f?(g=g.split(i.row,i.column))&&(g.shiftRow(a),g.addRemoveChars(s,0,o.column-i.column)):-1==f&&(g.addRemoveChars(r,0,o.column-i.column),g.shiftRow(a)),u=c.indexOf(g)+1}for(;u<c.length;u++){var g;(g=c[u]).start.row>=r&&g.shiftRow(a)}}else a=Math.abs(e.start.column-e.end.column),"remove"===n&&(l=this.getFoldsInRange(e),this.removeFolds(l),a=-a),(g=this.getFoldLine(r))&&g.addRemoveChars(r,i.column,a);return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(r,s):this.$updateRowLengthCache(r,s),l},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(n,i){var o,r,s=this.doc.getAllLines(),a=this.getTabSize(),l=this.$wrapData,c=this.$wrapLimit,u=n;for(i=Math.min(i,s.length-1);u<=i;)(r=this.getFoldLine(u,r))?(o=[],r.walk(function(n,i,r,a){var l;if(null!=n){(l=this.$getDisplayTokens(n,o.length))[0]=e;for(var c=1;c<l.length;c++)l[c]=t}else l=this.$getDisplayTokens(s[i].substring(a,r),o.length);o=o.concat(l)}.bind(this),r.end.row,s[r.end.row].length+1),l[r.start.row]=this.$computeWrapSplits(o,c,a),u=r.end.row+1):(o=this.$getDisplayTokens(s[u]),l[u]=this.$computeWrapSplits(o,c,a),u++)};var e=3,t=4,n=10,r=11,l=12;function h(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}this.$computeWrapSplits=function(i,o,s){if(0==i.length)return[];var a=[],c=i.length,u=0,h=0,d=this.$wrapAsCode,p=this.$indentedSoftWrap,f=o<=Math.max(2*s,8)||!1===p?0:Math.floor(o/2);function g(e){for(var t=e-u,o=u;o<e;o++){var c=i[o];12!==c&&2!==c||(t-=1)}a.length||(m=function(){var e=0;if(0===f)return e;if(p)for(var t=0;t<i.length;t++){var o=i[t];if(o==n)e+=1;else{if(o!=r){if(o==l)continue;break}e+=s}}return d&&!1!==p&&(e+=s),Math.min(e,f)}(),a.indent=m),h+=t,a.push(h),u=e}for(var m=0;c-u>o-m;){var v=u+o-m;if(i[v-1]>=n&&i[v]>=n)g(v);else if(i[v]!=e&&i[v]!=t){for(var _=Math.max(v-(o-(o>>2)),u-1);v>_&&i[v]<e;)v--;if(d){for(;v>_&&i[v]<e;)v--;for(;v>_&&9==i[v];)v--}else for(;v>_&&i[v]<n;)v--;v>_?g(++v):(2==i[v=u+o]&&v--,g(v-m))}else{for(;v!=u-1&&i[v]!=e;v--);if(v>u){g(v);continue}for(v=u+o;v<i.length&&i[v]==t;v++);if(v==i.length)break;g(v)}}return a},this.$getDisplayTokens=function(e,t){var i,o=[];t=t||0;for(var s=0;s<e.length;s++){var a=e.charCodeAt(s);if(9==a){i=this.getScreenTabSize(o.length+t),o.push(r);for(var c=1;c<i;c++)o.push(l)}else 32==a?o.push(n):a>39&&a<48||a>57&&a<64?o.push(9):a>=4352&&h(a)?o.push(1,2):o.push(1)}return o},this.$getStringScreenWidth=function(e,t,n){if(0==t)return[0,0];var i,o;for(null==t&&(t=1/0),n=n||0,o=0;o<e.length&&(9==(i=e.charCodeAt(o))?n+=this.getScreenTabSize(n):i>=4352&&h(i)?n+=2:n+=1,!(n>t));o++);return[n,o]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var i,o,r=0,s=0,a=0,l=0,c=this.$screenRowCache,u=this.$getRowCacheIndex(c,e),h=c.length;if(h&&u>=0){a=c[u],r=this.$docRowCache[u];var d=e>c[h-1]}else d=!h;for(var p=this.getLength()-1,f=this.getNextFoldLine(r),g=f?f.start.row:1/0;a<=e&&!(a+(l=this.getRowLength(r))>e||r>=p);)a+=l,++r>g&&(r=f.end.row+1,g=(f=this.getNextFoldLine(r,f))?f.start.row:1/0),d&&(this.$docRowCache.push(r),this.$screenRowCache.push(a));if(f&&f.start.row<=r)i=this.getFoldDisplayLine(f),r=f.start.row;else{if(a+l<=e||r>p)return{row:p,column:this.getLine(p).length};i=this.getLine(r),f=null}var m=0,v=Math.floor(e-a);if(this.$useWrapMode){var _=this.$wrapData[r];_&&(o=_[v],v>0&&_.length&&(m=_.indent,s=_[v-1]||_[_.length-1],i=i.substring(s)))}return void 0!==n&&this.$bidiHandler.isBidiRow(a+v,r,v)&&(t=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(i,t-m)[1],this.$useWrapMode&&s>=o&&(s=o-1),f?f.idxToPosition(s):{row:r,column:s}},this.documentToScreenPosition=function(e,t){if(void 0===t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var i,o=0,r=null;(i=this.getFoldAt(e,t,1))&&(e=i.start.row,t=i.start.column);var s,a=0,l=this.$docRowCache,c=this.$getRowCacheIndex(l,e),u=l.length;if(u&&c>=0){a=l[c],o=this.$screenRowCache[c];var h=e>l[u-1]}else h=!u;for(var d=this.getNextFoldLine(a),p=d?d.start.row:1/0;a<e;){if(a>=p){if((s=d.end.row+1)>e)break;p=(d=this.getNextFoldLine(s,d))?d.start.row:1/0}else s=a+1;o+=this.getRowLength(a),a=s,h&&(this.$docRowCache.push(a),this.$screenRowCache.push(o))}var f="";d&&a>=p?(f=this.getFoldDisplayLine(d,e,t),r=d.start.row):(f=this.getLine(e).substring(0,t),r=e);var g=0;if(this.$useWrapMode){var m=this.$wrapData[r];if(m){for(var v=0;f.length>=m[v];)o++,v++;f=f.substring(m[v-1]||0,f.length),g=v>0?m.indent:0}}return{row:o,column:g+this.$getStringScreenWidth(f)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,o=(a=0,(t=this.$foldData[a++])?t.start.row:1/0);i<n;){var r=this.$wrapData[i];e+=r?r.length+1:1,++i>o&&(i=t.end.row+1,o=(t=this.$foldData[a++])?t.start.row:1/0)}else{e=this.getLength();for(var s=this.$foldData,a=0;a<s.length;a++)e-=(t=s[a]).end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,n,i){if(0===n)return[0,0];var o,r;for(n||(n=1/0),i=i||0,r=0;r<t.length&&!((i+="\t"===(o=t.charAt(r))?this.getScreenTabSize(i):e.getCharacterWidth(o))>n);r++);return[i,r]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=h}.call(f.prototype),e("./edit_session/folding").Folding.call(f.prototype),e("./edit_session/bracket_match").BracketMatch.call(f.prototype),s.defineOptions(f.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e)if(this.$wrap=e,e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){(e=parseInt(e))>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=f})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(e,t,n){"use strict";var i=e("./lib/lang"),o=e("./lib/oop"),r=e("./range").Range,s=function(){this.$options={}};(function(){this.set=function(e){return o.mixin(this.$options,e),this},this.getOptions=function(){return i.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var i=null;return n.forEach((function(e,n,o,s){return i=new r(e,n,o,s),!(n==s&&t.start&&t.start.start&&0!=t.skipCurrent&&i.isEqual(t.start))||(i=null,!1)})),i},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,o=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),s=[],a=t.re;if(t.$isMultiLine){var l,c=a.length,u=o.length-c;e:for(var h=a.offset||0;h<=u;h++){for(var d=0;d<c;d++)if(-1==o[h+d].search(a[d]))continue e;var p=o[h],f=o[h+c-1],g=p.length-p.match(a[0])[0].length,m=f.match(a[c-1])[0].length;l&&l.end.row===h&&l.end.column>g||(s.push(l=new r(h,g,h+c-1,m)),c>2&&(h=h+c-2))}}else for(var v=0;v<o.length;v++){var _=i.getMatchOffsets(o[v],a);for(d=0;d<_.length;d++){var y=_[d];s.push(new r(v,y.offset,v,y.offset+y.length))}}if(n){var b=n.start.column,T=n.start.column;for(v=0,d=s.length-1;v<d&&s[v].start.column<b&&s[v].start.row==n.start.row;)v++;for(;v<d&&s[d].end.column>T&&s[d].end.row==n.end.row;)d--;for(s=s.slice(v,d+1),v=0,d=s.length;v<d;v++)s[v].start.row+=n.start.row,s[v].end.row+=n.start.row}return s},this.replace=function(e,t){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(i){var o=i.exec(e);if(!o||o[0].length!=e.length)return null;if(t=e.replace(i,t),n.preserveCase){t=t.split("");for(var r=Math.min(e.length,e.length);r--;){var s=e[r];s&&s.toLowerCase()!=s?t[r]=t[r].toUpperCase():t[r]=t[r].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=i.escapeRegExp(n)),e.wholeWord&&(n=function(e,t){function n(e){return/\w/.test(e)||t.regExp?"\\b":""}return n(e[0])+e+n(e[e.length-1])}(n,e));var o=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,o);try{var r=new RegExp(n,o)}catch(e){r=!1}return e.re=r},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],o=0;o<n.length;o++)try{i.push(new RegExp(n[o],t))}catch(e){return!1}return i},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var i=1==t.backwards,o=0!=t.skipCurrent,r=t.range,s=t.start;s||(s=r?r[i?"end":"start"]:e.selection.getRange()),s.start&&(s=s[o!=i?"end":"start"]);var a=r?r.start.row:0,l=r?r.end.row:e.getLength()-1;if(i)var c=function(e){var n=s.row;if(!h(n,s.column,e)){for(n--;n>=a;n--)if(h(n,Number.MAX_VALUE,e))return;if(0!=t.wrap)for(n=l,a=s.row;n>=a;n--)if(h(n,Number.MAX_VALUE,e))return}};else c=function(e){var n=s.row;if(!h(n,s.column,e)){for(n+=1;n<=l;n++)if(h(n,0,e))return;if(0!=t.wrap)for(n=a,l=s.row;n<=l;n++)if(h(n,0,e))return}};if(t.$isMultiLine)var u=n.length,h=function(t,o,r){var s=i?t-u+1:t;if(!(s<0)){var a=e.getLine(s),l=a.search(n[0]);if(!(!i&&l<o||-1===l)){for(var c=1;c<u;c++)if(-1==(a=e.getLine(s+c)).search(n[c]))return;var h=a.match(n[u-1])[0].length;if(!(i&&h>o))return!!r(s,l,s+u-1,h)||void 0}}};else if(i)h=function(t,i,o){var r,s=e.getLine(t),a=[],l=0;for(n.lastIndex=0;r=n.exec(s);){var c=r[0].length;if(l=r.index,!c){if(l>=s.length)break;n.lastIndex=l+=1}if(r.index+c>i)break;a.push(r.index,c)}for(var u=a.length-1;u>=0;u-=2){var h=a[u-1];if(o(t,h,t,h+(c=a[u])))return!0}};else h=function(t,i,o){var r,s,a=e.getLine(t);for(n.lastIndex=i;s=n.exec(a);){var l=s[0].length;if(o(t,r=s.index,t,r+l))return!0;if(!l&&(n.lastIndex=r+=1,r>=a.length))return!1}};return{forEach:c}}}).call(s.prototype),t.Search=s})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/keys"),o=e("../lib/useragent"),r=i.KEY_MODS;function s(e,t){this.platform=t||(o.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function a(e,t){s.call(this,e,t),this.$singleCommand=!1}a.prototype=s.prototype,function(){function e(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&("string"==typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var i=this.commandKeyBinding;for(var o in i){var r=i[o];if(r==e)delete i[o];else if(Array.isArray(r)){var s=r.indexOf(e);-1!=s&&(r.splice(s,1),1==r.length&&(i[o]=r[0]))}}},this.bindKey=function(e,t,n){if("object"==typeof e&&e&&(null==n&&(n=e.position),e=e[this.platform]),e)return"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach((function(e){var i="";if(-1!=e.indexOf(" ")){var o=e.split(/\s+/);e=o.pop(),o.forEach((function(e){var t=this.parseKeys(e),n=r[t.hashId]+t.key;i+=(i?" ":"")+n,this._addCommandToBinding(i,"chainKeys")}),this),i+=" "}var s=this.parseKeys(e),a=r[s.hashId]+s.key;this._addCommandToBinding(i+a,t,n)}),this)},this._addCommandToBinding=function(t,n,i){var o,r=this.commandKeyBinding;if(n)if(!r[t]||this.$singleCommand)r[t]=n;else{Array.isArray(r[t])?-1!=(o=r[t].indexOf(n))&&r[t].splice(o,1):r[t]=[r[t]],"number"!=typeof i&&(i=e(n));var s=r[t];for(o=0;o<s.length;o++){if(e(s[o])>i)break}s.splice(o,0,n)}else delete r[t]},this.addCommands=function(e){e&&Object.keys(e).forEach((function(t){var n=e[t];if(n){if("string"==typeof n)return this.bindKey(n,t);"function"==typeof n&&(n={exec:n}),"object"==typeof n&&(n.name||(n.name=t),this.addCommand(n))}}),this)},this.removeCommands=function(e){Object.keys(e).forEach((function(t){this.removeCommand(e[t])}),this)},this.bindKeys=function(e){Object.keys(e).forEach((function(t){this.bindKey(t,e[t])}),this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(e){return e})),n=t.pop(),o=i[n];if(i.FUNCTION_KEYS[o])n=i.FUNCTION_KEYS[o].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var r=0,s=t.length;s--;){var a=i.KEY_MODS[t[s]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+t[s]+" in "+e),!1;r|=a}return{key:n,hashId:r}},this.findKeyCommand=function(e,t){var n=r[e]+t;return this.commandKeyBinding[n]},this.handleKeyboard=function(e,t,n,i){if(!(i<0)){var o=r[t]+n,s=this.commandKeyBinding[o];return e.$keyChain&&(e.$keyChain+=" "+o,s=this.commandKeyBinding[e.$keyChain]||s),!s||"chainKeys"!=s&&"chainKeys"!=s[s.length-1]?(e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||i>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-o.length-1)),{command:s}):(e.$keyChain=e.$keyChain||o,{command:"null"})}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(s.prototype),t.HashHandler=s,t.MultiHashHandler=a})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("../keyboard/hash_handler").MultiHashHandler,r=e("../lib/event_emitter").EventEmitter,s=function(e,t){o.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",(function(e){return e.command.exec(e.editor,e.args||{})}))};i.inherits(s,o),function(){i.implement(this,r),this.exec=function(e,t,n){if(Array.isArray(e)){for(var i=e.length;i--;)if(this.exec(e[i],t,n))return!0;return!1}if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var o={editor:t,command:e,args:n};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),!1!==o.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach((function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map((function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e}))}}.call(s.prototype),t.CommandManager=s})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(e,t,n){"use strict";var i=e("../lib/lang"),o=e("../config"),r=e("../range").Range;function s(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",bindKey:s("Ctrl-,","Command-,"),exec:function(e){o.loadModule("ace/ext/settings_menu",(function(t){t.init(e),e.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:s("Alt-E","F4"),exec:function(e){o.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:s("Alt-Shift-E","Shift-F4"),exec:function(e){o.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:s("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:s(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:s("Ctrl-L","Command-L"),exec:function(e,t){"number"!=typeof t||isNaN(t)||e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:s("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:s("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:s("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:s("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:s("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:s("Ctrl-F","Command-F"),exec:function(e){o.loadModule("ace/ext/searchbox",(function(t){t.Search(e)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:s("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:s("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:s("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:s("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:s("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:s("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:s("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:s("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:s("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:s("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:s("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:s("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:s("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:s("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:s(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:s(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:s("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:s("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:s("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:s("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:s("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",t),t.isEmpty()||e.session.remove(t),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:s("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:s("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(e){o.loadModule("ace/ext/searchbox",(function(t){t.Search(e,!0)}))}},{name:"undo",description:"Undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:s("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:s("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:s("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:s("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:s("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:s("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:s("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(i.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:s(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:s("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",description:"Expand to line",bindKey:s("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:s(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),o=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),s=e.session.doc.getLine(n.row).length,a=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,l=e.session.doc.getLine(n.row),c=n.row+1;c<=o.row+1;c++){var u=i.stringTrimLeft(i.stringTrimRight(e.session.doc.getLine(c)));0!==u.length&&(u=" "+u),l+=u}o.row+1<e.session.doc.getLength()-1&&(l+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new r(n.row,0,o.row+2,0),l),a>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+a)):(s=e.session.doc.getLine(n.row).length>s?s+1:s,e.selection.moveCursorTo(n.row,s))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:s(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,i=e.selection.rangeList.ranges,o=[];i.length<1&&(i=[e.selection.getRange()]);for(var s=0;s<i.length;s++)s==i.length-1&&(i[s].end.row===t&&i[s].end.column===n||o.push(new r(i[s].end.row,i[s].end.column,t,n))),0===s?0===i[s].start.row&&0===i[s].start.column||o.push(new r(0,0,i[s].start.row,i[s].start.column)):o.push(new r(i[s-1].end.row,i[s-1].end.column,i[s].start.row,i[s].start.column));e.exitMultiSelectMode(),e.clearSelection();for(s=0;s<o.length;s++)e.selection.addRange(o[s],!1)},readOnly:!0,scrollIntoView:"none"},{name:"openCommandPallete",description:"Open command pallete",bindKey:s("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:s(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}]})),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],(function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var i=e("./lib/oop"),o=e("./lib/dom"),r=e("./lib/lang"),s=e("./lib/useragent"),a=e("./keyboard/textinput").TextInput,l=e("./mouse/mouse_handler").MouseHandler,c=e("./mouse/fold_handler").FoldHandler,u=e("./keyboard/keybinding").KeyBinding,h=e("./edit_session").EditSession,d=e("./search").Search,p=e("./range").Range,f=e("./lib/event_emitter").EventEmitter,g=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,v=e("./config"),_=e("./token_iterator").TokenIterator,y=e("./clipboard"),b=function(e,t,n){var i=e.getContainerElement();this.container=i,this.renderer=e,this.id="editor"+ ++b.$uid,this.commands=new g(s.isMac?"mac":"win",m),"object"==typeof document&&(this.textInput=new a(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new l(this),new c(this)),this.keyBinding=new u(this),this.$search=(new d).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=r.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(e,t){t._$emitInputEvent.schedule(31)})),this.setSession(t||n&&n.session||new h("")),v.resetOptions(this),n&&this.setOptions(n),v._signal("editor",this)};b.$uid=0,function(){i.implement(this,f),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=r.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp){if(e&&!1===e.returnValue)return this.curOp=null;if(1==e&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),o=this.renderer.layerConfig;(i.start.row>=o.lastRow||i.end.row<=o.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var r=this.selection.toJSON();this.curOp.selectionAfter=r,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(r),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,i=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var o=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(o)||/\s/.test(t.args)),this.mergeNextCommand=!0}else i=i&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(i=!1),i?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"==typeof e&&"ace"!=e){this.$keybindingId=e;var n=this;v.loadModule(["keybinding",e],(function(i){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(i&&i.handler),t&&t()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout((function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=t.findMatchingBracket(e.getCursorPosition());if(n)var i=new p(n.row,n.column,n.row,n.column+1);else if(t.$mode.getMatching)i=t.$mode.getMatching(e.session);i&&(t.$bracketHighlight=t.addMarker(i,"ace_bracket","text"))}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout((function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=e.getCursorPosition(),i=new _(e.session,n.row,n.column),o=i.getCurrentToken();if(!o||!/\b(?:tag-open|tag-name)/.test(o.type))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);if(-1==o.type.indexOf("tag-open")||(o=i.stepForward())){var r=o.value,s=0,a=i.stepBackward();if("<"==a.value)do{a=o,(o=i.stepForward())&&o.value===r&&-1!==o.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--)}while(o&&s>=0);else{do{o=a,a=i.stepBackward(),o&&o.value===r&&-1!==o.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--)}while(a&&s<=0);i.stepForward()}if(!o)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var l=i.getCurrentTokenRow(),c=i.getCurrentTokenColumn(),u=new p(l,c,l,c+o.value.length),h=t.$backMarkers[t.$tagHighlight];t.$tagHighlight&&null!=h&&0!==u.compareRange(h.range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),t.$tagHighlight||(t.$tagHighlight=t.addMarker(u,"ace_bracket","text"))}}}),50)}},this.focus=function(){var e=this;setTimeout((function(){e.isFocused()||e.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(e=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var n=new p(e.row,e.column,e.row,1/0);n.id=t.addMarker(n,"ace_active-line","screenLine"),t.$highlightLineMarker=n}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),i=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",i)}var o=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(o),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column,i=t.end.column,o=e.getLine(t.start.row),r=o.substring(n,i);if(!(r.length>5e3)&&/[\w\d]/.test(r)){var s=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:r}),a=o.substring(n-1,i+1);if(s.test(a))return s}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;for(var i=this.selection.getAllRanges(),o=0;o<i.length;o++){var r=i[o];o&&i[o-1].start.row==r.start.row||(e+=this.session.getLine(r.start.row)+t)}}var s={text:e};return this._signal("copy",s),y.lineMode=n?s.text:"",s.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text,n=t==y.lineMode,i=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?i.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach((function(e){i.insert({row:e.start.row,column:0},t)}));else{var o=t.split(/\r\n|\r|\n/),r=this.selection.rangeList.ranges,s=!(2!=o.length||o[0]&&o[1]);if(o.length!=r.length||s)return this.commands.exec("insertstring",this,t);for(var a=r.length;a--;){var l=r[a];l.isEmpty()||i.remove(l),i.insert(l.start,o[a])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,i=n.getMode(),o=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var r=i.transformAction(n.getState(o.row),"insertion",this,n,e);r&&(e!==r.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=r.text)}if("\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==e.indexOf("\n")){(s=new p.fromPoints(o,o)).end.column+=e.length,this.session.remove(s)}}else{var s=this.getSelectionRange();o=this.session.remove(s),this.clearSelection()}if("\n"==e||"\r\n"==e){var a=n.getLine(o.row);if(o.column>a.search(/\S|$/)){var l=a.substr(o.column).search(/\S|$/);n.doc.removeInLine(o.row,o.column,o.column+l)}}this.clearSelection();var c=o.column,u=n.getState(o.row),h=(a=n.getLine(o.row),i.checkOutdent(u,a,e));if(n.insert(o,e),r&&r.selection&&(2==r.selection.length?this.selection.setSelectionRange(new p(o.row,c+r.selection[0],o.row,c+r.selection[1])):this.selection.setSelectionRange(new p(o.row+r.selection[0],r.selection[1],o.row+r.selection[2],r.selection[3]))),n.getDocument().isNewLine(e)){var d=i.getNextLineIndent(u,a.slice(0,o.column),n.getTabString());n.insert({row:o.row+1,column:0},d)}h&&i.autoOutdent(u,n,o.row)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(e,t){var n;(t.extendLeft||t.extendRight)&&((n=this.selection.getRange()).start.column-=t.extendLeft,n.end.column+=t.extendRight,this.selection.setRange(n),e||n.isEmpty()||this.remove());(!e&&this.selection.isEmpty()||this.insert(e,!0),t.restoreStart||t.restoreEnd)&&((n=this.selection.getRange()).start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(e,t,n){return this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(t.start.row),o=n.getMode().transformAction(i,"deletion",this,n,t);if(0===t.end.column){var r=n.getTextRange(t);if("\n"==r[r.length-1]){var s=n.getLine(t.end.row);/^\s+$/.test(s)&&(t.end.column=s.length)}}o&&(t=o)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,i,o=this.session.getLine(e.row);t<o.length?(n=o.charAt(t)+o.charAt(t-1),i=new p(e.row,t-1,e.row,t+1)):(n=o.charAt(t-1)+o.charAt(t-2),i=new p(e.row,t-2,e.row,t)),this.session.replace(i,n),this.session.selection.moveToPosition(i.end)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row)){if(t.start.column<t.end.column){var n=e.getTextRange(t);if(!/^\s+$/.test(n)){u=this.$getSelectedRows();return void e.indentRows(u.first,u.last,"\t")}}var i=e.getLine(t.start.row),o=t.start,s=e.getTabSize(),a=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var l=s-a%s,c=r.stringRepeat(" ",l);else{for(l=a%s;" "==i[t.start.column-1]&&l;)t.start.column--,l--;this.selection.setSelectionRange(t),c="\t"}return this.insert(c)}var u=this.$getSelectedRows();e.indentRows(u.first,u.last,"\t")},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,n=[],i=e.first;i<=e.last;i++)n.push(t.getLine(i));n.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}));var o=new p(0,0,0,0);for(i=e.first;i<=e.last;i++){var r=t.getLine(i);o.start.row=i,o.end.row=i,o.end.column=r.length,t.replace(o,n[i-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(e);n.lastIndex<t;){var o=n.exec(i);if(o.index<=t&&o.index+o[0].length>=t)return{value:o[0],start:o.index,end:o.index+o[0].length}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,i=new p(t,n-1,t,n),o=this.session.getTextRange(i);if(!isNaN(parseFloat(o))&&isFinite(o)){var r=this.getNumberAt(t,n);if(r){var s=r.value.indexOf(".")>=0?r.start+r.value.indexOf(".")+1:r.end,a=r.start+r.value.length-s,l=parseFloat(r.value);l*=Math.pow(10,a),s!==r.end&&n<s?e*=Math.pow(10,r.end-n-1):e*=Math.pow(10,r.end-n),l+=e;var c=(l/=Math.pow(10,a)).toFixed(a),u=new p(t,r.start,t,r.end);this.session.replace(u,c),this.moveCursorTo(t,Math.max(r.start+1,n+c.length-r.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),i=this.selection.getWordRange().start.column,o=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),s=t-i-1;s<0&&(s=0);var a=0,l=0,c=this;n.match(/[A-Za-z0-9_]+/)&&o.forEach((function(t,o){l=a+t.length,s>=a&&s<=l&&(n=t,c.selection.clearSelection(),c.moveCursorTo(e,a+i),c.selection.selectTo(e,l+i)),a=l}));for(var u,h=this.$toggleWordPairs,d=0;d<h.length;d++)for(var p=h[d],f=0;f<=1;f++){var g=+!f,m=n.match(new RegExp("^\\s?_?("+r.escapeRegExp(p[f])+")\\s?$","i"));if(m)n.match(new RegExp("([_]|^|\\s)("+r.escapeRegExp(m[1])+")($|\\s)","g"))&&(u=n.replace(new RegExp(r.escapeRegExp(p[f]),"i"),(function(e){var t=p[g];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+p[g].charAt(0).toUpperCase()+t.substr(1)),t})),this.insert(u),u="")}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),i=e.isBackwards();if(n.isEmpty()){var o=n.start.row;t.duplicateLines(o,o)}else{var r=i?n.start:n.end,s=t.insert(r,t.getTextRange(n),!1);n.start=r,n.end=s,e.setSelectionRange(n,i)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,i,o=this.selection;if(!o.inMultiSelectMode||this.inVirtualSelectionMode){var r=o.toOrientedRange();n=this.$getSelectedRows(r),i=this.session.$moveLines(n.first,n.last,t?0:e),t&&-1==e&&(i=0),r.moveBy(i,0),o.fromOrientedRange(r)}else{var s=o.rangeList.ranges;o.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,l=0,c=s.length,u=0;u<c;u++){var h=u;s[u].moveBy(a,0);for(var d=(n=this.$getSelectedRows(s[u])).first,p=n.last;++u<c;){l&&s[u].moveBy(l,0);var f=this.$getSelectedRows(s[u]);if(t&&f.first!=p)break;if(!t&&f.first>p+1)break;p=f.last}for(u--,a=this.session.$moveLines(d,p,t?0:e),t&&-1==e&&(h=u+1);h<=u;)s[h].moveBy(a,0),h++;t||(a=0),l+=a}o.fromOrientedRange(o.ranges[0]),o.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,i=this.renderer.layerConfig,o=e*Math.floor(i.height/i.lineHeight);!0===t?this.selection.$moveSelection((function(){this.moveCursorBy(o,0)})):!1===t&&(this.selection.moveCursorBy(o,0),this.selection.clearSelection());var r=n.scrollTop;n.scrollBy(0,o*i.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(r)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,i){this.renderer.scrollToLine(e,t,n,i)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),i=new _(this.session,n.row,n.column),o=i.getCurrentToken(),r=o||i.stepForward();if(r){var s,a,l=!1,c={},u=n.column-r.start,h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(r.value.match(/[{}()\[\]]/g)){for(;u<r.value.length&&!l;u++)if(h[r.value[u]])switch(a=h[r.value[u]]+"."+r.type.replace("rparen","lparen"),isNaN(c[a])&&(c[a]=0),r.value[u]){case"(":case"[":case"{":c[a]++;break;case")":case"]":case"}":c[a]--,-1===c[a]&&(s="bracket",l=!0)}}else-1!==r.type.indexOf("tag-name")&&(isNaN(c[r.value])&&(c[r.value]=0),"<"===o.value?c[r.value]++:"</"===o.value&&c[r.value]--,-1===c[r.value]&&(s="tag",l=!0));l||(o=r,r=i.stepForward(),u=0)}while(r&&!l);if(s){var d,f;if("bracket"===s)(d=this.session.getBracketRange(n))||(f=(d=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1)).start,(t||f.row===n.row&&Math.abs(f.column-n.column)<2)&&(d=this.session.getBracketRange(f)));else if("tag"===s){if(!r||-1===r.type.indexOf("tag-name"))return;var g=r.value;if(0===(d=new p(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2)).compare(n.row,n.column)){l=!1;do{r=o,(o=i.stepBackward())&&(-1!==o.type.indexOf("tag-close")&&d.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1),r.value===g&&-1!==r.type.indexOf("tag-name")&&("<"===o.value?c[g]++:"</"===o.value&&c[g]--,0===c[g]&&(l=!0)))}while(o&&!l)}r&&r.type.indexOf("tag-name")&&(f=d.start).row==n.row&&Math.abs(f.column-n.column)<2&&(f=d.end)}(f=d&&d.cursor||f)&&(e?d&&t?this.selection.setRange(d):d&&d.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(f.row,f.column):this.selection.moveTo(f.row,f.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,e)&&(i=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),i):i},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;var o=this.getSelectionRange();this.selection.moveTo(0,0);for(var r=n.length-1;r>=0;--r)this.$tryReplace(n[r],e)&&i++;return this.selection.setSelectionRange(o),i},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return null!==(t=this.$search.replace(n,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&i.mixin(t,e);var o=this.selection.getRange();null==t.needle&&((e=this.session.getTextRange(o)||this.$search.$options.needle)||(o=this.session.getWordRange(o.start.row,o.start.column),e=this.session.getTextRange(o)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:o});var r=this.$search.find(this.session);return t.preventScroll?r:r?(this.revealRange(r,n),r):(t.backwards?o.start=o.end:o.end=o.start,void this.selection.setRange(o))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,i=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var o=this.$scrollAnchor;o.style.cssText="position:absolute",this.container.insertBefore(o,this.container.firstChild);var r=this.on("changeSelection",(function(){i=!0})),s=this.renderer.on("beforeRender",(function(){i&&(t=n.renderer.container.getBoundingClientRect())})),a=this.renderer.on("afterRender",(function(){if(i&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,r=e.$cursorLayer.$pixelPos,s=e.layerConfig,a=r.top-s.offset;null!=(i=r.top>=0&&a+t.top<0||!(r.top<s.height&&r.top+t.top+s.lineHeight>window.innerHeight)&&null)&&(o.style.top=a+"px",o.style.left=r.left+"px",o.style.height=s.lineHeight+"px",o.scrollIntoView(i)),i=t=null}}));this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",r),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",s))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,o.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))},this.prompt=function(e,t,n){var i=this;v.loadModule("./ext/prompt",(function(o){o.prompt(i,e,t,n)}))}}.call(b.prototype),v.defineOptions(b.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?T.attach(this):T.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?T.attach(this):T.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.renderer.$composition||this.getValue();if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),o.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!e&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),o.addCssClass(this.container,"ace_hasPlaceholder");var t=o.createElement("div");t.className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var T={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"·":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=b})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){this.$fromUndo||e!=this.$lastDelta&&(!1!==t&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev),"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e),this.lastDeltas.push(e))},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,i=n.length;i--;){var o=n[i][0];if(o.id<=e)break;o.id<t&&(o.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){for(var n=this.selections,i=n.length;i--;){var o=n[i];if(o.rev<e)return t&&(o=n[i+1]),o}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,i=null,o=0,r=n.length;r--;){var s=n[r][0];if(s.id<t&&!i&&(i=r+1),s.id<=e){o=r+1;break}}return n.slice(o,i)},this.getChangedRanges=function(e,t){null==t&&(t=this.$rev+1)},this.getChangedLines=function(e,t){null==t&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(function(e,t){for(var n=t;n--;){var i=e[n];if(i&&!i[0].ignore){for(;n<t-1;){var o=u(e[n],e[n+1]);e[n]=o[0],e[n+1]=o[1],n++}return!0}}}(n,n.length)){e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var i=n.pop(),o=null;return i&&i.length&&(o=e.undoChanges(i,t),this.$redoStack.push(i),this.$syncRev()),this.$fromUndo=!1,o}},this.redo=function(e,t){if(this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(e,t){for(var n=0;n<t.length;n++)for(var i=t[n],o=0;o<i.length;o++)g(e,i[o])}(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(e){e[0].id=++this.$maxRev}),this)}var i=this.$redoStack.pop(),o=null;return i&&(o=e.redoChanges(i,t),this.$undoStack.push(i),this.$syncRev()),this.$fromUndo=!1,o},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){null==e&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?a(e):a(this.$undoStack)+"\n---\n"+a(this.$redoStack)}}).call(i.prototype);var o=e("./range").Range,r=o.comparePoints;o.comparePoints;function s(e){return{row:e.row,column:e.column}}function a(e){if(e=e||this,Array.isArray(e))return e.map(a).join("\n");var t="";return e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(l).join("\n"):l(e.value)),e.start&&(t+=l(e)),(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")"),t}function l(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function c(e,t){var n="insert"==e.action,i="insert"==t.action;if(n&&i)if(r(t.start,e.end)>=0)d(t,e,-1);else{if(!(r(t.start,e.start)<=0))return null;d(e,t,1)}else if(n&&!i)if(r(t.start,e.end)>=0)d(t,e,-1);else{if(!(r(t.end,e.start)<=0))return null;d(e,t,-1)}else if(!n&&i)if(r(t.start,e.start)>=0)d(t,e,1);else{if(!(r(t.start,e.start)<=0))return null;d(e,t,1)}else if(!n&&!i)if(r(t.start,e.start)>=0)d(t,e,1);else{if(!(r(t.end,e.start)<=0))return null;d(e,t,-1)}return[t,e]}function u(e,t){for(var n=e.length;n--;)for(var i=0;i<t.length;i++)if(!c(e[n],t[i])){for(;n<e.length;){for(;i--;)c(t[i],e[n]);i=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function h(e,t){var n="insert"==e.action,i="insert"==t.action;if(n&&i)r(e.start,t.start)<0?d(t,e,1):d(e,t,1);else if(n&&!i)r(e.start,t.end)>=0?d(e,t,-1):r(e.start,t.start)<=0?d(t,e,1):(d(e,o.fromPoints(t.start,e.start),-1),d(t,e,1));else if(!n&&i)r(t.start,e.end)>=0?d(t,e,-1):r(t.start,e.start)<=0?d(e,t,1):(d(t,o.fromPoints(e.start,t.start),-1),d(e,t,1));else if(!n&&!i)if(r(t.start,e.end)>=0)d(t,e,-1);else{var s,a;if(!(r(t.end,e.start)<=0))return r(e.start,t.start)<0&&(s=e,e=f(e,t.start)),r(e.end,t.end)>0&&(a=f(e,t.end)),p(t.end,e.start,e.end,-1),a&&!s&&(e.lines=a.lines,e.start=a.start,e.end=a.end,a=e),[t,s,a].filter(Boolean);d(e,t,-1)}return[t,e]}function d(e,t,n){p(e.start,t.start,t.end,n),p(e.end,t.start,t.end,n)}function p(e,t,n,i){e.row==(1==i?t:n).row&&(e.column+=i*(n.column-t.column)),e.row+=i*(n.row-t.row)}function f(e,t){var n=e.lines,i=e.end;e.end=s(t);var o=e.end.row-e.start.row,r=n.splice(o,n.length),a=o?t.column:t.column-e.start.column;return n.push(r[0].substring(0,a)),r[0]=r[0].substr(a),{start:s(t),end:i,lines:r,action:e.action}}function g(e,t){t=function(e){return{start:s(e.start),end:s(e.end),action:e.action,lines:e.lines.slice()}}(t);for(var n=e.length;n--;){for(var i=e[n],o=0;o<i.length;o++){var r=h(i[o],t);t=r[0],2!=r.length&&(r[2]?(i.splice(o+1,1,r[1],r[2]),o++):r[1]||(i.splice(o,1),o--))}i.length||e.splice(n,1)}return e}t.UndoManager=i})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../lib/dom"),o=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){i.translate(this.element,0,-e.firstRowScreen*e.lineHeight%this.canvasHeight-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var i=t.firstRowScreen*t.lineHeight,o=Math.floor(i/this.canvasHeight);return n.documentToScreenRow(e,0)*t.lineHeight-o*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLength(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=i.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=i.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},this.createCell=function(e,t,n,o){var r=this.cellCache.pop();if(!r){var s=i.createElement("div");o&&o(s),this.element.appendChild(s),r={element:s,text:"",row:e}}return r.row=e,r}}).call(o.prototype),t.Lines=o})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],(function(e,t,n){"use strict";var i=e("../lib/dom"),o=e("../lib/oop"),r=e("../lib/lang"),s=e("../lib/event_emitter").EventEmitter,a=e("./lines").Lines,l=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new a(this.element),this.$lines.$offsetCoefficient=1};function c(e){var t=document.createTextNode("");e.appendChild(t);var n=i.createElement("span");return e.appendChild(n),e}(function(){o.implement(this,s),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],i=n.row,o=this.$annotations[i];o||(o=this.$annotations[i]={text:[]});var s=n.text;s=s?r.escapeHTML(s):n.html||"",-1===o.text.indexOf(s)&&o.text.push(s);var a=n.type;"error"==a?o.className=" ace_error":"warning"==a&&" ace_error"!=o.className?o.className=" ace_warning":"info"!=a||o.className||(o.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0===n);else if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{var i=new Array(n+1);i.unshift(t,1),this.$annotations.splice.apply(this.$annotations,i)}}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,i=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=i,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var o=t.getNextFoldLine(n),r=o?o.start.row:1/0,s=null,a=-1,l=n;;){if(l>r&&(l=o.end.row+1,r=(o=t.getNextFoldLine(l,o))?o.start.row:1/0),l>i){for(;this.$lines.getLength()>a+1;)this.$lines.pop();break}(s=this.$lines.get(++a))?s.row=l:(s=this.$lines.createCell(l,e,this.session,c),this.$lines.push(s)),this.$renderCell(s,e,o,l),l++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,i=t.$firstLineNumber,o=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(o=t.getLength()+i-1);var r=n?n.getWidth(t,o,e):o.toString().length*e.characterWidth,s=this.$padding||this.$computePadding();(r+=s.left+s.right)===this.gutterWidth||isNaN(r)||(this.gutterWidth=r,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",r))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var i=t[n];if(i.row>=this.$cursorRow){if(i.row>this.$cursorRow){var o=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&o&&o.start.row==t[n-1].row))break;i=t[n-1]}i.element.className="ace_gutter-active-line "+i.element.className,this.$cursorCell=i;break}}}}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),i=this.oldLastRow;if(this.oldLastRow=n,!t||i<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var o=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);o>0;o--)this.$lines.shift();if(i>n)for(o=this.session.getFoldedRowCount(n+1,i);o>0;o--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>i&&this.$lines.push(this.$renderLines(e,i+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){for(var i=[],o=t,r=this.session.getNextFoldLine(o),s=r?r.start.row:1/0;o>s&&(o=r.end.row+1,s=(r=this.session.getNextFoldLine(o,r))?r.start.row:1/0),!(o>n);){var a=this.$lines.createCell(o,e,this.session,c);this.$renderCell(a,e,r,o),i.push(a),o++}return i},this.$renderCell=function(e,t,n,o){var r=e.element,s=this.session,a=r.childNodes[0],l=r.childNodes[1],c=s.$firstLineNumber,u=s.$breakpoints,h=s.$decorations,d=s.gutterRenderer||this.$renderer,p=this.$showFoldWidgets&&s.foldWidgets,f=n?n.start.row:Number.MAX_VALUE,g="ace_gutter-cell ";if(this.$highlightGutterLine&&(o==this.$cursorRow||n&&o<this.$cursorRow&&o>=f&&this.$cursorRow<=n.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),u[o]&&(g+=u[o]),h[o]&&(g+=h[o]),this.$annotations[o]&&(g+=this.$annotations[o].className),r.className!=g&&(r.className=g),p){var m=p[o];null==m&&(m=p[o]=s.getFoldWidget(o))}if(m){g="ace_fold-widget ace_"+m;"start"==m&&o==f&&o<n.end.row?g+=" ace_closed":g+=" ace_open",l.className!=g&&(l.className=g);var v=t.lineHeight+"px";i.setStyle(l.style,"height",v),i.setStyle(l.style,"display","inline-block")}else l&&i.setStyle(l.style,"display","none");var _=(d?d.getText(s,o):o+c).toString();return _!==a.data&&(a.data=_),i.setStyle(e.element.style,"height",this.$lines.computeLineHeight(o,t,s)+"px"),i.setStyle(e.element.style,"top",this.$lines.computeLineTop(o,t,s)+"px"),e.text=_,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(l.prototype),t.Gutter=l})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../range").Range,o=e("../lib/dom"),r=function(e){this.element=o.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(e){var t;for(var n in this.config=e,this.i=0,this.markers){var i=this.markers[n];if(i.range){var o=i.range.clipRows(e.firstRow,e.lastRow);if(!o.isEmpty())if(o=o.toScreenRange(this.session),i.renderer){var r=this.$getTop(o.start.row,e),s=this.$padding+o.start.column*e.characterWidth;i.renderer(t,o,s,r,e)}else"fullLine"==i.type?this.drawFullLineMarker(t,o,i.clazz,e):"screenLine"==i.type?this.drawScreenLineMarker(t,o,i.clazz,e):o.isMultiLine()?"text"==i.type?this.drawTextMarker(t,o,i.clazz,e):this.drawMultiLineMarker(t,o,i.clazz,e):this.drawSingleLineMarker(t,o,i.clazz+" ace_start ace_br15",e)}else i.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,o,r){for(var s=this.session,a=t.start.row,l=t.end.row,c=a,u=0,h=0,d=s.getScreenLastRowColumn(c),p=new i(c,t.start.column,c,h);c<=l;c++)p.start.row=p.end.row=c,p.start.column=c==a?t.start.column:s.getRowWrapIndent(c),p.end.column=d,u=h,h=d,d=c+1<l?s.getScreenLastRowColumn(c+1):c==l?0:t.end.column,this.drawSingleLineMarker(e,p,n+(c==a?" ace_start":"")+" ace_br"+((c==a||c==a+1&&t.start.column?1:0)|(u<h?2:0)|(h>d?4:0)|(c==l?8:0)),o,c==l?0:1,r)},this.drawMultiLineMarker=function(e,t,n,i,o){var r=this.$padding,s=i.lineHeight,a=this.$getTop(t.start.row,i),l=r+t.start.column*i.characterWidth;(o=o||"",this.session.$bidiHandler.isBidiRow(t.start.row))?((c=t.clone()).end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(e,c,n+" ace_br1 ace_start",i,null,o)):this.elt(n+" ace_br1 ace_start","height:"+s+"px;right:0;top:"+a+"px;left:"+l+"px;"+(o||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var c;(c=t.clone()).start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(e,c,n+" ace_br12",i,null,o)}else{a=this.$getTop(t.end.row,i);var u=t.end.column*i.characterWidth;this.elt(n+" ace_br12","height:"+s+"px;width:"+u+"px;top:"+a+"px;left:"+r+"px;"+(o||""))}if(!((s=(t.end.row-t.start.row-1)*i.lineHeight)<=0)){a=this.$getTop(t.start.row+1,i);var h=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(h?" ace_br"+h:""),"height:"+s+"px;right:0;top:"+a+"px;left:"+r+"px;"+(o||""))}},this.drawSingleLineMarker=function(e,t,n,i,o,r){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,i,o,r);var s=i.lineHeight,a=(t.end.column+(o||0)-t.start.column)*i.characterWidth,l=this.$getTop(t.start.row,i),c=this.$padding+t.start.column*i.characterWidth;this.elt(n,"height:"+s+"px;width:"+a+"px;top:"+l+"px;left:"+c+"px;"+(r||""))},this.drawBidiSingleLineMarker=function(e,t,n,i,o,r){var s=i.lineHeight,a=this.$getTop(t.start.row,i),l=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach((function(e){this.elt(n,"height:"+s+"px;width:"+e.width+(o||0)+"px;top:"+a+"px;left:"+(l+e.left)+"px;"+(r||""))}),this)},this.drawFullLineMarker=function(e,t,n,i,o){var r=this.$getTop(t.start.row,i),s=i.lineHeight;t.start.row!=t.end.row&&(s+=this.$getTop(t.end.row,i)-r),this.elt(n,"height:"+s+"px;top:"+r+"px;left:0;right:0;"+(o||""))},this.drawScreenLineMarker=function(e,t,n,i,o){var r=this.$getTop(t.start.row,i),s=i.lineHeight;this.elt(n,"height:"+s+"px;top:"+r+"px;left:0;right:0;"+(o||""))}}).call(r.prototype),t.Marker=r})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("../lib/dom"),r=e("../lib/lang"),s=e("./lines").Lines,a=e("../lib/event_emitter").EventEmitter,l=function(e){this.dom=o,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)};(function(){i.implement(this,a),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="—",this.SPACE_CHAR="·",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,t="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++){if(this.showInvisibles)(i=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",i.textContent=r.stringRepeat(this.TAB_CHAR,n),t.push(i);else t.push(this.dom.createTextNode(r.stringRepeat(" ",n),this.element))}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i,o="ace_indent-guide",s="",a="";if(this.showInvisibles){o+=" ace_invisible",s=" ace_invisible_space",a=" ace_invisible_tab";var l=r.stringRepeat(this.SPACE_CHAR,this.tabSize),c=r.stringRepeat(this.TAB_CHAR,this.tabSize)}else c=l=r.stringRepeat(" ",this.tabSize);(i=this.dom.createElement("span")).className=o+s,i.textContent=l,this.$tabStrings[" "]=i,(i=this.dom.createElement("span")).className=o+a,i.textContent=c,this.$tabStrings["\t"]=i}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var i=Math.max(t,e.firstRow),o=Math.min(n,e.lastRow),r=this.element.childNodes,s=0,a=e.firstRow;a<i;a++){if(l=this.session.getFoldLine(a)){if(l.containsRow(i)){i=l.start.row;break}a=l.end.row}s++}for(var l,c=!1,u=(a=i,(l=this.session.getNextFoldLine(a))?l.start.row:1/0);a>u&&(a=l.end.row+1,u=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0),!(a>o);){var h=r[s++];if(h){this.dom.removeChildren(h),this.$renderLine(h,a,a==u&&l),c&&(h.style.top=this.$lines.computeLineTop(a,e,this.session)+"px");var d=e.lineHeight*this.session.getRowLength(a)+"px";h.style.height!=d&&(c=!0,h.style.height=d)}a++}if(c)for(;s<this.$lines.cells.length;){var p=this.$lines.cells[s++];p.element.style.top=this.$lines.computeLineTop(p.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,i=t?t.lastRow:-1;if(!t||i<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var o=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);o>0;o--)this.$lines.shift();if(t.lastRow>e.lastRow)for(o=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);o>0;o--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,n){for(var i=[],r=t,s=this.session.getNextFoldLine(r),a=s?s.start.row:1/0;r>a&&(r=s.end.row+1,a=(s=this.session.getNextFoldLine(r,s))?s.start.row:1/0),!(r>n);){var l=this.$lines.createCell(r,e,this.session),c=l.element;this.dom.removeChildren(c),o.setStyle(c.style,"height",this.$lines.computeLineHeight(r,e,this.session)+"px"),o.setStyle(c.style,"top",this.$lines.computeLineTop(r,e,this.session)+"px"),this.$renderLine(c,r,r==a&&s),this.$useLineGroups()?c.className="ace_line_group":c.className="ace_line",i.push(l),r++}return i},this.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,n=e.lastRow,i=this.$lines;i.getLength();)i.pop();i.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,i){for(var o,s=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,a=this.dom.createFragment(this.element),l=0;o=s.exec(i);){var c=o[1],u=o[2],h=o[3],d=o[4],p=o[5];if(this.showInvisibles||!u){var f=l!=o.index?i.slice(l,o.index):"";if(l=o.index+o[0].length,f&&a.appendChild(this.dom.createTextNode(f,this.element)),c){var g=this.session.getScreenTabSize(t+o.index);a.appendChild(this.$tabStrings[g].cloneNode(!0)),t+=g-1}else if(u){if(this.showInvisibles)(v=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",v.textContent=r.stringRepeat(this.SPACE_CHAR,u.length),a.appendChild(v);else a.appendChild(this.com.createTextNode(u,this.element))}else if(h){(v=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",v.textContent=r.stringRepeat(this.SPACE_CHAR,h.length),a.appendChild(v)}else if(d){t+=1,(v=this.dom.createElement("span")).style.width=2*this.config.characterWidth+"px",v.className=this.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",v.textContent=this.showInvisibles?this.SPACE_CHAR:d,a.appendChild(v)}else if(p){t+=1,(v=this.dom.createElement("span")).style.width=2*this.config.characterWidth+"px",v.className="ace_cjk",v.textContent=p,a.appendChild(v)}}}if(a.appendChild(this.dom.createTextNode(l?i.slice(l):i,this.element)),this.$textToken[n.type])e.appendChild(a);else{var m="ace_"+n.type.replace(/\./g," ace_"),v=this.dom.createElement("span");"fold"==n.type&&(v.style.width=n.value.length*this.config.characterWidth+"px"),v.className=m,v.appendChild(a),e.appendChild(v)}return t+i.length},this.renderIndentGuide=function(e,t,n){var i=t.search(this.$indentGuideRe);if(i<=0||i>=n)return t;if(" "==t[0]){for(var o=(i-=i%this.tabSize)/this.tabSize,r=0;r<o;r++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(i)}if("\t"==t[0]){for(r=0;r<i;r++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return t.substr(i)}return t},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,n){var i=0,o=0,s=n[0],a=0,l=this.$createLineElement();e.appendChild(l);for(var c=0;c<t.length;c++){var u=t[c],h=u.value;if(0==c&&this.displayIndentGuides){if(i=h.length,!(h=this.renderIndentGuide(l,h,s)))continue;i-=h.length}if(i+h.length<s)a=this.$renderToken(l,a,u,h),i+=h.length;else{for(;i+h.length>=s;)a=this.$renderToken(l,a,u,h.substring(0,s-i)),h=h.substring(s-i),i=s,l=this.$createLineElement(),e.appendChild(l),l.appendChild(this.dom.createTextNode(r.stringRepeat(" ",n.indent),this.element)),a=0,s=n[++o]||Number.MAX_VALUE;0!=h.length&&(i+=h.length,a=this.$renderToken(l,a,u,h))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(l,a,null,"",!0)},this.$renderSimpleLine=function(e,t){var n=0,i=t[0],o=i.value;this.displayIndentGuides&&(o=this.renderIndentGuide(e,o)),o&&(n=this.$renderToken(e,n,i,o));for(var r=1;r<t.length;r++){if(n+(o=(i=t[r]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,i,o);n=this.$renderToken(e,n,i,o)}},this.$renderOverflowMessage=function(e,t,n,i,o){n&&this.$renderToken(e,t,n,i.slice(0,this.MAX_LINE_LENGTH-t));var r=this.dom.createElement("span");r.className="ace_inline_button ace_keyword ace_toggle_wrap",r.textContent=o?"<hide>":"<click to see more...>",e.appendChild(r)},this.$renderLine=function(e,t,n){if(n||0==n||(n=this.session.getFoldLine(t)),n)var i=this.$getFoldLineTokens(t,n);else i=this.session.getTokens(t);var o=e;if(i.length){var r=this.session.getRowSplitData(t);if(r&&r.length){this.$renderWrappedLine(e,i,r);o=e.lastChild}else{o=e;this.$useLineGroups()&&(o=this.$createLineElement(),e.appendChild(o)),this.$renderSimpleLine(o,i)}}else this.$useLineGroups()&&(o=this.$createLineElement(),e.appendChild(o));if(this.showInvisibles&&o){n&&(t=n.end.row);var s=this.dom.createElement("span");s.className="ace_invisible ace_invisible_eol",s.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,o.appendChild(s)}},this.$getFoldLineTokens=function(e,t){var n=this.session,i=[];var o=n.getTokens(e);return t.walk((function(e,t,r,s,a){null!=e?i.push({type:"fold",value:e}):(a&&(o=n.getTokens(t)),o.length&&function(e,t,n){for(var o=0,r=0;r+e[o].value.length<t;)if(r+=e[o].value.length,++o==e.length)return;for(r!=t&&((s=e[o].value.substring(t-r)).length>n-t&&(s=s.substring(0,n-t)),i.push({type:e[o].type,value:s}),r=t+s.length,o+=1);r<n&&o<e.length;){var s;(s=e[o].value).length+r>n?i.push({type:e[o].type,value:s.substring(0,n-r)}):i.push(e[o]),r+=s.length,o+=1}}(o,s,r))}),t.end.row,this.session.getLine(t.end.row).length),i},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(l.prototype),t.Text=l})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../lib/dom"),o=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),i.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)i.setStyle(t[n].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){i.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){i.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,i.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=i.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,i.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,i.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&i.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout(function(){i.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)),i.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout((function(){e(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){e(!0),t()}),this.blinkInterval),t()}else this.$stopCssAnimation()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,o=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);n=0;for(var r=t.length;n<r;n++){var s=this.getPixelPosition(t[n].cursor,!0);if(!((s.top>e.height+e.offset||s.top<0)&&n>1)){var a=this.cursors[o++]||this.addCursor(),l=a.style;this.drawCursor?this.drawCursor(a,s,e,t[n],this.session):this.isCursorInView(s,e)?(i.setStyle(l,"display","block"),i.translate(a,s.left,s.top),i.setStyle(l,"width",Math.round(e.characterWidth)+"px"),i.setStyle(l,"height",e.lineHeight+"px")):i.setStyle(l,"display","none")}}for(;this.cursors.length>o;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=s,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?i.addCssClass(this.element,"ace_overwrite-cursors"):i.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(o.prototype),t.Cursor=o})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/dom"),r=e("./lib/event"),s=e("./lib/event_emitter").EventEmitter,a=function(e){this.element=o.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=o.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addListener(this.element,"scroll",this.onScroll.bind(this)),r.addListener(this.element,"mousedown",r.preventDefault)};(function(){i.implement(this,s),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(a.prototype);var l=function(e,t){a.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=o.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};i.inherits(l,a),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>32768?(this.coeff=32768/e,e=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(l.prototype);var c=function(e,t){a.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(c,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(c.prototype),t.ScrollBar=l,t.ScrollBarV=l,t.ScrollBarH=c,t.VScrollBar=l,t.HScrollBar=c})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(e,t,n){"use strict";var i=e("./lib/event"),o=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;if(t&&(i.blockIdle(100),n.changes=0,n.onRender(t)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(i.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(o.prototype),t.RenderLoop=o})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(e,t,n){var i=e("../lib/oop"),o=e("../lib/dom"),r=e("../lib/lang"),s=e("../lib/event"),a=e("../lib/useragent"),l=e("../lib/event_emitter").EventEmitter,c="function"==typeof ResizeObserver,u=200,h=t.FontMetrics=function(e){this.el=o.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=o.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=o.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.innerHTML=r.stringRepeat("X",256),this.$characterSize={width:0,height:0},c?this.$addObserver():this.checkForSizeChanges()};(function(){i.implement(this,l),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",a.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){if(void 0===e&&(e=this.$measureSizes()),e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver((function(t){var n=t[0].contentRect;e.checkForSizeChanges({height:n.height,width:n.width/256})})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=s.onIdle((function t(){e.checkForSizeChanges(),s.onIdle(t,500)}),500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/256};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){return this.$main.innerHTML=r.stringRepeat(e,256),this.$main.getBoundingClientRect().width/256},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return t?(window.getComputedStyle(t).zoom||1)*e(t.parentElement):1},this.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=o.buildDom([e(0,0),e(u,0),e(0,u),e(u,u)],this.el)},this.transformCoordinates=function(e,t){e&&(e=r(1/this.$getZoom(this.el),e));function n(e,t,n){var i=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/i,(+e[1]*n[0]-e[0]*n[1])/i]}function i(e,t){return[e[0]-t[0],e[1]-t[1]]}function o(e,t){return[e[0]+t[0],e[1]+t[1]]}function r(e,t){return[e*t[0],e*t[1]]}function s(e){var t=e.getBoundingClientRect();return[t.left,t.top]}this.els||this.$initTransformMeasureNodes();var a=s(this.els[0]),l=s(this.els[1]),c=s(this.els[2]),h=s(this.els[3]),d=n(i(h,l),i(h,c),i(o(l,c),o(h,a))),p=r(1+d[0],i(l,a)),f=r(1+d[1],i(c,a));if(t){var g=t,m=d[0]*g[0]/u+d[1]*g[1]/u+1,v=o(r(g[0],p),r(g[1],f));return o(r(1/m/u,v),a)}var _=i(e,a),y=n(i(p,r(d[0],_)),i(f,r(d[1],_)),_);return r(u,y)}}).call(h.prototype)})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("./lib/oop"),o=e("./lib/dom"),r=e("./config"),s=e("./layer/gutter").Gutter,a=e("./layer/marker").Marker,l=e("./layer/text").Text,c=e("./layer/cursor").Cursor,u=e("./scrollbar").HScrollBar,h=e("./scrollbar").VScrollBar,d=e("./renderloop").RenderLoop,p=e("./layer/font_metrics").FontMetrics,f=e("./lib/event_emitter").EventEmitter,g='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;perspective: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);opacity: 0.7;transform-origin: left;text-indent: 10px;}',m=e("./lib/useragent"),v=m.isIE;o.importCssString(g,"ace_editor.css");var _=function(e,t){var n=this;this.container=e||o.createElement("div"),o.addCssClass(this.container,"ace_editor"),o.HI_DPI&&o.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),this.$gutter=o.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=o.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=o.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var i=this.$textLayer=new l(this.content);this.canvas=i.element,this.$markerFront=new a(this.content),this.$cursorLayer=new c(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new u(this.container,this),this.scrollBarV.addEventListener("scroll",(function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)})),this.scrollBarH.addEventListener("scroll",(function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",(function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!m.isIOS,this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),r.resetOptions(this),r._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,f),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),o.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,i){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var o=this.container;i||(i=o.clientHeight||o.scrollHeight),n||(n=o.clientWidth||o.scrollWidth);var r=this.$updateCachedSize(e,t,n,i);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(r|this.$changes,!0):this.$loop.schedule(r|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,n,i){i-=this.$extraHeight||0;var r=0,s=this.$size,a={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};if(i&&(e||s.height!=i)&&(s.height=i,r|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",r|=this.CHANGE_SCROLL),n&&(e||s.width!=n)){r|=this.CHANGE_SIZE,s.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,o.setStyle(this.scrollBarH.element.style,"left",t+"px"),o.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),s.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),o.setStyle(this.$gutter.style,"left",this.margin.left+"px");var l=this.scrollBarV.getWidth()+"px";o.setStyle(this.scrollBarH.element.style,"right",l),o.setStyle(this.scroller.style,"right",l),o.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(r|=this.CHANGE_FULL)}return s.$dirty=!n||!i,r&&this._signal("resize",a),r},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=o.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=o.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var e=this.textarea.style,t=this.$composition;if(this.$keepTextAreaAtCursor||t){var n=this.$cursorLayer.$pixelPos;if(n){t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var i=this.layerConfig,r=n.top,s=n.left;r-=i.offset;var a=t&&t.useTextareaForIME?this.lineHeight:v?0:1;if(r<0||r>i.height-a)o.translate(this.textarea,0,0);else{var l=1,c=this.$size.height-a;if(t)if(t.useTextareaForIME){var u=this.textarea.value;l=this.characterWidth*this.session.$getStringScreenWidth(u)[0]}else r+=this.lineHeight+2;else r+=this.lineHeight;(s-=this.scrollLeft)>this.$size.scrollerWidth-l&&(s=this.$size.scrollerWidth-l),s+=this.gutterWidth+this.margin.left,o.setStyle(e,"height",a+"px"),o.setStyle(e,"width",l+"px"),o.translate(this.textarea,Math.min(s,this.$size.scrollerWidth-l),Math.min(r,c))}}}else o.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,i){var o=this.scrollMargin;o.top=0|e,o.bottom=0|t,o.right=0|i,o.left=0|n,o.v=o.top+o.bottom,o.h=o.left+o.right,o.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-o.top),this.updateFull()},this.setMargin=function(e,t,n,i){var o=this.margin;o.top=0|e,o.bottom=0|t,o.right=0|i,o.left=0|n,o.v=o.top+o.bottom,o.h=o.left+o.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender"),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig()|this.$loop.clear(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var i=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;i>0&&(this.scrollTop=i,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),o.translate(this.content,-this.scrollLeft,-n.offset);var r=n.width+2*this.$padding+"px",s=n.minHeight+"px";o.setStyle(this.content.style,"width",r),o.setStyle(this.content.style,"height",s)}if(e&this.CHANGE_H_SCROLL&&(o.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender");if(e&this.CHANGE_SCROLL)return this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender");e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender")}else this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var i=!(n<=2*this.lineHeight)&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var o=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,o,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,i=this.session.getScreenLength()*this.lineHeight,o=this.$getLongestLine(),r=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-o-2*this.$padding<0),s=this.$horizScroll!==r;s&&(this.$horizScroll=r,this.scrollBarH.setVisible(r));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var l=t.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=c;var u=this.scrollMargin;this.session.setScrollTop(Math.max(-u.top,Math.min(this.scrollTop,i-t.scrollerHeight+u.bottom))),this.session.setScrollLeft(Math.max(-u.left,Math.min(this.scrollLeft,o+2*this.$padding-t.scrollerWidth+u.right)));var h=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i+c<0||this.scrollTop>u.top),d=a!==h;d&&(this.$vScroll=h,this.scrollBarV.setVisible(h));var p,f,g=this.scrollTop%this.lineHeight,m=Math.ceil(l/this.lineHeight)-1,v=Math.max(0,Math.round((this.scrollTop-g)/this.lineHeight)),_=v+m,y=this.lineHeight;v=e.screenToDocumentRow(v,0);var b=e.getFoldLine(v);b&&(v=b.start.row),p=e.documentToScreenRow(v,0),f=e.getRowLength(v)*y,_=Math.min(e.screenToDocumentRow(_,0),e.getLength()-1),l=t.scrollerHeight+e.getRowLength(_)*y+f,g=this.scrollTop-p*y;var T=0;return(this.layerConfig.width!=o||s)&&(T=this.CHANGE_H_SCROLL),(s||d)&&(T|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),d&&(o=this.$getLongestLine())),this.layerConfig={width:o,padding:this.$padding,firstRow:v,firstRowScreen:p,lastRow:_,lineHeight:y,characterWidth:this.characterWidth,minHeight:l,maxHeight:i,offset:g,gutterOffset:y?Math.max(0,Math.ceil((g+t.height-t.scrollerHeight)/y)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(o-this.$padding),T},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1||t<n.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(e),o=i.left,r=i.top,s=n&&n.top||0,a=n&&n.bottom||0,l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;l+s>r?(t&&l+s>r+this.lineHeight&&(r-=t*this.$size.scrollerHeight),0===r&&(r=-this.scrollMargin.top),this.session.setScrollTop(r)):l+this.$size.scrollerHeight-a<r+this.lineHeight&&(t&&l+this.$size.scrollerHeight-a<r-this.lineHeight&&(r+=t*this.$size.scrollerHeight),this.session.setScrollTop(r+this.lineHeight+a-this.$size.scrollerHeight));var c=this.scrollLeft;c>o?(o<this.$padding+2*this.layerConfig.characterWidth&&(o=-this.scrollMargin.left),this.session.setScrollLeft(o)):c+this.$size.scrollerWidth<o+this.characterWidth?this.session.setScrollLeft(Math.round(o+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&o-c<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),i=this.$size.scrollerHeight-this.lineHeight,o=n.top-i*(t||0);return this.session.setScrollTop(o),o},this.STEPS=8,this.$calcSteps=function(e,t){var n,i,o=0,r=this.STEPS,s=[];for(o=0;o<r;++o)s.push((n=o/this.STEPS,i=e,(t-e)*(Math.pow(n-1,3)+1)+i));return s},this.scrollToLine=function(e,t,n,i){var o=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(o-=this.$size.scrollerHeight/2);var r=this.scrollTop;this.session.setScrollTop(o),!1!==n&&this.animateScrolling(r,i)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(e!=n){if(this.$scrollAnimation){var o=this.$scrollAnimation.steps;if(o.length&&(e=o[0])==n)return}var r=i.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:r},clearInterval(this.$timer),i.session.setScrollTop(r.shift()),i.session.$scrollTop=n,this.$timer=setInterval((function(){r.length?(i.session.setScrollTop(r.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,t&&t())}),10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([e,t]);e=i[1]-this.gutterWidth-this.margin.left,t=i[0]}else n=this.scroller.getBoundingClientRect();var o=e+this.scrollLeft-n.left-this.$padding,r=o/this.characterWidth,s=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),a=this.$blockCursor?Math.floor(r):Math.round(r);return{row:s,column:a,side:r-a>0?1:-1,offsetX:o}},this.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([e,t]);e=i[1]-this.gutterWidth-this.margin.left,t=i[0]}else n=this.scroller.getBoundingClientRect();var o=e+this.scrollLeft-n.left-this.$padding,r=o/this.characterWidth,s=this.$blockCursor?Math.floor(r):Math.round(r),a=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(a,Math.max(s,0),o)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(e,t),o=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,e)?this.session.$bidiHandler.getPosLeft(i.column):Math.round(i.column*this.characterWidth)),r=i.row*this.lineHeight;return{pageX:n.left+o-this.scrollLeft,pageY:n.top+r-this.scrollTop}},this.visualizeFocus=function(){o.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){o.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),e.useTextareaForIME=this.$useTextareaForIME,this.$useTextareaForIME?(o.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),o.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText,this.$composition=null,this.$cursorLayer.element.style.display="")},this.addToken=function(e,t,n,i){var o=this.session;o.bgTokenizer.lines[n]=null;var r={type:t,value:e},s=o.getTokens(n);if(null==i)s.push(r);else for(var a=0,l=0;l<s.length;l++){var c=s[l];if(i<=(a+=c.value.length)){var u=c.value.length-(a-i),h=c.value.slice(0,u),d=c.value.slice(u);s.splice(l,1,{type:c.type,value:h},r,{type:c.type,value:d});break}}this.updateLines(n,n)},this.setTheme=function(e,t){var n=this;if(this.$themeId=e,n._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)s(e);else{var i=e||this.$options.theme.initialValue;r.loadModule(["theme",i],s)}function s(i){if(n.$themeId!=e)return t&&t();if(!i||!i.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");i.$id&&(n.$themeId=i.$id),o.importCssString(i.cssText,i.cssClass,n.container),n.theme&&o.removeCssClass(n.container,n.theme.cssClass);var r="padding"in i?i.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&r!=n.$padding&&n.setPadding(r),n.$theme=i.cssClass,n.theme=i,o.addCssClass(n.container,i.cssClass),o.setCssClass(n.container,"ace_dark",i.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:i}),t&&t()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){o.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){o.removeCssClass(this.container,e)},this.setCursorStyle=function(e){o.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){o.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){o.importCssString(g,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy()}}).call(_.prototype),r.defineOptions(_.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){o.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!m.isMobile&&!m.isIE}}),t.VirtualRenderer=_})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("../lib/net"),r=e("../lib/event_emitter").EventEmitter,s=e("../config");function a(e){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(s.get("loadWorkerFromBlob")){var t=function(e){var t="importScripts('"+o.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(e){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return n.append(t),n.getBlob("application/javascript")}}(e),n=(window.URL||window.webkitURL).createObjectURL(t);return new Worker(n)}return new Worker(e)}var l=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){i.implement(this,r),this.$createWorkerFromOldConfig=function(t,n,i,o,r){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),s.get("packaged")||!e.toUrl)o=o||s.moduleUrl(n,"worker");else{var l=this.$normalizePath;o=o||l(e.toUrl("ace/worker/worker.js",null,"_"));var c={};t.forEach((function(t){c[t]=l(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=a(o),r&&this.send("importScripts",r),this.$worker.postMessage({init:!0,tlns:c,module:n,classname:i}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return o.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,t.push(i)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(l.prototype);t.UIWorkerClient=function(e,t,n){var i=null,o=!1,a=Object.create(r),c=[],u=new l({messageBuffer:c,terminate:function(){},postMessage:function(e){c.push(e),i&&(o?setTimeout(h):h())}});u.setEmitSync=function(e){o=e};var h=function(){var e=c.shift();e.command?i[e.command].apply(i,e.args):e.event&&a._signal(e.event,e.data)};return a.postMessage=function(e){u.onMessage({data:e})},a.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},a.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},s.loadModule(["worker",t],(function(e){for(i=new e[n](a);c.length;)h()})),u},t.WorkerClient=l,t.createWorker=a})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(e,t,n){"use strict";var i=e("./range").Range,o=e("./lib/event_emitter").EventEmitter,r=e("./lib/oop"),s=function(e,t,n,i,o,r){var s=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=o,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout((function(){s.onCursorChange()}))},this.$pos=n;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){r.implement(this,o),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var o=this.pos;o.$insertRight=!0,o.detach(),o.markerId=n.addMarker(new i(o.row,o.column,o.row,o.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(n){var i=t.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),e.others.push(i)})),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach((function(n){n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,o=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,r=t.start.column-this.pos.column;if(this.updateAnchors(e),o&&(this.length+=n),o&&!this.session.$fromUndo)if("insert"===e.action)for(var s=this.others.length-1;s>=0;s--){var a={row:(l=this.others[s]).row,column:l.column+r};this.doc.insertMergedLines(a,e.lines)}else if("remove"===e.action)for(s=this.others.length-1;s>=0;s--){var l;a={row:(l=this.others[s]).row,column:l.column+r};this.doc.remove(new i(a.row,a.column,a.row,a.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,n=function(n,o){t.removeMarker(n.markerId),n.markerId=t.addMarker(new i(n.row,n.column,n.row,n.column+e.length),o,null,!1)};n(this.pos,this.mainClass);for(var o=this.others.length;o--;)n(this.others[o],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),t.PlaceHolder=s})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(e,t,n){var i=e("../lib/event"),o=e("../lib/useragent");function r(e,t){return e.row==t.row&&e.column==t.column}t.onMouseDown=function(e){var t=e.domEvent,n=t.altKey,s=t.shiftKey,a=t.ctrlKey,l=e.getAccelKey(),c=e.getButton();if(a&&o.isMac&&(c=t.button),e.editor.inMultiSelectMode&&2==c)e.editor.textInput.onContextMenu(e.domEvent);else if(a||n||l){if(0===c){var u,h=e.editor,d=h.selection,p=h.inMultiSelectMode,f=e.getDocumentPosition(),g=d.getCursor(),m=e.inSelection()||d.isEmpty()&&r(f,g),v=e.x,_=e.y,y=h.session,b=h.renderer.pixelToScreenCoordinates(v,_),T=b;if(h.$mouseHandler.$enableJumpToDef)a&&n||l&&n?u=s?"block":"add":n&&h.$blockSelectEnabled&&(u="block");else if(l&&!n){if(u="add",!p&&s)return}else n&&h.$blockSelectEnabled&&(u="block");if(u&&o.isMac&&t.ctrlKey&&h.$mouseHandler.cancelContextMenu(),"add"==u){if(!p&&m)return;if(!p){var E=d.toOrientedRange();h.addSelectionMarker(E)}var w=d.rangeList.rangeAtPoint(f);h.inVirtualSelectionMode=!0,s&&(w=null,E=d.ranges[0]||E,h.removeSelectionMarker(E)),h.once("mouseup",(function(){var e=d.toOrientedRange();w&&e.isEmpty()&&r(w.cursor,e.cursor)?d.substractPoint(e.cursor):(s?d.substractPoint(E.cursor):E&&(h.removeSelectionMarker(E),d.addRange(E)),d.addRange(e)),h.inVirtualSelectionMode=!1}))}else if("block"==u){var k;e.stop(),h.inVirtualSelectionMode=!0;var S=[],C=function(){var e=h.renderer.pixelToScreenCoordinates(v,_),t=y.screenToDocumentPosition(e.row,e.column,e.offsetX);r(T,e)&&r(t,d.lead)||(T=e,h.selection.moveToPosition(t),h.renderer.scrollCursorIntoView(),h.removeSelectionMarkers(S),S=d.rectangularRangeBlock(T,b),h.$mouseHandler.$clickSelection&&1==S.length&&S[0].isEmpty()&&(S[0]=h.$mouseHandler.$clickSelection.clone()),S.forEach(h.addSelectionMarker,h),h.updateSelectionMarkers())};p&&!l?d.toSingleRange():!p&&l&&(k=d.toOrientedRange(),h.addSelectionMarker(k)),s?b=y.documentToScreenPosition(d.lead):d.moveToPosition(f),T={row:-1,column:-1};var x=C;i.capture(h.container,(function(e){v=e.clientX,_=e.clientY}),(function(e){C(),clearInterval(A),h.removeSelectionMarkers(S),S.length||(S=[d.toOrientedRange()]),k&&(h.removeSelectionMarker(k),d.toSingleRange(k));for(var t=0;t<S.length;t++)d.addRange(S[t]);h.inVirtualSelectionMode=!1,h.$mouseHandler.$clickSelection=null}));var A=setInterval((function(){x()}),20);return e.preventDefault()}}}else 0===c&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var i=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new i(t.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(e,t,n){var i=e("./range_list").RangeList,o=e("./range").Range,r=e("./selection").Selection,s=e("./mouse/multi_select_handler").onMouseDown,a=e("./lib/event"),l=e("./lib/lang"),c=e("./commands/multi_select_commands");t.commands=c.defaultCommands.concat(c.multiSelectCommands);var u=new(0,e("./search").Search);var h=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(h.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var i=this.rangeList.add(e);return this.$onAddRange(e),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var i=this.ranges.indexOf(e[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new i,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=o.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{n=this.getRange();var i=this.isBackwards(),r=n.start.row,s=n.end.row;if(r==s){if(i)var a=n.end,l=n.start;else a=n.start,l=n.end;return this.addRange(o.fromPoints(l,l)),void this.addRange(o.fromPoints(a,a))}var c=[],u=this.getLineRange(r,!0);u.start.column=n.start.column,c.push(u);for(var h=r+1;h<s;h++)c.push(this.getLineRange(h,!0));(u=this.getLineRange(s,!0)).end.column=n.end.column,c.push(u),c.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=o.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var i=this.session.documentToScreenPosition(this.cursor),r=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(i,r).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var i=[],r=e.column<t.column;if(r)var s=e.column,a=t.column,l=e.offsetX,c=t.offsetX;else s=t.column,a=e.column,l=t.offsetX,c=e.offsetX;var u,h,d,p=e.row<t.row;if(p)var f=e.row,g=t.row;else f=t.row,g=e.row;s<0&&(s=0),f<0&&(f=0),f==g&&(n=!0);for(var m=f;m<=g;m++){var v=o.fromPoints(this.session.screenToDocumentPosition(m,s,l),this.session.screenToDocumentPosition(m,a,c));if(v.isEmpty()){if(u&&(h=v.end,d=u,h.row==d.row&&h.column==d.column))break;u=v.end}v.cursor=r?v.start:v.end,i.push(v)}if(p&&i.reverse(),!n){for(var _=i.length-1;i[_].isEmpty()&&_>0;)_--;if(_>0)for(var y=0;i[y].isEmpty();)y++;for(var b=_;b>=y;b--)i[b].isEmpty()&&i.splice(b,1)}return i}}.call(r.prototype);var d=e("./editor").Editor;function p(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",s),e.commands.addCommands(c.defaultCommands),function(e){if(!e.textInput)return;var t=e.textInput.getElement(),n=!1;function i(t){n&&(e.renderer.setMouseCursor(""),n=!1)}a.addListener(t,"keydown",(function(t){var o=18==t.keyCode&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&o?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&i()})),a.addListener(t,"keyup",i),a.addListener(t,"blur",i)}(e))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var i=e[n];if(i.marker){this.session.removeMarker(i.marker);var o=t.indexOf(i);-1!=o&&t.splice(o,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(c.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(c.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?i=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?i=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),i=t.exec(n,e.args||{})):i=t.multiSelectAction(n,e.args||{});else{var i=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return i}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var i,o=n&&n.keepOrder,s=1==n||n&&n.$byLines,a=this.session,l=this.selection,c=l.rangeList,u=(o?l:c).ranges;if(!u.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var h=l._eventRegistry;l._eventRegistry={};var d=new r(a);this.inVirtualSelectionMode=!0;for(var p=u.length;p--;){if(s)for(;p>0&&u[p].start.row==u[p-1].end.row;)p--;d.fromOrientedRange(u[p]),d.index=p,this.selection=a.selection=d;var f=e.exec?e.exec(this,t||{}):e(this,t||{});i||void 0===f||(i=f),d.toOrientedRange(u[p])}d.detach(),this.selection=a.selection=l,this.inVirtualSelectionMode=!1,l._eventRegistry=h,l.mergeOverlappingRanges(),l.ranges[0]&&l.fromOrientedRange(l.ranges[0]);var g=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),g&&g.from==g.to&&this.renderer.animateScrolling(g.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],i=0;i<t.length;i++)n.push(this.session.getTextRange(t[i]));var o=this.session.getDocument().getNewLineCharacter();(e=n.join(o)).length==(n.length-1)*o.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var i=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;i.row!=t.row||this.session.$clipPositionToDocument(i.row,i.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){if((t=t||{}).needle=e||t.needle,null==t.needle){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(i)}this.$search.set(t);var o=this.$search.findAll(this.session);if(!o.length)return 0;var r=this.multiSelect;n||r.toSingleRange(o[0]);for(var s=o.length;s--;)r.addRange(o[s],!0);return i&&r.rangeList.rangeAtPoint(i.start)&&r.addRange(i,!0),o.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,r=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(r.column=this.selection.$desiredColumn);var s,a=this.session.screenToDocumentPosition(r.row+e,r.column);if(n.isEmpty())c=a;else var l=this.session.documentToScreenPosition(i?n.end:n.start),c=this.session.screenToDocumentPosition(l.row+e,l.column);i?(s=o.fromPoints(a,c)).cursor=s.start:(s=o.fromPoints(c,a)).cursor=s.end;if(s.desiredColumn=r.column,this.selection.inMultiSelectMode){if(t)var u=n.cursor}else this.selection.addRange(n);this.selection.addRange(s),u&&this.selection.substractPoint(u)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,i=n.ranges,o=i.length;o--;){if((a=i[o]).isEmpty()){var r=t.getWordRange(a.start.row,a.start.column);a.start.row=r.start.row,a.start.column=r.start.column,a.end.row=r.end.row,a.end.column=r.end.column}}n.mergeOverlappingRanges();var s=[];for(o=i.length;o--;){var a=i[o];s.unshift(t.getTextRange(a))}e<0?s.unshift(s.pop()):s.push(s.shift());for(o=i.length;o--;){r=(a=i[o]).clone();t.replace(a,s[o]),a.start.row=r.start.row,a.start.column=r.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var i=this.session,o=i.multiSelect.toOrientedRange();if(!o.isEmpty()||((o=i.getWordRange(o.start.row,o.start.column)).cursor=-1==e?o.start:o.end,this.multiSelect.addRange(o),!n)){var r=i.getTextRange(o),s=function(e,t,n){return u.$options.wrap=!0,u.$options.needle=t,u.$options.backwards=-1==n,u.find(e)}(i,r,e);s&&(s.cursor=-1==e?s.start:s.end,this.session.unfold(s),this.multiSelect.addRange(s),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(o.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,i=-1,r=n.filter((function(e){if(e.cursor.row==i)return!0;i=e.cursor.row}));if(n.length&&r.length!=n.length-1){r.forEach((function(e){t.substractPoint(e.cursor)}));var s=0,a=1/0,c=n.map((function(t){var n=t.cursor,i=e.getLine(n.row).substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>s&&(s=n.column),i<a&&(a=i),i}));n.forEach((function(t,n){var i=t.cursor,r=s-i.column,u=c[n]-a;r>u?e.insert(i,l.stringRepeat(" ",r-u)):e.remove(new o(i.row,i.column,i.row,i.column-r+u)),t.start.column=t.end.column=s,t.start.row=t.end.row=i.row,t.cursor=t.end})),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var u=this.selection.getRange(),h=u.start.row,d=u.end.row,p=h==d;if(p){var f,g=this.session.getLength();do{f=this.session.getLine(d)}while(/[=:]/.test(f)&&++d<g);do{f=this.session.getLine(h)}while(/[=:]/.test(f)&&--h>0);h<0&&(h=0),d>=g&&(d=g-1)}var m=this.session.removeFullLines(h,d);m=this.$reAlignText(m,p),this.session.insert({row:h,column:0},m.join("\n")+"\n"),p||(u.start.column=0,u.end.column=m[m.length-1].length),this.selection.setRange(u)}},this.$reAlignText=function(e,t){var n,i,o,r=!0,s=!0;return e.map((function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==n?(n=t[1].length,i=t[2].length,o=t[3].length,t):(n+i+o!=t[1].length+t[2].length+t[3].length&&(s=!1),n!=t[1].length&&(r=!1),n>t[1].length&&(n=t[1].length),i<t[2].length&&(i=t[2].length),o>t[3].length&&(o=t[3].length),t):[e]})).map(t?c:r?s?function(e){return e[2]?a(n+i-e[2].length)+e[2]+a(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:c:function(e){return e[2]?a(n)+e[2]+a(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]});function a(e){return l.stringRepeat(" ",e)}function c(e){return e[2]?a(n)+e[2]+a(i-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=p,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){p(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",s)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",s))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("../../range").Range,o=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var o=/\S/,r=e.getLine(t),s=r.search(o);if(-1!=s){for(var a=n||r.length,l=e.getLength(),c=t,u=t;++t<l;){var h=e.getLine(t).search(o);if(-1!=h){if(h<=s){var d=e.getTokenAt(t,0);if(!d||"string"!==d.type)break}u=t}}if(u>c){var p=e.getLine(u).length;return new i(c,a,u,p)}}},this.openingBracketBlock=function(e,t,n,o,r){var s={row:n,column:o+1},a=e.$findClosingBracket(t,s,r);if(a){var l=e.foldWidgets[a.row];return null==l&&(l=e.getFoldWidget(a.row)),"start"==l&&a.row>s.row&&(a.row--,a.column=e.getLine(a.row).length),i.fromPoints(s,a)}},this.closingBracketBlock=function(e,t,n,o,r){var s={row:n,column:o},a=e.$findOpeningBracket(t,s);if(a)return a.column++,s.column--,i.fromPoints(a,s)}}).call(o.prototype)})),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate",e("../lib/dom").importCssString(t.cssText,t.cssClass)})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],(function(e,t,n){"use strict";e("./lib/oop");var i=e("./lib/dom");e("./range").Range;function o(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach((function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)})),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach((function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))}))}},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var i=e.data,o=i.start.row,r=i.end.row,s="add"==e.action,a=o+1;a<r;a++)n[a]&&(n[a].hidden=s);n[r]&&(s?n[o]?n[r].hidden=s:n[o]=n[r]:(n[o]==n[r]&&(n[o]=void 0),n[r].hidden=s))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,i=e.end.row-n;if(0===i);else if("remove"==e.action){t.splice(n+1,i).forEach((function(e){e&&this.removeLineWidget(e)}),this),this.$updateRows()}else{var o=new Array(i);o.unshift(n,0),t.splice.apply(t,o),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach((function(e,n){if(e)for(t=!1,e.row=n;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget})),t&&(this.session.lineWidgets=null)}},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e.session=this.session;var n=this.editor.renderer;e.html&&!e.el&&(e.el=i.createElement("div"),e.el.innerHTML=e.html),e.el&&(i.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,n.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/n.layerConfig.lineHeight);var o=this.session.getFoldAt(e.row,0);if(e.$fold=o,o){var r=this.session.lineWidgets;e.row!=o.end.row||r[o.start.row]?e.hidden=!0:r[o.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,n),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(e){}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],i=[];n;)i.push(n),n=n.$oldWidget;return i},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,i=t.layerConfig;if(n&&n.length){for(var o=1/0,r=0;r<n.length;r++){var s=n[r];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,t.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/i.characterWidth));var a=s.h/i.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row))<0&&(a=0),s.rowCount!=a&&(s.rowCount=a,s.row<o&&(o=s.row))}}o!=1/0&&(this.session._emit("changeFold",{data:{start:{row:o}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,i=this.session.lineWidgets;if(i){for(var o=Math.min(this.firstRow,n.firstRow),r=Math.max(this.lastRow,n.lastRow,i.length);o>0&&!i[o];)o--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var s=o;s<=r;s++){var a=i[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,t.container.appendChild(a.el));var l=t.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(l+=n.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=l-n.offset+"px";var c=a.coverGutter?0:t.gutterWidth;a.fixedWidth||(c-=t.scrollLeft),a.el.style.left=c+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=n.width+2*n.padding+"px"),a.fixedWidth?a.el.style.right=t.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(o.prototype),t.LineWidgets=o})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(e,t,n){"use strict";var i=e("../line_widgets").LineWidgets,o=e("../lib/dom"),r=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new i(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),a=s.row,l=n.widgetManager.getWidgetsAtRow(a).filter((function(e){return"errorMarker"==e.type}))[0];l?l.destroy():a-=t;var c,u=function(e,t,n){var i=e.getAnnotations().sort(r.comparePoints);if(i.length){var o=function(e,t,n){for(var i=0,o=e.length-1;i<=o;){var r=i+o>>1,s=n(t,e[r]);if(s>0)i=r+1;else{if(!(s<0))return r;o=r-1}}return-(i+1)}(i,{row:t,column:-1},r.comparePoints);o<0&&(o=-o-1),o>=i.length?o=n>0?0:i.length-1:0===o&&n<0&&(o=i.length-1);var s=i[o];if(s&&n){if(s.row===t){do{s=i[o+=n]}while(s&&s.row===t);if(!s)return i.slice()}var a=[];t=s.row;do{a[n<0?"unshift":"push"](s),s=i[o+=n]}while(s&&s.row==t);return a.length&&a}}}(n,a,t);if(u){var h=u[0];s.column=(h.pos&&"number"!=typeof h.column?h.pos.sc:h.column)||0,s.row=h.row,c=e.renderer.$gutterLayer.$annotations[s.row]}else{if(l)return;c={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var d={row:s.row,fixedWidth:!0,coverGutter:!0,el:o.createElement("div"),type:"errorMarker"},p=d.el.appendChild(o.createElement("div")),f=d.el.appendChild(o.createElement("div"));f.className="error_widget_arrow "+c.className;var g=e.renderer.$cursorLayer.getPixelPosition(s).left;f.style.left=g+e.renderer.gutterWidth-5+"px",d.el.className="error_widget_wrapper",p.className="error_widget "+c.className,p.innerHTML=c.text.join("<br>"),p.appendChild(o.createElement("div"));var m=function(e,t,n){if(0===t&&("esc"===n||"return"===n))return d.destroy(),{command:"null"}};d.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(d),e.off("changeSelection",d.destroy),e.off("changeSession",d.destroy),e.off("mouseup",d.destroy),e.off("change",d.destroy))},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",d.destroy),e.on("changeSession",d.destroy),e.on("mouseup",d.destroy),e.on("change",d.destroy),e.session.widgetManager.addLineWidget(d),d.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:d.el.offsetHeight})},o.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(e,t,i){"use strict";e("./lib/fixoldbrowsers");var o=e("./lib/dom"),r=e("./lib/event"),s=e("./range").Range,a=e("./editor").Editor,l=e("./edit_session").EditSession,c=e("./undomanager").UndoManager,u=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.define=n(67),t.edit=function(e,n){if("string"==typeof e){var i=e;if(!(e=document.getElementById(i)))throw new Error("ace.edit can't find div #"+i)}if(e&&e.env&&e.env.editor instanceof a)return e.env.editor;var s="";if(e&&/input|textarea/i.test(e.tagName)){var l=e;s=l.value,e=o.createElement("pre"),l.parentNode.replaceChild(e,l)}else e&&(s=e.textContent,e.innerHTML="");var c=t.createEditSession(s),h=new a(new u(e),c,n),d={document:c,editor:h,onResize:h.resize.bind(h,null)};return l&&(d.textarea=l),r.addListener(window,"resize",d.onResize),h.on("destroy",(function(){r.removeListener(window,"resize",d.onResize),d.editor.container.env=null})),h.container.env=h.env=d,h},t.createEditSession=function(e,t){var n=new l(e,t);return n.setUndoManager(new c),n},t.Range=s,t.Editor=a,t.EditSession=l,t.UndoManager=c,t.VirtualRenderer=u,t.version=t.config.version})),ace.require(["ace/ace"],(function(t){for(var n in t&&(t.config.init(!0),t.define=ace.define),window.ace||(window.ace=t),t)t.hasOwnProperty(n)&&(window.ace[n]=t[n]);window.ace.default=window.ace,e&&(e.exports=window.ace)}))}).call(this,n(23)(e))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(65),a=s.getAceInstance(),l=n(66),c=n(209),u=n(1),h=n(0),d=n(64),p=n(210),f=function(e){function t(t){var n=e.call(this,t)||this;return s.editorEvents.forEach((function(e){n[e]=n[e].bind(n)})),n.debounce=s.debounce,n}return o(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.className,i=t.onBeforeLoad,o=t.mode,r=t.focus,l=t.theme,u=t.fontSize,h=t.value,d=t.defaultValue,f=t.cursorStart,g=t.showGutter,m=t.wrapEnabled,v=t.showPrintMargin,_=t.scrollMargin,y=void 0===_?[0,0,0,0]:_,b=t.keyboardHandler,T=t.onLoad,E=t.commands,w=t.annotations,k=t.markers,S=t.splits;this.editor=a.edit(this.refEditor),i&&i(a);var C=Object.keys(this.props.editorProps),x=new c.Split(this.editor.container,"ace/theme/"+l,S);this.editor.env.split=x,this.splitEditor=x.getEditor(0),this.split=x,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var A=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),x.forEach((function(t,n){for(var i=0;i<C.length;i++)t[C[i]]=e.props.editorProps[C[i]];var r=p(d,n),c=p(h,n,"");t.session.setUndoManager(new a.UndoManager),t.setTheme("ace/theme/"+l),t.renderer.setScrollMargin(y[0],y[1],y[2],y[3]),t.getSession().setMode("ace/mode/"+o),t.setFontSize(u),t.renderer.setShowGutter(g),t.getSession().setUseWrapMode(m),t.setShowPrintMargin(v),t.on("focus",e.onFocus),t.on("blur",e.onBlur),t.on("input",e.onInput),t.on("copy",e.onCopy),t.on("paste",e.onPaste),t.on("change",e.onChange),t.getSession().selection.on("changeSelection",e.onSelectionChange),t.getSession().selection.on("changeCursor",e.onCursorChange),t.session.on("changeScrollTop",e.onScroll),t.setValue(void 0===r?c:r,f);var _=p(w,n,[]),T=p(k,n,[]);t.getSession().setAnnotations(_),T&&T.length>0&&e.handleMarkers(T,t);for(i=0;i<s.editorOptions.length;i++){var S=s.editorOptions[i];A.hasOwnProperty(S)?t.setOption(S,e.props[S]):e.props[S]&&console.warn("ReaceAce: editor option "+S+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}e.handleOptions(e.props,t),Array.isArray(E)&&E.forEach((function(e){"string"==typeof e.exec?t.commands.bindKey(e.bindKey,e.exec):t.commands.addCommand(e)})),b&&t.setKeyboardHandler("ace/keyboard/"+b)})),n&&(this.refEditor.className+=" "+n),r&&this.splitEditor.focus();var R=this.editor.env.split;R.setOrientation("below"===this.props.orientation?R.BELOW:R.BESIDE),R.resize(!0),T&&T(R)},t.prototype.componentDidUpdate=function(e){var t=this,n=e,i=this.props,o=this.editor.env.split;if(i.splits!==n.splits&&o.setSplits(i.splits),i.orientation!==n.orientation&&o.setOrientation("below"===i.orientation?o.BELOW:o.BESIDE),o.forEach((function(e,o){i.mode!==n.mode&&e.getSession().setMode("ace/mode/"+i.mode),i.keyboardHandler!==n.keyboardHandler&&(i.keyboardHandler?e.setKeyboardHandler("ace/keyboard/"+i.keyboardHandler):e.setKeyboardHandler(null)),i.fontSize!==n.fontSize&&e.setFontSize(i.fontSize),i.wrapEnabled!==n.wrapEnabled&&e.getSession().setUseWrapMode(i.wrapEnabled),i.showPrintMargin!==n.showPrintMargin&&e.setShowPrintMargin(i.showPrintMargin),i.showGutter!==n.showGutter&&e.renderer.setShowGutter(i.showGutter);for(var r=0;r<s.editorOptions.length;r++){var a=s.editorOptions[r];i[a]!==n[a]&&e.setOption(a,i[a])}d(i.setOptions,n.setOptions)||t.handleOptions(i,e);var l=p(i.value,o,"");if(e.getValue()!==l){t.silent=!0;var c=e.session.selection.toJSON();e.setValue(l,i.cursorStart),e.session.selection.fromJSON(c),t.silent=!1}var u=p(i.annotations,o,[]),h=p(n.annotations,o,[]);d(u,h)||e.getSession().setAnnotations(u);var f=p(i.markers,o,[]),g=p(n.markers,o,[]);!d(f,g)&&Array.isArray(f)&&t.handleMarkers(f,e)})),i.className!==n.className){var r=this.refEditor.className.trim().split(" ");n.className.trim().split(" ").forEach((function(e){var t=r.indexOf(e);r.splice(t,1)})),this.refEditor.className=" "+i.className+" "+r.join(" ")}i.theme!==n.theme&&o.setTheme("ace/theme/"+i.theme),i.focus&&!n.focus&&this.splitEditor.focus(),i.height===this.props.height&&i.width===this.props.width||this.editor.resize()},t.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},t.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getValue())})),this.props.onChange(t,e)}},t.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getSelection())})),this.props.onSelectionChange(t,e)}},t.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getSelection())})),this.props.onCursorChange(t,e)}},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e)},t.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e)},t.prototype.onCopy=function(e){this.props.onCopy&&this.props.onCopy(e)},t.prototype.onPaste=function(e){this.props.onPaste&&this.props.onPaste(e)},t.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},t.prototype.handleOptions=function(e,t){for(var n=Object.keys(e.setOptions),i=0;i<n.length;i++)t.setOption(n[i],e.setOptions[n[i]])},t.prototype.handleMarkers=function(e,t){var n=t.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&t.getSession().removeMarker(n[i].id);for(var i in n=t.getSession().getMarkers(!1))n.hasOwnProperty(i)&&t.getSession().removeMarker(n[i].id);e.forEach((function(e){var n=e.startRow,i=e.startCol,o=e.endRow,r=e.endCol,s=e.className,a=e.type,c=e.inFront,u=void 0!==c&&c,h=new l.Range(n,i,o,r);t.getSession().addMarker(h,s,a,u)}))},t.prototype.updateRef=function(e){this.refEditor=e},t.prototype.render=function(){var e=this.props,t=e.name,n=e.width,i=e.height,o=e.style,s=r({width:n,height:i},o);return h.createElement("div",{ref:this.updateRef,id:t,style:s})},t.propTypes={className:u.string,debounceChangePeriod:u.number,defaultValue:u.arrayOf(u.string),focus:u.bool,fontSize:u.oneOfType([u.number,u.string]),height:u.string,mode:u.string,name:u.string,onBlur:u.func,onChange:u.func,onCopy:u.func,onFocus:u.func,onInput:u.func,onLoad:u.func,onPaste:u.func,onScroll:u.func,orientation:u.string,showGutter:u.bool,splits:u.number,theme:u.string,value:u.arrayOf(u.string),width:u.string,onSelectionChange:u.func,onCursorChange:u.func,onBeforeLoad:u.func,minLines:u.number,maxLines:u.number,readOnly:u.bool,highlightActiveLine:u.bool,tabSize:u.number,showPrintMargin:u.bool,cursorStart:u.number,editorProps:u.object,setOptions:u.object,style:u.object,scrollMargin:u.array,annotations:u.array,markers:u.array,keyboardHandler:u.string,wrapEnabled:u.bool,enableBasicAutocompletion:u.oneOfType([u.bool,u.array]),enableLiveAutocompletion:u.oneOfType([u.bool,u.array]),commands:u.array},t.defaultProps={name:"ace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},t}(h.Component);t.default=f},function(e,t,n){"use strict";(function(t){var n="__global_unique_id__";e.exports=function(){return t[n]=(t[n]||0)+1}}).call(this,n(8))},function(e,t,n){"use strict";var i=n(34),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return i.isMemo(e)?s:a[e.$$typeof]||o}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,i){if("string"!=typeof n){if(f){var o=p(n);o&&o!==f&&e(t,o,i)}var s=u(n);h&&(s=s.concat(h(n)));for(var a=l(t),g=l(n),m=0;m<s.length;++m){var v=s[m];if(!(r[v]||i&&i[v]||g&&g[v]||a&&a[v])){var _=d(n,v);try{c(t,v,_)}catch(e){}}}}return t}},function(e,t,n){e.exports={application:"_1f8n_d9EjUJqqBHHGGeFHn"}},function(e,t,n){e.exports={info:"_2ZVq0Fz5C-qMzSkekrQTq4"}},function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=n(12),r=n(99),s=n(112),a=n(1),l=n(168),c=n(170),u=n(171),h=n(172),d=n(173),p=n(174),f=n(175),g=n(176),m=n(177),v=Object.keys(g),_=function(e){var t=e.source||e.children||"",n=e.parserOptions;if(e.allowedTypes&&e.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var i=o(g,e.renderers),a=[[s,n]].concat(e.plugins||[]).reduce(y,r()),f=a.parse(t),_=o(e,{renderers:i,definitions:p(f)}),b=function(e){var t=[d,l()],n=e.disallowedTypes;e.allowedTypes&&(n=v.filter((function(t){return"root"!==t&&-1===e.allowedTypes.indexOf(t)})));var i=e.unwrapDisallowed?"unwrap":"remove";n&&n.length>0&&t.push(u.ofType(n,i));e.allowNode&&t.push(u.ifNotMatch(e.allowNode,i));var o=!e.escapeHtml&&!e.skipHtml,r=(e.astPlugins||[]).some((function(e){return(Array.isArray(e)?e[0]:e).identity===m.HtmlParser}));o&&!r&&t.push(c);return e.astPlugins?t.concat(e.astPlugins):t}(e),T=a.runSync(f),E=b.reduce((function(e,t){return t(e,_)}),T);return h(E,_)};function y(e,t){return Array.isArray(t)?e.use.apply(e,i(t)):e.use(t)}_.defaultProps={renderers:{},escapeHtml:!0,skipHtml:!1,sourcePos:!1,rawSourcePos:!1,transformLinkUri:f,astPlugins:[],plugins:[],parserOptions:{}},_.propTypes={className:a.string,source:a.string,children:a.string,sourcePos:a.bool,rawSourcePos:a.bool,escapeHtml:a.bool,skipHtml:a.bool,allowNode:a.func,allowedTypes:a.arrayOf(a.oneOf(v)),disallowedTypes:a.arrayOf(a.oneOf(v)),transformLinkUri:a.oneOfType([a.func,a.bool]),linkTarget:a.oneOfType([a.func,a.string]),transformImageUri:a.func,astPlugins:a.arrayOf(a.func),unwrapDisallowed:a.bool,renderers:a.object,plugins:a.array,parserOptions:a.object},_.types=v,_.renderers=g,_.uriTransformer=f,e.exports=_},function(e,t,n){var i=n(197);e.exports=function(e,t){if(null==e)return{};var n,o,r=i(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}},function(e,t,n){"use strict";function i(e){!function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--?|-=|\+\+?|\+=|!=?|~|\*\*?|\*=|\/=?|%=?|<<=?|>>=?|<=?|>=?|==?|&&?|&=|\^=?|\|\|?|\|=|\?|:/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|x[0-9a-fA-F]{1,2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)\w+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b\w+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+?)\s*(?:\r?\n|\r)(?:[\s\S])*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:n},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s*(?:\r?\n|\r)(?:[\s\S])*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0},{pattern:/(["'])(?:\\[\s\S]|\$\([^)]+\)|`[^`]+`|(?!\1)[^\\])*\1/,greedy:!0,inside:n}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:n.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|aptitude|apt-cache|apt-get|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:if|then|else|elif|fi|for|while|in|case|esac|function|select|do|done|until)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|break|cd|continue|eval|exec|exit|export|getopts|hash|pwd|readonly|return|shift|test|times|trap|umask|unset|alias|bind|builtin|caller|command|declare|echo|enable|help|let|local|logout|mapfile|printf|read|readarray|source|type|typeset|ulimit|unalias|set|shopt)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:true|false)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|==?|!=?|=~|<<[<-]?|[&\d]?>>|\d?[<>]&?|&[>&]?|\|[&|]?|<=?|>=?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}};for(var i=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],o=n.variable[1].inside,r=0;r<i.length;r++)o[i[r]]=e.languages.bash[i[r]];e.languages.shell=e.languages.bash}(e)}e.exports=i,i.displayName="bash",i.aliases=["shell"]},function(e,t,n){"use strict";function i(e){e.languages.json={property:{pattern:/"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,greedy:!0},string:{pattern:/"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,greedy:!0},comment:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,number:/-?\d+\.?\d*(e[+-]?\d+)?/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:true|false)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}}}e.exports=i,i.displayName="json",i.aliases=[]},function(e,t,n){var i,o,r,s;window,e.exports=(i=n(0),o=n(42),r=n(1),s=n(198),function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=i({}),r=function(e,t){return null==e||null==t};t.hashDiff=function(e,t){return r(e,t)||e.hash()!==t.hash()},t.shallowObjDiff=function(e,t){if(r(e,t)&&(null!=e||null!=t))return!0;if(e===t)return!1;if((void 0===e?"undefined":i(e))!==o||(void 0===t?"undefined":i(t))!==o)return e!==t;var n=Object.keys(e),s=Object.keys(t),a=function(n){return e[n]!==t[n]};return n.length!==s.length||!(!n.some(a)&&!s.some(a))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t){return null!=e?e[t]:null},t.toJson=function(e){return e},t.forEach=function(e,t){return e.forEach(t)}},function(e,t,n){"use strict";e.exports=n(3).default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(4)),r=u(n(5)),s=n(6),a=n(8),l=u(n(9)),c=n(10);function u(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.displayName="CytoscapeComponent",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,null,[{key:"normalizeElements",value:function(e){if(null!=e.length)return e;var t=e.nodes,n=e.edges;return null==t&&(t=[]),null==n&&(n=[]),t.concat(n)}},{key:"propTypes",get:function(){return s.types}},{key:"defaultProps",get:function(){return a.defaults}}]),i(t,[{key:"componentDidMount",value:function(){var e=r.default.findDOMNode(this),t=this.props,n=t.global,i=t.headless,o=t.styleEnabled,s=t.hideEdgesOnViewport,a=t.textureOnViewport,c=t.motionBlur,u=t.motionBlurOpacity,h=t.wheelSensitivity,d=t.pixelRatio,p=this._cy=new l.default({container:e,headless:i,styleEnabled:o,hideEdgesOnViewport:s,textureOnViewport:a,motionBlur:c,motionBlurOpacity:u,wheelSensitivity:h,pixelRatio:d});n&&(window[n]=p),this.updateCytoscape(null,this.props)}},{key:"updateCytoscape",value:function(e,t){var n=this._cy,i=t.diff,o=t.toJson,r=t.get,s=t.forEach;(0,c.patch)(n,e,t,i,o,r,s),null!=t.cy&&t.cy(n)}},{key:"componentDidUpdate",value:function(e){this.updateCytoscape(e,this.props)}},{key:"componentWillUnmount",value:function(){this._cy.destroy()}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,i=e.style;return o.default.createElement("div",{id:t,className:n,style:i})}}]),t}();t.default=h},function(e,t){e.exports=i},function(e,t){e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(7)),o=i.default.string,r=i.default.array,s=i.default.object,a=i.default.number,l=i.default.bool,c=i.default.oneOfType,u=i.default.any,h=i.default.func;t.types={id:o,className:o,style:c([o,s]),elements:c([r,u]),stylesheet:c([r,u]),layout:c([s,u]),pan:c([s,u]),zoom:a,panningEnabled:l,userPanningEnabled:l,minZoom:a,maxZoom:a,zoomingEnabled:l,userZoomingEnabled:l,boxSelectionEnabled:l,autoungrabify:l,autolock:l,autounselectify:l,get:h,toJson:h,diff:h,forEach:h,cy:h,headless:l,styleEnabled:l,hideEdgesOnViewport:l,textureOnViewport:l,motionBlur:l,motionBlurOpacity:a,wheelSensitivity:a,pixelRatio:c([o,s])}},function(e,t){e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=t.pan=t.zoom=t.stylesheet=t.elements=t.identity=void 0;var i=n(0),o=n(1),r=(t.identity=function(e){return e},t.elements=[{data:{id:"a",label:"Example node A"}},{data:{id:"b",label:"Example node B"}},{data:{id:"e",source:"a",target:"b"}}]),s=t.stylesheet=[{selector:"node",style:{label:"data(label)"}}],a=t.zoom=1,l=t.pan={x:0,y:0};t.defaults={diff:i.shallowObjDiff,get:o.get,toJson:o.toJson,forEach:o.forEach,elements:r,stylesheet:s,zoom:a,pan:l}},function(e,t){e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patch=void 0;var i=n(1),o=n(0),r=function(e,t,n,o){return n((0,i.get)(e,o),(0,i.get)(t,o))},s=(t.patch=function(e,t,n,u,h,d,p){e.batch((function(){(u===o.shallowObjDiff||r(t,n,u,"elements"))&&c(e,(0,i.get)(t,"elements"),(0,i.get)(n,"elements"),h,d,p,u),r(t,n,u,"stylesheet")&&l(e,(0,i.get)(t,"stylesheet"),(0,i.get)(n,"stylesheet"),h),["zoom","minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","pan","panningEnabled","userPanningEnabled","boxSelectionEnabled","autoungrabify","autolock","autounselectify"].forEach((function(o){r(t,n,u,o)&&s(e,o,(0,i.get)(t,o),(0,i.get)(n,o),h)}))})),r(t,n,u,"layout")&&a(e,(0,i.get)(t,"layout"),(0,i.get)(n,"layout"),h)},function(e,t,n,i,o){e[t](o(i))}),a=function(e,t,n,i){var o=i(n);null!=o&&e.layout(o).run()},l=function(e,t,n,i){var o=e.style();null!=o&&o.fromJson(i(n)).update()},c=function(e,t,n,i,o,r,s){var a=[],l=e.collection(),c=[],h={},d={},p=function(e){return o(o(e,"data"),"id")};r(n,(function(e){var t=p(e);d[t]=e})),null!=t&&r(t,(function(t){var n=p(t);h[n]=t,function(e){return null!=d[e]}(n)||l.merge(e.getElementById(n))})),r(n,(function(e){var t=p(e),n=function(e){return h[e]}(t);!function(e){return null!=h[e]}(t)?a.push(i(e)):c.push({ele1:n,ele2:e})})),l.length>0&&e.remove(l),a.length>0&&e.add(a),c.forEach((function(t){var n=t.ele1,r=t.ele2;return u(e,n,r,i,o,s)}))},u=function(e,t,n,i,o,r){var s=o(o(n,"data"),"id"),a=e.getElementById(s),l={};["data","position","selected","selectable","locked","grabbable","classes"].forEach((function(e){var s=o(n,e);r(s,o(t,e))&&(l[e]=i(s))}));var c=o(n,"scratch");r(c,o(t,"scratch"))&&a.scratch(i(c)),Object.keys(l).length>0&&a.json(l)}}]))},function(e,t,n){e.exports={schema:"_3pD0tEFqUJezINgyuml1qy"}},function(e,t,n){"use strict";function i(e){e.languages.elixir={comment:/#.*/m,regex:{pattern:/~[rR](?:("""|''')(?:\\[\s\S]|(?!\1)[^\\])+\1|([\/|"'])(?:\\.|(?!\2)[^\\\r\n])+\2|\((?:\\.|[^\\)\r\n])+\)|\[(?:\\.|[^\\\]\r\n])+\]|\{(?:\\.|[^\\}\r\n])+\}|<(?:\\.|[^\\>\r\n])+>)[uismxfr]*/,greedy:!0},string:[{pattern:/~[cCsSwW](?:("""|''')(?:\\[\s\S]|(?!\1)[^\\])+\1|([\/|"'])(?:\\.|(?!\2)[^\\\r\n])+\2|\((?:\\.|[^\\)\r\n])+\)|\[(?:\\.|[^\\\]\r\n])+\]|\{(?:\\.|#\{[^}]+\}|[^\\}\r\n])+\}|<(?:\\.|[^\\>\r\n])+>)[csa]?/,greedy:!0,inside:{}},{pattern:/("""|''')[\s\S]*?\1/,greedy:!0,inside:{}},{pattern:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{}}],atom:{pattern:/(^|[^:]):\w+/,lookbehind:!0,alias:"symbol"},"attr-name":/\w+:(?!:)/,capture:{pattern:/(^|[^&])&(?:[^&\s\d()][^\s()]*|(?=\())/,lookbehind:!0,alias:"function"},argument:{pattern:/(^|[^&])&\d+/,lookbehind:!0,alias:"variable"},attribute:{pattern:/@\w+/,alias:"variable"},number:/\b(?:0[box][a-f\d_]+|\d[\d_]*)(?:\.[\d_]+)?(?:e[+-]?[\d_]+)?\b/i,keyword:/\b(?:after|alias|and|case|catch|cond|def(?:callback|exception|impl|module|p|protocol|struct)?|do|else|end|fn|for|if|import|not|or|require|rescue|try|unless|use|when)\b/,boolean:/\b(?:true|false|nil)\b/,operator:[/\bin\b|&&?|\|[|>]?|\\\\|::|\.\.\.?|\+\+?|-[->]?|<[-=>]|>=|!==?|\B!|=(?:==?|[>~])?|[*\/^]/,{pattern:/([^<])<(?!<)/,lookbehind:!0},{pattern:/([^>])>(?!>)/,lookbehind:!0}],punctuation:/<<|>>|[.,%\[\]{}()]/},e.languages.elixir.string.forEach((function(t){t.inside={interpolation:{pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"},rest:e.languages.elixir}}}}))}e.exports=i,i.displayName="elixir",i.aliases=[]},function(e,t,n){e.exports={key:"_1y7Bno16DKskTedrqsBwZD"}},function(e,t,n){var i,o,r;o=[n(14)],void 0===(r="function"==typeof(i=function(e){return(e={Msg:{}}).Msg.ADD_COMMENT="Add Comment",e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",e.Msg.CHANGE_VALUE_TITLE="Change value:",e.Msg.CLEAN_UP="Clean up Blocks",e.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",e.Msg.COLLAPSE_ALL="Collapse Blocks",e.Msg.COLLAPSE_BLOCK="Collapse Block",e.Msg.COLOUR_BLEND_COLOUR1="colour 1",e.Msg.COLOUR_BLEND_COLOUR2="colour 2",e.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",e.Msg.COLOUR_BLEND_RATIO="ratio",e.Msg.COLOUR_BLEND_TITLE="blend",e.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",e.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",e.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",e.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",e.Msg.COLOUR_RANDOM_TITLE="random colour",e.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",e.Msg.COLOUR_RGB_BLUE="blue",e.Msg.COLOUR_RGB_GREEN="green",e.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",e.Msg.COLOUR_RGB_RED="red",e.Msg.COLOUR_RGB_TITLE="colour with",e.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",e.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",e.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",e.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",e.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",e.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",e.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",e.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",e.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",e.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",e.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",e.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",e.Msg.CONTROLS_IF_MSG_ELSE="else",e.Msg.CONTROLS_IF_MSG_ELSEIF="else if",e.Msg.CONTROLS_IF_MSG_IF="if",e.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",e.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",e.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",e.Msg.CONTROLS_REPEAT_INPUT_DO="do",e.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",e.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",e.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",e.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",e.Msg.DELETE_BLOCK="Delete Block",e.Msg.DELETE_VARIABLE="Delete the '%1' variable",e.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",e.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",e.Msg.DISABLE_BLOCK="Disable Block",e.Msg.DUPLICATE_BLOCK="Duplicate",e.Msg.DUPLICATE_COMMENT="Duplicate Comment",e.Msg.ENABLE_BLOCK="Enable Block",e.Msg.EXPAND_ALL="Expand Blocks",e.Msg.EXPAND_BLOCK="Expand Block",e.Msg.EXTERNAL_INPUTS="External Inputs",e.Msg.HELP="Help",e.Msg.INLINE_INPUTS="Inline Inputs",e.Msg.IOS_CANCEL="Cancel",e.Msg.IOS_ERROR="Error",e.Msg.IOS_OK="OK",e.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",e.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",e.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",e.Msg.IOS_PROCEDURES_INPUTS="INPUTS",e.Msg.IOS_VARIABLES_ADD_BUTTON="Add",e.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",e.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",e.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",e.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",e.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",e.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",e.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",e.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",e.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",e.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",e.Msg.LISTS_GET_INDEX_FIRST="first",e.Msg.LISTS_GET_INDEX_FROM_END="# from end",e.Msg.LISTS_GET_INDEX_FROM_START="#",e.Msg.LISTS_GET_INDEX_GET="get",e.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",e.Msg.LISTS_GET_INDEX_LAST="last",e.Msg.LISTS_GET_INDEX_RANDOM="random",e.Msg.LISTS_GET_INDEX_REMOVE="remove",e.Msg.LISTS_GET_INDEX_TAIL="",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",e.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",e.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",e.Msg.LISTS_GET_SUBLIST_END_LAST="to last",e.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",e.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",e.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",e.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",e.Msg.LISTS_GET_SUBLIST_TAIL="",e.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",e.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",e.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",e.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",e.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",e.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",e.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",e.Msg.LISTS_INLIST="in list",e.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",e.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",e.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",e.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",e.Msg.LISTS_LENGTH_TITLE="length of %1",e.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",e.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",e.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",e.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",e.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",e.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",e.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",e.Msg.LISTS_SET_INDEX_INPUT_TO="as",e.Msg.LISTS_SET_INDEX_INSERT="insert at",e.Msg.LISTS_SET_INDEX_SET="set",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",e.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",e.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",e.Msg.LISTS_SORT_ORDER_DESCENDING="descending",e.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",e.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",e.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",e.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",e.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",e.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",e.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",e.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",e.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",e.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",e.Msg.LOGIC_BOOLEAN_FALSE="false",e.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",e.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",e.Msg.LOGIC_BOOLEAN_TRUE="true",e.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",e.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",e.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",e.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",e.Msg.LOGIC_NEGATE_TITLE="not %1",e.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",e.Msg.LOGIC_NULL="null",e.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",e.Msg.LOGIC_NULL_TOOLTIP="Returns null.",e.Msg.LOGIC_OPERATION_AND="and",e.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",e.Msg.LOGIC_OPERATION_OR="or",e.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",e.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",e.Msg.LOGIC_TERNARY_CONDITION="test",e.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",e.Msg.LOGIC_TERNARY_IF_FALSE="if false",e.Msg.LOGIC_TERNARY_IF_TRUE="if true",e.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",e.Msg.MATH_ADDITION_SYMBOL="+",e.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",e.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",e.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",e.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",e.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",e.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",e.Msg.MATH_CHANGE_TITLE="change %1 by %2",e.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",e.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",e.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",e.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",e.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",e.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",e.Msg.MATH_DIVISION_SYMBOL="÷",e.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",e.Msg.MATH_IS_EVEN="is even",e.Msg.MATH_IS_NEGATIVE="is negative",e.Msg.MATH_IS_ODD="is odd",e.Msg.MATH_IS_POSITIVE="is positive",e.Msg.MATH_IS_PRIME="is prime",e.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",e.Msg.MATH_IS_WHOLE="is whole",e.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",e.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",e.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",e.Msg.MATH_MULTIPLICATION_SYMBOL="×",e.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",e.Msg.MATH_NUMBER_TOOLTIP="A number.",e.Msg.MATH_ONLIST_HELPURL="",e.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",e.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",e.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",e.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",e.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",e.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",e.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",e.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",e.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",e.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",e.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",e.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",e.Msg.MATH_POWER_SYMBOL="^",e.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",e.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",e.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",e.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",e.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",e.Msg.MATH_ROUND_OPERATOR_ROUND="round",e.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",e.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",e.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",e.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",e.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",e.Msg.MATH_SINGLE_OP_ROOT="square root",e.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",e.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",e.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",e.Msg.MATH_SUBTRACTION_SYMBOL="-",e.Msg.MATH_TRIG_ACOS="acos",e.Msg.MATH_TRIG_ASIN="asin",e.Msg.MATH_TRIG_ATAN="atan",e.Msg.MATH_TRIG_COS="cos",e.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",e.Msg.MATH_TRIG_SIN="sin",e.Msg.MATH_TRIG_TAN="tan",e.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",e.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",e.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",e.Msg.NEW_NUMBER_VARIABLE="Create number variable...",e.Msg.NEW_STRING_VARIABLE="Create string variable...",e.Msg.NEW_VARIABLE="Create variable...",e.Msg.NEW_VARIABLE_TITLE="New variable name:",e.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",e.Msg.ORDINAL_NUMBER_SUFFIX="",e.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",e.Msg.PROCEDURES_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",e.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",e.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CREATE_DO="Create '%1'",e.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",e.Msg.PROCEDURES_DEFNORETURN_DO="",e.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",e.Msg.PROCEDURES_DEFNORETURN_TITLE="to",e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",e.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFRETURN_RETURN="return",e.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",e.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",e.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",e.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",e.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",e.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",e.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",e.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",e.Msg.REDO="Redo",e.Msg.REMOVE_COMMENT="Remove Comment",e.Msg.RENAME_VARIABLE="Rename variable...",e.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",e.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_APPEND_TITLE="to %1 append text %2",e.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",e.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",e.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",e.Msg.TEXT_CHARAT_FIRST="get first letter",e.Msg.TEXT_CHARAT_FROM_END="get letter # from end",e.Msg.TEXT_CHARAT_FROM_START="get letter #",e.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",e.Msg.TEXT_CHARAT_LAST="get last letter",e.Msg.TEXT_CHARAT_RANDOM="get random letter",e.Msg.TEXT_CHARAT_TAIL="",e.Msg.TEXT_CHARAT_TITLE="in text %1 %2",e.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",e.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",e.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",e.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",e.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",e.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",e.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",e.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",e.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",e.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",e.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",e.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",e.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",e.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",e.Msg.TEXT_GET_SUBSTRING_TAIL="",e.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",e.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",e.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",e.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",e.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",e.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",e.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",e.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",e.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",e.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",e.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",e.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",e.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_LENGTH_TITLE="length of %1",e.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",e.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",e.Msg.TEXT_PRINT_TITLE="print %1",e.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",e.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",e.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",e.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",e.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",e.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",e.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",e.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",e.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",e.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",e.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",e.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",e.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",e.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",e.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",e.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",e.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",e.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",e.Msg.TODAY="Today",e.Msg.UNDO="Undo",e.Msg.UNNAMED_KEY="unnamed",e.Msg.VARIABLES_DEFAULT_NAME="item",e.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",e.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",e.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",e.Msg.VARIABLES_SET="set %1 to %2",e.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",e.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",e.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",e.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",e.Msg.CONTROLS_FOREACH_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_FOR_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=e.Msg.CONTROLS_IF_MSG_ELSEIF,e.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=e.Msg.CONTROLS_IF_MSG_ELSE,e.Msg.CONTROLS_IF_IF_TITLE_IF=e.Msg.CONTROLS_IF_MSG_IF,e.Msg.CONTROLS_IF_MSG_THEN=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.LISTS_CREATE_WITH_ITEM_TITLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.LISTS_GET_INDEX_HELPURL=e.Msg.LISTS_INDEX_OF_HELPURL,e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.MATH_CHANGE_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.PROCEDURES_DEFRETURN_COMMENT=e.Msg.PROCEDURES_DEFNORETURN_COMMENT,e.Msg.PROCEDURES_DEFRETURN_DO=e.Msg.PROCEDURES_DEFNORETURN_DO,e.Msg.PROCEDURES_DEFRETURN_PROCEDURE=e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,e.Msg.PROCEDURES_DEFRETURN_TITLE=e.Msg.PROCEDURES_DEFNORETURN_TITLE,e.Msg.TEXT_APPEND_VARIABLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.MATH_HUE="230",e.Msg.LOOPS_HUE="120",e.Msg.LISTS_HUE="260",e.Msg.LOGIC_HUE="210",e.Msg.VARIABLES_HUE="330",e.Msg.TEXTS_HUE="160",e.Msg.PROCEDURES_HUE="290",e.Msg.COLOUR_HUE="20",e.Msg.VARIABLES_DYNAMIC_HUE="310",e.Msg})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(207),o=n(208);t.diff=o.default;var r=n(68);t.split=r.default,t.default=i.default},function(e,t,n){e.exports={type:"_1Bvs70vpuEsry3XZG38u_x"}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Spec}));var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2),_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_toArray__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21),_babel_runtime_helpers_toArray__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_toArray__WEBPACK_IMPORTED_MODULE_4__),_Command__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(85),_Event__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(86),_Key__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(87),_Topic__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(88),_Type__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(89),_Core_Event__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(29),BaseEvent=_Core_Event__WEBPACK_IMPORTED_MODULE_10__.a,capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},slug_name=function(e){return e.split("_").map((function(e){return capitalize(e)})).join(" ")},put_in=function e(t,n,i){var o=_babel_runtime_helpers_toArray__WEBPACK_IMPORTED_MODULE_4___default()(n),r=o[0],s=o.slice(1);return 0===s.length?t[r]=i:t[r]=e(t[r]||{},s,i),t},Spec=function(){function Spec(){var e=this;_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,Spec),_constructors.set(this,{writable:!0,value:{}}),_event_parser.set(this,{writable:!0,value:{}}),_commands.set(this,{writable:!0,value:{}}),_events.set(this,{writable:!0,value:{}}),_keys.set(this,{writable:!0,value:{}}),_topics.set(this,{writable:!0,value:{}}),_types.set(this,{writable:!0,value:{}}),_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_constructors).parse=function(t){if(t.type in _babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(e,_event_parser))return new(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(e,_event_parser)[t.type])(t)}}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(Spec,null,[{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,n=t.commands,i=t.events,o=t.keys,r=t.topics,s=t.types,a=new Spec;return Object.values(s).forEach((function(e){return a.addType(e)})),Object.values(o).forEach((function(e){return a.addKey(e)})),Object.entries(i).forEach((function(e){var t=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(e,2),n=t[0],i=t[1];return a.addEvent(n,i)})),Object.entries(n).forEach((function(e){var t=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(e,2),n=t[0],i=t[1];return a.addCommand(n,i)})),Object.values(r).forEach((function(e){return a.addTopic(e)})),a}}]),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(Spec,[{key:"addCommand",value:function(e,t){"string"==typeof t&&(t=JSON.parse(t));var n=_Command__WEBPACK_IMPORTED_MODULE_5__.a.fromJSON(e,t);return!!n&&(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_commands)[e]=n,!0)}},{key:"addEvent",value:function addEvent(type,event){"string"==typeof event&&(event=JSON.parse(event));var e=_Event__WEBPACK_IMPORTED_MODULE_6__.a.fromJSON(type,event);if(e){_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_events)[type]=e;var slug=e.name.replace(/\W+/g,""),fields=e.fields.map((function(e){return"get ".concat(e.name,"() { return super.field('").concat(e.name,"'); }")})).join("\n"),path=type.split(".").map(slug_name),dynamic="\n      class ".concat(slug," extends BaseEvent {\n        constructor(data) {\n          super(e, data);\n        }\n        ").concat(fields,"\n      }; ").concat(slug,"\n      "),cls=eval(dynamic);return put_in(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_constructors),path,cls),_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_event_parser)[type]=cls,!0}return!1}},{key:"addKey",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=_Key__WEBPACK_IMPORTED_MODULE_7__.a.fromJSON(e);return!!t&&(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_keys)[t.slug]=t,!0)}},{key:"addTopic",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=_Topic__WEBPACK_IMPORTED_MODULE_8__.a.fromJSON(e,this);return!!t&&(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_topics)[t.name]=t,!0)}},{key:"addType",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=_Type__WEBPACK_IMPORTED_MODULE_9__.a.fromJSON(e);return!!t&&(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_types)[t.slug]=t,!0)}},{key:"command",value:function(e){return _babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_commands)[e]}},{key:"event",value:function(e){return _babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_events)[e]}},{key:"key",value:function(e){return _babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_keys)[e]}},{key:"topic",value:function(e){return _babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_topics)[e]}},{key:"type",value:function(e){return _babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_types)[e]}},{key:"commands",get:function(){return Object.values(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_commands))}},{key:"events",get:function(){return Object.values(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_events))}},{key:"keys",get:function(){return Object.values(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_keys))}},{key:"topics",get:function(){return Object.values(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_topics))}},{key:"types",get:function(){return Object.values(_babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_types))}},{key:"Events",get:function(){return _babel_runtime_helpers_classPrivateFieldGet__WEBPACK_IMPORTED_MODULE_3___default()(this,_constructors)}}]),Spec}(),_constructors=new WeakMap,_event_parser=new WeakMap,_commands=new WeakMap,_events=new WeakMap,_keys=new WeakMap,_topics=new WeakMap,_types=new WeakMap},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(4),o=n.n(i),r=n(6),s=n.n(r),a=n(5),l=n.n(a),c=n(2),u=n.n(c),h=n(3),d=n.n(h),p=n(30),f=n(11),g=function(){function e(){s()(this,e),m.set(this,{writable:!0,value:{name:"",version:"0.0.0"}}),v.set(this,{writable:!0,value:""}),_.set(this,{writable:!0,value:""}),y.set(this,{writable:!0,value:[]}),b.set(this,{writable:!0,value:{}}),T.set(this,{writable:!0,value:""}),E.set(this,{writable:!0,value:{}}),w.set(this,{writable:!0,value:{}})}return l()(e,[{key:"example",value:function(e){var t=u()(this,w)[e]||[];return t[t.length*Math.random()|0]}},{key:"app",get:function(){return u()(this,m)}},{key:"slug",get:function(){return u()(this,_)}},{key:"name",get:function(){return u()(this,v)}},{key:"type",get:function(){return u()(this,_)}},{key:"emits",get:function(){return u()(this,y)}},{key:"fields",get:function(){return Object.values(u()(this,b))}},{key:"description",get:function(){return u()(this,T)}},{key:"links",get:function(){return u()(this,E)}},{key:"examples",get:function(){return u()(this,w)}}],[{key:"fromJSON",value:function(t,n){"string"==typeof n&&(n=JSON.parse(n));var i=n,r=i.app,s=i.doc,a=i.emits,l=i.fields,c=i.links,h=i.examples,g=new e;return d()(g,m,r),d()(g,v,Object(f.b)(t)),d()(g,_,t),d()(g,y,a),d()(g,b,{}),d()(g,T,s.trim()),d()(g,E,c||{}),d()(g,w,h||{}),Object.entries(l).forEach((function(e){var t=o()(e,2),n=t[0],i=t[1];return u()(g,b)[n]=p.a.fromJSON(n,i)})),g}}]),e}(),m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,b=new WeakMap,T=new WeakMap,E=new WeakMap,w=new WeakMap},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(4),o=n.n(i),r=n(6),s=n.n(r),a=n(5),l=n.n(a),c=n(2),u=n.n(c),h=n(3),d=n.n(h),p=n(30),f=n(11),g=n(29),m=function(){function e(){s()(this,e),v.set(this,{writable:!0,value:{name:"",version:"0.0.0"}}),_.set(this,{writable:!0,value:""}),y.set(this,{writable:!0,value:""}),b.set(this,{writable:!0,value:"1.0.0"}),T.set(this,{writable:!0,value:{}}),E.set(this,{writable:!0,value:""}),w.set(this,{writable:!0,value:{}}),k.set(this,{writable:!0,value:{}}),S.set(this,{writable:!0,value:{}})}return l()(e,[{key:"example",value:function(e){var t=u()(this,S)[e]||[];return t[t.length*Math.random()|0]}},{key:"app",get:function(){return u()(this,v)}},{key:"slug",get:function(){return u()(this,y)}},{key:"name",get:function(){return u()(this,_)}},{key:"type",get:function(){return u()(this,y)}},{key:"version",get:function(){return u()(this,b)}},{key:"fields",get:function(){return Object.values(u()(this,T))}},{key:"description",get:function(){return u()(this,E)}},{key:"links",get:function(){return u()(this,w)}},{key:"history",get:function(){return u()(this,k)}},{key:"examples",get:function(){return u()(this,S)}}],[{key:"fromJSON",value:function(t,n){"string"==typeof n&&(n=JSON.parse(n));var i=n,r=i.app,s=i.doc,a=i.fields,l=i.links,c=i.version,h=i.history,m=i.examples,C=new e;return d()(C,v,r),d()(C,_,Object(f.b)(t)),d()(C,y,t),d()(C,b,c),d()(C,T,{}),d()(C,E,s.trim()),d()(C,w,l||{}),d()(C,k,h||{}),d()(C,S,m||{}),Object.entries(a).forEach((function(e){var t=o()(e,2),n=t[0],i=t[1];return u()(C,T)[n]=p.a.fromJSON(n,i)})),m.json&&!m.javascript&&(m.javascript=[],m.json.forEach((function(e){var t=JSON.parse(e),n=t.payload,i=new g.a(C,t);m.javascript.push("".concat(u()(C,_)," { \n  ").concat(Object.keys(n).map((function(e){return"".concat(e,": ").concat(Object(f.a)(i.field(e)))})).join(",\n  "),"\n} "))}))),C}}]),e}(),v=new WeakMap,_=new WeakMap,y=new WeakMap,b=new WeakMap,T=new WeakMap,E=new WeakMap,w=new WeakMap,k=new WeakMap,S=new WeakMap},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(6),o=n.n(i),r=n(5),s=n.n(r),a=n(2),l=n.n(a),c=n(3),u=n.n(c),h=n(11),d=function(){function e(){o()(this,e),p.set(this,{writable:!0,value:{name:"",version:"0.0.0"}}),f.set(this,{writable:!0,value:""}),g.set(this,{writable:!0,value:""}),m.set(this,{writable:!0,value:""}),v.set(this,{writable:!0,value:""}),_.set(this,{writable:!0,value:{}}),y.set(this,{writable:!0,value:{}})}return s()(e,[{key:"example",value:function(e){var t=l()(this,y)[e]||[];return t[t.length*Math.random()|0]}},{key:"app",get:function(){return l()(this,p)}},{key:"slug",get:function(){return l()(this,f)}},{key:"name",get:function(){return l()(this,g)}},{key:"description",get:function(){return l()(this,v)}},{key:"links",get:function(){return l()(this,_)}},{key:"examples",get:function(){return l()(this,y)}}],[{key:"fromJSON",value:function(t){"string"==typeof t&&(t=JSON.parse(t));var n=t,i=n.app,o=n.name,r=n.doc,s=n.links,a=n.examples,l=new e;return u()(l,p,i||{name:"",version:"0.0.0"}),u()(l,f,o),u()(l,g,Object(h.b)(o)),u()(l,v,r.trim()),u()(l,_,s||{}),u()(l,y,a||{}),l}}]),e}(),p=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(6),o=n.n(i),r=n(5),s=n.n(r),a=n(2),l=n.n(a),c=n(3),u=n.n(c),h=n(11),d=function(){function e(){o()(this,e),p.set(this,{writable:!0,value:""}),f.set(this,{writable:!0,value:""}),g.set(this,{writable:!0,value:""}),m.set(this,{writable:!0,value:""}),v.set(this,{writable:!0,value:1}),_.set(this,{writable:!0,value:[]})}return s()(e,[{key:"slug",get:function(){return l()(this,f)}},{key:"name",get:function(){return l()(this,p)}},{key:"topic",get:function(){return l()(this,f)}},{key:"key",get:function(){return l()(this,g)}},{key:"partitions",get:function(){return l()(this,v)}},{key:"events",get:function(){return Object.values(l()(this,_))}},{key:"description",get:function(){return l()(this,m)}}],[{key:"fromJSON",value:function(t,n){"string"==typeof t&&(t=JSON.parse(t));var i=t,o=i.doc,r=i.events,s=i.key,a=i.partitions,l=i.topic,c=new e;return u()(c,p,Object(h.b)(l)),u()(c,f,l),u()(c,g,s),u()(c,m,o.trim()),u()(c,_,(r||[]).map((function(e){return n.event(e)}))),u()(c,v,a||1),c}}]),e}(),p=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(6),o=n.n(i),r=n(5),s=n.n(r),a=n(2),l=n.n(a),c=n(3),u=n.n(c),h=n(11),d=function(){function e(){o()(this,e),p.set(this,{writable:!0,value:{name:"",version:"0.0.0"}}),f.set(this,{writable:!0,value:""}),g.set(this,{writable:!0,value:""}),m.set(this,{writable:!0,value:""}),v.set(this,{writable:!0,value:{}}),_.set(this,{writable:!0,value:{}})}return s()(e,[{key:"example",value:function(e){var t=l()(this,_)[e]||[];return t[t.length*Math.random()|0]}},{key:"app",get:function(){return l()(this,p)}},{key:"slug",get:function(){return l()(this,f)}},{key:"name",get:function(){return l()(this,g)}},{key:"description",get:function(){return l()(this,m)}},{key:"links",get:function(){return l()(this,v)}},{key:"examples",get:function(){return l()(this,_)}}],[{key:"fromJSON",value:function(t){"string"==typeof t&&(t=JSON.parse(t));var n=t,i=n.app,o=n.name,r=n.doc,s=n.links,a=n.examples,l=new e,c=t.links.docs.split("/").pop().replace(".html","").replace("Kvasir.Type.","").split(".").slice(-2,-1);return c.push(o),u()(l,f,c.join(".").toLowerCase().replace("types.")),u()(l,p,i||{name:"",version:"0.0.0"}),u()(l,g,Object(h.b)(o)),u()(l,m,r.trim()),u()(l,v,s||{}),u()(l,_,a||{}),l}}]),e}(),p=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap},function(e,t,n){"use strict";
/** @license React v16.12.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(49),o="function"==typeof Symbol&&Symbol.for,r=o?Symbol.for("react.element"):60103,s=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.profiler"):60114,u=o?Symbol.for("react.provider"):60109,h=o?Symbol.for("react.context"):60110,d=o?Symbol.for("react.forward_ref"):60112,p=o?Symbol.for("react.suspense"):60113;o&&Symbol.for("react.suspense_list");var f=o?Symbol.for("react.memo"):60115,g=o?Symbol.for("react.lazy"):60116;o&&Symbol.for("react.fundamental"),o&&Symbol.for("react.responder"),o&&Symbol.for("react.scope");var m="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||_}function T(){}function E(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||_}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=b.prototype;var w=E.prototype=new T;w.constructor=E,i(w,b.prototype),w.isPureReactComponent=!0;var k={current:null},S={current:null},C=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)C.call(t,i)&&!x.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:e,key:s,ref:a,props:o,_owner:S.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var I=/\/+/g,O=[];function M(e,t,n,i){if(O.length){var o=O.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=i,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:i,count:0}}function L(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>O.length&&O.push(e)}function D(e,t,n){return null==e?0:function e(t,n,i,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case s:l=!0}}if(l)return i(o,t,""===n?"."+N(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=n+N(a=t[c],c);l+=e(a,u,i,o)}else if(null===t||"object"!=typeof t?u=null:u="function"==typeof(u=m&&t[m]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),c=0;!(a=t.next()).done;)l+=e(a=a.value,u=n+N(a,c++),i,o);else if("object"===a)throw i=""+t,Error(v(31,"[object Object]"===i?"object with keys {"+Object.keys(t).join(", ")+"}":i,""));return l}(e,"",t,n)}function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function P(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,n){var i=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,i,n,(function(e){return e})):null!=e&&(R(e)&&(e=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(I,"$&/")+"/")+n)),i.push(e))}function F(e,t,n,i,o){var r="";null!=n&&(r=(""+n).replace(I,"$&/")+"/"),D(e,B,t=M(t,r,i,o)),L(t)}function W(){var e=k.current;if(null===e)throw Error(v(321));return e}var H={Children:{map:function(e,t,n){if(null==e)return e;var i=[];return F(e,i,null,t,n),i},forEach:function(e,t,n){if(null==e)return e;D(e,P,t=M(null,null,t,n)),L(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!R(e))throw Error(v(143));return e}},createRef:function(){return{current:null}},Component:b,PureComponent:E,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return W().useCallback(e,t)},useContext:function(e,t){return W().useContext(e,t)},useEffect:function(e,t){return W().useEffect(e,t)},useImperativeHandle:function(e,t,n){return W().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return W().useLayoutEffect(e,t)},useMemo:function(e,t){return W().useMemo(e,t)},useReducer:function(e,t,n){return W().useReducer(e,t,n)},useRef:function(e){return W().useRef(e)},useState:function(e){return W().useState(e)},Fragment:a,Profiler:c,StrictMode:l,Suspense:p,createElement:A,cloneElement:function(e,t,n){if(null==e)throw Error(v(267,e));var o=i({},e.props),s=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)C.call(t,u)&&!x.hasOwnProperty(u)&&(o[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:r,type:e.type,key:s,ref:a,props:o,_owner:l}},createFactory:function(e){var t=A.bind(null,e);return t.type=e,t},isValidElement:R,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:k,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:i}},U={default:H},$=U&&H||U;e.exports=$.default||$},function(e,t,n){"use strict";
/** @license React v16.12.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(0),o=n(49),r=n(92);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(s(227));var a=null,l={};function c(){if(a)for(var e in l){var t=l[e],n=a.indexOf(e);if(!(-1<n))throw Error(s(96,e));if(!h[n]){if(!t.extractEvents)throw Error(s(97,e));for(var i in h[n]=t,n=t.eventTypes){var o=void 0,r=n[i],c=t,p=i;if(d.hasOwnProperty(p))throw Error(s(99,p));d[p]=r;var f=r.phasedRegistrationNames;if(f){for(o in f)f.hasOwnProperty(o)&&u(f[o],c,p);o=!0}else r.registrationName?(u(r.registrationName,c,p),o=!0):o=!1;if(!o)throw Error(s(98,i,e))}}}}function u(e,t,n){if(p[e])throw Error(s(100,e));p[e]=t,f[e]=t.eventTypes[n].dependencies}var h=[],d={},p={},f={};function g(e,t,n,i,o,r,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var m=!1,v=null,_=!1,y=null,b={onError:function(e){m=!0,v=e}};function T(e,t,n,i,o,r,s,a,l){m=!1,v=null,g.apply(b,arguments)}var E=null,w=null,k=null;function S(e,t,n){var i=e.type||"unknown-event";e.currentTarget=k(n),function(e,t,n,i,o,r,a,l,c){if(T.apply(this,arguments),m){if(!m)throw Error(s(198));var u=v;m=!1,v=null,_||(_=!0,y=u)}}(i,t,void 0,e),e.currentTarget=null}function C(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function x(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var A=null;function R(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var i=0;i<t.length&&!e.isPropagationStopped();i++)S(e,t[i],n[i]);else t&&S(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function I(e){if(null!==e&&(A=C(A,e)),e=A,A=null,e){if(x(e,R),A)throw Error(s(95));if(_)throw e=y,_=!1,y=null,e}}var O={injectEventPluginOrder:function(e){if(a)throw Error(s(101));a=Array.prototype.slice.call(e),c()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!l.hasOwnProperty(t)||l[t]!==i){if(l[t])throw Error(s(102,t));l[t]=i,n=!0}}n&&c()}};function M(e,t){var n=e.stateNode;if(!n)return null;var i=E(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var L=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;L.hasOwnProperty("ReactCurrentDispatcher")||(L.ReactCurrentDispatcher={current:null}),L.hasOwnProperty("ReactCurrentBatchConfig")||(L.ReactCurrentBatchConfig={suspense:null});var D=/^(.*)[\\\/]/,N="function"==typeof Symbol&&Symbol.for,P=N?Symbol.for("react.element"):60103,B=N?Symbol.for("react.portal"):60106,F=N?Symbol.for("react.fragment"):60107,W=N?Symbol.for("react.strict_mode"):60108,H=N?Symbol.for("react.profiler"):60114,U=N?Symbol.for("react.provider"):60109,$=N?Symbol.for("react.context"):60110,V=N?Symbol.for("react.concurrent_mode"):60111,G=N?Symbol.for("react.forward_ref"):60112,z=N?Symbol.for("react.suspense"):60113,X=N?Symbol.for("react.suspense_list"):60120,j=N?Symbol.for("react.memo"):60115,K=N?Symbol.for("react.lazy"):60116;N&&Symbol.for("react.fundamental"),N&&Symbol.for("react.responder"),N&&Symbol.for("react.scope");var Y="function"==typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Y&&e[Y]||e["@@iterator"])?e:null}function J(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case F:return"Fragment";case B:return"Portal";case H:return"Profiler";case W:return"StrictMode";case z:return"Suspense";case X:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case $:return"Context.Consumer";case U:return"Context.Provider";case G:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case j:return J(e.type);case K:if(e=1===e._status?e._result:null)return J(e)}return null}function Z(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var i=e._debugOwner,o=e._debugSource,r=J(e.type);n=null,i&&(n=J(i.type)),i=r,r="",o?r=" (at "+o.fileName.replace(D,"")+":"+o.lineNumber+")":n&&(r=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+r}t+=n,e=e.return}while(e);return t}var Q=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ee=null,te=null,ne=null;function ie(e){if(e=w(e)){if("function"!=typeof ee)throw Error(s(280));var t=E(e.stateNode);ee(e.stateNode,e.type,t)}}function oe(e){te?ne?ne.push(e):ne=[e]:te=e}function re(){if(te){var e=te,t=ne;if(ne=te=null,ie(e),t)for(e=0;e<t.length;e++)ie(t[e])}}function se(e,t){return e(t)}function ae(e,t,n,i){return e(t,n,i)}function le(){}var ce=se,ue=!1,he=!1;function de(){null===te&&null===ne||(le(),re())}new Map;var pe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fe=Object.prototype.hasOwnProperty,ge={},me={};function ve(e,t,n,i,o,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r}var _e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){_e[e]=new ve(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];_e[t]=new ve(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){_e[e]=new ve(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){_e[e]=new ve(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){_e[e]=new ve(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){_e[e]=new ve(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){_e[e]=new ve(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){_e[e]=new ve(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){_e[e]=new ve(e,5,!1,e.toLowerCase(),null,!1)}));var ye=/[\-:]([a-z])/g;function be(e){return e[1].toUpperCase()}function Te(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ee(e,t,n,i){var o=_e.hasOwnProperty(t)?_e[t]:null;(null!==o?0===o.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,i)&&(n=null),i||null===o?function(e){return!!fe.call(me,e)||!fe.call(ge,e)&&(pe.test(e)?me[e]=!0:(ge[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,i=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}function we(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ke(e){e._valueTracker||(e._valueTracker=function(e){var t=we(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){i=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Se(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=we(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Ce(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function xe(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=Te(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ae(e,t){null!=(t=t.checked)&&Ee(e,"checked",t,!1)}function Re(e,t){Ae(e,t);var n=Te(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?Oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oe(e,t.type,Te(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Oe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Me(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Le(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Te(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(i&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function De(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw Error(s(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(s(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:Te(n)}}function Pe(e,t){var n=Te(t.value),i=Te(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function Be(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ye,be);_e[t]=new ve(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ye,be);_e[t]=new ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ye,be);_e[t]=new ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){_e[e]=new ve(e,1,!1,e.toLowerCase(),null,!1)})),_e.xlinkHref=new ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){_e[e]=new ve(e,1,!1,e.toLowerCase(),null,!0)}));var Fe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function We(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?We(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ue,$e=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,o){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Fe.svg||"innerHTML"in e)e.innerHTML=t;else{for((Ue=Ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ge(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ze={animationend:Ge("Animation","AnimationEnd"),animationiteration:Ge("Animation","AnimationIteration"),animationstart:Ge("Animation","AnimationStart"),transitionend:Ge("Transition","TransitionEnd")},Xe={},je={};function Ke(e){if(Xe[e])return Xe[e];if(!ze[e])return e;var t,n=ze[e];for(t in n)if(n.hasOwnProperty(t)&&t in je)return Xe[e]=n[t];return e}Q&&(je=document.createElement("div").style,"AnimationEvent"in window||(delete ze.animationend.animation,delete ze.animationiteration.animation,delete ze.animationstart.animation),"TransitionEvent"in window||delete ze.transitionend.transition);var Ye=Ke("animationend"),qe=Ke("animationiteration"),Je=Ke("animationstart"),Ze=Ke("transitionend"),Qe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(s(188))}function it(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(null===o)break;var r=o.alternate;if(null===r){if(null!==(i=o.return)){n=i;continue}break}if(o.child===r.child){for(r=o.child;r;){if(r===n)return nt(o),e;if(r===i)return nt(o),t;r=r.sibling}throw Error(s(188))}if(n.return!==i.return)n=o,i=r;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var ot,rt,st,at=!1,lt=[],ct=null,ut=null,ht=null,dt=new Map,pt=new Map,ft=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),mt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function vt(e,t,n,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i}}function _t(e,t){switch(e){case"focus":case"blur":ct=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ht=null;break;case"pointerover":case"pointerout":dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pt.delete(t.pointerId)}}function yt(e,t,n,i,o){return null===e||e.nativeEvent!==o?(e=vt(t,n,i,o),null!==t&&(null!==(t=pi(t))&&rt(t)),e):(e.eventSystemFlags|=i,e)}function bt(e){var t=di(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void r.unstable_runWithPriority(e.priority,(function(){st(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Tt(e){if(null!==e.blockedOn)return!1;var t=On(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null!==t){var n=pi(t);return null!==n&&rt(n),e.blockedOn=t,!1}return!0}function Et(e,t,n){Tt(e)&&n.delete(t)}function wt(){for(at=!1;0<lt.length;){var e=lt[0];if(null!==e.blockedOn){null!==(e=pi(e.blockedOn))&&ot(e);break}var t=On(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:lt.shift()}null!==ct&&Tt(ct)&&(ct=null),null!==ut&&Tt(ut)&&(ut=null),null!==ht&&Tt(ht)&&(ht=null),dt.forEach(Et),pt.forEach(Et)}function kt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wt)))}function St(e){function t(t){return kt(t,e)}if(0<lt.length){kt(lt[0],e);for(var n=1;n<lt.length;n++){var i=lt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==ct&&kt(ct,e),null!==ut&&kt(ut,e),null!==ht&&kt(ht,e),dt.forEach(t),pt.forEach(t),n=0;n<ft.length;n++)(i=ft[n]).blockedOn===e&&(i.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)bt(n),null===n.blockedOn&&ft.shift()}function Ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function xt(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function At(e,t,n){(t=M(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=C(n._dispatchListeners,t),n._dispatchInstances=C(n._dispatchInstances,e))}function Rt(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=xt(t);for(t=n.length;0<t--;)At(n[t],"captured",e);for(t=0;t<n.length;t++)At(n[t],"bubbled",e)}}function It(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=M(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=C(n._dispatchListeners,t),n._dispatchInstances=C(n._dispatchInstances,e))}function Ot(e){e&&e.dispatchConfig.registrationName&&It(e._targetInst,null,e)}function Mt(e){x(e,Rt)}function Lt(){return!0}function Dt(){return!1}function Nt(e,t,n,i){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):"target"===o?this.target=i:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Lt:Dt,this.isPropagationStopped=Dt,this}function Pt(e,t,n,i){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,i),o}return new this(e,t,n,i)}function Bt(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Ft(e){e.eventPool=[],e.getPooled=Pt,e.release=Bt}o(Nt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Lt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Lt)},persist:function(){this.isPersistent=Lt},isPersistent:Dt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Dt,this._dispatchInstances=this._dispatchListeners=null}}),Nt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Nt.extend=function(e){function t(){}function n(){return i.apply(this,arguments)}var i=this;t.prototype=i.prototype;var r=new t;return o(r,n.prototype),n.prototype=r,n.prototype.constructor=n,n.Interface=o({},i.Interface,e),n.extend=i.extend,Ft(n),n},Ft(Nt);var Wt=Nt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Ht=Nt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ut=Nt.extend({view:null,detail:null}),$t=Ut.extend({relatedTarget:null});function Vt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Gt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Xt[e])&&!!t[e]}function Kt(){return jt}for(var Yt=Ut.extend({key:function(e){if(e.key){var t=Gt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Vt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?zt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Kt,charCode:function(e){return"keypress"===e.type?Vt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Vt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),qt=0,Jt=0,Zt=!1,Qt=!1,en=Ut.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Kt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=qt;return qt=e.screenX,Zt?"mousemove"===e.type?e.screenX-t:0:(Zt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Jt;return Jt=e.screenY,Qt?"mousemove"===e.type?e.screenY-t:0:(Qt=!0,0)}}),tn=en.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),nn=en.extend({dataTransfer:null}),on=Ut.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Kt}),rn=Nt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),sn=en.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),an=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Ye,"animationEnd",2],[qe,"animationIteration",2],[Je,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Ze,"transitionEnd",2],["waiting","waiting",2]],ln={},cn={},un=0;un<an.length;un++){var hn=an[un],dn=hn[0],pn=hn[1],fn=hn[2],gn="on"+(pn[0].toUpperCase()+pn.slice(1)),mn={phasedRegistrationNames:{bubbled:gn,captured:gn+"Capture"},dependencies:[dn],eventPriority:fn};ln[pn]=mn,cn[dn]=mn}var vn={eventTypes:ln,getEventPriority:function(e){return void 0!==(e=cn[e])?e.eventPriority:2},extractEvents:function(e,t,n,i){var o=cn[e];if(!o)return null;switch(e){case"keypress":if(0===Vt(n))return null;case"keydown":case"keyup":e=Yt;break;case"blur":case"focus":e=$t;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=nn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=on;break;case Ye:case qe:case Je:e=Wt;break;case Ze:e=rn;break;case"scroll":e=Ut;break;case"wheel":e=sn;break;case"copy":case"cut":case"paste":e=Ht;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=tn;break;default:e=Nt}return Mt(t=e.getPooled(o,t,n,i)),t}},_n=r.unstable_UserBlockingPriority,yn=r.unstable_runWithPriority,bn=vn.getEventPriority,Tn=10,En=[];function wn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var i=n;if(3===i.tag)i=i.stateNode.containerInfo;else{for(;i.return;)i=i.return;i=3!==i.tag?null:i.stateNode.containerInfo}if(!i)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=di(i)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var o=Ct(e.nativeEvent);i=e.topLevelType;for(var r=e.nativeEvent,s=e.eventSystemFlags,a=null,l=0;l<h.length;l++){var c=h[l];c&&(c=c.extractEvents(i,t,r,o,s))&&(a=C(a,c))}I(a)}}var kn=!0;function Sn(e,t){Cn(t,e,!1)}function Cn(e,t,n){switch(bn(t)){case 0:var i=xn.bind(null,t,1);break;case 1:i=An.bind(null,t,1);break;default:i=In.bind(null,t,1)}n?e.addEventListener(t,i,!0):e.addEventListener(t,i,!1)}function xn(e,t,n){ue||le();var i=In,o=ue;ue=!0;try{ae(i,e,t,n)}finally{(ue=o)||de()}}function An(e,t,n){yn(_n,In.bind(null,e,t,n))}function Rn(e,t,n,i){if(En.length){var o=En.pop();o.topLevelType=e,o.eventSystemFlags=t,o.nativeEvent=n,o.targetInst=i,e=o}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:i,ancestors:[]};try{if(t=wn,n=e,he)t(n,void 0);else{he=!0;try{ce(t,n,void 0)}finally{he=!1,de()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,En.length<Tn&&En.push(e)}}function In(e,t,n){if(kn)if(0<lt.length&&-1<gt.indexOf(e))e=vt(null,e,t,n),lt.push(e);else{var i=On(e,t,n);null===i?_t(e,n):-1<gt.indexOf(e)?(e=vt(i,e,t,n),lt.push(e)):function(e,t,n,i){switch(t){case"focus":return ct=yt(ct,e,t,n,i),!0;case"dragenter":return ut=yt(ut,e,t,n,i),!0;case"mouseover":return ht=yt(ht,e,t,n,i),!0;case"pointerover":var o=i.pointerId;return dt.set(o,yt(dt.get(o)||null,e,t,n,i)),!0;case"gotpointercapture":return o=i.pointerId,pt.set(o,yt(pt.get(o)||null,e,t,n,i)),!0}return!1}(i,e,t,n)||(_t(e,n),Rn(e,t,n,null))}}function On(e,t,n){var i=Ct(n);if(null!==(i=di(i))){var o=et(i);if(null===o)i=null;else{var r=o.tag;if(13===r){if(null!==(i=tt(o)))return i;i=null}else if(3===r){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Rn(e,t,n,i),null}function Mn(e){if(!Q)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var Ln=new("function"==typeof WeakMap?WeakMap:Map);function Dn(e){var t=Ln.get(e);return void 0===t&&(t=new Set,Ln.set(e,t)),t}function Nn(e,t,n){if(!n.has(e)){switch(e){case"scroll":Cn(t,"scroll",!0);break;case"focus":case"blur":Cn(t,"focus",!0),Cn(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Mn(e)&&Cn(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Qe.indexOf(e)&&Sn(e,t)}n.add(e)}}var Pn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bn=["Webkit","ms","Moz","O"];function Fn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Pn.hasOwnProperty(e)&&Pn[e]?(""+t).trim():t+"px"}function Wn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),o=Fn(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,o):e[n]=o}}Object.keys(Pn).forEach((function(e){Bn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pn[t]=Pn[e]}))}));var Hn=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Un(e,t){if(t){if(Hn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62,""))}}function $n(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Vn(e,t){var n=Dn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=f[t];for(var i=0;i<t.length;i++)Nn(t[i],e,n)}function Gn(){}function zn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jn(e,t){var n,i=Xn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Xn(i)}}function Kn(){for(var e=window,t=zn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=zn((e=t.contentWindow).document)}return t}function Yn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var qn="$",Jn="/$",Zn="$?",Qn="$!",ei=null,ti=null;function ni(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ii(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var oi="function"==typeof setTimeout?setTimeout:void 0,ri="function"==typeof clearTimeout?clearTimeout:void 0;function si(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function ai(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===qn||n===Qn||n===Zn){if(0===t)return e;t--}else n===Jn&&t++}e=e.previousSibling}return null}var li=Math.random().toString(36).slice(2),ci="__reactInternalInstance$"+li,ui="__reactEventHandlers$"+li,hi="__reactContainere$"+li;function di(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ai(e);null!==e;){if(n=e[ci])return n;e=ai(e)}return t}n=(e=n).parentNode}return null}function pi(e){return!(e=e[ci]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function fi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function gi(e){return e[ui]||null}var mi=null,vi=null,_i=null;function yi(){if(_i)return _i;var e,t,n=vi,i=n.length,o="value"in mi?mi.value:mi.textContent,r=o.length;for(e=0;e<i&&n[e]===o[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===o[r-t];t++);return _i=o.slice(e,1<t?1-t:void 0)}var bi=Nt.extend({data:null}),Ti=Nt.extend({data:null}),Ei=[9,13,27,32],wi=Q&&"CompositionEvent"in window,ki=null;Q&&"documentMode"in document&&(ki=document.documentMode);var Si=Q&&"TextEvent"in window&&!ki,Ci=Q&&(!wi||ki&&8<ki&&11>=ki),xi=String.fromCharCode(32),Ai={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ri=!1;function Ii(e,t){switch(e){case"keyup":return-1!==Ei.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Oi(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Mi=!1;var Li={eventTypes:Ai,extractEvents:function(e,t,n,i){var o;if(wi)e:{switch(e){case"compositionstart":var r=Ai.compositionStart;break e;case"compositionend":r=Ai.compositionEnd;break e;case"compositionupdate":r=Ai.compositionUpdate;break e}r=void 0}else Mi?Ii(e,n)&&(r=Ai.compositionEnd):"keydown"===e&&229===n.keyCode&&(r=Ai.compositionStart);return r?(Ci&&"ko"!==n.locale&&(Mi||r!==Ai.compositionStart?r===Ai.compositionEnd&&Mi&&(o=yi()):(vi="value"in(mi=i)?mi.value:mi.textContent,Mi=!0)),r=bi.getPooled(r,t,n,i),o?r.data=o:null!==(o=Oi(n))&&(r.data=o),Mt(r),o=r):o=null,(e=Si?function(e,t){switch(e){case"compositionend":return Oi(t);case"keypress":return 32!==t.which?null:(Ri=!0,xi);case"textInput":return(e=t.data)===xi&&Ri?null:e;default:return null}}(e,n):function(e,t){if(Mi)return"compositionend"===e||!wi&&Ii(e,t)?(e=yi(),_i=vi=mi=null,Mi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ci&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Ti.getPooled(Ai.beforeInput,t,n,i)).data=e,Mt(t)):t=null,null===o?t:null===t?o:[o,t]}},Di={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ni(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Di[e.type]:"textarea"===t}var Pi={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Bi(e,t,n){return(e=Nt.getPooled(Pi.change,e,t,n)).type="change",oe(n),Mt(e),e}var Fi=null,Wi=null;function Hi(e){I(e)}function Ui(e){if(Se(fi(e)))return e}function $i(e,t){if("change"===e)return t}var Vi=!1;function Gi(){Fi&&(Fi.detachEvent("onpropertychange",zi),Wi=Fi=null)}function zi(e){if("value"===e.propertyName&&Ui(Wi))if(e=Bi(Wi,e,Ct(e)),ue)I(e);else{ue=!0;try{se(Hi,e)}finally{ue=!1,de()}}}function Xi(e,t,n){"focus"===e?(Gi(),Wi=n,(Fi=t).attachEvent("onpropertychange",zi)):"blur"===e&&Gi()}function ji(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ui(Wi)}function Ki(e,t){if("click"===e)return Ui(t)}function Yi(e,t){if("input"===e||"change"===e)return Ui(t)}Q&&(Vi=Mn("input")&&(!document.documentMode||9<document.documentMode));var qi,Ji={eventTypes:Pi,_isInputEventSupported:Vi,extractEvents:function(e,t,n,i){var o=t?fi(t):window,r=o.nodeName&&o.nodeName.toLowerCase();if("select"===r||"input"===r&&"file"===o.type)var s=$i;else if(Ni(o))if(Vi)s=Yi;else{s=ji;var a=Xi}else(r=o.nodeName)&&"input"===r.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(s=Ki);if(s&&(s=s(e,t)))return Bi(s,n,i);a&&a(e,o,t),"blur"===e&&(e=o._wrapperState)&&e.controlled&&"number"===o.type&&Oe(o,"number",o.value)}},Zi={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Qi={eventTypes:Zi,extractEvents:function(e,t,n,i,o){var r="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(r&&0==(32&o)&&(n.relatedTarget||n.fromElement)||!s&&!r)return null;if(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,s?(s=t,null!==(t=(t=n.relatedTarget||n.toElement)?di(t):null)&&(t!==(r=et(t))||5!==t.tag&&6!==t.tag)&&(t=null)):s=null,s===t)return null;if("mouseout"===e||"mouseover"===e)var a=en,l=Zi.mouseLeave,c=Zi.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=tn,l=Zi.pointerLeave,c=Zi.pointerEnter,u="pointer");if(e=null==s?o:fi(s),o=null==t?o:fi(t),(l=a.getPooled(l,s,n,i)).type=u+"leave",l.target=e,l.relatedTarget=o,(i=a.getPooled(c,t,n,i)).type=u+"enter",i.target=o,i.relatedTarget=e,u=t,(a=s)&&u)e:{for(e=u,s=0,t=c=a;t;t=xt(t))s++;for(t=0,o=e;o;o=xt(o))t++;for(;0<s-t;)c=xt(c),s--;for(;0<t-s;)e=xt(e),t--;for(;s--;){if(c===e||c===e.alternate)break e;c=xt(c),e=xt(e)}c=null}else c=null;for(e=c,c=[];a&&a!==e&&(null===(s=a.alternate)||s!==e);)c.push(a),a=xt(a);for(a=[];u&&u!==e&&(null===(s=u.alternate)||s!==e);)a.push(u),u=xt(u);for(u=0;u<c.length;u++)It(c[u],"bubbled",l);for(u=a.length;0<u--;)It(a[u],"captured",i);return n===qi?(qi=null,[l]):(qi=n,[l,i])}};var eo="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},to=Object.prototype.hasOwnProperty;function no(e,t){if(eo(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!to.call(t,n[i])||!eo(e[n[i]],t[n[i]]))return!1;return!0}var io=Q&&"documentMode"in document&&11>=document.documentMode,oo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ro=null,so=null,ao=null,lo=!1;function co(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return lo||null==ro||ro!==zn(n)?null:("selectionStart"in(n=ro)&&Yn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},ao&&no(ao,n)?null:(ao=n,(e=Nt.getPooled(oo.select,so,e,t)).type="select",e.target=ro,Mt(e),e))}var uo={eventTypes:oo,extractEvents:function(e,t,n,i){var o,r=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(o=!r)){e:{r=Dn(r),o=f.onSelect;for(var s=0;s<o.length;s++)if(!r.has(o[s])){r=!1;break e}r=!0}o=!r}if(o)return null;switch(r=t?fi(t):window,e){case"focus":(Ni(r)||"true"===r.contentEditable)&&(ro=r,so=t,ao=null);break;case"blur":ao=so=ro=null;break;case"mousedown":lo=!0;break;case"contextmenu":case"mouseup":case"dragend":return lo=!1,co(n,i);case"selectionchange":if(io)break;case"keydown":case"keyup":return co(n,i)}return null}};O.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),E=gi,w=pi,k=fi,O.injectEventPluginsByName({SimpleEventPlugin:vn,EnterLeaveEventPlugin:Qi,ChangeEventPlugin:Ji,SelectEventPlugin:uo,BeforeInputEventPlugin:Li}),new Set;var ho=[],po=-1;function fo(e){0>po||(e.current=ho[po],ho[po]=null,po--)}function go(e,t){po++,ho[po]=e.current,e.current=t}var mo={},vo={current:mo},_o={current:!1},yo=mo;function bo(e,t){var n=e.type.contextTypes;if(!n)return mo;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o,r={};for(o in n)r[o]=t[o];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function To(e){return null!=(e=e.childContextTypes)}function Eo(e){fo(_o),fo(vo)}function wo(e){fo(_o),fo(vo)}function ko(e,t,n){if(vo.current!==mo)throw Error(s(168));go(vo,t),go(_o,n)}function So(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(s(108,J(t)||"Unknown",r));return o({},n,{},i)}function Co(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||mo,yo=vo.current,go(vo,t),go(_o,_o.current),!0}function xo(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(t=So(e,t,yo),i.__reactInternalMemoizedMergedChildContext=t,fo(_o),fo(vo),go(vo,t)):fo(_o),go(_o,n)}var Ao=r.unstable_runWithPriority,Ro=r.unstable_scheduleCallback,Io=r.unstable_cancelCallback,Oo=r.unstable_shouldYield,Mo=r.unstable_requestPaint,Lo=r.unstable_now,Do=r.unstable_getCurrentPriorityLevel,No=r.unstable_ImmediatePriority,Po=r.unstable_UserBlockingPriority,Bo=r.unstable_NormalPriority,Fo=r.unstable_LowPriority,Wo=r.unstable_IdlePriority,Ho={},Uo=void 0!==Mo?Mo:function(){},$o=null,Vo=null,Go=!1,zo=Lo(),Xo=1e4>zo?Lo:function(){return Lo()-zo};function jo(){switch(Do()){case No:return 99;case Po:return 98;case Bo:return 97;case Fo:return 96;case Wo:return 95;default:throw Error(s(332))}}function Ko(e){switch(e){case 99:return No;case 98:return Po;case 97:return Bo;case 96:return Fo;case 95:return Wo;default:throw Error(s(332))}}function Yo(e,t){return e=Ko(e),Ao(e,t)}function qo(e,t,n){return e=Ko(e),Ro(e,t,n)}function Jo(e){return null===$o?($o=[e],Vo=Ro(No,Qo)):$o.push(e),Ho}function Zo(){if(null!==Vo){var e=Vo;Vo=null,Io(e)}Qo()}function Qo(){if(!Go&&null!==$o){Go=!0;var e=0;try{var t=$o;Yo(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),$o=null}catch(t){throw null!==$o&&($o=$o.slice(e+1)),Ro(No,Zo),t}finally{Go=!1}}}var er=3;function tr(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function nr(e,t){if(e&&e.defaultProps)for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ir={current:null},or=null,rr=null,sr=null;function ar(){sr=rr=or=null}function lr(e,t){var n=e.type._context;go(ir,n._currentValue),n._currentValue=t}function cr(e){var t=ir.current;fo(ir),e.type._context._currentValue=t}function ur(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function hr(e,t){or=e,sr=rr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(zs=!0),e.firstContext=null)}function dr(e,t){if(sr!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(sr=e,t=1073741823),t={context:e,observedBits:t,next:null},null===rr){if(null===or)throw Error(s(308));rr=t,or.dependencies={expirationTime:0,firstContext:t,responders:null}}else rr=rr.next=t;return e._currentValue}var pr=!1;function fr(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function gr(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function mr(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function vr(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function _r(e,t){var n=e.alternate;if(null===n){var i=e.updateQueue,o=null;null===i&&(i=e.updateQueue=fr(e.memoizedState))}else i=e.updateQueue,o=n.updateQueue,null===i?null===o?(i=e.updateQueue=fr(e.memoizedState),o=n.updateQueue=fr(n.memoizedState)):i=e.updateQueue=gr(o):null===o&&(o=n.updateQueue=gr(i));null===o||i===o?vr(i,t):null===i.lastUpdate||null===o.lastUpdate?(vr(i,t),vr(o,t)):(vr(i,t),o.lastUpdate=t)}function yr(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=fr(e.memoizedState):br(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function br(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=gr(t)),t}function Tr(e,t,n,i,r,s){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(s,i,r):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null==(r="function"==typeof(e=n.payload)?e.call(s,i,r):e))break;return o({},i,r);case 2:pr=!0}return i}function Er(e,t,n,i,o){pr=!1;for(var r=(t=br(e,t)).baseState,s=null,a=0,l=t.firstUpdate,c=r;null!==l;){var u=l.expirationTime;u<o?(null===s&&(s=l,r=c),a<u&&(a=u)):(xl(u,l.suspenseConfig),c=Tr(e,0,l,c,n,i),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(u=null,l=t.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<o?(null===u&&(u=l,null===s&&(r=c)),a<h&&(a=h)):(c=Tr(e,0,l,c,n,i),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===s&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===s&&null===u&&(r=c),t.baseState=r,t.firstUpdate=s,t.firstCapturedUpdate=u,Al(a),e.expirationTime=a,e.memoizedState=c}function wr(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),kr(t.firstEffect,n),t.firstEffect=t.lastEffect=null,kr(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function kr(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var i=t;if("function"!=typeof n)throw Error(s(191,n));n.call(i)}e=e.nextEffect}}var Sr=L.ReactCurrentBatchConfig,Cr=(new i.Component).refs;function xr(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,null!==(i=e.updateQueue)&&0===e.expirationTime&&(i.baseState=n)}var Ar={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var i=fl(),o=Sr.suspense;(o=mr(i=gl(i,e,o),o)).payload=t,null!=n&&(o.callback=n),_r(e,o),ml(e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var i=fl(),o=Sr.suspense;(o=mr(i=gl(i,e,o),o)).tag=1,o.payload=t,null!=n&&(o.callback=n),_r(e,o),ml(e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=fl(),i=Sr.suspense;(i=mr(n=gl(n,e,i),i)).tag=2,null!=t&&(i.callback=t),_r(e,i),ml(e,n)}};function Rr(e,t,n,i,o,r,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,r,s):!t.prototype||!t.prototype.isPureReactComponent||(!no(n,i)||!no(o,r))}function Ir(e,t,n){var i=!1,o=mo,r=t.contextType;return"object"==typeof r&&null!==r?r=dr(r):(o=To(t)?yo:vo.current,r=(i=null!=(i=t.contextTypes))?bo(e,o):mo),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ar,e.stateNode=t,t._reactInternalFiber=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=r),t}function Or(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ar.enqueueReplaceState(t,t.state,null)}function Mr(e,t,n,i){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Cr;var r=t.contextType;"object"==typeof r&&null!==r?o.context=dr(r):(r=To(t)?yo:vo.current,o.context=bo(e,r)),null!==(r=e.updateQueue)&&(Er(e,r,n,o,i),o.state=e.memoizedState),"function"==typeof(r=t.getDerivedStateFromProps)&&(xr(e,t,r,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Ar.enqueueReplaceState(o,o.state,null),null!==(r=e.updateQueue)&&(Er(e,r,n,o,i),o.state=e.memoizedState)),"function"==typeof o.componentDidMount&&(e.effectTag|=4)}var Lr=Array.isArray;function Dr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=i.refs;t===Cr&&(t=i.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Nr(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Pr(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return(e=Kl(e,t)).index=0,e.sibling=null,e}function r(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.effectTag=2,n):i:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Jl(n,e.mode,i)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,i){return null!==t&&t.elementType===n.type?((i=o(t,n.props)).ref=Dr(e,t,n),i.return=e,i):((i=Yl(n.type,n.key,n.props,null,e.mode,i)).ref=Dr(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Zl(n,e.mode,i)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function h(e,t,n,i,r){return null===t||7!==t.tag?((t=ql(n,e.mode,i,r)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Jl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case P:return(n=Yl(t.type,t.key,t.props,null,e.mode,n)).ref=Dr(e,null,t),n.return=e,n;case B:return(t=Zl(t,e.mode,n)).return=e,t}if(Lr(t)||q(t))return(t=ql(t,e.mode,n,null)).return=e,t;Nr(e,t)}return null}function p(e,t,n,i){var o=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:l(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case P:return n.key===o?n.type===F?h(e,t,n.props.children,i,o):c(e,t,n,i):null;case B:return n.key===o?u(e,t,n,i):null}if(Lr(n)||q(n))return null!==o?null:h(e,t,n,i,null);Nr(e,n)}return null}function f(e,t,n,i,o){if("string"==typeof i||"number"==typeof i)return l(t,e=e.get(n)||null,""+i,o);if("object"==typeof i&&null!==i){switch(i.$$typeof){case P:return e=e.get(null===i.key?n:i.key)||null,i.type===F?h(t,e,i.props.children,o,i.key):c(t,e,i,o);case B:return u(t,e=e.get(null===i.key?n:i.key)||null,i,o)}if(Lr(i)||q(i))return h(t,e=e.get(n)||null,i,o,null);Nr(t,i)}return null}function g(o,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=p(o,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(o,h),s=r(v,s,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(o,h),c;if(null===h){for(;g<a.length;g++)null!==(h=d(o,a[g],l))&&(s=r(h,s,g),null===u?c=h:u.sibling=h,u=h);return c}for(h=i(o,h);g<a.length;g++)null!==(m=f(h,o,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=r(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(o,e)})),c}function m(o,a,l,c){var u=q(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,v=null,_=l.next();null!==g&&!_.done;m++,_=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var y=p(o,g,_.value,c);if(null===y){null===g&&(g=v);break}e&&g&&null===y.alternate&&t(o,g),a=r(y,a,m),null===h?u=y:h.sibling=y,h=y,g=v}if(_.done)return n(o,g),u;if(null===g){for(;!_.done;m++,_=l.next())null!==(_=d(o,_.value,c))&&(a=r(_,a,m),null===h?u=_:h.sibling=_,h=_);return u}for(g=i(o,g);!_.done;m++,_=l.next())null!==(_=f(g,o,m,_.value,c))&&(e&&null!==_.alternate&&g.delete(null===_.key?m:_.key),a=r(_,a,m),null===h?u=_:h.sibling=_,h=_);return e&&g.forEach((function(e){return t(o,e)})),u}return function(e,i,r,l){var c="object"==typeof r&&null!==r&&r.type===F&&null===r.key;c&&(r=r.props.children);var u="object"==typeof r&&null!==r;if(u)switch(r.$$typeof){case P:e:{for(u=r.key,c=i;null!==c;){if(c.key===u){if(7===c.tag?r.type===F:c.elementType===r.type){n(e,c.sibling),(i=o(c,r.type===F?r.props.children:r.props)).ref=Dr(e,c,r),i.return=e,e=i;break e}n(e,c);break}t(e,c),c=c.sibling}r.type===F?((i=ql(r.props.children,e.mode,l,r.key)).return=e,e=i):((l=Yl(r.type,r.key,r.props,null,e.mode,l)).ref=Dr(e,i,r),l.return=e,e=l)}return a(e);case B:e:{for(c=r.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===r.containerInfo&&i.stateNode.implementation===r.implementation){n(e,i.sibling),(i=o(i,r.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=Zl(r,e.mode,l)).return=e,e=i}return a(e)}if("string"==typeof r||"number"==typeof r)return r=""+r,null!==i&&6===i.tag?(n(e,i.sibling),(i=o(i,r)).return=e,e=i):(n(e,i),(i=Jl(r,e.mode,l)).return=e,e=i),a(e);if(Lr(r))return g(e,i,r,l);if(q(r))return m(e,i,r,l);if(u&&Nr(e,r),void 0===r&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return n(e,i)}}var Br=Pr(!0),Fr=Pr(!1),Wr={},Hr={current:Wr},Ur={current:Wr},$r={current:Wr};function Vr(e){if(e===Wr)throw Error(s(174));return e}function Gr(e,t){go($r,t),go(Ur,e),go(Hr,Wr);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:He(null,"");break;default:t=He(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}fo(Hr),go(Hr,t)}function zr(e){fo(Hr),fo(Ur),fo($r)}function Xr(e){Vr($r.current);var t=Vr(Hr.current),n=He(t,e.type);t!==n&&(go(Ur,e),go(Hr,n))}function jr(e){Ur.current===e&&(fo(Hr),fo(Ur))}var Kr={current:0};function Yr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===Zn||n.data===Qn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qr(e,t){return{responder:e,props:t}}var Jr=L.ReactCurrentDispatcher,Zr=L.ReactCurrentBatchConfig,Qr=0,es=null,ts=null,ns=null,is=null,os=null,rs=null,ss=0,as=null,ls=0,cs=!1,us=null,hs=0;function ds(){throw Error(s(321))}function ps(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!eo(e[n],t[n]))return!1;return!0}function fs(e,t,n,i,o,r){if(Qr=r,es=t,ns=null!==e?e.memoizedState:null,Jr.current=null===ns?Ls:Ds,t=n(i,o),cs){do{cs=!1,hs+=1,ns=null!==e?e.memoizedState:null,rs=is,as=os=ts=null,Jr.current=Ds,t=n(i,o)}while(cs);us=null,hs=0}if(Jr.current=Ms,(e=es).memoizedState=is,e.expirationTime=ss,e.updateQueue=as,e.effectTag|=ls,e=null!==ts&&null!==ts.next,Qr=0,rs=os=is=ns=ts=es=null,ss=0,as=null,ls=0,e)throw Error(s(300));return t}function gs(){Jr.current=Ms,Qr=0,rs=os=is=ns=ts=es=null,ss=0,as=null,ls=0,cs=!1,us=null,hs=0}function ms(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===os?is=os=e:os=os.next=e,os}function vs(){if(null!==rs)rs=(os=rs).next,ns=null!==(ts=ns)?ts.next:null;else{if(null===ns)throw Error(s(310));var e={memoizedState:(ts=ns).memoizedState,baseState:ts.baseState,queue:ts.queue,baseUpdate:ts.baseUpdate,next:null};os=null===os?is=e:os.next=e,ns=ts.next}return os}function _s(e,t){return"function"==typeof t?t(e):t}function ys(e){var t=vs(),n=t.queue;if(null===n)throw Error(s(311));if(n.lastRenderedReducer=e,0<hs){var i=n.dispatch;if(null!==us){var o=us.get(n);if(void 0!==o){us.delete(n);var r=t.memoizedState;do{r=e(r,o.action),o=o.next}while(null!==o);return eo(r,t.memoizedState)||(zs=!0),t.memoizedState=r,t.baseUpdate===n.last&&(t.baseState=r),n.lastRenderedState=r,[r,i]}}return[t.memoizedState,i]}i=n.last;var a=t.baseUpdate;if(r=t.baseState,null!==a?(null!==i&&(i.next=null),i=a.next):i=null!==i?i.next:null,null!==i){var l=o=null,c=i,u=!1;do{var h=c.expirationTime;h<Qr?(u||(u=!0,l=a,o=r),h>ss&&Al(ss=h)):(xl(h,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action)),a=c,c=c.next}while(null!==c&&c!==i);u||(l=a,o=r),eo(r,t.memoizedState)||(zs=!0),t.memoizedState=r,t.baseUpdate=l,t.baseState=o,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function bs(e){var t=ms();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e}).dispatch=Os.bind(null,es,e),[t.memoizedState,e]}function Ts(e){return ys(_s)}function Es(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===as?(as={lastEffect:null}).lastEffect=e.next=e:null===(t=as.lastEffect)?as.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,as.lastEffect=e),e}function ws(e,t,n,i){var o=ms();ls|=e,o.memoizedState=Es(t,n,void 0,void 0===i?null:i)}function ks(e,t,n,i){var o=vs();i=void 0===i?null:i;var r=void 0;if(null!==ts){var s=ts.memoizedState;if(r=s.destroy,null!==i&&ps(i,s.deps))return void Es(0,n,r,i)}ls|=e,o.memoizedState=Es(t,n,r,i)}function Ss(e,t){return ws(516,192,e,t)}function Cs(e,t){return ks(516,192,e,t)}function xs(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function As(){}function Rs(e,t){return ms().memoizedState=[e,void 0===t?null:t],e}function Is(e,t){var n=vs();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ps(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Os(e,t,n){if(!(25>hs))throw Error(s(301));var i=e.alternate;if(e===es||null!==i&&i===es)if(cs=!0,e={expirationTime:Qr,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===us&&(us=new Map),void 0===(n=us.get(t)))us.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var o=fl(),r=Sr.suspense;r={expirationTime:o=gl(o,e,r),suspenseConfig:r,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.last;if(null===a)r.next=r;else{var l=a.next;null!==l&&(r.next=l),a.next=r}if(t.last=r,0===e.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=t.lastRenderedReducer))try{var c=t.lastRenderedState,u=i(c,n);if(r.eagerReducer=i,r.eagerState=u,eo(u,c))return}catch(e){}ml(e,o)}}var Ms={readContext:dr,useCallback:ds,useContext:ds,useEffect:ds,useImperativeHandle:ds,useLayoutEffect:ds,useMemo:ds,useReducer:ds,useRef:ds,useState:ds,useDebugValue:ds,useResponder:ds,useDeferredValue:ds,useTransition:ds},Ls={readContext:dr,useCallback:Rs,useContext:dr,useEffect:Ss,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ws(4,36,xs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ws(4,36,e,t)},useMemo:function(e,t){var n=ms();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ms();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Os.bind(null,es,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ms().memoizedState=e},useState:bs,useDebugValue:As,useResponder:qr,useDeferredValue:function(e,t){var n=bs(e),i=n[0],o=n[1];return Ss((function(){r.unstable_next((function(){var n=Zr.suspense;Zr.suspense=void 0===t?null:t;try{o(e)}finally{Zr.suspense=n}}))}),[e,t]),i},useTransition:function(e){var t=bs(!1),n=t[0],i=t[1];return[Rs((function(t){i(!0),r.unstable_next((function(){var n=Zr.suspense;Zr.suspense=void 0===e?null:e;try{i(!1),t()}finally{Zr.suspense=n}}))}),[e,n]),n]}},Ds={readContext:dr,useCallback:Is,useContext:dr,useEffect:Cs,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ks(4,36,xs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ks(4,36,e,t)},useMemo:function(e,t){var n=vs();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ps(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ys,useRef:function(){return vs().memoizedState},useState:Ts,useDebugValue:As,useResponder:qr,useDeferredValue:function(e,t){var n=Ts(),i=n[0],o=n[1];return Cs((function(){r.unstable_next((function(){var n=Zr.suspense;Zr.suspense=void 0===t?null:t;try{o(e)}finally{Zr.suspense=n}}))}),[e,t]),i},useTransition:function(e){var t=Ts(),n=t[0],i=t[1];return[Is((function(t){i(!0),r.unstable_next((function(){var n=Zr.suspense;Zr.suspense=void 0===e?null:e;try{i(!1),t()}finally{Zr.suspense=n}}))}),[e,n]),n]}},Ns=null,Ps=null,Bs=!1;function Fs(e,t){var n=Xl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ws(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Hs(e){if(Bs){var t=Ps;if(t){var n=t;if(!Ws(e,t)){if(!(t=si(n.nextSibling))||!Ws(e,t))return e.effectTag=-1025&e.effectTag|2,Bs=!1,void(Ns=e);Fs(Ns,n)}Ns=e,Ps=si(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Bs=!1,Ns=e}}function Us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ns=e}function $s(e){if(e!==Ns)return!1;if(!Bs)return Us(e),Bs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!ii(t,e.memoizedProps))for(t=Ps;t;)Fs(e,t),t=si(t.nextSibling);if(Us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Jn){if(0===t){Ps=si(e.nextSibling);break e}t--}else n!==qn&&n!==Qn&&n!==Zn||t++}e=e.nextSibling}Ps=null}}else Ps=Ns?si(e.stateNode.nextSibling):null;return!0}function Vs(){Ps=Ns=null,Bs=!1}var Gs=L.ReactCurrentOwner,zs=!1;function Xs(e,t,n,i){t.child=null===e?Fr(t,null,n,i):Br(t,e.child,n,i)}function js(e,t,n,i,o){n=n.render;var r=t.ref;return hr(t,o),i=fs(e,t,n,i,r,o),null===e||zs?(t.effectTag|=1,Xs(e,t,i,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),ua(e,t,o))}function Ks(e,t,n,i,o,r){if(null===e){var s=n.type;return"function"!=typeof s||jl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Yl(n.type,null,i,null,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ys(e,t,s,i,o,r))}return s=e.child,o<r&&(o=s.memoizedProps,(n=null!==(n=n.compare)?n:no)(o,i)&&e.ref===t.ref)?ua(e,t,r):(t.effectTag|=1,(e=Kl(s,i)).ref=t.ref,e.return=t,t.child=e)}function Ys(e,t,n,i,o,r){return null!==e&&no(e.memoizedProps,i)&&e.ref===t.ref&&(zs=!1,o<r)?ua(e,t,r):Js(e,t,n,i,r)}function qs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Js(e,t,n,i,o){var r=To(n)?yo:vo.current;return r=bo(t,r),hr(t,o),n=fs(e,t,n,i,r,o),null===e||zs?(t.effectTag|=1,Xs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),ua(e,t,o))}function Zs(e,t,n,i,o){if(To(n)){var r=!0;Co(t)}else r=!1;if(hr(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ir(t,n,i),Mr(t,n,i,o),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=dr(c):c=bo(t,c=To(n)?yo:vo.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==i||l!==c)&&Or(t,s,i,c),pr=!1;var d=t.memoizedState;l=s.state=d;var p=t.updateQueue;null!==p&&(Er(t,p,i,s,o),l=t.memoizedState),a!==i||d!==l||_o.current||pr?("function"==typeof u&&(xr(t,n,u,i),l=t.memoizedState),(a=pr||Rr(t,n,a,i,d,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.effectTag|=4)):("function"==typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"==typeof s.componentDidMount&&(t.effectTag|=4),i=!1)}else s=t.stateNode,a=t.memoizedProps,s.props=t.type===t.elementType?a:nr(t.type,a),l=s.context,"object"==typeof(c=n.contextType)&&null!==c?c=dr(c):c=bo(t,c=To(n)?yo:vo.current),(h="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==i||l!==c)&&Or(t,s,i,c),pr=!1,l=t.memoizedState,d=s.state=l,null!==(p=t.updateQueue)&&(Er(t,p,i,s,o),d=t.memoizedState),a!==i||l!==d||_o.current||pr?("function"==typeof u&&(xr(t,n,u,i),d=t.memoizedState),(u=pr||Rr(t,n,a,i,l,d,c))?(h||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(i,d,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,d,c)),"function"==typeof s.componentDidUpdate&&(t.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=i,t.memoizedState=d),s.props=i,s.state=d,s.context=c,i=u):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),i=!1);return Qs(e,t,n,i,r,o)}function Qs(e,t,n,i,o,r){qs(e,t);var s=0!=(64&t.effectTag);if(!i&&!s)return o&&xo(t,n,!1),ua(e,t,r);i=t.stateNode,Gs.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.effectTag|=1,null!==e&&s?(t.child=Br(t,e.child,null,r),t.child=Br(t,null,a,r)):Xs(e,t,a,r),t.memoizedState=i.state,o&&xo(t,n,!0),t.child}function ea(e){var t=e.stateNode;t.pendingContext?ko(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ko(0,t.context,!1),Gr(e,t.containerInfo)}var ta,na,ia,oa,ra={dehydrated:null,retryTime:0};function sa(e,t,n){var i,o=t.mode,r=t.pendingProps,s=Kr.current,a=!1;if((i=0!=(64&t.effectTag))||(i=0!=(2&s)&&(null===e||null!==e.memoizedState)),i?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(s|=1),go(Kr,1&s),null===e){if(void 0!==r.fallback&&Hs(t),a){if(a=r.fallback,(r=ql(null,o,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,r.child=e;null!==e;)e.return=r,e=e.sibling;return(n=ql(a,o,n,null)).return=t,r.sibling=n,t.memoizedState=ra,t.child=r,n}return o=r.children,t.memoizedState=null,t.child=Fr(t,null,o,n)}if(null!==e.memoizedState){if(o=(e=e.child).sibling,a){if(r=r.fallback,(n=Kl(e,e.pendingProps)).return=t,0==(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(o=Kl(o,r,o.expirationTime)).return=t,n.sibling=o,n.childExpirationTime=0,t.memoizedState=ra,t.child=n,o}return n=Br(t,e.child,r.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=r.fallback,(r=ql(null,o,0,null)).return=t,r.child=e,null!==e&&(e.return=r),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,r.child=e;null!==e;)e.return=r,e=e.sibling;return(n=ql(a,o,n,null)).return=t,r.sibling=n,n.effectTag|=2,r.childExpirationTime=0,t.memoizedState=ra,t.child=r,n}return t.memoizedState=null,t.child=Br(t,e,r.children,n)}function aa(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ur(e.return,t)}function la(e,t,n,i,o,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,last:i,tail:n,tailExpiration:0,tailMode:o,lastEffect:r}:(s.isBackwards=t,s.rendering=null,s.last=i,s.tail=n,s.tailExpiration=0,s.tailMode=o,s.lastEffect=r)}function ca(e,t,n){var i=t.pendingProps,o=i.revealOrder,r=i.tail;if(Xs(e,t,i.children,n),0!=(2&(i=Kr.current)))i=1&i|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&aa(e,n);else if(19===e.tag)aa(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(go(Kr,i),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Yr(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),la(t,!1,o,n,r,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Yr(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}la(t,!0,n,null,r,t.lastEffect);break;case"together":la(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ua(e,t,n){null!==e&&(t.dependencies=e.dependencies);var i=t.expirationTime;if(0!==i&&Al(i),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Kl(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Kl(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function ha(e){e.effectTag|=4}function da(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function pa(e){switch(e.tag){case 1:To(e.type)&&Eo();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(zr(),wo(),0!=(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return jr(e),null;case 13:return fo(Kr),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return fo(Kr),null;case 4:return zr(),null;case 10:return cr(e),null;default:return null}}function fa(e,t){return{value:e,source:t,stack:Z(t)}}ta=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},na=function(){},ia=function(e,t,n,i,r){var s=e.memoizedProps;if(s!==i){var a,l,c=t.stateNode;switch(Vr(Hr.current),e=null,n){case"input":s=Ce(c,s),i=Ce(c,i),e=[];break;case"option":s=Me(c,s),i=Me(c,i),e=[];break;case"select":s=o({},s,{value:void 0}),i=o({},i,{value:void 0}),e=[];break;case"textarea":s=De(c,s),i=De(c,i),e=[];break;default:"function"!=typeof s.onClick&&"function"==typeof i.onClick&&(c.onclick=Gn)}for(a in Un(n,i),n=null,s)if(!i.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(l in c=s[a])c.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(p.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in i){var u=i[a];if(c=null!=s?s[a]:void 0,i.hasOwnProperty(a)&&u!==c&&(null!=u||null!=c))if("style"===a)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(e||(e=[]),e.push(a,n)),n=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(a,""+u)):"children"===a?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(p.hasOwnProperty(a)?(null!=u&&Vn(r,a),e||c===u||(e=[])):(e=e||[]).push(a,u))}n&&(e=e||[]).push("style",n),r=e,(t.updateQueue=r)&&ha(t)}},oa=function(e,t,n,i){n!==i&&ha(t)};var ga="function"==typeof WeakSet?WeakSet:Set;function ma(e,t){var n=t.source,i=t.stack;null===i&&null!==n&&(i=Z(n)),null!==n&&J(n.type),t=t.value,null!==e&&1===e.tag&&J(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function va(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Hl(e,t)}else t.current=null}function _a(e,t){switch(t.tag){case 0:case 11:case 15:ya(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:nr(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}function ya(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var i=n=n.next;do{if(0!=(i.tag&e)){var o=i.destroy;i.destroy=void 0,void 0!==o&&o()}0!=(i.tag&t)&&(o=i.create,i.destroy=o()),i=i.next}while(i!==n)}}function ba(e,t,n){switch("function"==typeof Gl&&Gl(t),t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e.next;Yo(97<n?97:n,(function(){var e=i;do{var n=e.destroy;if(void 0!==n){var o=t;try{n()}catch(e){Hl(o,e)}}e=e.next}while(e!==i)}))}break;case 1:va(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Hl(e,t)}}(t,n);break;case 5:va(t);break;case 4:ka(e,t,n)}}function Ta(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,null!==t&&Ta(t)}function Ea(e){return 5===e.tag||3===e.tag||4===e.tag}function wa(e){e:{for(var t=e.return;null!==t;){if(Ea(t)){var n=t;break e}t=t.return}throw Error(s(160))}switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(s(161))}16&n.effectTag&&(Ve(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Ea(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){var r=5===o.tag||6===o.tag;if(r){var a=r?o.stateNode:o.stateNode.instance;if(n)if(i){var l=a;a=n,8===(r=t).nodeType?r.parentNode.insertBefore(l,a):r.insertBefore(l,a)}else t.insertBefore(a,n);else i?(8===(l=t).nodeType?(r=l.parentNode).insertBefore(a,l):(r=l).appendChild(a),null!=(l=l._reactRootContainer)||null!==r.onclick||(r.onclick=Gn)):t.appendChild(a)}else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function ka(e,t,n){for(var i,o,r=t,a=!1;;){if(!a){a=r.return;e:for(;;){if(null===a)throw Error(s(160));switch(i=a.stateNode,a.tag){case 5:o=!1;break e;case 3:case 4:i=i.containerInfo,o=!0;break e}a=a.return}a=!0}if(5===r.tag||6===r.tag){e:for(var l=e,c=r,u=n,h=c;;)if(ba(l,h,u),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}o?(l=i,c=r.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):i.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){i=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(ba(e,r,n),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(a=!1)}r.sibling.return=r.return,r=r.sibling}}function Sa(e,t){switch(t.tag){case 0:case 11:case 14:case 15:ya(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps,o=null!==e?e.memoizedProps:i;e=t.type;var r=t.updateQueue;if(t.updateQueue=null,null!==r){for(n[ui]=i,"input"===e&&"radio"===i.type&&null!=i.name&&Ae(n,i),$n(e,o),t=$n(e,i),o=0;o<r.length;o+=2){var a=r[o],l=r[o+1];"style"===a?Wn(n,l):"dangerouslySetInnerHTML"===a?$e(n,l):"children"===a?Ve(n,l):Ee(n,a,l,t)}switch(e){case"input":Re(n,i);break;case"textarea":Pe(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(e=i.value)?Le(n,!!i.multiple,e,!1):t!==!!i.multiple&&(null!=i.defaultValue?Le(n,!!i.multiple,i.defaultValue,!0):Le(n,!!i.multiple,i.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(s(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,St(t.containerInfo));break;case 12:break;case 13:if(n=t,null===t.memoizedState?i=!1:(i=!0,n=t.child,tl=Xo()),null!==n)e:for(e=n;;){if(5===e.tag)r=e.stateNode,i?"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none":(r=e.stateNode,o=null!=(o=e.memoizedProps.style)&&o.hasOwnProperty("display")?o.display:null,r.style.display=Fn("display",o));else if(6===e.tag)e.stateNode.nodeValue=i?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(r=e.child.sibling).return=e,e=r;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}Ca(t);break;case 19:Ca(t);break;case 17:case 20:case 21:break;default:throw Error(s(163))}}function Ca(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ga),t.forEach((function(t){var i=$l.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}var xa="function"==typeof WeakMap?WeakMap:Map;function Aa(e,t,n){(n=mr(n,null)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ol||(ol=!0,rl=i),ma(e,t)},n}function Ra(e,t,n){(n=mr(n,null)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var o=t.value;n.payload=function(){return ma(e,t),i(o)}}var r=e.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(n.callback=function(){"function"!=typeof i&&(null===sl?sl=new Set([this]):sl.add(this),ma(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ia,Oa=Math.ceil,Ma=L.ReactCurrentDispatcher,La=L.ReactCurrentOwner,Da=0,Na=8,Pa=16,Ba=32,Fa=0,Wa=1,Ha=2,Ua=3,$a=4,Va=5,Ga=Da,za=null,Xa=null,ja=0,Ka=Fa,Ya=null,qa=1073741823,Ja=1073741823,Za=null,Qa=0,el=!1,tl=0,nl=500,il=null,ol=!1,rl=null,sl=null,al=!1,ll=null,cl=90,ul=null,hl=0,dl=null,pl=0;function fl(){return(Ga&(Pa|Ba))!==Da?1073741821-(Xo()/10|0):0!==pl?pl:pl=1073741821-(Xo()/10|0)}function gl(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var i=jo();if(0==(4&t))return 99===i?1073741823:1073741822;if((Ga&Pa)!==Da)return ja;if(null!==n)e=tr(e,0|n.timeoutMs||5e3,250);else switch(i){case 99:e=1073741823;break;case 98:e=tr(e,150,100);break;case 97:case 96:e=tr(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==za&&e===ja&&--e,e}function ml(e,t){if(50<hl)throw hl=0,dl=null,Error(s(185));if(null!==(e=vl(e,t))){var n=jo();1073741823===t?(Ga&Na)!==Da&&(Ga&(Pa|Ba))===Da?Tl(e):(yl(e),Ga===Da&&Zo()):yl(e),(4&Ga)===Da||98!==n&&99!==n||(null===ul?ul=new Map([[e,t]]):(void 0===(n=ul.get(e))||n>t)&&ul.set(e,t))}}function vl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var i=e.return,o=null;if(null===i&&3===e.tag)o=e.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<t&&(i.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===i.return&&3===i.tag){o=i.stateNode;break}i=i.return}return null!==o&&(za===o&&(Al(t),Ka===$a&&tc(o,ja)),nc(o,t)),o}function _l(e){var t=e.lastExpiredTime;return 0!==t?t:ec(e,t=e.firstPendingTime)?(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e:t}function yl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Jo(Tl.bind(null,e));else{var t=_l(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var i=fl();if(1073741823===t?i=99:1===t||2===t?i=95:i=0>=(i=10*(1073741821-t)-10*(1073741821-i))?99:250>=i?98:5250>=i?97:95,null!==n){var o=e.callbackPriority;if(e.callbackExpirationTime===t&&o>=i)return;n!==Ho&&Io(n)}e.callbackExpirationTime=t,e.callbackPriority=i,t=1073741823===t?Jo(Tl.bind(null,e)):qo(i,bl.bind(null,e),{timeout:10*(1073741821-t)-Xo()}),e.callbackNode=t}}}function bl(e,t){if(pl=0,t)return ic(e,t=fl()),yl(e),null;var n=_l(e);if(0!==n){if(t=e.callbackNode,(Ga&(Pa|Ba))!==Da)throw Error(s(327));if(Bl(),e===za&&n===ja||kl(e,n),null!==Xa){var i=Ga;Ga|=Pa;for(var o=Cl();;)try{Il();break}catch(t){Sl(e,t)}if(ar(),Ga=i,Ma.current=o,Ka===Wa)throw t=Ya,kl(e,n),tc(e,n),yl(e),t;if(null===Xa)switch(o=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,i=Ka,za=null,i){case Fa:case Wa:throw Error(s(345));case Ha:ic(e,2<n?2:n);break;case Ua:if(tc(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ll(o)),1073741823===qa&&10<(o=tl+nl-Xo())){if(el){var r=e.lastPingedTime;if(0===r||r>=n){e.lastPingedTime=n,kl(e,n);break}}if(0!==(r=_l(e))&&r!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}e.timeoutHandle=oi(Dl.bind(null,e),o);break}Dl(e);break;case $a:if(tc(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ll(o)),el&&(0===(o=e.lastPingedTime)||o>=n)){e.lastPingedTime=n,kl(e,n);break}if(0!==(o=_l(e))&&o!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}if(1073741823!==Ja?i=10*(1073741821-Ja)-Xo():1073741823===qa?i=0:(i=10*(1073741821-qa)-5e3,0>(i=(o=Xo())-i)&&(i=0),(n=10*(1073741821-n)-o)<(i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Oa(i/1960))-i)&&(i=n)),10<i){e.timeoutHandle=oi(Dl.bind(null,e),i);break}Dl(e);break;case Va:if(1073741823!==qa&&null!==Za){r=qa;var a=Za;if(0>=(i=0|a.busyMinDurationMs)?i=0:(o=0|a.busyDelayMs,i=(r=Xo()-(10*(1073741821-r)-(0|a.timeoutMs||5e3)))<=o?0:o+i-r),10<i){tc(e,n),e.timeoutHandle=oi(Dl.bind(null,e),i);break}}Dl(e);break;default:throw Error(s(329))}if(yl(e),e.callbackNode===t)return bl.bind(null,e)}}return null}function Tl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)Dl(e);else{if((Ga&(Pa|Ba))!==Da)throw Error(s(327));if(Bl(),e===za&&t===ja||kl(e,t),null!==Xa){var n=Ga;Ga|=Pa;for(var i=Cl();;)try{Rl();break}catch(t){Sl(e,t)}if(ar(),Ga=n,Ma.current=i,Ka===Wa)throw n=Ya,kl(e,t),tc(e,t),yl(e),n;if(null!==Xa)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,za=null,Dl(e),yl(e)}}return null}function El(e,t){var n=Ga;Ga|=1;try{return e(t)}finally{(Ga=n)===Da&&Zo()}}function wl(e,t){var n=Ga;Ga&=-2,Ga|=Na;try{return e(t)}finally{(Ga=n)===Da&&Zo()}}function kl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ri(n)),null!==Xa)for(n=Xa.return;null!==n;){var i=n;switch(i.tag){case 1:var o=i.type.childContextTypes;null!=o&&Eo();break;case 3:zr(),wo();break;case 5:jr(i);break;case 4:zr();break;case 13:case 19:fo(Kr);break;case 10:cr(i)}n=n.return}za=e,Xa=Kl(e.current,null),ja=t,Ka=Fa,Ya=null,Ja=qa=1073741823,Za=null,Qa=0,el=!1}function Sl(e,t){for(;;){try{if(ar(),gs(),null===Xa||null===Xa.return)return Ka=Wa,Ya=t,null;e:{var n=e,i=Xa.return,o=Xa,r=t;if(t=ja,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==r&&"object"==typeof r&&"function"==typeof r.then){var s=r,a=0!=(1&Kr.current),l=i;do{var c;if(c=13===l.tag){var u=l.memoizedState;if(null!==u)c=null!==u.dehydrated;else{var h=l.memoizedProps;c=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!a)}}if(c){var d=l.updateQueue;if(null===d){var p=new Set;p.add(s),l.updateQueue=p}else d.add(s);if(0==(2&l.mode)){if(l.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var f=mr(1073741823,null);f.tag=2,_r(o,f)}o.expirationTime=1073741823;break e}r=void 0,o=t;var g=n.pingCache;if(null===g?(g=n.pingCache=new xa,r=new Set,g.set(s,r)):void 0===(r=g.get(s))&&(r=new Set,g.set(s,r)),!r.has(o)){r.add(o);var m=Ul.bind(null,n,s,o);s.then(m,m)}l.effectTag|=4096,l.expirationTime=t;break e}l=l.return}while(null!==l);r=Error((J(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Z(o))}Ka!==Va&&(Ka=Ha),r=fa(r,o),l=i;do{switch(l.tag){case 3:s=r,l.effectTag|=4096,l.expirationTime=t,yr(l,Aa(l,s,t));break e;case 1:s=r;var v=l.type,_=l.stateNode;if(0==(64&l.effectTag)&&("function"==typeof v.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===sl||!sl.has(_)))){l.effectTag|=4096,l.expirationTime=t,yr(l,Ra(l,s,t));break e}}l=l.return}while(null!==l)}Xa=Ml(Xa)}catch(e){t=e;continue}break}}function Cl(){var e=Ma.current;return Ma.current=Ms,null===e?Ms:e}function xl(e,t){e<qa&&2<e&&(qa=e),null!==t&&e<Ja&&2<e&&(Ja=e,Za=t)}function Al(e){e>Qa&&(Qa=e)}function Rl(){for(;null!==Xa;)Xa=Ol(Xa)}function Il(){for(;null!==Xa&&!Oo();)Xa=Ol(Xa)}function Ol(e){var t=Ia(e.alternate,e,ja);return e.memoizedProps=e.pendingProps,null===t&&(t=Ml(e)),La.current=null,t}function Ml(e){Xa=e;do{var t=Xa.alternate;if(e=Xa.return,0==(2048&Xa.effectTag)){e:{var n=t,i=ja,r=(t=Xa).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:To(t.type)&&Eo();break;case 3:zr(),wo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===n||null===n.child)&&$s(t)&&ha(t),na(t);break;case 5:jr(t),i=Vr($r.current);var a=t.type;if(null!==n&&null!=t.stateNode)ia(n,t,a,r,i),n.ref!==t.ref&&(t.effectTag|=128);else if(r){var l=Vr(Hr.current);if($s(t)){var c=(r=t).stateNode;n=r.type;var u=r.memoizedProps,h=i;switch(c[ci]=r,c[ui]=u,a=void 0,i=c,n){case"iframe":case"object":case"embed":Sn("load",i);break;case"video":case"audio":for(c=0;c<Qe.length;c++)Sn(Qe[c],i);break;case"source":Sn("error",i);break;case"img":case"image":case"link":Sn("error",i),Sn("load",i);break;case"form":Sn("reset",i),Sn("submit",i);break;case"details":Sn("toggle",i);break;case"input":xe(i,u),Sn("invalid",i),Vn(h,"onChange");break;case"select":i._wrapperState={wasMultiple:!!u.multiple},Sn("invalid",i),Vn(h,"onChange");break;case"textarea":Ne(i,u),Sn("invalid",i),Vn(h,"onChange")}for(a in Un(n,u),c=null,u)u.hasOwnProperty(a)&&(l=u[a],"children"===a?"string"==typeof l?i.textContent!==l&&(c=["children",l]):"number"==typeof l&&i.textContent!==""+l&&(c=["children",""+l]):p.hasOwnProperty(a)&&null!=l&&Vn(h,a));switch(n){case"input":ke(i),Ie(i,u,!0);break;case"textarea":ke(i),Be(i);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(i.onclick=Gn)}a=c,r.updateQueue=a,(r=null!==a)&&ha(t)}else{n=t,h=a,u=r,c=9===i.nodeType?i:i.ownerDocument,l===Fe.html&&(l=We(h)),l===Fe.html?"script"===h?((u=c.createElement("div")).innerHTML="<script><\/script>",c=u.removeChild(u.firstChild)):"string"==typeof u.is?c=c.createElement(h,{is:u.is}):(c=c.createElement(h),"select"===h&&(h=c,u.multiple?h.multiple=!0:u.size&&(h.size=u.size))):c=c.createElementNS(l,h),(u=c)[ci]=n,u[ui]=r,ta(u,t,!1,!1),t.stateNode=u;var d=i,f=$n(h=a,n=r);switch(h){case"iframe":case"object":case"embed":Sn("load",u),i=n;break;case"video":case"audio":for(i=0;i<Qe.length;i++)Sn(Qe[i],u);i=n;break;case"source":Sn("error",u),i=n;break;case"img":case"image":case"link":Sn("error",u),Sn("load",u),i=n;break;case"form":Sn("reset",u),Sn("submit",u),i=n;break;case"details":Sn("toggle",u),i=n;break;case"input":xe(u,n),i=Ce(u,n),Sn("invalid",u),Vn(d,"onChange");break;case"option":i=Me(u,n);break;case"select":u._wrapperState={wasMultiple:!!n.multiple},i=o({},n,{value:void 0}),Sn("invalid",u),Vn(d,"onChange");break;case"textarea":Ne(u,n),i=De(u,n),Sn("invalid",u),Vn(d,"onChange");break;default:i=n}Un(h,i),c=void 0,l=h;var g=u,m=i;for(c in m)if(m.hasOwnProperty(c)){var v=m[c];"style"===c?Wn(g,v):"dangerouslySetInnerHTML"===c?null!=(v=v?v.__html:void 0)&&$e(g,v):"children"===c?"string"==typeof v?("textarea"!==l||""!==v)&&Ve(g,v):"number"==typeof v&&Ve(g,""+v):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(p.hasOwnProperty(c)?null!=v&&Vn(d,c):null!=v&&Ee(g,c,v,f))}switch(h){case"input":ke(u),Ie(u,n,!1);break;case"textarea":ke(u),Be(u);break;case"option":null!=n.value&&u.setAttribute("value",""+Te(n.value));break;case"select":(i=u).multiple=!!n.multiple,null!=(u=n.value)?Le(i,!!n.multiple,u,!1):null!=n.defaultValue&&Le(i,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(u.onclick=Gn)}(r=ni(a,r))&&ha(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(s(166));break;case 6:if(n&&null!=t.stateNode)oa(n,t,n.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));i=Vr($r.current),Vr(Hr.current),$s(t)?(a=(r=t).stateNode,i=r.memoizedProps,a[ci]=r,(r=a.nodeValue!==i)&&ha(t)):(a=t,(r=(9===i.nodeType?i:i.ownerDocument).createTextNode(r))[ci]=a,t.stateNode=r)}break;case 11:break;case 13:if(fo(Kr),r=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=i;break e}r=null!==r,a=!1,null===n?void 0!==t.memoizedProps.fallback&&$s(t):(a=null!==(i=n.memoizedState),r||null===i||null!==(i=n.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=i,i.nextEffect=u):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),r&&!a&&0!=(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Kr.current)?Ka===Fa&&(Ka=Ua):(Ka!==Fa&&Ka!==Ua||(Ka=$a),0!==Qa&&null!==za&&(tc(za,ja),nc(za,Qa)))),(r||a)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:zr(),na(t);break;case 10:cr(t);break;case 9:case 14:break;case 17:To(t.type)&&Eo();break;case 19:if(fo(Kr),null===(r=t.memoizedState))break;if(a=0!=(64&t.effectTag),null===(u=r.rendering)){if(a)da(r,!1);else if(Ka!==Fa||null!==n&&0!=(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(u=Yr(n))){for(t.effectTag|=64,da(r,!1),null!==(a=u.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=i,a=t.child;null!==a;)n=r,(i=a).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(u=i.alternate)?(i.childExpirationTime=0,i.expirationTime=n,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=u.childExpirationTime,i.expirationTime=u.expirationTime,i.child=u.child,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,n=u.dependencies,i.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),a=a.sibling;go(Kr,1&Kr.current|2),t=t.child;break e}n=n.sibling}}else{if(!a)if(null!==(n=Yr(u))){if(t.effectTag|=64,a=!0,null!==(i=n.updateQueue)&&(t.updateQueue=i,t.effectTag|=4),da(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate){null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null);break}}else Xo()>r.tailExpiration&&1<i&&(t.effectTag|=64,a=!0,da(r,!1),t.expirationTime=t.childExpirationTime=i-1);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(i=r.last)?i.sibling=u:t.child=u,r.last=u)}if(null!==r.tail){0===r.tailExpiration&&(r.tailExpiration=Xo()+500),i=r.tail,r.rendering=i,r.tail=i.sibling,r.lastEffect=t.lastEffect,i.sibling=null,r=Kr.current,go(Kr,r=a?1&r|2:1&r),t=i;break e}break;case 20:case 21:break;default:throw Error(s(156,t.tag))}t=null}if(r=Xa,1===ja||1!==r.childExpirationTime){for(a=0,i=r.child;null!==i;)(n=i.expirationTime)>a&&(a=n),(u=i.childExpirationTime)>a&&(a=u),i=i.sibling;r.childExpirationTime=a}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Xa.firstEffect),null!==Xa.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Xa.firstEffect),e.lastEffect=Xa.lastEffect),1<Xa.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Xa:e.firstEffect=Xa,e.lastEffect=Xa))}else{if(null!==(t=pa(Xa)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Xa.sibling))return t;Xa=e}while(null!==Xa);return Ka===Fa&&(Ka=Va),null}function Ll(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Dl(e){var t=jo();return Yo(99,Nl.bind(null,e,t)),null}function Nl(e,t){do{Bl()}while(null!==ll);if((Ga&(Pa|Ba))!==Da)throw Error(s(327));var n=e.finishedWork,i=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var o=Ll(n);if(e.firstPendingTime=o,i<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:i<=e.firstSuspendedTime&&(e.firstSuspendedTime=i-1),i<=e.lastPingedTime&&(e.lastPingedTime=0),i<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===za&&(Xa=za=null,ja=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,o=n.firstEffect):o=n:o=n.firstEffect,null!==o){var r=Ga;Ga|=Ba,La.current=null,ei=kn;var a=Kn();if(Yn(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{var c=(l=(l=a.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var u=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{l.nodeType,h.nodeType}catch(e){l=null;break e}var d=0,p=-1,f=-1,g=0,m=0,v=a,_=null;t:for(;;){for(var y;v!==l||0!==u&&3!==v.nodeType||(p=d+u),v!==h||0!==c&&3!==v.nodeType||(f=d+c),3===v.nodeType&&(d+=v.nodeValue.length),null!==(y=v.firstChild);)_=v,v=y;for(;;){if(v===a)break t;if(_===l&&++g===u&&(p=d),_===h&&++m===c&&(f=d),null!==(y=v.nextSibling))break;_=(v=_).parentNode}v=y}l=-1===p||-1===f?null:{start:p,end:f}}else l=null}l=l||{start:0,end:0}}else l=null;ti={focusedElem:a,selectionRange:l},kn=!1,il=o;do{try{Pl()}catch(e){if(null===il)throw Error(s(330));Hl(il,e),il=il.nextEffect}}while(null!==il);il=o;do{try{for(a=e,l=t;null!==il;){var b=il.effectTag;if(16&b&&Ve(il.stateNode,""),128&b){var T=il.alternate;if(null!==T){var E=T.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(1038&b){case 2:wa(il),il.effectTag&=-3;break;case 6:wa(il),il.effectTag&=-3,Sa(il.alternate,il);break;case 1024:il.effectTag&=-1025;break;case 1028:il.effectTag&=-1025,Sa(il.alternate,il);break;case 4:Sa(il.alternate,il);break;case 8:ka(a,u=il,l),Ta(u)}il=il.nextEffect}}catch(e){if(null===il)throw Error(s(330));Hl(il,e),il=il.nextEffect}}while(null!==il);if(E=ti,T=Kn(),b=E.focusedElem,l=E.selectionRange,T!==b&&b&&b.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==l&&Yn(b)&&(T=l.start,void 0===(E=l.end)&&(E=T),"selectionStart"in b?(b.selectionStart=T,b.selectionEnd=Math.min(E,b.value.length)):(E=(T=b.ownerDocument||document)&&T.defaultView||window).getSelection&&(E=E.getSelection(),u=b.textContent.length,a=Math.min(l.start,u),l=void 0===l.end?a:Math.min(l.end,u),!E.extend&&a>l&&(u=l,l=a,a=u),u=jn(b,a),h=jn(b,l),u&&h&&(1!==E.rangeCount||E.anchorNode!==u.node||E.anchorOffset!==u.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((T=T.createRange()).setStart(u.node,u.offset),E.removeAllRanges(),a>l?(E.addRange(T),E.extend(h.node,h.offset)):(T.setEnd(h.node,h.offset),E.addRange(T))))),T=[];for(E=b;E=E.parentNode;)1===E.nodeType&&T.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<T.length;b++)(E=T[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}ti=null,kn=!!ei,ei=null,e.current=n,il=o;do{try{for(b=i;null!==il;){var w=il.effectTag;if(36&w){var k=il.alternate;switch(E=b,(T=il).tag){case 0:case 11:case 15:ya(16,32,T);break;case 1:var S=T.stateNode;if(4&T.effectTag)if(null===k)S.componentDidMount();else{var C=T.elementType===T.type?k.memoizedProps:nr(T.type,k.memoizedProps);S.componentDidUpdate(C,k.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var x=T.updateQueue;null!==x&&wr(0,x,S);break;case 3:var A=T.updateQueue;if(null!==A){if(a=null,null!==T.child)switch(T.child.tag){case 5:a=T.child.stateNode;break;case 1:a=T.child.stateNode}wr(0,A,a)}break;case 5:var R=T.stateNode;null===k&&4&T.effectTag&&ni(T.type,T.memoizedProps)&&R.focus();break;case 6:case 4:case 12:break;case 13:if(null===T.memoizedState){var I=T.alternate;if(null!==I){var O=I.memoizedState;if(null!==O){var M=O.dehydrated;null!==M&&St(M)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(s(163))}}if(128&w){T=void 0;var L=il.ref;if(null!==L){var D=il.stateNode;switch(il.tag){case 5:T=D;break;default:T=D}"function"==typeof L?L(T):L.current=T}}il=il.nextEffect}}catch(e){if(null===il)throw Error(s(330));Hl(il,e),il=il.nextEffect}}while(null!==il);il=null,Uo(),Ga=r}else e.current=n;if(al)al=!1,ll=e,cl=t;else for(il=o;null!==il;)t=il.nextEffect,il.nextEffect=null,il=t;if(0===(t=e.firstPendingTime)&&(sl=null),1073741823===t?e===dl?hl++:(hl=0,dl=e):hl=0,"function"==typeof Vl&&Vl(n.stateNode,i),yl(e),ol)throw ol=!1,e=rl,rl=null,e;return(Ga&Na)!==Da?null:(Zo(),null)}function Pl(){for(;null!==il;){var e=il.effectTag;0!=(256&e)&&_a(il.alternate,il),0==(512&e)||al||(al=!0,qo(97,(function(){return Bl(),null}))),il=il.nextEffect}}function Bl(){if(90!==cl){var e=97<cl?97:cl;return cl=90,Yo(e,Fl)}}function Fl(){if(null===ll)return!1;var e=ll;if(ll=null,(Ga&(Pa|Ba))!==Da)throw Error(s(331));var t=Ga;for(Ga|=Ba,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:ya(128,0,n),ya(0,64,n)}}catch(t){if(null===e)throw Error(s(330));Hl(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Ga=t,Zo(),!0}function Wl(e,t,n){_r(e,t=Aa(e,t=fa(n,t),1073741823)),null!==(e=vl(e,1073741823))&&yl(e)}function Hl(e,t){if(3===e.tag)Wl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Wl(n,e,t);break}if(1===n.tag){var i=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===sl||!sl.has(i))){_r(n,e=Ra(n,e=fa(t,e),1073741823)),null!==(n=vl(n,1073741823))&&yl(n);break}}n=n.return}}function Ul(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),za===e&&ja===n?Ka===$a||Ka===Ua&&1073741823===qa&&Xo()-tl<nl?kl(e,ja):el=!0:ec(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),yl(e)))}function $l(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=gl(t=fl(),e,null)),null!==(e=vl(e,t))&&yl(e)}Ia=function(e,t,n){var i=t.expirationTime;if(null!==e){var o=t.pendingProps;if(e.memoizedProps!==o||_o.current)zs=!0;else{if(i<n){switch(zs=!1,t.tag){case 3:ea(t),Vs();break;case 5:if(Xr(t),4&t.mode&&1!==n&&o.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:To(t.type)&&Co(t);break;case 4:Gr(t,t.stateNode.containerInfo);break;case 10:lr(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(i=t.child.childExpirationTime)&&i>=n?sa(e,t,n):(go(Kr,1&Kr.current),null!==(t=ua(e,t,n))?t.sibling:null);go(Kr,1&Kr.current);break;case 19:if(i=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(i)return ca(e,t,n);t.effectTag|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null),go(Kr,Kr.current),!i)return null}return ua(e,t,n)}zs=!1}}else zs=!1;switch(t.expirationTime=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,o=bo(t,vo.current),hr(t,n),o=fs(null,t,i,e,o,n),t.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,gs(),To(i)){var r=!0;Co(t)}else r=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var a=i.getDerivedStateFromProps;"function"==typeof a&&xr(t,i,a,e),o.updater=Ar,t.stateNode=o,o._reactInternalFiber=t,Mr(t,i,e,n),t=Qs(null,t,i,!0,r,n)}else t.tag=0,Xs(null,t,o,n),t=t.child;return t;case 16:if(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(o),1!==o._status)throw o._result;switch(o=o._result,t.type=o,r=t.tag=function(e){if("function"==typeof e)return jl(e)?1:0;if(null!=e){if((e=e.$$typeof)===G)return 11;if(e===j)return 14}return 2}(o),e=nr(o,e),r){case 0:t=Js(null,t,o,e,n);break;case 1:t=Zs(null,t,o,e,n);break;case 11:t=js(null,t,o,e,n);break;case 14:t=Ks(null,t,o,nr(o.type,e),i,n);break;default:throw Error(s(306,o,""))}return t;case 0:return i=t.type,o=t.pendingProps,Js(e,t,i,o=t.elementType===i?o:nr(i,o),n);case 1:return i=t.type,o=t.pendingProps,Zs(e,t,i,o=t.elementType===i?o:nr(i,o),n);case 3:if(ea(t),null===(i=t.updateQueue))throw Error(s(282));if(o=null!==(o=t.memoizedState)?o.element:null,Er(t,i,t.pendingProps,null,n),(i=t.memoizedState.element)===o)Vs(),t=ua(e,t,n);else{if((o=t.stateNode.hydrate)&&(Ps=si(t.stateNode.containerInfo.firstChild),Ns=t,o=Bs=!0),o)for(n=Fr(t,null,i,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Xs(e,t,i,n),Vs();t=t.child}return t;case 5:return Xr(t),null===e&&Hs(t),i=t.type,o=t.pendingProps,r=null!==e?e.memoizedProps:null,a=o.children,ii(i,o)?a=null:null!==r&&ii(i,r)&&(t.effectTag|=16),qs(e,t),4&t.mode&&1!==n&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Xs(e,t,a,n),t=t.child),t;case 6:return null===e&&Hs(t),null;case 13:return sa(e,t,n);case 4:return Gr(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Br(t,null,i,n):Xs(e,t,i,n),t.child;case 11:return i=t.type,o=t.pendingProps,js(e,t,i,o=t.elementType===i?o:nr(i,o),n);case 7:return Xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,a=t.memoizedProps,lr(t,r=o.value),null!==a){var l=a.value;if(0===(r=eo(l,r)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(l,r):1073741823))){if(a.children===o.children&&!_o.current){t=ua(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===i&&0!=(u.observedBits&r)){1===l.tag&&((u=mr(n,null)).tag=2,_r(l,u)),l.expirationTime<n&&(l.expirationTime=n),null!==(u=l.alternate)&&u.expirationTime<n&&(u.expirationTime=n),ur(l.return,n),c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}}Xs(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,i=(r=t.pendingProps).children,hr(t,n),i=i(o=dr(o,r.unstable_observedBits)),t.effectTag|=1,Xs(e,t,i,n),t.child;case 14:return r=nr(o=t.type,t.pendingProps),Ks(e,t,o,r=nr(o.type,r),i,n);case 15:return Ys(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:nr(i,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,To(i)?(e=!0,Co(t)):e=!1,hr(t,n),Ir(t,i,o),Mr(t,i,o,n),Qs(null,t,i,!0,e,n);case 19:return ca(e,t,n)}throw Error(s(156,t.tag))};var Vl=null,Gl=null;function zl(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Xl(e,t,n,i){return new zl(e,t,n,i)}function jl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Kl(e,t){var n=e.alternate;return null===n?((n=Xl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yl(e,t,n,i,o,r){var a=2;if(i=e,"function"==typeof e)jl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case F:return ql(n.children,o,r,t);case V:a=8,o|=7;break;case W:a=8,o|=1;break;case H:return(e=Xl(12,n,t,8|o)).elementType=H,e.type=H,e.expirationTime=r,e;case z:return(e=Xl(13,n,t,o)).type=z,e.elementType=z,e.expirationTime=r,e;case X:return(e=Xl(19,n,t,o)).elementType=X,e.expirationTime=r,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case U:a=10;break e;case $:a=9;break e;case G:a=11;break e;case j:a=14;break e;case K:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Xl(a,n,t,o)).elementType=e,t.type=i,t.expirationTime=r,t}function ql(e,t,n,i){return(e=Xl(7,e,i,t)).expirationTime=n,e}function Jl(e,t,n){return(e=Xl(6,e,null,t)).expirationTime=n,e}function Zl(e,t,n){return(t=Xl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function ec(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function tc(e,t){var n=e.firstSuspendedTime,i=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(i>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function nc(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function ic(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function oc(e,t,n,i){var o=t.current,r=fl(),a=Sr.suspense;r=gl(r,o,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(To(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var c=n.type;if(To(c)){n=So(n,c,l);break e}}n=l}else n=mo;return null===t.context?t.context=n:t.pendingContext=n,(t=mr(r,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),_r(o,t),ml(o,r),r}function rc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function sc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function ac(e,t){sc(e,t),(e=e.alternate)&&sc(e,t)}function lc(e,t,n){var i=new Ql(e,t,n=null!=n&&!0===n.hydrate),o=Xl(3,null,null,2===t?7:1===t?3:0);i.current=o,o.stateNode=i,e[hi]=i.current,n&&0!==t&&function(e){var t=Dn(e);gt.forEach((function(n){Nn(n,e,t)})),mt.forEach((function(n){Nn(n,e,t)}))}(9===e.nodeType?e:e.ownerDocument),this._internalRoot=i}function cc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function uc(e,t,n,i,o){var r=n._reactRootContainer;if(r){var s=r._internalRoot;if("function"==typeof o){var a=o;o=function(){var e=rc(s);a.call(e)}}oc(t,s,e,o)}else{if(r=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new lc(e,0,t?{hydrate:!0}:void 0)}(n,i),s=r._internalRoot,"function"==typeof o){var l=o;o=function(){var e=rc(s);l.call(e)}}wl((function(){oc(t,s,e,o)}))}return rc(s)}function hc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!cc(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:B,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}lc.prototype.render=function(e,t){oc(e,this._internalRoot,null,void 0===t?null:t)},lc.prototype.unmount=function(e){var t=this._internalRoot,n=void 0===e?null:e,i=t.containerInfo;oc(null,t,null,(function(){i[hi]=null,null!==n&&n()}))},ot=function(e){if(13===e.tag){var t=tr(fl(),150,100);ml(e,t),ac(e,t)}},rt=function(e){if(13===e.tag){fl();var t=er++;ml(e,t),ac(e,t)}},st=function(e){if(13===e.tag){var t=fl();ml(e,t=gl(t,e,null)),ac(e,t)}},ee=function(e,t,n){switch(t){case"input":if(Re(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=gi(i);if(!o)throw Error(s(90));Se(i),Re(i,o)}}}break;case"textarea":Pe(e,n);break;case"select":null!=(t=n.value)&&Le(e,!!n.multiple,t,!1)}},se=El,ae=function(e,t,n,i){var o=Ga;Ga|=4;try{return Yo(98,e.bind(null,t,n,i))}finally{(Ga=o)===Da&&Zo()}},le=function(){(Ga&(1|Pa|Ba))===Da&&(function(){if(null!==ul){var e=ul;ul=null,e.forEach((function(e,t){ic(t,e),yl(t)})),Zo()}}(),Bl())},ce=function(e,t){var n=Ga;Ga|=2;try{return e(t)}finally{(Ga=n)===Da&&Zo()}};var dc,pc,fc={createPortal:hc,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=it(t))?null:e.stateNode},hydrate:function(e,t,n){if(!cc(t))throw Error(s(200));return uc(null,e,t,!0,n)},render:function(e,t,n){if(!cc(t))throw Error(s(200));return uc(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,i){if(!cc(n))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return uc(e,t,n,!1,i)},unmountComponentAtNode:function(e){if(!cc(e))throw Error(s(40));return!!e._reactRootContainer&&(wl((function(){uc(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},unstable_createPortal:function(){return hc.apply(void 0,arguments)},unstable_batchedUpdates:El,flushSync:function(e,t){if((Ga&(Pa|Ba))!==Da)throw Error(s(187));var n=Ga;Ga|=1;try{return Yo(99,e.bind(null,t))}finally{Ga=n,Zo()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[pi,fi,gi,O.injectEventPluginsByName,d,Mt,function(e){x(e,Ot)},oe,re,In,I,Bl,{current:!1}]}};pc=(dc={findFiberByHostInstance:di,bundleType:0,version:"16.12.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Vl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Gl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(o({},dc,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=it(e))?null:e.stateNode},findFiberByHostInstance:function(e){return pc?pc(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var gc={default:fc},mc=gc&&fc||gc;e.exports=mc.default||mc},function(e,t,n){"use strict";e.exports=n(93)},function(e,t,n){"use strict";
/** @license React v0.18.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i,o,r,s,a;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,c=null,u=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(e){throw setTimeout(u,0),e}},h=Date.now();t.unstable_now=function(){return Date.now()-h},i=function(e){null!==l?setTimeout(i,0,e):(l=e,setTimeout(u,0))},o=function(e,t){c=setTimeout(e,t)},r=function(){clearTimeout(c)},s=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,p=window.Date,f=window.setTimeout,g=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var v=p.now();t.unstable_now=function(){return p.now()-v}}var _=!1,y=null,b=-1,T=5,E=0;s=function(){return t.unstable_now()>=E},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):T=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,k=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();E=e+T;try{y(!0,e)?k.postMessage(null):(_=!1,y=null)}catch(e){throw k.postMessage(null),e}}else _=!1},i=function(e){y=e,_||(_=!0,k.postMessage(null))},o=function(e,n){b=f((function(){e(t.unstable_now())}),n)},r=function(){g(b),b=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var i=Math.floor((n-1)/2),o=e[i];if(!(void 0!==o&&0<A(o,t)))break e;e[i]=t,e[n]=o,n=i}}function C(e){return void 0===(e=e[0])?null:e}function x(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length;i<o;){var r=2*(i+1)-1,s=e[r],a=r+1,l=e[a];if(void 0!==s&&0>A(s,n))void 0!==l&&0>A(l,s)?(e[i]=l,e[a]=n,i=a):(e[i]=s,e[r]=n,i=r);else{if(!(void 0!==l&&0>A(l,n)))break e;e[i]=l,e[a]=n,i=a}}}return t}return null}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var R=[],I=[],O=1,M=null,L=3,D=!1,N=!1,P=!1;function B(e){for(var t=C(I);null!==t;){if(null===t.callback)x(I);else{if(!(t.startTime<=e))break;x(I),t.sortIndex=t.expirationTime,S(R,t)}t=C(I)}}function F(e){if(P=!1,B(e),!N)if(null!==C(R))N=!0,i(W);else{var t=C(I);null!==t&&o(F,t.startTime-e)}}function W(e,n){N=!1,P&&(P=!1,r()),D=!0;var i=L;try{for(B(n),M=C(R);null!==M&&(!(M.expirationTime>n)||e&&!s());){var a=M.callback;if(null!==a){M.callback=null,L=M.priorityLevel;var l=a(M.expirationTime<=n);n=t.unstable_now(),"function"==typeof l?M.callback=l:M===C(R)&&x(R),B(n)}else x(R);M=C(R)}if(null!==M)var c=!0;else{var u=C(I);null!==u&&o(F,u.startTime-n),c=!1}return c}finally{M=null,L=i,D=!1}}function H(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=a;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=L;L=e;try{return t()}finally{L=n}},t.unstable_next=function(e){switch(L){case 1:case 2:case 3:var t=3;break;default:t=L}var n=L;L=t;try{return e()}finally{L=n}},t.unstable_scheduleCallback=function(e,n,s){var a=t.unstable_now();if("object"==typeof s&&null!==s){var l=s.delay;l="number"==typeof l&&0<l?a+l:a,s="number"==typeof s.timeout?s.timeout:H(e)}else s=H(e),l=a;return e={id:O++,callback:n,priorityLevel:e,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>a?(e.sortIndex=l,S(I,e),null===C(R)&&e===C(I)&&(P?r():P=!0,o(F,l-a))):(e.sortIndex=s,S(R,e),N||D||(N=!0,i(W))),e},t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_wrapCallback=function(e){var t=L;return function(){var n=L;L=t;try{return e.apply(this,arguments)}finally{L=n}}},t.unstable_getCurrentPriorityLevel=function(){return L},t.unstable_shouldYield=function(){var e=t.unstable_now();B(e);var n=C(R);return n!==M&&null!==M&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<M.expirationTime||s()},t.unstable_requestPaint=U,t.unstable_continueExecution=function(){N||D||(N=!0,i(W))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return C(R)},t.unstable_Profiling=null},function(e,t){e.exports=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}}},function(e,t,n){"use strict";var i=n(96);function o(){}function r(){}r.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,r,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";
/** @license React v16.12.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,r=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,a=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,u=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.concurrent_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,_=i?Symbol.for("react.fundamental"):60117,y=i?Symbol.for("react.responder"):60118,b=i?Symbol.for("react.scope"):60119;function T(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case h:case d:case s:case l:case a:case f:return e;default:switch(e=e&&e.$$typeof){case u:case p:case v:case m:case c:return e;default:return t}}case r:return t}}}function E(e){return T(e)===d}t.typeOf=T,t.AsyncMode=h,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=o,t.ForwardRef=p,t.Fragment=s,t.Lazy=v,t.Memo=m,t.Portal=r,t.Profiler=l,t.StrictMode=a,t.Suspense=f,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===l||e===a||e===f||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===p||e.$$typeof===_||e.$$typeof===y||e.$$typeof===b)},t.isAsyncMode=function(e){return E(e)||T(e)===h},t.isConcurrentMode=E,t.isContextConsumer=function(e){return T(e)===u},t.isContextProvider=function(e){return T(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return T(e)===p},t.isFragment=function(e){return T(e)===s},t.isLazy=function(e){return T(e)===v},t.isMemo=function(e){return T(e)===m},t.isPortal=function(e){return T(e)===r},t.isProfiler=function(e){return T(e)===l},t.isStrictMode=function(e){return T(e)===a},t.isSuspense=function(e){return T(e)===f}},function(e,t,n){"use strict";var i=n(100),o=n(101),r=n(102),s=n(108),a=n(110),l=n(111);e.exports=function e(){var t=[],n=s(),_={},y=!1,b=-1;return T.data=function(e,t){if(a(e))return 2===arguments.length?(g("data",y),_[e]=t,T):u.call(_,e)&&_[e]||null;if(e)return g("data",y),_=e,T;return _},T.freeze=E,T.attachers=t,T.use=function(e){var n;if(g("use",y),null==e);else if("function"==typeof e)a.apply(null,arguments);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?s(e):o(e)}n&&(_.settings=i(_.settings||{},n));return T;function o(e){s(e.plugins),e.settings&&(n=i(n||{},e.settings))}function r(e){if("function"==typeof e)a(e);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?a.apply(null,e):o(e)}}function s(e){var t,n;if(null==e);else{if(!("object"==typeof e&&"length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(t=e.length,n=-1;++n<t;)r(e[n])}}function a(e,n){var o=function(e){var n,i=t.length,o=-1;for(;++o<i;)if((n=t[o])[0]===e)return n}(e);o?(l(o[1])&&l(n)&&(n=i(o[1],n)),o[1]=n):t.push(c.call(arguments))}},T.parse=function(e){var t,n=r(e);if(E(),p("parse",t=T.Parser),d(t))return new t(String(n),n).parse();return t(String(n),n)},T.stringify=function(e,t){var n,i=r(t);if(E(),f("stringify",n=T.Compiler),m(e),d(n))return new n(e,i).compile();return n(e,i)},T.run=w,T.runSync=function(e,t){var n,i=!1;return w(e,t,(function(e,t){i=!0,o(e),n=t})),v("runSync","run",i),n},T.process=k,T.processSync=function(e){var t,n=!1;return E(),p("processSync",T.Parser),f("processSync",T.Compiler),k(t=r(e),(function(e){n=!0,o(e)})),v("processSync","process",n),t},T;function T(){for(var n=e(),o=t.length,r=-1;++r<o;)n.use.apply(null,t[r]);return n.data(i(!0,{},_)),n}function E(){var e,i,o,r;if(y)return T;for(;++b<t.length;)i=(e=t[b])[0],null,!1!==(o=e[1])&&(!0===o&&(e[1]=void 0),"function"==typeof(r=i.apply(T,e.slice(1)))&&n.use(r));return y=!0,b=1/0,T}function w(e,t,i){if(m(e),E(),i||"function"!=typeof t||(i=t,t=null),!i)return new Promise(o);function o(o,s){n.run(e,r(t),(function(t,n,r){n=n||e,t?s(t):o?o(n):i(null,n,r)}))}o(null,i)}function k(e,t){if(E(),p("process",T.Parser),f("process",T.Compiler),!t)return new Promise(n);function n(n,i){var o=r(e);h.run(T,{file:o},(function(e){e?i(e):n?n(o):t(null,o)}))}n(null,t)}}().freeze();var c=[].slice,u={}.hasOwnProperty,h=s().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,i,o){e?n(e):(t.tree=i,t.file=o,n())}))})).use((function(e,t){t.file.contents=e.stringify(t.tree,t.file)}));function d(e){return"function"==typeof e&&function(e){var t;for(t in e)return!0;return!1}(e.prototype)}function p(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function f(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function g(e,t){if(t)throw new Error(["Cannot invoke `"+e+"` on a frozen processor.\nCreate a new ","processor first, by invoking it: use `processor()` instead of ","`processor`."].join(""))}function m(e){if(!e||!a(e.type))throw new Error("Expected node, got `"+e+"`")}function v(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===o.call(e)},l=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t,n=i.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||i.call(e,t)},c=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},u=function(e,t){if("__proto__"===t){if(!i.call(e,t))return;if(s)return s(e,t).value}return e[t]};e.exports=function e(){var t,n,i,o,r,s,h=arguments[0],d=1,p=arguments.length,f=!1;for("boolean"==typeof h&&(f=h,h=arguments[1]||{},d=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});d<p;++d)if(null!=(t=arguments[d]))for(n in t)i=u(h,n),h!==(o=u(t,n))&&(f&&o&&(l(o)||(r=a(o)))?(r?(r=!1,s=i&&a(i)?i:[]):s=i&&l(i)?i:{},c(h,{name:n,newValue:e(f,s,o)})):void 0!==o&&c(h,{name:n,newValue:o}));return h}},function(e,t,n){"use strict";e.exports=function(e){if(e)throw e}},function(e,t,n){"use strict";var i=n(103),o=n(105);e.exports=o;var r=o.prototype;function s(e,t,n){var o=this.path,r=new i(e,t,n);return o&&(r.name=o+":"+r.name,r.file=o),r.fatal=!1,this.messages.push(r),r}r.message=s,r.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},r.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e},r.warn=s},function(e,t,n){"use strict";var i=n(104);function o(){}e.exports=s,o.prototype=Error.prototype,s.prototype=new o;var r=s.prototype;function s(e,t,n){var o,r,s;"string"==typeof t&&(n=t,t=null),o=function(e){var t,n=[null,null];"string"==typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1)));return n}(n),r=i(t)||"1:1",s={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(s=t,t=t.start):s.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=r,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=s,this.source=o[0],this.ruleId=o[1]}r.file="",r.name="",r.reason="",r.message="",r.stack="",r.fatal=null,r.column=null,r.line=null},function(e,t,n){"use strict";var i={}.hasOwnProperty;function o(e){return e&&"object"==typeof e||(e={}),s(e.line)+":"+s(e.column)}function r(e){return e&&"object"==typeof e||(e={}),o(e.start)+"-"+o(e.end)}function s(e){return e&&"number"==typeof e?e:1}e.exports=function(e){if(!e||"object"!=typeof e)return null;if(i.call(e,"position")||i.call(e,"type"))return r(e.position);if(i.call(e,"start")||i.call(e,"end"))return r(e);if(i.call(e,"line")||i.call(e,"column"))return o(e);return null}},function(e,t,n){"use strict";(function(t){var i=n(52),o=n(106),r=n(107);e.exports=c;var s={}.hasOwnProperty,a=c.prototype;a.toString=function(e){var t=this.contents||"";return r(t)?t.toString(e):String(t)};var l=["history","path","basename","stem","extname","dirname"];function c(e){var n,i,o;if(e){if("string"==typeof e||r(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof c))return new c(e);for(this.data={},this.messages=[],this.history=[],this.cwd=t.cwd(),i=-1,o=l.length;++i<o;)n=l[i],s.call(e,n)&&(this[n]=e[n]);for(n in e)-1===l.indexOf(n)&&(this[n]=e[n])}function u(e,t){if(-1!==e.indexOf(i.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+i.sep+"`")}function h(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function d(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}Object.defineProperty(a,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){h(e,"path"),e!==this.path&&this.history.push(e)}}),Object.defineProperty(a,"dirname",{get:function(){return"string"==typeof this.path?i.dirname(this.path):void 0},set:function(e){d(this.path,"dirname"),this.path=i.join(e||"",this.basename)}}),Object.defineProperty(a,"basename",{get:function(){return"string"==typeof this.path?i.basename(this.path):void 0},set:function(e){h(e,"basename"),u(e,"basename"),this.path=i.join(this.dirname||"",e)}}),Object.defineProperty(a,"extname",{get:function(){return"string"==typeof this.path?i.extname(this.path):void 0},set:function(e){var t=e||"";if(u(t,"extname"),d(this.path,"extname"),t){if("."!==t.charAt(0))throw new Error("`extname` must start with `.`");if(-1!==t.indexOf(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=o(this.path,t)}}),Object.defineProperty(a,"stem",{get:function(){return"string"==typeof this.path?i.basename(this.path,this.extname):void 0},set:function(e){h(e,"stem"),u(e,"stem"),this.path=i.join(this.dirname||"",e+(this.extname||""))}})}).call(this,n(35))},function(e,t,n){"use strict";var i=n(52);e.exports=function(e,t){if("string"!=typeof e)return e;if(0===e.length)return e;var n=i.basename(e,i.extname(e))+t;return i.join(i.dirname(e),n)}},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";var i=n(109);e.exports=r,r.wrap=i;var o=[].slice;function r(){var e=[],t={run:function(){var t=-1,n=o.call(arguments,0,-1),r=arguments[arguments.length-1];if("function"!=typeof r)throw new Error("Expected function as last argument, not "+r);(function s(a){var l=e[++t],c=o.call(arguments,0).slice(1),u=n.length,h=-1;if(a)r(a);else{for(;++h<u;)null!==c[h]&&void 0!==c[h]||(c[h]=n[h]);n=c,l?i(l,s).apply(null,n):r.apply(null,[null].concat(n))}}).apply(null,[null].concat(n))},use:function(n){if("function"!=typeof n)throw new Error("Expected `fn` to be a function, not "+n);return e.push(n),t}};return t}},function(e,t,n){"use strict";var i=[].slice;e.exports=function(e,t){var n;return function(){var t,s=i.call(arguments,0),a=e.length>s.length;a&&s.push(o);try{t=e.apply(null,s)}catch(e){if(a&&n)throw e;return o(e)}a||(t&&"function"==typeof t.then?t.then(r,o):t instanceof Error?o(t):r(t))};function o(){n||(n=!0,t.apply(null,arguments))}function r(e){o(null,e)}}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return"[object String]"===n.call(e)}},function(e,t,n){"use strict";var i=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===i.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},function(e,t,n){"use strict";var i=n(113),o=n(12),r=n(115);function s(e){var t=i(r);t.prototype.options=o(t.prototype.options,this.data("settings"),e),this.Parser=t}e.exports=s,s.Parser=r},function(e,t,n){"use strict";var i=n(12),o=n(114);e.exports=function(e){var t,n,r;for(n in o(a,e),o(s,a),t=a.prototype)(r=t[n])&&"object"==typeof r&&(t[n]="concat"in r?r.concat():i(r));return a;function s(t){return e.apply(this,t)}function a(){return this instanceof a?e.apply(this,arguments):new s(arguments)}}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";var i=n(12),o=n(116),r=n(117),s=n(118),a=n(119),l=n(125);function c(e,t){this.file=t,this.offset={},this.options=i(this.options),this.setOptions({}),this.inList=!1,this.inBlock=!1,this.inLink=!1,this.atStart=!0,this.toOffset=r(t).toOffset,this.unescape=s(this,"escape"),this.decode=a(this)}e.exports=c;var u=c.prototype;function h(e){var t,n=[];for(t in e)n.push(t);return n}u.setOptions=n(126),u.parse=n(129),u.options=n(54),u.exitStart=o("atStart",!0),u.enterList=o("inList",!1),u.enterLink=o("inLink",!1),u.enterBlock=o("inBlock",!1),u.interruptParagraph=[["thematicBreak"],["atxHeading"],["fencedCode"],["blockquote"],["html"],["setextHeading",{commonmark:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],u.interruptList=[["atxHeading",{pedantic:!1}],["fencedCode",{pedantic:!1}],["thematicBreak",{pedantic:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],u.interruptBlockquote=[["indentedCode",{commonmark:!0}],["fencedCode",{commonmark:!0}],["atxHeading",{commonmark:!0}],["setextHeading",{commonmark:!0}],["thematicBreak",{commonmark:!0}],["html",{commonmark:!0}],["list",{commonmark:!0}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],u.blockTokenizers={newline:n(133),indentedCode:n(134),fencedCode:n(135),blockquote:n(136),atxHeading:n(137),thematicBreak:n(138),list:n(139),setextHeading:n(141),html:n(142),footnote:n(143),definition:n(145),table:n(146),paragraph:n(147)},u.inlineTokenizers={escape:n(148),autoLink:n(150),url:n(151),html:n(153),link:n(154),reference:n(155),strong:n(156),emphasis:n(158),deletion:n(161),code:n(163),break:n(165),text:n(167)},u.blockMethods=h(u.blockTokenizers),u.inlineMethods=h(u.inlineTokenizers),u.tokenizeBlock=l("block"),u.tokenizeInline=l("inline"),u.tokenizeFactory=l},function(e,t,n){"use strict";e.exports=function(e,t,n){return function(){var i=n||this,o=i[e];return i[e]=!t,function(){i[e]=o}}}},function(e,t,n){"use strict";function i(e){return function(t){var n=-1,i=e.length;if(t<0)return{};for(;++n<i;)if(e[n]>t)return{line:n+1,column:t-(e[n-1]||0)+1,offset:t};return{}}}function o(e){return function(t){var n=t&&t.line,i=t&&t.column;if(!isNaN(n)&&!isNaN(i)&&n-1 in e)return(e[n-2]||0)+i-1||0;return-1}}e.exports=function(e){var t=function(e){var t=[],n=e.indexOf("\n");for(;-1!==n;)t.push(n+1),n=e.indexOf("\n",n+1);return t.push(e.length+1),t}(String(e));return{toPosition:i(t),toOffset:o(t)}}},function(e,t,n){"use strict";e.exports=function(e,t){return function(n){var i,o=0,r=n.indexOf("\\"),s=e[t],a=[];for(;-1!==r;)a.push(n.slice(o,r)),o=r+1,(i=n.charAt(o))&&-1!==s.indexOf(i)||a.push("\\"),r=n.indexOf("\\",o);return a.push(n.slice(o)),a.join("")}}},function(e,t,n){"use strict";var i=n(12),o=n(25);e.exports=function(e){return r.raw=function(e,r,s){return o(e,i(s,{position:t(r),warning:n}))},r;function t(t){for(var n=e.offset,i=t.line,o=[];++i&&i in n;)o.push((n[i]||0)+1);return{start:t,indent:o}}function n(t,n,i){3!==i&&e.file.message(t,n)}function r(i,r,s){o(i,{position:t(r),warning:n,text:s,reference:s,textContext:e,referenceContext:e})}}},function(e){e.exports=JSON.parse('{"AElig":"Æ","AMP":"&","Aacute":"Á","Acirc":"Â","Agrave":"À","Aring":"Å","Atilde":"Ã","Auml":"Ä","COPY":"©","Ccedil":"Ç","ETH":"Ð","Eacute":"É","Ecirc":"Ê","Egrave":"È","Euml":"Ë","GT":">","Iacute":"Í","Icirc":"Î","Igrave":"Ì","Iuml":"Ï","LT":"<","Ntilde":"Ñ","Oacute":"Ó","Ocirc":"Ô","Ograve":"Ò","Oslash":"Ø","Otilde":"Õ","Ouml":"Ö","QUOT":"\\"","REG":"®","THORN":"Þ","Uacute":"Ú","Ucirc":"Û","Ugrave":"Ù","Uuml":"Ü","Yacute":"Ý","aacute":"á","acirc":"â","acute":"´","aelig":"æ","agrave":"à","amp":"&","aring":"å","atilde":"ã","auml":"ä","brvbar":"¦","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","curren":"¤","deg":"°","divide":"÷","eacute":"é","ecirc":"ê","egrave":"è","eth":"ð","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","iacute":"í","icirc":"î","iexcl":"¡","igrave":"ì","iquest":"¿","iuml":"ï","laquo":"«","lt":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","ntilde":"ñ","oacute":"ó","ocirc":"ô","ograve":"ò","ordf":"ª","ordm":"º","oslash":"ø","otilde":"õ","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","raquo":"»","reg":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","thorn":"þ","times":"×","uacute":"ú","ucirc":"û","ugrave":"ù","uml":"¨","uuml":"ü","yacute":"ý","yen":"¥","yuml":"ÿ"}')},function(e){e.exports=JSON.parse('{"0":"�","128":"€","130":"‚","131":"ƒ","132":"„","133":"…","134":"†","135":"‡","136":"ˆ","137":"‰","138":"Š","139":"‹","140":"Œ","142":"Ž","145":"‘","146":"’","147":"“","148":"”","149":"•","150":"–","151":"—","152":"˜","153":"™","154":"š","155":"›","156":"œ","158":"ž","159":"Ÿ"}')},function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=102||t>=65&&t<=70||t>=48&&t<=57}},function(e,t,n){"use strict";var i=n(53),o=n(26);e.exports=function(e){return i(e)||o(e)}},function(e,t,n){"use strict";var i,o=59;e.exports=function(e){var t,n="&"+e+";";if((i=i||document.createElement("i")).innerHTML=n,(t=i.textContent).charCodeAt(t.length-1)===o&&"semi"!==e)return!1;return t!==n&&t}},function(e,t,n){"use strict";e.exports=function(e){return function(t,n){var r,s,a,l,c,u,h=this,d=h.offset,p=[],f=h[e+"Methods"],g=h[e+"Tokenizers"],m=n.line,v=n.column;if(!t)return p;T.now=y,T.file=h.file,_("");for(;t;){for(r=-1,s=f.length,c=!1;++r<s&&(l=f[r],!(a=g[l])||a.onlyAtStart&&!h.atStart||a.notInList&&h.inList||a.notInBlock&&h.inBlock||a.notInLink&&h.inLink||(u=t.length,a.apply(h,[T,t]),!(c=u!==t.length))););c||h.file.fail(new Error("Infinite loop"),T.now())}return h.eof=y(),p;function _(e){for(var t=-1,n=e.indexOf("\n");-1!==n;)m++,t=n,n=e.indexOf("\n",n+1);-1===t?v+=e.length:v=e.length-t,m in d&&(-1!==t?v+=d[m]:v<=d[m]&&(v=d[m]+1))}function y(){var e={line:m,column:v};return e.offset=h.toOffset(e),e}function b(e){this.start=e,this.end=y()}function T(e){var n,r=function(){var e=[],t=m+1;return function(){for(var n=m+1;t<n;)e.push((d[t]||0)+1),t++;return e}}(),s=(n=y(),function(e,t){var i=e.position,o=i?i.start:n,r=[],s=i&&i.end.line,a=n.line;if(e.position=new b(o),i&&t&&i.indent){if(r=i.indent,s<a){for(;++s<a;)r.push((d[s]||0)+1);r.push(n.column)}t=r.concat(t)}return e.position.indent=t||[],e}),a=y();return function(e){t.substring(0,e.length)!==e&&h.file.fail(new Error("Incorrectly eaten value: please report this warning on http://git.io/vg5Ft"),y())}(e),l.reset=c,c.test=u,l.test=u,t=t.substring(e.length),_(e),r=r(),l;function l(e,t){return s(function(e,t){var n=t?t.children:p,r=n[n.length-1];return r&&e.type===r.type&&e.type in i&&o(r)&&o(e)&&(e=i[e.type].call(h,r,e)),e!==r&&n.push(e),h.atStart&&0!==p.length&&h.exitStart(),e}(s(e),t),r)}function c(){var n=l.apply(null,arguments);return m=a.line,v=a.column,t=e+t,n}function u(){var n=s({});return m=a.line,v=a.column,t=e+t,n.position}}}};var i={text:function(e,t){return e.value+=t.value,e},blockquote:function(e,t){if(this.options.commonmark)return t;return e.children=e.children.concat(t.children),e}};function o(e){var t,n;return"text"!==e.type||!e.position||(t=e.position.start,n=e.position.end,t.line!==n.line||n.column-t.column===e.value.length)}},function(e,t,n){"use strict";var i=n(12),o=n(127),r=n(54);e.exports=function(e){var t,n,s=this.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=i(e)}for(t in r){if(null==(n=e[t])&&(n=s[t]),"blocks"!==t&&"boolean"!=typeof n||"blocks"===t&&"object"!=typeof n)throw new Error("Invalid value `"+n+"` for setting `options."+t+"`");e[t]=n}return this.options=e,this.escape=o(e),this}},function(e,t,n){"use strict";e.exports=s;var i=["\\","`","*","{","}","[","]","(",")","#","+","-",".","!","_",">"],o=i.concat(["~","|"]),r=o.concat(["\n",'"',"$","%","&","'",",","/",":",";","<","=","?","@","^"]);function s(e){var t=e||{};return t.commonmark?r:t.gfm?o:i}s.default=i,s.gfm=o,s.commonmark=r},function(e){e.exports=JSON.parse('["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]')},function(e,t,n){"use strict";var i=n(12),o=n(130);e.exports=function(){var e,t=String(this.file),n={line:1,column:1,offset:0},a=i(n);65279===(t=t.replace(s,r)).charCodeAt(0)&&(t=t.slice(1),a.column++,a.offset++);e={type:"root",children:this.tokenizeBlock(t,a),position:{start:n,end:this.eof||i(n)}},this.options.position||o(e,!0);return e};var r="\n",s=/\r\n|\r/g},function(e,t,n){"use strict";var i=n(27);function o(e){delete e.position}function r(e){e.position=void 0}e.exports=function(e,t){return i(e,t?o:r),e}},function(e,t,n){"use strict";e.exports=a;var i=n(132),o=!0,r="skip",s=!1;function a(e,t,n,o){var a;function c(e,i,u){var h,d=[];return(t&&!a(e,i,u[u.length-1]||null)||(d=l(n(e,u)))[0]!==s)&&e.children&&d[0]!==r&&(h=l(function(e,t){var n,i=o?-1:1,r=(o?e.length:-1)+i;for(;r>-1&&r<e.length;){if((n=c(e[r],r,t))[0]===s)return n;r="number"==typeof n[1]?n[1]:r+i}}(e.children,u.concat(e))))[0]===s?h:d}"function"==typeof t&&"function"!=typeof n&&(o=n,n=t,t=null),a=i(t),c(e,null,[])}function l(e){return null!==e&&"object"==typeof e&&"length"in e?e:"number"==typeof e?[o,e]:[e]}a.CONTINUE=o,a.SKIP=r,a.EXIT=s},function(e,t,n){"use strict";function i(e){if("string"==typeof e)return function(e){return function(t){return Boolean(t&&t.type===e)}}(e);if(null==e)return s;if("object"==typeof e)return("length"in e?r:o)(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function o(e){return function(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}function r(e){var t=function(e){for(var t=[],n=e.length,o=-1;++o<n;)t[o]=i(e[o]);return t}(e),n=t.length;return function(){var e=-1;for(;++e<n;)if(t[e].apply(this,arguments))return!0;return!1}}function s(){return!0}e.exports=i},function(e,t,n){"use strict";var i=n(9);e.exports=function(e,t,n){var o,r,s,a,l=t.charAt(0);if("\n"!==l)return;if(n)return!0;a=1,o=t.length,r=l,s="";for(;a<o&&(l=t.charAt(a),i(l));)s+=l,"\n"===l&&(r+=s,s=""),a++;e(r)}},function(e,t,n){"use strict";var i=n(36),o=n(37);e.exports=function(e,t,n){var i,c,u,h=-1,d=t.length,p="",f="",g="",m="";for(;++h<d;)if(i=t.charAt(h),u)if(u=!1,p+=g,f+=m,g="",m="",i===r)g=i,m=i;else for(p+=i,f+=i;++h<d;){if(!(i=t.charAt(h))||i===r){m=i,g=i;break}p+=i,f+=i}else if(i===a&&t.charAt(h+1)===i&&t.charAt(h+2)===i&&t.charAt(h+3)===i)g+=l,h+=3,u=!0;else if(i===s)g+=i,u=!0;else{for(c="";i===s||i===a;)c+=i,i=t.charAt(++h);if(i!==r)break;g+=c+i,m+=i}if(f)return!!n||e(p)({type:"code",lang:null,value:o(f)})};var r="\n",s="\t",a=" ",l=i(a,4)},function(e,t,n){"use strict";var i=n(37);e.exports=function(e,t,n){var h,d,p,f,g,m,v,_,y,b,T,E=this.options,w=t.length+1,k=0,S="";if(!E.gfm)return;for(;k<w&&((p=t.charAt(k))===s||p===r);)S+=p,k++;if(b=k,(p=t.charAt(k))!==a&&p!==l)return;k++,d=p,h=1,S+=p;for(;k<w&&(p=t.charAt(k))===d;)S+=p,h++,k++;if(h<c)return;for(;k<w&&((p=t.charAt(k))===s||p===r);)S+=p,k++;f="",g="";for(;k<w&&(p=t.charAt(k))!==o&&p!==a&&p!==l;)p===s||p===r?g+=p:(f+=g+p,g=""),k++;if((p=t.charAt(k))&&p!==o)return;if(n)return!0;(T=e.now()).column+=S.length,T.offset+=S.length,S+=f,f=this.decode.raw(this.unescape(f),T),g&&(S+=g);g="",_="",y="",m="",v="";for(;k<w;)if(p=t.charAt(k),m+=_,v+=y,_="",y="",p===o){for(m?(_+=p,y+=p):S+=p,g="",k++;k<w&&(p=t.charAt(k))===s;)g+=p,k++;if(_+=g,y+=g.slice(b),!(g.length>=u)){for(g="";k<w&&(p=t.charAt(k))===d;)g+=p,k++;if(_+=g,y+=g,!(g.length<h)){for(g="";k<w&&((p=t.charAt(k))===s||p===r);)_+=p,y+=p,k++;if(!p||p===o)break}}}else m+=p,y+=p,k++;return e(S+=m+_)({type:"code",lang:f||null,value:i(v)})};var o="\n",r="\t",s=" ",a="~",l="`",c=3,u=4},function(e,t,n){"use strict";var i=n(20),o=n(38);e.exports=function(e,t,n){var c,u,h,d,p,f,g,m,v,_=this.offset,y=this.blockTokenizers,b=this.interruptBlockquote,T=e.now(),E=T.line,w=t.length,k=[],S=[],C=[],x=0;for(;x<w&&((u=t.charAt(x))===a||u===s);)x++;if(t.charAt(x)!==l)return;if(n)return!0;x=0;for(;x<w;){for(d=t.indexOf(r,x),g=x,m=!1,-1===d&&(d=w);x<w&&((u=t.charAt(x))===a||u===s);)x++;if(t.charAt(x)===l?(x++,m=!0,t.charAt(x)===a&&x++):x=g,p=t.slice(x,d),!m&&!i(p)){x=g;break}if(!m&&(h=t.slice(x),o(b,y,this,[e,h,!0])))break;f=g===x?p:t.slice(g,d),C.push(x-g),k.push(f),S.push(p),x=d+1}x=-1,w=C.length,c=e(k.join(r));for(;++x<w;)_[E]=(_[E]||0)+C[x],E++;return v=this.enterBlock(),S=this.tokenizeBlock(S.join(r),T),v(),c({type:"blockquote",children:S})};var r="\n",s="\t",a=" ",l=">"},function(e,t,n){"use strict";e.exports=function(e,t,n){var l,c,u,h=this.options,d=t.length+1,p=-1,f=e.now(),g="",m="";for(;++p<d;){if((l=t.charAt(p))!==r&&l!==o){p--;break}g+=l}u=0;for(;++p<=d;){if((l=t.charAt(p))!==s){p--;break}g+=l,u++}if(u>a)return;if(!u||!h.pedantic&&t.charAt(p+1)===s)return;d=t.length+1,c="";for(;++p<d;){if((l=t.charAt(p))!==r&&l!==o){p--;break}c+=l}if(!h.pedantic&&0===c.length&&l&&l!==i)return;if(n)return!0;g+=c,c="",m="";for(;++p<d&&(l=t.charAt(p))&&l!==i;)if(l===r||l===o||l===s){for(;l===r||l===o;)c+=l,l=t.charAt(++p);for(;l===s;)c+=l,l=t.charAt(++p);for(;l===r||l===o;)c+=l,l=t.charAt(++p);p--}else m+=c+l,c="";return f.column+=g.length,f.offset+=g.length,e(g+=m+c)({type:"heading",depth:u,children:this.tokenizeInline(m,f)})};var i="\n",o="\t",r=" ",s="#",a=6},function(e,t,n){"use strict";e.exports=function(e,t,n){var u,h,d,p,f=-1,g=t.length+1,m="";for(;++f<g&&((u=t.charAt(f))===o||u===r);)m+=u;if(u!==s&&u!==l&&u!==a)return;h=u,m+=u,d=1,p="";for(;++f<g;)if((u=t.charAt(f))===h)d++,m+=p+h,p="";else{if(u!==r)return d>=c&&(!u||u===i)?(m+=p,!!n||e(m)({type:"thematicBreak"})):void 0;p+=u}};var i="\n",o="\t",r=" ",s="*",a="_",l="-",c=3},function(e,t,n){"use strict";var i=n(20),o=n(36),r=n(26),s=n(55),a=n(140),l=n(38);e.exports=function(e,t,n){var o,s,a,g,v,_,y,b,T,C,x,A,R,I,O,M,L,D,N,P,B,F,W,H,U=this.options.commonmark,$=this.options.pedantic,V=this.blockTokenizers,G=this.interruptList,z=0,X=t.length,j=null,K=0;for(;z<X;){if((g=t.charAt(z))===f)K+=m-K%m;else{if(g!==d)break;K++}z++}if(K>=m)return;if(g=t.charAt(z),o=U?k:w,!0===E[g])v=g,a=!1;else{for(a=!0,s="";z<X&&(g=t.charAt(z),r(g));)s+=g,z++;if(g=t.charAt(z),!s||!0!==o[g])return;j=parseInt(s,10),v=g}if((g=t.charAt(++z))!==d&&g!==f)return;if(n)return!0;z=0,I=[],O=[],M=[];for(;z<X;){for(_=t.indexOf(p,z),y=z,b=!1,H=!1,-1===_&&(_=X),W=z+m,K=0;z<X;){if((g=t.charAt(z))===f)K+=m-K%m;else{if(g!==d)break;K++}z++}if(K>=m&&(H=!0),L&&K>=L.indent&&(H=!0),g=t.charAt(z),T=null,!H){if(!0===E[g])T=g,z++,K++;else{for(s="";z<X&&(g=t.charAt(z),r(g));)s+=g,z++;g=t.charAt(z),z++,s&&!0===o[g]&&(T=g,K+=s.length+1)}if(T)if((g=t.charAt(z))===f)K+=m-K%m,z++;else if(g===d){for(W=z+m;z<W&&t.charAt(z)===d;)z++,K++;z===W&&t.charAt(z)===d&&(z-=m-1,K-=m-1)}else g!==p&&""!==g&&(T=null)}if(T){if(!$&&v!==T)break;b=!0}else U||H||t.charAt(y)!==d?U&&L&&(H=K>=L.indent||K>m):H=!0,b=!1,z=y;if(x=t.slice(y,_),C=y===z?x:t.slice(z,_),(T===c||T===u||T===h)&&V.thematicBreak.call(this,e,x,!0))break;if(A=R,R=!i(C).length,H&&L)L.value=L.value.concat(M,x),O=O.concat(M,x),M=[];else if(b)0!==M.length&&(L.value.push(""),L.trail=M.concat()),L={value:[x],indent:K,trail:[]},I.push(L),O=O.concat(M,x),M=[];else if(R){if(A)break;M.push(x)}else{if(A)break;if(l(G,V,this,[e,x,!0]))break;L.value=L.value.concat(M,x),O=O.concat(M,x),M=[]}z=_+1}B=e(O.join(p)).reset({type:"list",ordered:a,start:j,loose:null,children:[]}),D=this.enterList(),N=this.enterBlock(),P=!1,z=-1,X=I.length;for(;++z<X;)L=I[z].value.join(p),F=e.now(),(L=e(L)(S(this,L,F),B)).loose&&(P=!0),L=I[z].trail.join(p),z!==X-1&&(L+=p),e(L);return D(),N(),B.loose=P,B};var c="*",u="_",h="-",d=" ",p="\n",f="\t",g="x",m=4,v=/\n\n(?!\s*$)/,_=/^\[([ \t]|x|X)][ \t]/,y=/^([ \t]*)([*+-]|\d+[.)])( {1,4}(?! )| |\t|$|(?=\n))([^\n]*)/,b=/^([ \t]*)([*+-]|\d+[.)])([ \t]+)/,T=/^( {1,4}|\t)?/gm,E={};E[c]=!0,E["+"]=!0,E[h]=!0;var w={".":!0},k={};function S(e,t,n){var i,o,r=e.offset,s=null;return t=(e.options.pedantic?C:x).apply(null,arguments),e.options.gfm&&(i=t.match(_))&&(o=i[0].length,s=i[1].toLowerCase()===g,r[n.line]+=o,t=t.slice(o)),{type:"listItem",loose:v.test(t)||t.charAt(t.length-1)===p,checked:s,children:e.tokenizeBlock(t,n)}}function C(e,t,n){var i=e.offset,o=n.line;return t=t.replace(b,r),o=n.line,t.replace(T,r);function r(e){return i[o]=(i[o]||0)+e.length,o++,""}}function x(e,t,n){var i,r,l,c,u,h,f,g=e.offset,m=n.line;for(c=(t=t.replace(y,(function(e,t,n,s,a){r=t+n+s,l=a,Number(n)<10&&r.length%2==1&&(n=d+n);return(i=t+o(d,n.length)+s)+l}))).split(p),(u=a(t,s(i).indent).split(p))[0]=l,g[m]=(g[m]||0)+r.length,m++,h=0,f=c.length;++h<f;)g[m]=(g[m]||0)+c[h].length-u[h].length,m++;return u.join(p)}k["."]=!0,k[")"]=!0},function(e,t,n){"use strict";var i=n(20),o=n(36),r=n(55);e.exports=function(e,t){var n,c,u,h,d=e.split(a),p=d.length+1,f=1/0,g=[];d.unshift(o(s,t)+"!");for(;p--;)if(c=r(d[p]),g[p]=c.stops,0!==i(d[p]).length){if(!c.indent){f=1/0;break}c.indent>0&&c.indent<f&&(f=c.indent)}if(f!==1/0)for(p=d.length;p--;){for(u=g[p],n=f;n&&!(n in u);)n--;h=0!==i(d[p]).length&&f&&n!==f?l:"",d[p]=h+d[p].slice(n in u?u[n]+1:0)}return d.shift(),d.join(a)};var s=" ",a="\n",l="\t"},function(e,t,n){"use strict";e.exports=function(e,t,n){var l,c,u,h,d,p=e.now(),f=t.length,g=-1,m="";for(;++g<f;){if((u=t.charAt(g))!==r||g>=s){g--;break}m+=u}l="",c="";for(;++g<f;){if((u=t.charAt(g))===i){g--;break}u===r||u===o?c+=u:(l+=c+u,c="")}if(p.column+=m.length,p.offset+=m.length,m+=l+c,u=t.charAt(++g),h=t.charAt(++g),u!==i||!a[h])return;m+=u,c=h,d=a[h];for(;++g<f;){if((u=t.charAt(g))!==h){if(u!==i)return;g--;break}c+=u}if(n)return!0;return e(m+c)({type:"heading",depth:d,children:this.tokenizeInline(l,p)})};var i="\n",o="\t",r=" ",s=3,a={};a["="]=1,a["-"]=2},function(e,t,n){"use strict";var i=n(56).openCloseTag;e.exports=function(e,t,n){var l,c,u,h,d,p,f,g=this.options.blocks,m=t.length,v=0,_=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Za-z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+g.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(i.source+"\\s*$"),/^$/,!1]];for(;v<m&&((h=t.charAt(v))===o||h===r);)v++;if(t.charAt(v)!==a)return;l=-1===(l=t.indexOf(s,v+1))?m:l,c=t.slice(v,l),u=-1,d=_.length;for(;++u<d;)if(_[u][0].test(c)){p=_[u];break}if(!p)return;if(n)return p[2];if(v=l,!p[1].test(c))for(;v<m;){if(l=-1===(l=t.indexOf(s,v+1))?m:l,c=t.slice(v+1,l),p[1].test(c)){c&&(v=l);break}v=l}return f=t.slice(0,v),e(f)({type:"html",value:f})};var o="\t",r=" ",s="\n",a="<"},function(e,t,n){"use strict";var i=n(9),o=n(39);e.exports=f,f.notInList=!0,f.notInBlock=!0;var r="\\",s="\n",a="\t",l=" ",c="[",u="]",h="^",d=":",p=/^( {4}|\t)?/gm;function f(e,t,n){var f,g,m,v,_,y,b,T,E,w,k,S,C=this.offset;if(this.options.footnotes){for(f=0,g=t.length,m="",v=e.now(),_=v.line;f<g&&(E=t.charAt(f),i(E));)m+=E,f++;if(t.charAt(f)===c&&t.charAt(f+1)===h){for(f=(m+=c+h).length,b="";f<g&&(E=t.charAt(f))!==u;)E===r&&(b+=E,f++,E=t.charAt(f)),b+=E,f++;if(b&&t.charAt(f)===u&&t.charAt(f+1)===d){if(n)return!0;for(w=o(b),f=(m+=b+u+d).length;f<g&&((E=t.charAt(f))===a||E===l);)m+=E,f++;for(v.column+=m.length,v.offset+=m.length,b="",y="",T="";f<g;){if((E=t.charAt(f))===s){for(T=E,f++;f<g&&(E=t.charAt(f))===s;)T+=E,f++;for(b+=T,T="";f<g&&(E=t.charAt(f))===l;)T+=E,f++;if(0===T.length)break;b+=T}b&&(y+=b,b=""),y+=E,f++}return m+=y,y=y.replace(p,(function(e){return C[_]=(C[_]||0)+e.length,_++,""})),k=e(m),S=this.enterBlock(),y=this.tokenizeBlock(y,v),S(),k({type:"footnoteDefinition",identifier:w,children:y})}}}}},function(e,t,n){"use strict";e.exports=function(e){return String(e).replace(/\s+/g," ")}},function(e,t,n){"use strict";var i=n(9),o=n(39);e.exports=_,_.notInList=!0,_.notInBlock=!0;var r='"',s="'",a="\\",l="\n",c="\t",u=" ",h="[",d="]",p="(",f=")",g=":",m="<",v=">";function _(e,t,n){for(var i,v,_,T,E,w,k,S,C=this.options.commonmark,x=0,A=t.length,R="";x<A&&((T=t.charAt(x))===u||T===c);)R+=T,x++;if((T=t.charAt(x))===h){for(x++,R+=T,_="";x<A&&(T=t.charAt(x))!==d;)T===a&&(_+=T,x++,T=t.charAt(x)),_+=T,x++;if(_&&t.charAt(x)===d&&t.charAt(x+1)===g){for(w=_,x=(R+=_+d+g).length,_="";x<A&&((T=t.charAt(x))===c||T===u||T===l);)R+=T,x++;if(_="",i=R,(T=t.charAt(x))===m){for(x++;x<A&&y(T=t.charAt(x));)_+=T,x++;if((T=t.charAt(x))===y.delimiter)R+=m+_+T,x++;else{if(C)return;x-=_.length+1,_=""}}if(!_){for(;x<A&&b(T=t.charAt(x));)_+=T,x++;R+=_}if(_){for(k=_,_="";x<A&&((T=t.charAt(x))===c||T===u||T===l);)_+=T,x++;if(E=null,(T=t.charAt(x))===r?E=r:T===s?E=s:T===p&&(E=f),E){if(!_)return;for(x=(R+=_+T).length,_="";x<A&&(T=t.charAt(x))!==E;){if(T===l){if(x++,(T=t.charAt(x))===l||T===E)return;_+=l}_+=T,x++}if((T=t.charAt(x))!==E)return;v=R,R+=_+T,x++,S=_,_=""}else _="",x=R.length;for(;x<A&&((T=t.charAt(x))===c||T===u);)R+=T,x++;return(T=t.charAt(x))&&T!==l?void 0:!!n||(i=e(i).test().end,k=this.decode.raw(this.unescape(k),i,{nonTerminated:!1}),S&&(v=e(v).test().end,S=this.decode.raw(this.unescape(S),v)),e(R)({type:"definition",identifier:o(w),title:S||null,url:k}))}}}}function y(e){return e!==v&&e!==h&&e!==d}function b(e){return e!==h&&e!==d&&!i(e)}y.delimiter=v},function(e,t,n){"use strict";var i=n(9);e.exports=function(e,t,n){var _,y,b,T,E,w,k,S,C,x,A,R,I,O,M,L,D,N,P,B,F,W,H,U;if(!this.options.gfm)return;_=0,N=0,w=t.length+1,k=[];for(;_<w;){if(W=t.indexOf(u,_),H=t.indexOf(a,_+1),-1===W&&(W=t.length),-1===H||H>W){if(N<p)return;break}k.push(t.slice(_,W)),N++,_=W+1}T=k.join(u),y=k.splice(1,1)[0]||[],_=0,w=y.length,N--,b=!1,A=[];for(;_<w;){if((C=y.charAt(_))===a){if(x=null,!1===b){if(!1===U)return}else A.push(b),b=!1;U=!1}else if(C===s)x=!0,b=b||v;else if(C===l)b=b===f?g:x&&b===v?m:f;else if(!i(C))return;_++}!1!==b&&A.push(b);if(A.length<d)return;if(n)return!0;D=-1,B=[],F=e(T).reset({type:"table",align:A,children:B});for(;++D<N;){for(P=k[D],E={type:"tableRow",children:[]},D&&e(u),e(P).reset(E,F),w=P.length+1,_=0,S="",R="",I=!0,O=null,M=null;_<w;)if((C=P.charAt(_))!==h&&C!==c){if(""===C||C===a)if(I)e(C);else{if(C&&M){S+=C,_++;continue}!R&&!C||I||(T=R,S.length>1&&(C?(T+=S.slice(0,S.length-1),S=S.charAt(S.length-1)):(T+=S,S="")),L=e.now(),e(T)({type:"tableCell",children:this.tokenizeInline(R,L)},E)),e(S+C),S="",R=""}else if(S&&(R+=S,S=""),R+=C,C===o&&_!==w-2&&(R+=P.charAt(_+1),_++),C===r){for(O=1;P.charAt(_+1)===C;)R+=C,_++,O++;M?O>=M&&(M=0):M=O}I=!1,_++}else R?S+=C:e(C),_++;D||e(u+y)}return F};var o="\\",r="`",s="-",a="|",l=":",c=" ",u="\n",h="\t",d=1,p=2,f="left",g="center",m="right",v=null},function(e,t,n){"use strict";var i=n(20),o=n(26),r=n(37),s=n(38);e.exports=function(e,t,n){var h,d,p,f,g,m=this.options,v=m.commonmark,_=m.gfm,y=this.blockTokenizers,b=this.interruptParagraph,T=t.indexOf(a),E=t.length;for(;T<E;){if(-1===T){T=E;break}if(t.charAt(T+1)===a)break;if(v){for(f=0,h=T+1;h<E;){if((p=t.charAt(h))===l){f=u;break}if(p!==c)break;f++,h++}if(f>=u){T=t.indexOf(a,T+1);continue}}if(d=t.slice(T+1),s(b,y,this,[e,d,!0]))break;if(y.list.call(this,e,d,!0)&&(this.inList||v||_&&!o(i.left(d).charAt(0))))break;if(h=T,-1!==(T=t.indexOf(a,T+1))&&""===i(t.slice(h,T))){T=h;break}}if(d=t.slice(0,T),""===i(d))return e(d),null;if(n)return!0;return g=e.now(),d=r(d),e(d)({type:"paragraph",children:this.tokenizeInline(d,g)})};var a="\n",l="\t",c=" ",u=4},function(e,t,n){"use strict";var i=n(149);function o(e,t,n){var i,o;if("\\"===t.charAt(0)&&(i=t.charAt(1),-1!==this.escape.indexOf(i)))return!!n||(o="\n"===i?{type:"break"}:{type:"text",value:i},e("\\"+i)(o))}e.exports=o,o.locator=i},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("\\",t)}},function(e,t,n){"use strict";var i=n(9),o=n(25),r=n(57);e.exports=d,d.locator=r,d.notInLink=!0;var s="<",a=">",l="@",c="/",u="mailto:",h=u.length;function d(e,t,n){var r,d,p,f,g,m,v,_,y,b,T;if(t.charAt(0)===s){for(this,r="",d=t.length,p=0,f="",m=!1,v="",p++,r=s;p<d&&(g=t.charAt(p),!(i(g)||g===a||g===l||":"===g&&t.charAt(p+1)===c));)f+=g,p++;if(f){if(v+=f,f="",v+=g=t.charAt(p),p++,g===l)m=!0;else{if(":"!==g||t.charAt(p+1)!==c)return;v+=c,p++}for(;p<d&&(g=t.charAt(p),!i(g)&&g!==a);)f+=g,p++;if(g=t.charAt(p),f&&g===a)return!!n||(y=v+=f,r+=v+g,(_=e.now()).column++,_.offset++,m&&(v.slice(0,h).toLowerCase()===u?(y=y.substr(h),_.column+=h,_.offset+=h):v=u+v),b=this.inlineTokenizers,this.inlineTokenizers={text:b.text},T=this.enterLink(),y=this.tokenizeInline(y,_),this.inlineTokenizers=b,T(),e(r)({type:"link",title:null,url:o(v,{nonTerminated:!1}),children:y}))}}}},function(e,t,n){"use strict";var i=n(25),o=n(9),r=n(152);e.exports=g,g.locator=r,g.notInLink=!0;var s="[",a="]",l="(",c=")",u="<",h="@",d="mailto:",p=["http://","https://",d],f=p.length;function g(e,t,n){var r,g,m,v,_,y,b,T,E,w,k,S;if(this.options.gfm){for(r="",v=-1,T=f;++v<T;)if(y=p[v],(b=t.slice(0,y.length)).toLowerCase()===y){r=b;break}if(r){for(v=r.length,T=t.length,E="",w=0;v<T&&(m=t.charAt(v),!o(m)&&m!==u)&&("."!==m&&","!==m&&":"!==m&&";"!==m&&'"'!==m&&"'"!==m&&")"!==m&&"]"!==m||(k=t.charAt(v+1))&&!o(k))&&(m!==l&&m!==s||w++,m!==c&&m!==a||!(--w<0));)E+=m,v++;if(E){if(g=r+=E,y===d){if(-1===(_=E.indexOf(h))||_===T-1)return;g=g.substr(d.length)}return!!n||(S=this.enterLink(),g=this.tokenizeInline(g,e.now()),S(),e(r)({type:"link",title:null,url:i(r,{nonTerminated:!1}),children:g}))}}}}},function(e,t,n){"use strict";e.exports=function(e,t){var n,o=i.length,r=-1,s=-1;if(!this.options.gfm)return-1;for(;++r<o;)-1!==(n=e.indexOf(i[r],t))&&(n<s||-1===s)&&(s=n);return s};var i=["https://","http://","mailto:"]},function(e,t,n){"use strict";var i=n(53),o=n(57),r=n(56).tag;e.exports=l,l.locator=o;var s=/^<a /i,a=/^<\/a>/i;function l(e,t,n){var o,l,c=t.length;if(!("<"!==t.charAt(0)||c<3)&&(o=t.charAt(1),(i(o)||"?"===o||"!"===o||"/"===o)&&(l=t.match(r))))return!!n||(l=l[0],!this.inLink&&s.test(l)?this.inLink=!0:this.inLink&&a.test(l)&&(this.inLink=!1),e(l)({type:"html",value:l}))}},function(e,t,n){"use strict";var i=n(9),o=n(58);e.exports=m,m.locator=o;var r={}.hasOwnProperty,s="\\",a="[",l="]",c="(",u=")",h="<",d=">",p="`",f={'"':'"',"'":"'"},g={};function m(e,t,n){var o,m,v,_,y,b,T,E,w,k,S,C,x,A,R,I,O,M,L,D="",N=0,P=t.charAt(0),B=this.options.pedantic,F=this.options.commonmark,W=this.options.gfm;if("!"===P&&(w=!0,D=P,P=t.charAt(++N)),P===a&&(w||!this.inLink)){for(D+=P,R="",N++,C=t.length,A=0,(O=e.now()).column+=N,O.offset+=N;N<C;){if(b=P=t.charAt(N),P===p){for(m=1;t.charAt(N+1)===p;)b+=P,N++,m++;v?m>=v&&(v=0):v=m}else if(P===s)N++,b+=t.charAt(N);else if(v&&!W||P!==a){if((!v||W)&&P===l){if(!A){if(!B)for(;N<C&&(P=t.charAt(N+1),i(P));)b+=P,N++;if(t.charAt(N+1)!==c)return;b+=c,o=!0,N++;break}A--}}else A++;R+=b,b="",N++}if(o){for(k=R,D+=R+b,N++;N<C&&(P=t.charAt(N),i(P));)D+=P,N++;if(P=t.charAt(N),E=F?g:f,R="",_=D,P===h){for(N++,_+=h;N<C&&(P=t.charAt(N))!==d;){if(F&&"\n"===P)return;R+=P,N++}if(t.charAt(N)!==d)return;D+=h+R+d,I=R,N++}else{for(P=null,b="";N<C&&(P=t.charAt(N),!b||!r.call(E,P));){if(i(P)){if(!B)break;b+=P}else{if(P===c)A++;else if(P===u){if(0===A)break;A--}R+=b,b="",P===s&&(R+=s,P=t.charAt(++N)),R+=P}N++}I=R,N=(D+=R).length}for(R="";N<C&&(P=t.charAt(N),i(P));)R+=P,N++;if(P=t.charAt(N),D+=R,R&&r.call(E,P))if(N++,D+=P,R="",S=E[P],y=D,F){for(;N<C&&(P=t.charAt(N))!==S;)P===s&&(R+=s,P=t.charAt(++N)),N++,R+=P;if((P=t.charAt(N))!==S)return;for(x=R,D+=R+P,N++;N<C&&(P=t.charAt(N),i(P));)D+=P,N++}else for(b="";N<C;){if((P=t.charAt(N))===S)T&&(R+=S+b,b=""),T=!0;else if(T){if(P===u){D+=R+S+b,x=R;break}i(P)?b+=P:(R+=S+b+P,b="",T=!1)}else R+=P;N++}if(t.charAt(N)===u)return!!n||(D+=u,I=this.decode.raw(this.unescape(I),e(_).test().end,{nonTerminated:!1}),x&&(y=e(y).test().end,x=this.decode.raw(this.unescape(x),y)),L={type:w?"image":"link",title:x||null,url:I},w?L.alt=this.decode.raw(this.unescape(k),O)||null:(M=this.enterLink(),L.children=this.tokenizeInline(k,O),M()),e(D)(L))}}}g['"']='"',g["'"]="'",g[c]=u},function(e,t,n){"use strict";var i=n(9),o=n(58),r=n(39);e.exports=m,m.locator=o;var s="link",a="image",l="footnote",c="shortcut",u="collapsed",h="full",d="^",p="\\",f="[",g="]";function m(e,t,n){var o,m,v,_,y,b,T,E,w=t.charAt(0),k=0,S=t.length,C="",x="",A=s,R=c;if("!"===w&&(A=a,x=w,w=t.charAt(++k)),w===f){if(k++,x+=w,b="",this.options.footnotes&&t.charAt(k)===d){if(A===a)return;x+=d,k++,A=l}for(E=0;k<S;){if((w=t.charAt(k))===f)T=!0,E++;else if(w===g){if(!E)break;E--}w===p&&(b+=p,w=t.charAt(++k)),b+=w,k++}if(C=b,o=b,(w=t.charAt(k))===g){for(k++,C+=w,b="";k<S&&(w=t.charAt(k),i(w));)b+=w,k++;if(w=t.charAt(k),A!==l&&w===f){for(m="",b+=w,k++;k<S&&(w=t.charAt(k))!==f&&w!==g;)w===p&&(m+=p,w=t.charAt(++k)),m+=w,k++;(w=t.charAt(k))===g?(R=m?h:u,b+=m+w,k++):m="",C+=b,b=""}else{if(!o)return;m=o}if(R===h||!T)return C=x+C,A===s&&this.inLink?null:!!n||(A===l&&-1!==o.indexOf(" ")?e(C)({type:"footnote",children:this.tokenizeInline(o,e.now())}):((v=e.now()).column+=x.length,v.offset+=x.length,_={type:A+"Reference",identifier:r(m=R===h?m:o)},A!==s&&A!==a||(_.referenceType=R),A===s?(y=this.enterLink(),_.children=this.tokenizeInline(o,v),y()):A===a&&(_.alt=this.decode.raw(this.unescape(o),v)||null),e(C)(_)))}}}},function(e,t,n){"use strict";var i=n(20),o=n(9),r=n(157);e.exports=l,l.locator=r;var s="*",a="_";function l(e,t,n){var r,l,c,u,h,d,p,f=0,g=t.charAt(f);if(!(g!==s&&g!==a||t.charAt(++f)!==g||(l=this.options.pedantic,h=(c=g)+c,d=t.length,f++,u="",g="",l&&o(t.charAt(f)))))for(;f<d;){if(p=g,!((g=t.charAt(f))!==c||t.charAt(f+1)!==c||l&&o(p))&&(g=t.charAt(f+2))!==c){if(!i(u))return;return!!n||((r=e.now()).column+=2,r.offset+=2,e(h+u+h)({type:"strong",children:this.tokenizeInline(u,r)}))}l||"\\"!==g||(u+=g,g=t.charAt(++f)),u+=g,f++}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("**",t),i=e.indexOf("__",t);if(-1===i)return n;if(-1===n)return i;return i<n?i:n}},function(e,t,n){"use strict";var i=n(20),o=n(159),r=n(9),s=n(160);e.exports=c,c.locator=s;var a="*",l="_";function c(e,t,n){var s,c,u,h,d,p,f,g=0,m=t.charAt(g);if(!(m!==a&&m!==l||(c=this.options.pedantic,d=m,u=m,p=t.length,g++,h="",m="",c&&r(t.charAt(g)))))for(;g<p;){if(f=m,!((m=t.charAt(g))!==u||c&&r(f))){if((m=t.charAt(++g))!==u){if(!i(h)||f===u)return;if(!c&&u===l&&o(m)){h+=u;continue}return!!n||((s=e.now()).column++,s.offset++,e(d+h+u)({type:"emphasis",children:this.tokenizeInline(h,s)}))}h+=u}c||"\\"!==m||(h+=m,m=t.charAt(++g)),h+=m,g++}}},function(e,t,n){"use strict";e.exports=function(e){return o.test("number"==typeof e?i(e):e.charAt(0))};var i=String.fromCharCode,o=/\w/},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("*",t),i=e.indexOf("_",t);if(-1===i)return n;if(-1===n)return i;return i<n?i:n}},function(e,t,n){"use strict";var i=n(9),o=n(162);e.exports=a,a.locator=o;var r="~",s="~~";function a(e,t,n){var o,a,l,c="",u="",h="",d="";if(this.options.gfm&&t.charAt(0)===r&&t.charAt(1)===r&&!i(t.charAt(2)))for(o=1,a=t.length,(l=e.now()).column+=2,l.offset+=2;++o<a;){if(!((c=t.charAt(o))!==r||u!==r||h&&i(h)))return!!n||e(s+d+s)({type:"delete",children:this.tokenizeInline(d,l)});d+=u,h=u,u=c}}},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("~~",t)}},function(e,t,n){"use strict";var i=n(9),o=n(164);e.exports=s,s.locator=o;var r="`";function s(e,t,n){for(var o,s,a,l,c,u,h,d,p=t.length,f=0,g="",m="";f<p&&t.charAt(f)===r;)g+=r,f++;if(g){for(c=g,l=f,g="",d=t.charAt(f),a=0;f<p;){if(u=d,d=t.charAt(f+1),u===r?(a++,m+=u):(a=0,g+=u),a&&d!==r){if(a===l){c+=g+m,h=!0;break}g+=m,m=""}f++}if(!h){if(l%2!=0)return;g=""}if(n)return!0;for(o="",s="",p=g.length,f=-1;++f<p;)u=g.charAt(f),i(u)?s+=u:(s&&(o&&(o+=s),s=""),o+=u);return e(c)({type:"inlineCode",value:o})}}},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("`",t)}},function(e,t,n){"use strict";var i=n(166);e.exports=r,r.locator=i;var o=2;function r(e,t,n){for(var i,r=t.length,s=-1,a="";++s<r;){if("\n"===(i=t.charAt(s))){if(s<o)return;return!!n||e(a+=i)({type:"break"})}if(" "!==i)return;a+=i}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("\n",t);for(;n>t&&" "===e.charAt(n-1);)n--;return n}},function(e,t,n){"use strict";e.exports=function(e,t,n){var i,o,r,s,a,l,c,u,h,d;if(n)return!0;i=this.inlineMethods,s=i.length,o=this.inlineTokenizers,r=-1,h=t.length;for(;++r<s;)"text"!==(u=i[r])&&o[u]&&((c=o[u].locator)||e.file.fail("Missing locator: `"+u+"`"),-1!==(l=c.call(this,t,1))&&l<h&&(h=l));a=t.slice(0,h),d=e.now(),this.decode(a,d,(function(t,n,i){e(i||t)({type:"text",value:t})}))}},function(e,t,n){var i=n(169);e.exports=function(){return function(e){return i(e,"list",(function(e,t){var n,i,o=0;for(n=0,i=t.length;n<i;n++)"list"===t[n].type&&(o+=1);for(n=0,i=e.children.length;n<i;n++){var r=e.children[n];r.index=n,r.ordered=e.ordered}e.depth=o})),e}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var i=[];"function"==typeof t&&(n=t,t=null);function o(e){var r;return t&&e.type!==t||(r=n(e,i.concat())),e.children&&!1!==r?function(e,t){var n,r=e.length,s=-1;i.push(t);for(;++s<r;)if((n=e[s])&&!1===o(n))return!1;return i.pop(),!0}(e.children,e):r}o(e)}},function(e,t,n){"use strict";var i=n(27),o="virtualHtml",r=/^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\s*\/?>$/i,s=/^<(\/?)([a-z]+)\s*>$/;e.exports=function(e){var t,n;return i(e,"html",(function(e,i,a){n!==a&&(t=[],n=a);var l=function(e){var t=e.value.match(r);return!!t&&t[1]}(e);if(l)return a.children.splice(i,1,{type:o,tag:l,position:e.position}),!0;var c=function(e,t){var n=e.value.match(s);return!!n&&{tag:n[2],opening:!n[1],node:e}}(e);if(!c)return!0;var u=function(e,t){var n=e.length;for(;n--;)if(e[n].tag===t)return e.splice(n,1)[0];return!1}(t,c.tag);return u?a.children.splice(i,0,function(e,t,n){var i=n.children.indexOf(e.node),r=n.children.indexOf(t.node),s=n.children.splice(i,r-i+1).slice(1,-1);return{type:o,children:s,tag:e.tag,position:{start:e.node.position.start,end:t.node.position.end,indent:[]}}}(c,u,a)):c.opening||t.push(c),!0}),!0),e}},function(e,t,n){"use strict";var i=n(27);function o(e,t,n,i){if("remove"===i)n.children.splice(t,1);else if("unwrap"===i){var o=[t,1];e.children&&(o=o.concat(e.children)),Array.prototype.splice.apply(n.children,o)}}t.ofType=function(e,t){return function(t){return e.forEach((function(e){return i(t,e,n,!0)})),t};function n(e,n,i){i&&o(e,n,i,t)}},t.ifNotMatch=function(e,t){return function(e){return i(e,n,!0),e};function n(n,i,r){r&&!e(n,i,r)&&o(n,i,r,t)}}},function(e,t,n){"use strict";var i=n(0),o=n(12),r=n(34),s={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=t.renderers[e.type];void 0===e.position&&(e.position=n.node&&n.node.position||s);var h=e.position.start,d=[e.type,h.line,h.column,c].join("-");if(!r.isValidElementType(u))throw new Error("Renderer for type `".concat(e.type,"` not defined or is not renderable"));var p=function(e,t,n,r,s,c){var u={key:t},h="string"==typeof r;n.sourcePos&&e.position&&(u["data-sourcepos"]=function(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}(e.position));n.rawSourcePos&&!h&&(u.sourcePosition=e.position);n.includeNodeIndex&&s.node&&s.node.children&&!h&&(u.index=s.node.children.indexOf(e),u.parentChildCount=s.node.children.length);var d=null!==e.identifier&&void 0!==e.identifier?n.definitions[e.identifier]||{}:null;switch(e.type){case"root":l(u,{className:n.className});break;case"text":u.nodeKey=t,u.children=e.value;break;case"heading":u.level=e.depth;break;case"list":u.start=e.start,u.ordered=e.ordered,u.tight=!e.loose,u.depth=e.depth;break;case"listItem":u.checked=e.checked,u.tight=!e.loose,u.ordered=e.ordered,u.index=e.index,u.children=function(e,t){if(e.loose)return e.children;if(t.node&&e.index>0&&t.node.children[e.index-1].loose)return e.children;return function(e){return e.children.reduce((function(e,t){return e.concat("paragraph"===t.type?t.children||[]:[t])}),[])}(e)}(e,s).map((function(t,i){return a(t,n,{node:e,props:u},i)}));break;case"definition":l(u,{identifier:e.identifier,title:e.title,url:e.url});break;case"code":l(u,{language:e.lang&&e.lang.split(/\s/,1)[0]});break;case"inlineCode":u.children=e.value,u.inline=!0;break;case"link":l(u,{title:e.title||void 0,target:"function"==typeof n.linkTarget?n.linkTarget(e.url,e.children,e.title):n.linkTarget,href:n.transformLinkUri?n.transformLinkUri(e.url,e.children,e.title):e.url});break;case"image":l(u,{alt:e.alt||void 0,title:e.title||void 0,src:n.transformImageUri?n.transformImageUri(e.url,e.children,e.title,e.alt):e.url});break;case"linkReference":l(u,o(d,{href:n.transformLinkUri?n.transformLinkUri(d.href):d.href}));break;case"imageReference":l(u,{src:n.transformImageUri&&d.href?n.transformImageUri(d.href,e.children,d.title,e.alt):d.href,title:d.title||void 0,alt:e.alt||void 0});break;case"table":case"tableHead":case"tableBody":u.columnAlignment=e.align;break;case"tableRow":u.isHeader="tableHead"===s.node.type,u.columnAlignment=s.props.columnAlignment;break;case"tableCell":l(u,{isHeader:s.props.isHeader,align:s.props.columnAlignment[c]});break;case"virtualHtml":u.tag=e.tag;break;case"html":u.isBlock=e.position.start.line!==e.position.end.line,u.escapeHtml=n.escapeHtml,u.skipHtml=n.skipHtml;break;case"parsedHtml":var p;e.children&&(p=e.children.map((function(t,i){return a(t,n,{node:e,props:u},i)}))),u.escapeHtml=n.escapeHtml,u.skipHtml=n.skipHtml,u.element=function(e,t){var n=e.element;if(Array.isArray(n)){var o=i.Fragment||"div";return i.createElement(o,null,n)}if(n.props.children||t){var r=i.Children.toArray(n.props.children).concat(t);return i.cloneElement(n,null,r)}return i.cloneElement(n,null)}(e,p);break;default:l(u,o(e,{type:void 0,position:void 0,children:void 0}))}!h&&e.value&&(u.value=e.value);return u}(e,d,t,u,n,c);return i.createElement(u,p,p.children||e.children&&e.children.map((function(n,i){return a(n,t,{node:e,props:p},i)}))||void 0)}function l(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}e.exports=a},function(e,t,n){"use strict";var i=n(27);function o(e){var t=e.children;e.children=[{type:"tableHead",align:e.align,children:[t[0]],position:t[0].position}],t.length>1&&e.children.push({type:"tableBody",align:e.align,children:t.slice(1),position:{start:t[1].position.start,end:t[t.length-1].position.end}})}e.exports=function(e){return i(e,"table",o),e}},function(e,t,n){"use strict";e.exports=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t.children||[]).reduce((function(t,n){return"definition"===n.type&&(t[n.identifier]={href:n.url,title:n.title}),e(n,t)}),n)}},function(e,t,n){"use strict";var i=["http","https","mailto","tel"];e.exports=function(e){var t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;var o=t.indexOf(":");if(-1===o)return t;for(var r=i.length,s=-1;++s<r;){var a=i[s];if(o===a.length&&t.slice(0,a.length).toLowerCase()===a)return t}return-1!==(s=t.indexOf("?"))&&o>s?t:-1!==(s=t.indexOf("#"))&&o>s?t:"javascript:void(0)"}},function(e,t,n){"use strict";var i=n(12),o=n(0),r=parseInt((o.version||"16").slice(0,2),10)>=16,s=o.createElement;function a(e,t){return s(e,l(t),t.children)}function l(e){return e["data-sourcepos"]?{"data-sourcepos":e["data-sourcepos"]}:{}}e.exports={break:"br",paragraph:"p",emphasis:"em",strong:"strong",thematicBreak:"hr",blockquote:"blockquote",delete:"del",link:"a",image:"img",linkReference:"a",imageReference:"img",table:a.bind(null,"table"),tableHead:a.bind(null,"thead"),tableBody:a.bind(null,"tbody"),tableRow:a.bind(null,"tr"),tableCell:function(e){var t=e.align?{textAlign:e.align}:void 0,n=l(e);return s(e.isHeader?"th":"td",t?i({style:t},n):n,e.children)},root:function(e){var t=!e.className,n=t&&o.Fragment||"div";return s(n,t?null:e,e.children)},text:function(e){return r?e.children:s("span",null,e.children)},list:function(e){var t=l(e);null!==e.start&&1!==e.start&&void 0!==e.start&&(t.start=e.start.toString());return s(e.ordered?"ol":"ul",t,e.children)},listItem:function(e){var t=null;if(null!==e.checked&&void 0!==e.checked){var n=e.checked;t=s("input",{type:"checkbox",checked:n,readOnly:!0})}return s("li",l(e),t,e.children)},definition:function(){return null},heading:function(e){return s("h".concat(e.level),l(e),e.children)},inlineCode:function(e){return s("code",l(e),e.children)},code:function(e){var t=e.language&&"language-".concat(e.language),n=s("code",t?{className:t}:null,e.value);return s("pre",l(e),n)},html:function(e){if(e.skipHtml)return null;var t=e.isBlock?"div":"span";if(e.escapeHtml){var n=o.Fragment||t;return s(n,null,e.value)}var i={dangerouslySetInnerHTML:{__html:e.value}};return s(t,i)},virtualHtml:function(e){return s(e.tag,l(e),e.children)},parsedHtml:function(e){return e["data-sourcepos"]?o.cloneElement(e.element,{"data-sourcepos":e["data-sourcepos"]}):e.element}}},function(e,t,n){"use strict";t.HtmlParser="undefined"==typeof Symbol?"__RMD_HTML_PARSER__":Symbol("__RMD_HTML_PARSER__")},function(e,t,n){"use strict";e.exports=n(179)},function(e,t,n){"use strict";var i=n(180),o=n(188)(i,"div");o.displayName="html",e.exports=o},function(e,t,n){"use strict";var i=n(181),o=n(182),r=n(183),s=n(184),a=n(186),l=n(187);e.exports=i([r,o,s,a,l])},function(e,t,n){"use strict";var i=n(12),o=n(59);e.exports=function(e){var t,n,r=e.length,s=[],a=[],l=-1;for(;++l<r;)t=e[l],s.push(t.property),a.push(t.normal),n=t.space;return new o(i.apply(null,s),i.apply(null,a),n)}},function(e,t,n){"use strict";var i=n(22);e.exports=i({space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}})},function(e,t,n){"use strict";var i=n(22);e.exports=i({space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}})},function(e,t,n){"use strict";var i=n(22),o=n(62);e.exports=i({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:o,properties:{xmlns:null,xmlnsXLink:null}})},function(e,t,n){"use strict";e.exports=function(e,t){return t in e?e[t]:t}},function(e,t,n){"use strict";var i=n(41),o=n(22),r=i.booleanish,s=i.number,a=i.spaceSeparated;e.exports=o({transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:r,ariaAutoComplete:null,ariaBusy:r,ariaChecked:r,ariaColCount:s,ariaColIndex:s,ariaColSpan:s,ariaControls:a,ariaCurrent:null,ariaDescribedBy:a,ariaDetails:null,ariaDisabled:r,ariaDropEffect:a,ariaErrorMessage:null,ariaExpanded:r,ariaFlowTo:a,ariaGrabbed:r,ariaHasPopup:null,ariaHidden:r,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:a,ariaLevel:s,ariaLive:null,ariaModal:r,ariaMultiLine:r,ariaMultiSelectable:r,ariaOrientation:null,ariaOwns:a,ariaPlaceholder:null,ariaPosInSet:s,ariaPressed:r,ariaReadOnly:r,ariaRelevant:null,ariaRequired:r,ariaRoleDescription:a,ariaRowCount:s,ariaRowIndex:s,ariaRowSpan:s,ariaSelected:r,ariaSetSize:s,ariaSort:null,ariaValueMax:s,ariaValueMin:s,ariaValueNow:s,ariaValueText:null,role:null}})},function(e,t,n){"use strict";var i=n(41),o=n(22),r=n(62),s=i.boolean,a=i.overloadedBoolean,l=i.booleanish,c=i.number,u=i.spaceSeparated,h=i.commaSeparated;e.exports=o({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:r,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:h,acceptCharset:u,accessKey:u,action:null,allow:null,allowFullScreen:s,allowPaymentRequest:s,allowUserMedia:s,alt:null,as:null,async:s,autoCapitalize:null,autoComplete:u,autoFocus:s,autoPlay:s,capture:s,charSet:null,checked:s,cite:null,className:u,cols:c,colSpan:null,content:null,contentEditable:l,controls:s,controlsList:u,coords:c|h,crossOrigin:null,data:null,dateTime:null,decoding:null,default:s,defer:s,dir:null,dirName:null,disabled:s,download:a,draggable:l,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:s,formTarget:null,headers:u,height:c,hidden:s,high:c,href:null,hrefLang:null,htmlFor:u,httpEquiv:u,id:null,imageSizes:null,imageSrcSet:h,inputMode:null,integrity:null,is:null,isMap:s,itemId:null,itemProp:u,itemRef:u,itemScope:s,itemType:u,kind:null,label:null,lang:null,language:null,list:null,loop:s,low:c,manifest:null,max:null,maxLength:c,media:null,method:null,min:null,minLength:c,multiple:s,muted:s,name:null,nonce:null,noModule:s,noValidate:s,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextMenu:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:s,optimum:c,pattern:null,ping:u,placeholder:null,playsInline:s,poster:null,preload:null,readOnly:s,referrerPolicy:null,rel:u,required:s,reversed:s,rows:c,rowSpan:c,sandbox:u,scope:null,scoped:s,seamless:s,selected:s,shape:null,size:c,sizes:null,slot:null,span:c,spellCheck:l,src:null,srcDoc:null,srcLang:null,srcSet:h,start:c,step:null,style:null,tabIndex:c,target:null,title:null,translate:null,type:null,typeMustMatch:s,useMap:null,value:l,width:c,wrap:null,align:null,aLink:null,archive:u,axis:null,background:null,bgColor:null,border:c,borderColor:null,bottomMargin:c,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:s,declare:s,event:null,face:null,frame:null,frameBorder:null,hSpace:c,leftMargin:c,link:null,longDesc:null,lowSrc:null,marginHeight:c,marginWidth:c,noResize:s,noHref:s,noShade:s,noWrap:s,object:null,profile:null,prompt:null,rev:null,rightMargin:c,rules:null,scheme:null,scrolling:l,standby:null,summary:null,text:null,topMargin:c,valueType:null,version:null,vAlign:null,vLink:null,vSpace:c,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:s,prefix:null,property:null,results:c,security:null,unselectable:null}})},function(e,t,n){"use strict";var i=n(189),o=n(40),r=n(190),s=n(191).parse,a=n(192).parse;e.exports=function(e,t,n){var o=n?function(e){var t,n=e.length,i=-1,o={};for(;++i<n;)t=e[i],o[t.toLowerCase()]=t;return o}(n):null;return(function(e,n){var i,s=r(e,t),a=Array.prototype.slice.call(arguments,2),c=s.tagName.toLowerCase();s.tagName=o&&l.call(o,c)?o[c]:c,n&&function(e,t){return"string"==typeof e||"length"in e||function(e,t){var n=t.type;if("input"===e||!n||"string"!=typeof n)return!1;if("object"==typeof t.children&&"length"in t.children)return!0;if(n=n.toLowerCase(),"button"===e)return"menu"!==n&&"submit"!==n&&"reset"!==n&&"button"!==n;return"value"in t}(t.tagName,e)}(n,s)&&(a.unshift(n),n=null);if(n)for(i in n)u(s.properties,i,n[i]);(function e(t,n){var i,o;if("string"==typeof n||"number"==typeof n)return void t.push({type:"text",value:String(n)});if("object"==typeof n&&"length"in n){for(i=-1,o=n.length;++i<o;)e(t,n[i]);return}if("object"!=typeof n||!("type"in n))throw new Error("Expected node, nodes, or string, got `"+n+"`");t.push(n)})(s.children,a),"template"===s.tagName&&(s.content={type:"root",children:s.children},s.children=[]);return s});function u(t,n,o){var r,l,u;null!=o&&o==o&&(l=(r=i(e,n)).property,"string"==typeof(u=o)&&(r.spaceSeparated?u=s(u):r.commaSeparated?u=a(u):r.commaOrSpaceSeparated&&(u=s(a(u).join(" ")))),"style"===l&&"string"!=typeof o&&(u=function(e){var t,n=[];for(t in e)n.push([t,e[t]].join(": "));return n.join("; ")}(u)),"className"===l&&t.className&&(u=t.className.concat(u)),t[l]=function(e,t,n){var i,o,r;if("object"!=typeof n||!("length"in n))return c(e,t,n);o=n.length,i=-1,r=[];for(;++i<o;)r[i]=c(e,t,n[i]);return r}(r,l,u))}};var l={}.hasOwnProperty;function c(e,t,n){var i=n;return e.number||e.positiveNumber?isNaN(i)||""===i||(i=Number(i)):(e.boolean||e.overloadedBoolean)&&("string"!=typeof i||""!==i&&o(n)!==o(t)||(i=!0)),i}},function(e,t,n){"use strict";var i=n(40),o=n(60),r=n(61),s="data";e.exports=function(e,t){var n=i(t),d=t,p=r;if(n in e.normal)return e.property[e.normal[n]];n.length>4&&n.slice(0,4)===s&&a.test(t)&&("-"===t.charAt(4)?d=function(e){var t=e.slice(5).replace(l,h);return s+t.charAt(0).toUpperCase()+t.slice(1)}(t):t=function(e){var t=e.slice(4);if(l.test(t))return e;"-"!==(t=t.replace(c,u)).charAt(0)&&(t="-"+t);return s+t}(t),p=o);return new p(d,t)};var a=/^data[-a-z0-9.:_]+$/i,l=/-[a-z]/g,c=/[A-Z]/g;function u(e){return"-"+e.toLowerCase()}function h(e){return e.charAt(1).toUpperCase()}},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,s,a,l,c=e||"",u=t||"div",h={},d=-1,p=c.length;for(;++d<=p;)(s=c.charCodeAt(d))&&s!==o&&s!==i||((a=c.slice(l,d))&&(r===o?n?n.push(a):(n=[a],h.className=n):r===i?h.id=a:u=a),l=d+1,r=s);return{type:"element",tagName:u,properties:h,children:[]}};var i=35,o=46},function(e,t,n){"use strict";t.parse=function(e){var t=String(e||i).trim();return t===i?[]:t.split(r)},t.stringify=function(e){return e.join(o).trim()};var i="",o=" ",r=/[ \t\n\r\f]+/g},function(e,t,n){"use strict";t.parse=function(e){var t,n=[],o=String(e||r),s=o.indexOf(i),a=0,l=!1;for(;!l;)-1===s&&(s=o.length,l=!0),!(t=o.slice(a,s).trim())&&l||n.push(t),a=s+1,s=o.indexOf(i,a);return n},t.stringify=function(e,t){var n=t||{},s=!1===n.padLeft?r:o,a=n.padRight?o:r;e[e.length-1]===r&&(e=e.concat(r));return e.join(a+i+s).trim()};var i=",",o=" ",r=""},function(e,t,n){(function(t){var n=function(e){var t=/\blang(?:uage)?-([\w-]+)\b/i,n=0,i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function(e){return e instanceof o?new o(e.type,i.util.encode(e.content),e.alias):Array.isArray(e)?e.map(i.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var o,r,s=i.util.type(t);switch(n=n||{},s){case"Object":if(r=i.util.objId(t),n[r])return n[r];for(var a in o={},n[r]=o,t)t.hasOwnProperty(a)&&(o[a]=e(t[a],n));return o;case"Array":return r=i.util.objId(t),n[r]?n[r]:(o=[],n[r]=o,t.forEach((function(t,i){o[i]=e(t,n)})),o);default:return t}}},languages:{extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){var r=(o=o||i.languages)[e],s={};for(var a in r)if(r.hasOwnProperty(a)){if(a==t)for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);n.hasOwnProperty(a)||(s[a]=r[a])}var c=o[e];return o[e]=s,i.languages.DFS(i.languages,(function(t,n){n===c&&t!=e&&(this[t]=s)})),s},DFS:function e(t,n,o,r){r=r||{};var s=i.util.objId;for(var a in t)if(t.hasOwnProperty(a)){n.call(t,a,t[a],o||a);var l=t[a],c=i.util.type(l);"Object"!==c||r[s(l)]?"Array"!==c||r[s(l)]||(r[s(l)]=!0,e(l,n,a,r)):(r[s(l)]=!0,e(l,n,null,r))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var o={callback:n,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",o);for(var r,s=e.querySelectorAll(o.selector),a=0;r=s[a++];)i.highlightElement(r,!0===t,o.callback)},highlightElement:function(n,o,r){for(var s,a="none",l=n;l&&!t.test(l.className);)l=l.parentNode;l&&(a=(l.className.match(t)||[,"none"])[1].toLowerCase(),s=i.languages[a]),n.className=n.className.replace(t,"").replace(/\s+/g," ")+" language-"+a,n.parentNode&&(l=n.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(t,"").replace(/\s+/g," ")+" language-"+a));var c={element:n,language:a,grammar:s,code:n.textContent},u=function(e){c.highlightedCode=e,i.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,i.hooks.run("after-highlight",c),i.hooks.run("complete",c),r&&r.call(c.element)};if(i.hooks.run("before-sanity-check",c),c.code)if(i.hooks.run("before-highlight",c),c.grammar)if(o&&e.Worker){var h=new Worker(i.filename);h.onmessage=function(e){u(e.data)},h.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else u(i.highlight(c.code,c.grammar,c.language));else u(i.util.encode(c.code));else i.hooks.run("complete",c)},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};return i.hooks.run("before-tokenize",r),r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},matchGrammar:function(e,t,n,r,s,a,l){for(var c in n)if(n.hasOwnProperty(c)&&n[c]){if(c==l)return;var u=n[c];u="Array"===i.util.type(u)?u:[u];for(var h=0;h<u.length;++h){var d=u[h],p=d.inside,f=!!d.lookbehind,g=!!d.greedy,m=0,v=d.alias;if(g&&!d.pattern.global){var _=d.pattern.toString().match(/[imuy]*$/)[0];d.pattern=RegExp(d.pattern.source,_+"g")}d=d.pattern||d;for(var y=r,b=s;y<t.length;b+=t[y].length,++y){var T=t[y];if(t.length>e.length)return;if(!(T instanceof o)){if(g&&y!=t.length-1){if(d.lastIndex=b,!(x=d.exec(e)))break;for(var E=x.index+(f?x[1].length:0),w=x.index+x[0].length,k=y,S=b,C=t.length;k<C&&(S<w||!t[k].type&&!t[k-1].greedy);++k)E>=(S+=t[k].length)&&(++y,b=S);if(t[y]instanceof o)continue;A=k-y,T=e.slice(b,S),x.index-=b}else{d.lastIndex=0;var x=d.exec(T),A=1}if(x){f&&(m=x[1]?x[1].length:0);w=(E=x.index+m)+(x=x[0].slice(m)).length;var R=T.slice(0,E),I=T.slice(w),O=[y,A];R&&(++y,b+=R.length,O.push(R));var M=new o(c,p?i.tokenize(x,p):x,v,x,g);if(O.push(M),I&&O.push(I),Array.prototype.splice.apply(t,O),1!=A&&i.matchGrammar(e,t,n,y,b,!0,c),a)break}else if(a)break}}}}},tokenize:function(e,t){var n=[e],o=t.rest;if(o){for(var r in o)t[r]=o[r];delete t.rest}return i.matchGrammar(e,n,t,0,0,!1),n},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var o,r=0;o=n[r++];)o(t)}},Token:o};function o(e,t,n,i,o){this.type=e,this.content=t,this.alias=n,this.length=0|(i||"").length,this.greedy=!!o}if(e.Prism=i,o.stringify=function(e,t){if("string"==typeof e)return e;if(Array.isArray(e))return e.map((function(e){return o.stringify(e,t)})).join("");var n={type:e.type,content:o.stringify(e.content,t),tag:"span",classes:["token",e.type],attributes:{},language:t};if(e.alias){var r=Array.isArray(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(n.classes,r)}i.hooks.run("wrap",n);var s=Object.keys(n.attributes).map((function(e){return e+'="'+(n.attributes[e]||"").replace(/"/g,"&quot;")+'"'})).join(" ");return"<"+n.tag+' class="'+n.classes.join(" ")+'"'+(s?" "+s:"")+">"+n.content+"</"+n.tag+">"},!e.document)return e.addEventListener?(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),o=n.language,r=n.code,s=n.immediateClose;e.postMessage(i.highlight(r,i.languages[o],o)),s&&e.close()}),!1),i):i;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(i.filename=r.src,i.manual||r.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(i.highlightAll):window.setTimeout(i.highlightAll,16):document.addEventListener("DOMContentLoaded",i.highlightAll))),i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=n),void 0!==t&&(t.Prism=n)}).call(this,n(8))},function(e,t,n){"use strict";function i(e){e.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.value.replace(/&amp;/,"&"))})),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(t,n){var i={};i["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[n]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+n]={pattern:/[\s\S]+/,inside:e.languages[n]};var r={};r[t]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,t),"i"),lookbehind:!0,greedy:!0,inside:o},e.languages.insertBefore("markup","cdata",r)}}),e.languages.xml=e.languages.extend("markup",{}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup}e.exports=i,i.displayName="markup",i.aliases=["xml","html","mathml","svg"]},function(e,t,n){"use strict";function i(e){!function(e){var t=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+[\s\S]*?(?:;|(?=\s*\{))/,inside:{rule:/@[\w-]+/}},url:{pattern:RegExp("url\\((?:"+t.source+"|[^\n\r()]*)\\)","i"),inside:{function:/^url/i,punctuation:/^\(|\)$/}},selector:RegExp("[^{}\\s](?:[^{};\"']|"+t.source+")*?(?=\\s*\\{)"),string:{pattern:t,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),e.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:n.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:e.languages.css}},alias:"language-css"}},n.tag))}(e)}e.exports=i,i.displayName="css",i.aliases=[]},function(e,t,n){"use strict";function i(e){e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/}}e.exports=i,i.displayName="clike",i.aliases=[]},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}},function(e,t,n){"use strict";(function(t){function i(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=i(n(201)),r=i(n(202));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d="undefined"==typeof window?null:window,p=d?d.navigator:null,f=(d&&d.document,s("")),g=s({}),m=s((function(){})),v="undefined"==typeof HTMLElement?"undefined":s(HTMLElement),_=function(e){return e&&e.instanceString&&b(e.instanceString)?e.instanceString():null},y=function(e){return null!=e&&s(e)==f},b=function(e){return null!=e&&s(e)===m},T=function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},E=function(e){return null!=e&&s(e)===g&&!T(e)&&e.constructor===Object},w=function(e){return null!=e&&s(e)===s(1)&&!isNaN(e)},k=function(e){return"undefined"===v?void 0:null!=e&&e instanceof HTMLElement},S=function(e){return C(e)||x(e)},C=function(e){return"collection"===_(e)&&e._private.single},x=function(e){return"collection"===_(e)&&!e._private.single},A=function(e){return"core"===_(e)},R=function(e){return"stylesheet"===_(e)},I=function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},O=function(e){return function(e){return null!=e&&s(e)===g}(e)&&b(e.then)},M=function(){return p&&p.userAgent.match(/msie|trident|edge/i)},L=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var n=function n(){var i,o=this,r=arguments,s=t.apply(o,r),a=n.cache;return(i=a[s])||(i=a[s]=e.apply(o,r)),i};return n.cache={},n},D=L((function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))})),N=L((function(e){return e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))})),P=L((function(e,t){return e+t[0].toUpperCase()+t.substring(1)}),(function(e,t){return e+"$"+t})),B=function(e){return I(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},F="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",W=function(e,t){return e<t?-1:e>t?1:0},H=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var i=t[n];if(null!=i)for(var o=Object.keys(i),r=0;r<o.length;r++){var s=o[r];e[s]=i[s]}}return e},U=function(e){return(T(e)?e:null)||function(e){return $[e.toLowerCase()]}(e)||function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,n,i;return 4===e.length?(t=parseInt(e[1]+e[1],16),n=parseInt(e[2]+e[2],16),i=parseInt(e[3]+e[3],16)):(t=parseInt(e[1]+e[2],16),n=parseInt(e[3]+e[4],16),i=parseInt(e[5]+e[6],16)),[t,n,i]}}(e)||function(e){var t,n=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(e);if(n){t=[];for(var i=[],o=1;o<=3;o++){var r=n[o];if("%"===r[r.length-1]&&(i[o]=!0),r=parseFloat(r),i[o]&&(r=r/100*255),r<0||r>255)return;t.push(Math.floor(r))}var s=i[1]||i[2]||i[3],a=i[1]&&i[2]&&i[3];if(s&&!a)return;var l=n[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t}(e)||function(e){var t,n,i,o,r,s,a,l;function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var u=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(e);if(u){if((n=parseInt(u[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(i=parseFloat(u[2]))<0||i>100)return;if(i/=100,(o=parseFloat(u[3]))<0||o>100)return;if(o/=100,void 0!==(r=u[4])&&((r=parseFloat(r))<0||r>1))return;if(0===i)s=a=l=Math.round(255*o);else{var h=o<.5?o*(1+i):o+i-o*i,d=2*o-h;s=Math.round(255*c(d,h,n+1/3)),a=Math.round(255*c(d,h,n)),l=Math.round(255*c(d,h,n-1/3))}t=[s,a,l,r]}return t}(e)},$={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},V=function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var r=n[o];if(E(r))throw Error("Tried to set map with object key");o<n.length-1?(null==t[r]&&(t[r]={}),t=t[r]):t[r]=e.value}},G=function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var r=n[o];if(E(r))throw Error("Tried to get map with object key");if(null==(t=t[r]))return t}return t},z=d?d.performance:null,X=z&&z.now?function(){return z.now()}:function(){return Date.now()},j=function(){if(d){if(d.requestAnimationFrame)return function(e){d.requestAnimationFrame(e)};if(d.mozRequestAnimationFrame)return function(e){d.mozRequestAnimationFrame(e)};if(d.webkitRequestAnimationFrame)return function(e){d.webkitRequestAnimationFrame(e)};if(d.msRequestAnimationFrame)return function(e){d.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout((function(){e(X())}),1e3/60)}}(),K=function(e){return j(e)},Y=X,q=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381,i=n;!(t=e.next()).done;)i=(i<<5)+i+t.value|0;return i},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(t<<5)+t+e|0},Z=function(e,t){var n={value:0,done:!1},i=0,o=e.length;return q({next:function(){return i<o?n.value=e[i++]:n.done=!0,n}},t)},Q=function(e,t){var n={value:0,done:!1},i=0,o=e.length;return q({next:function(){return i<o?n.value=e.charCodeAt(i++):n.done=!0,n}},t)},ee=function(){return te(arguments)},te=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];t=0===n?Q(i):Q(i,t)}return t},ne=!0,ie=null!=console.warn,oe=null!=console.trace,re=Number.MAX_SAFE_INTEGER||9007199254740991,se=function(){return!0},ae=function(){return!1},le=function(){return 0},ce=function(){},ue=function(e){throw new Error(e)},he=function(e){if(void 0===e)return ne;ne=!!e},de=function(e){he()&&(ie?console.warn(e):(console.log(e),oe&&console.trace()))},pe=function(e){return null==e?e:T(e)?e.slice():E(e)?function(e){return H({},e)}(e):e},fe=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},ge={},me=function(){return ge},ve=function(e){var t=Object.keys(e);return function(n){for(var i={},o=0;o<t.length;o++){var r=t[o],s=null==n?void 0:n[r];i[r]=void 0===s?e[r]:s}return i}},_e=function(e,t,n){for(var i=e.length;i>=0&&(e[i]!==t||(e.splice(i,1),n));i--);},ye=function(e){e.splice(0,e.length)},be=function(e,t,n){return n&&(t=P(n,t)),e[t]},Te=function(e,t,n,i){n&&(t=P(n,t)),e[t]=i},Ee="undefined"!=typeof Map?Map:function(){function e(){a(this,e),this._obj={}}return c(e,[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),e}(),we=function(){function e(t){if(a(this,e),this._obj=Object.create(null),this.size=0,null!=t){var n;n=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var i=0;i<n.length;i++)this.add(n[i])}}return c(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter((function(t){return e.has(t)}))}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}]),e}(),ke="undefined"!==("undefined"==typeof Set?"undefined":s(Set))?Set:we,Se=function(e,t,n){if(n=!(void 0!==n&&!n),void 0!==e&&void 0!==t&&A(e)){var i=t.group;if(null==i&&(i=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===i||"edges"===i){this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===i:!!t.pannable,active:!1,classes:new ke,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==o.position.x&&(o.position.x=0),null==o.position.y&&(o.position.y=0),t.renderedPosition){var r=t.renderedPosition,s=e.pan(),a=e.zoom();o.position={x:(r.x-s.x)/a,y:(r.y-s.y)/a}}var l=[];T(t.classes)?l=t.classes:y(t.classes)&&(l=t.classes.split(/\s+/));for(var c=0,u=l.length;c<u;c++){var h=l[c];h&&""!==h&&o.classes.add(h)}this.createEmitter();var d=t.style||t.css;d&&(de("Setting a `style` bypass at element creation is deprecated"),this.style(d)),(void 0===n||n)&&this.restore()}else ue("An element must be of type `nodes` or `edges`; you specified `"+i+"`")}else ue("An element must have a core reference and parameters set")},Ce=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,i){var o;E(t)&&!S(t)&&(t=(o=t).roots||o.root,n=o.visit,i=o.directed),i=2!==arguments.length||b(n)?i:n,n=b(n)?n:function(){};for(var r,s=this._private.cy,a=t=y(t)?this.filter(t):t,l=[],c=[],u={},h={},d={},p=0,f=this.byGroup(),g=f.nodes,m=f.edges,v=0;v<a.length;v++){var _=a[v],T=_.id();_.isNode()&&(l.unshift(_),e.bfs&&(d[T]=!0,c.push(_)),h[T]=0)}var w=function(){var t=e.bfs?l.shift():l.pop(),o=t.id();if(e.dfs){if(d[o])return"continue";d[o]=!0,c.push(t)}var s,a=h[o],f=u[o],v=null!=f?f.source():null,_=null!=f?f.target():null,y=null==f?void 0:t.same(v)?_[0]:v[0];if(!0===(s=n(t,f,y,p++,a)))return r=t,"break";if(!1===s)return"break";for(var b=t.connectedEdges().filter((function(e){return(!i||e.source().same(t))&&m.has(e)})),T=0;T<b.length;T++){var E=b[T],w=E.connectedNodes().filter((function(e){return!e.same(t)&&g.has(e)})),k=w.id();0===w.length||d[k]||(w=w[0],l.push(w),e.bfs&&(d[k]=!0,c.push(w)),u[k]=E,h[k]=h[o]+1)}};e:for(;0!==l.length;){var k=w();switch(k){case"continue":continue;case"break":break e}}for(var C=s.collection(),x=0;x<c.length;x++){var A=c[x],R=u[A.id()];null!=R&&C.merge(R),C.merge(A)}return{path:s.collection(C),found:s.collection(r)}}},xe={breadthFirstSearch:Ce({bfs:!0}),depthFirstSearch:Ce({dfs:!0})};xe.bfs=xe.breadthFirstSearch,xe.dfs=xe.depthFirstSearch;var Ae=ve({root:null,weight:function(e){return 1},directed:!1}),Re={dijkstra:function(e){if(!E(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=Ae(e),i=n.root,o=n.weight,s=n.directed,a=this,l=o,c=y(i)?this.filter(i)[0]:i[0],u={},h={},d={},p=this.byGroup(),f=p.nodes,g=p.edges;g.unmergeBy((function(e){return e.isLoop()}));for(var m=function(e){return u[e.id()]},v=function(e,t){u[e.id()]=t,_.updateItem(e)},_=new r((function(e,t){return m(e)-m(t)})),b=0;b<f.length;b++){var T=f[b];u[T.id()]=T.same(c)?0:1/0,_.push(T)}for(var w=function(e,t){for(var n,i=(s?e.edgesTo(t):e.edgesWith(t)).intersect(g),o=1/0,r=0;r<i.length;r++){var a=i[r],c=l(a);(c<o||!n)&&(o=c,n=a)}return{edge:n,dist:o}};_.size()>0;){var k=_.pop(),S=m(k),C=k.id();if(d[C]=S,S!==1/0)for(var x=k.neighborhood().intersect(f),A=0;A<x.length;A++){var R=x[A],I=R.id(),O=w(k,R),M=S+O.dist;M<m(R)&&(v(R,M),h[I]={node:k,edge:O.edge})}}return{distanceTo:function(e){var t=y(e)?f.filter(e)[0]:e[0];return d[t.id()]},pathTo:function(e){var t=y(e)?f.filter(e)[0]:e[0],n=[],i=t,o=i.id();if(t.length>0)for(n.unshift(t);h[o];){var r=h[o];n.unshift(r.edge),n.unshift(r.node),o=(i=r.node).id()}return a.spawn(n)}}}},Ie={kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,o=n.length,r=new Array(o),s=n,a=function(e){for(var t=0;t<r.length;t++){if(r[t].has(e))return t}},l=0;l<o;l++)r[l]=this.spawn(n[l]);for(var c=i.sort((function(t,n){return e(t)-e(n)})),u=0;u<c.length;u++){var h=c[u],d=h.source()[0],p=h.target()[0],f=a(d),g=a(p),m=r[f],v=r[g];f!==g&&(s.merge(h),m.merge(v),r.splice(g,1))}return s}},Oe=ve({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Me={aStar:function(e){var t=this.cy(),n=Oe(e),i=n.root,o=n.goal,s=n.heuristic,a=n.directed,l=n.weight;i=t.collection(i)[0],o=t.collection(o)[0];var c,u,h=i.id(),d=o.id(),p={},f={},g={},m=new r((function(e,t){return f[e.id()]-f[t.id()]})),v=new ke,_={},y={},b=function(e,t){m.push(e),v.add(t)};b(i,h),p[h]=0,f[h]=s(i);for(var T,E=0;m.size()>0;){if(c=m.pop(),u=c.id(),v.delete(u),E++,u===d){for(var w=[],k=o,S=d,C=y[S];w.unshift(k),null!=C&&w.unshift(C),null!=(k=_[S]);)C=y[S=k.id()];return{found:!0,distance:p[u],path:this.spawn(w),steps:E}}g[u]=!0;for(var x=c._private.edges,A=0;A<x.length;A++){var R=x[A];if(this.hasElementWithId(R.id())&&(!a||R.data("source")===u)){var I=R.source(),O=R.target(),M=I.id()!==u?I:O,L=M.id();if(this.hasElementWithId(L)&&!g[L]){var D=p[u]+l(R);T=L,v.has(T)?D<p[L]&&(p[L]=D,f[L]=D+s(M),_[L]=c):(p[L]=D,f[L]=D+s(M),b(M,L),_[L]=c,y[L]=R)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},Le=ve({weight:function(e){return 1},directed:!1}),De={floydWarshall:function(e){for(var t=this.cy(),n=Le(e),i=n.weight,o=n.directed,r=i,s=this.byGroup(),a=s.nodes,l=s.edges,c=a.length,u=c*c,h=function(e){return a.indexOf(e)},d=function(e){return a[e]},p=new Array(u),f=0;f<u;f++){var g=f%c,m=(f-g)/c;p[f]=m===g?0:1/0}for(var v=new Array(u),_=new Array(u),b=0;b<l.length;b++){var T=l[b],E=T.source()[0],w=T.target()[0];if(E!==w){var k=h(E),S=h(w),C=k*c+S,x=r(T);if(p[C]>x&&(p[C]=x,v[C]=S,_[C]=T),!o){var A=S*c+k;!o&&p[A]>x&&(p[A]=x,v[A]=k,_[A]=T)}}}for(var R=0;R<c;R++)for(var I=0;I<c;I++)for(var O=I*c+R,M=0;M<c;M++){var L=I*c+M,D=R*c+M;p[O]+p[D]<p[L]&&(p[L]=p[O]+p[D],v[L]=v[O])}var N=function(e){return h(function(e){return(y(e)?t.filter(e):e)[0]}(e))};return{distance:function(e,t){var n=N(e),i=N(t);return p[n*c+i]},path:function(e,n){var i=N(e),o=N(n),r=d(i);if(i===o)return r.collection();if(null==v[i*c+o])return t.collection();var s,a=t.collection(),l=i;for(a.merge(r);i!==o;)l=i,i=v[i*c+o],s=_[l*c+i],a.merge(s),a.merge(d(i));return a}}}},Ne=ve({weight:function(e){return 1},directed:!1,root:null}),Pe={bellmanFord:function(e){var t=this,n=Ne(e),i=n.weight,o=n.directed,r=n.root,s=i,a=this,l=this.cy(),c=this.byGroup(),u=c.edges,h=c.nodes,d=h.length,p=new Ee,f=!1;r=l.collection(r)[0],u.unmergeBy((function(e){return e.isLoop()}));for(var g=u.length,m=function(e){var t=p.get(e.id());return t||(t={},p.set(e.id(),t)),t},v=function(e){return(y(e)?l.$(e):e)[0]},_=0;_<d;_++){var b=h[_],T=m(b);b.same(r)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var E=!1,w=function(e,t,n,i,o,r){var s=i.dist+r;s<o.dist&&!n.same(i.edge)&&(o.dist=s,o.pred=e,o.edge=n,E=!0)},k=1;k<d;k++){E=!1;for(var S=0;S<g;S++){var C=u[S],x=C.source(),A=C.target(),R=s(C),I=m(x),O=m(A);w(x,0,C,I,O,R),o||w(A,0,C,O,I,R)}if(!E)break}if(E)for(var M=0;M<g;M++){var L=u[M],D=L.source(),N=L.target(),P=s(L),B=m(D).dist,F=m(N).dist;if(B+P<F||!o&&F+P<B){de("Graph contains a negative weight cycle for Bellman-Ford"),f=!0;break}}return{distanceTo:function(e){return m(v(e)).dist},pathTo:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,i=v(e),o=[],s=i;;){if(null==s)return t.spawn();var l=m(s),c=l.edge,u=l.pred;if(o.unshift(s[0]),s.same(n)&&o.length>0)break;null!=c&&o.unshift(c),s=u}return a.spawn(o)},hasNegativeWeightCycle:f,negativeWeightCycles:[]}}},Be=Math.sqrt(2),Fe=function(e,t,n){0===n.length&&ue("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],o=i[1],r=i[2],s=t[o],a=t[r],l=n,c=l.length-1;c>=0;c--){var u=l[c],h=u[1],d=u[2];(t[h]===s&&t[d]===a||t[h]===a&&t[d]===s)&&l.splice(c,1)}for(var p=0;p<l.length;p++){var f=l[p];f[1]===a?(l[p]=f.slice(),l[p][1]=s):f[2]===a&&(l[p]=f.slice(),l[p][2]=s)}for(var g=0;g<t.length;g++)t[g]===a&&(t[g]=s);return l},We=function(e,t,n,i){for(;n>i;){var o=Math.floor(Math.random()*t.length);t=Fe(o,e,t),n--}return t},He={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy((function(e){return e.isLoop()}));var o=n.length,r=i.length,s=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),a=Math.floor(o/Be);if(!(o<2)){for(var l=[],c=0;c<r;c++){var u=i[c];l.push([c,n.indexOf(u.source()),n.indexOf(u.target())])}for(var h=1/0,d=[],p=new Array(o),f=new Array(o),g=new Array(o),m=function(e,t){for(var n=0;n<o;n++)t[n]=e[n]},v=0;v<=s;v++){for(var _=0;_<o;_++)f[_]=_;var y=We(f,l.slice(),o,a),b=y.slice();m(f,g);var T=We(f,y,a,2),E=We(g,b,a,2);T.length<=E.length&&T.length<h?(h=T.length,d=T,m(f,p)):E.length<=T.length&&E.length<h&&(h=E.length,d=E,m(g,p))}for(var w=this.spawn(d.map((function(e){return i[e[0]]}))),k=this.spawn(),S=this.spawn(),C=p[0],x=0;x<p.length;x++){var A=p[x],R=n[x];A===C?k.merge(R):S.merge(R)}var I=function(t){var n=e.spawn();return t.forEach((function(t){n.merge(t),t.connectedEdges().forEach((function(t){e.contains(t)&&!w.contains(t)&&n.merge(t)}))})),n},O=[I(k),I(S)];return{cut:w,components:O,partition1:k,partition2:S}}ue("At least 2 nodes are required for Karger-Stein algorithm")}},Ue=function(e){return{x:e.x,y:e.y}},$e=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},Ve=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},Ge=function(e){return{x:e[0],y:e[1]}},ze=function(e,t){return Math.atan2(t,e)-Math.PI/2},Xe=Math.log2||function(e){return Math.log(e)/Math.log(2)},je=function(e){return e>0?1:e<0?-1:0},Ke=function(e,t){return Math.sqrt(Ye(e,t))},Ye=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},qe=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var o=0;o<t;o++)e[o]=e[o]/n;return e},Je=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},Ze=function(e,t,n,i){return{x:Je(e.x,t.x,n.x,i),y:Je(e.y,t.y,n.y,i)}},Qe=function(e,t,n){return Math.max(e,Math.min(n,t))},et=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},tt=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},it=function(e){var t,n,i,o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===r.length)t=n=i=o=r[0];else if(2===r.length)t=i=r[0],o=n=r[1];else if(4===r.length){var s=h(r,4);t=s[0],n=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=n,e.y1-=t,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ot=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},rt=function(e,t){e.x1+=t.x,e.x2+=t.x,e.y1+=t.y,e.y2+=t.y},st=function(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},at=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},lt=function(e,t){return at(e,t.x1,t.y1)&&at(e,t.x2,t.y2)},ct=function(e,t,n,i,o,r,s){var a,l=xt(o,r),c=o/2,u=r/2,h=i-u-s;if((a=Tt(e,t,n,i,n-c+l-s,h,n+c-l+s,h,!1)).length>0)return a;var d=n+c+s;if((a=Tt(e,t,n,i,d,i-u+l-s,d,i+u-l+s,!1)).length>0)return a;var p=i+u+s;if((a=Tt(e,t,n,i,n-c+l-s,p,n+c-l+s,p,!1)).length>0)return a;var f,g=n-c-s;if((a=Tt(e,t,n,i,g,i-u+l-s,g,i+u-l+s,!1)).length>0)return a;var m=n-c+l,v=i-u+l;if((f=yt(e,t,n,i,m,v,l+s)).length>0&&f[0]<=m&&f[1]<=v)return[f[0],f[1]];var _=n+c-l,y=i-u+l;if((f=yt(e,t,n,i,_,y,l+s)).length>0&&f[0]>=_&&f[1]<=y)return[f[0],f[1]];var b=n+c-l,T=i+u-l;if((f=yt(e,t,n,i,b,T,l+s)).length>0&&f[0]>=b&&f[1]>=T)return[f[0],f[1]];var E=n-c+l,w=i+u-l;return(f=yt(e,t,n,i,E,w,l+s)).length>0&&f[0]<=E&&f[1]>=w?[f[0],f[1]]:[]},ut=function(e,t,n,i,o,r,s){var a=s,l=Math.min(n,o),c=Math.max(n,o),u=Math.min(i,r),h=Math.max(i,r);return l-a<=e&&e<=c+a&&u-a<=t&&t<=h+a},ht=function(e,t,n,i,o,r,s,a,l){var c=Math.min(n,s,o)-l,u=Math.max(n,s,o)+l,h=Math.min(i,a,r)-l,d=Math.max(i,a,r)+l;return!(e<c||e>u||t<h||t>d)},dt=function(e,t,n,i,o,r,s,a){var l=[];!function(e,t,n,i,o){var r,s,a,l,c,u,h,d;0===e&&(e=1e-5),a=-27*(i/=e)+(t/=e)*(9*(n/=e)-t*t*2),r=(s=(3*n-t*t)/9)*s*s+(a/=54)*a,o[1]=0,h=t/3,r>0?(c=(c=a+Math.sqrt(r))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),u=(u=a-Math.sqrt(r))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),o[0]=-h+c+u,h+=(c+u)/2,o[4]=o[2]=-h,h=Math.sqrt(3)*(-u+c)/2,o[3]=h,o[5]=-h):(o[5]=o[3]=0,0===r?(d=a<0?-Math.pow(-a,1/3):Math.pow(a,1/3),o[0]=2*d-h,o[4]=o[2]=-(d+h)):(l=(s=-s)*s*s,l=Math.acos(a/Math.sqrt(l)),d=2*Math.sqrt(s),o[0]=-h+d*Math.cos(l/3),o[2]=-h+d*Math.cos((l+2*Math.PI)/3),o[4]=-h+d*Math.cos((l+4*Math.PI)/3)))}(1*n*n-4*n*o+2*n*s+4*o*o-4*o*s+s*s+i*i-4*i*r+2*i*a+4*r*r-4*r*a+a*a,9*n*o-3*n*n-3*n*s-6*o*o+3*o*s+9*i*r-3*i*i-3*i*a-6*r*r+3*r*a,3*n*n-6*n*o+n*s-n*e+2*o*o+2*o*e-s*e+3*i*i-6*i*r+i*a-i*t+2*r*r+2*r*t-a*t,1*n*o-n*n+n*e-o*e+i*r-i*i+i*t-r*t,l);for(var c=[],u=0;u<6;u+=2)Math.abs(l[u+1])<1e-7&&l[u]>=0&&l[u]<=1&&c.push(l[u]);c.push(1),c.push(0);for(var h,d,p,f=-1,g=0;g<c.length;g++)h=Math.pow(1-c[g],2)*n+2*(1-c[g])*c[g]*o+c[g]*c[g]*s,d=Math.pow(1-c[g],2)*i+2*(1-c[g])*c[g]*r+c[g]*c[g]*a,p=Math.pow(h-e,2)+Math.pow(d-t,2),f>=0?p<f&&(f=p):f=p;return f},pt=function(e,t,n,i,o,r){var s=[e-n,t-i],a=[o-n,r-i],l=a[0]*a[0]+a[1]*a[1],c=s[0]*s[0]+s[1]*s[1],u=s[0]*a[0]+s[1]*a[1],h=u*u/l;return u<0?c:h>l?(e-o)*(e-o)+(t-r)*(t-r):c-h},ft=function(e,t,n){for(var i,o,r,s,a=0,l=0;l<n.length/2;l++)if(i=n[2*l],o=n[2*l+1],l+1<n.length/2?(r=n[2*(l+1)],s=n[2*(l+1)+1]):(r=n[2*(l+1-n.length/2)],s=n[2*(l+1-n.length/2)+1]),i==e&&r==e);else{if(!(i>=e&&e>=r||i<=e&&e<=r))continue;(e-i)/(r-i)*(s-o)+o>t&&a++}return a%2!=0},gt=function(e,t,n,i,o,r,s,a,l){var c,u=new Array(n.length);null!=a[0]?(c=Math.atan(a[1]/a[0]),a[0]<0?c+=Math.PI/2:c=-c-Math.PI/2):c=a;for(var h,d=Math.cos(-c),p=Math.sin(-c),f=0;f<u.length/2;f++)u[2*f]=r/2*(n[2*f]*d-n[2*f+1]*p),u[2*f+1]=s/2*(n[2*f+1]*d+n[2*f]*p),u[2*f]+=i,u[2*f+1]+=o;if(l>0){var g=vt(u,-l);h=mt(g)}else h=u;return ft(e,t,h)},mt=function(e){for(var t,n,i,o,r,s,a,l,c=new Array(e.length/2),u=0;u<e.length/4;u++){t=e[4*u],n=e[4*u+1],i=e[4*u+2],o=e[4*u+3],u<e.length/4-1?(r=e[4*(u+1)],s=e[4*(u+1)+1],a=e[4*(u+1)+2],l=e[4*(u+1)+3]):(r=e[0],s=e[1],a=e[2],l=e[3]);var h=Tt(t,n,i,o,r,s,a,l,!0);c[2*u]=h[0],c[2*u+1]=h[1]}return c},vt=function(e,t){for(var n,i,o,r,s=new Array(2*e.length),a=0;a<e.length/2;a++){n=e[2*a],i=e[2*a+1],a<e.length/2-1?(o=e[2*(a+1)],r=e[2*(a+1)+1]):(o=e[0],r=e[1]);var l=r-i,c=-(o-n),u=Math.sqrt(l*l+c*c),h=l/u,d=c/u;s[4*a]=n+h*t,s[4*a+1]=i+d*t,s[4*a+2]=o+h*t,s[4*a+3]=r+d*t}return s},_t=function(e,t,n,i,o,r,s){return e-=o,t-=r,(e/=n/2+s)*e+(t/=i/2+s)*t<=1},yt=function(e,t,n,i,o,r,s){var a=[n-e,i-t],l=[e-o,t-r],c=a[0]*a[0]+a[1]*a[1],u=2*(l[0]*a[0]+l[1]*a[1]),h=u*u-4*c*(l[0]*l[0]+l[1]*l[1]-s*s);if(h<0)return[];var d=(-u+Math.sqrt(h))/(2*c),p=(-u-Math.sqrt(h))/(2*c),f=Math.min(d,p),g=Math.max(d,p),m=[];if(f>=0&&f<=1&&m.push(f),g>=0&&g<=1&&m.push(g),0===m.length)return[];var v=m[0]*a[0]+e,_=m[0]*a[1]+t;return m.length>1?m[0]==m[1]?[v,_]:[v,_,m[1]*a[0]+e,m[1]*a[1]+t]:[v,_]},bt=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},Tt=function(e,t,n,i,o,r,s,a,l){var c=e-o,u=n-e,h=s-o,d=t-r,p=i-t,f=a-r,g=h*d-f*c,m=u*d-p*c,v=f*u-h*p;if(0!==v){var _=g/v,y=m/v;return-.001<=_&&_<=1.001&&-.001<=y&&y<=1.001?[e+_*u,t+_*p]:l?[e+_*u,t+_*p]:[]}return 0===g||0===m?bt(e,n,s)===s?[s,a]:bt(e,n,o)===o?[o,r]:bt(o,s,n)===n?[n,i]:[]:[]},Et=function(e,t,n,i,o,r,s,a){var l,c,u,h,d,p,f=[],g=new Array(n.length),m=!0;if(null==r&&(m=!1),m){for(var v=0;v<g.length/2;v++)g[2*v]=n[2*v]*r+i,g[2*v+1]=n[2*v+1]*s+o;if(a>0){var _=vt(g,-a);c=mt(_)}else c=g}else c=n;for(var y=0;y<c.length/2;y++)u=c[2*y],h=c[2*y+1],y<c.length/2-1?(d=c[2*(y+1)],p=c[2*(y+1)+1]):(d=c[0],p=c[1]),0!==(l=Tt(e,t,i,o,u,h,d,p)).length&&f.push(l[0],l[1]);return f},wt=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),r=(o-n)/o;return r<0&&(r=1e-5),[t[0]+r*i[0],t[1]+r*i[1]]},kt=function(e,t){var n=Ct(e,t);return n=St(n)},St=function(e){for(var t,n,i=e.length/2,o=1/0,r=1/0,s=-1/0,a=-1/0,l=0;l<i;l++)t=e[2*l],n=e[2*l+1],o=Math.min(o,t),s=Math.max(s,t),r=Math.min(r,n),a=Math.max(a,n);for(var c=2/(s-o),u=2/(a-r),h=0;h<i;h++)t=e[2*h]=e[2*h]*c,n=e[2*h+1]=e[2*h+1]*u,o=Math.min(o,t),s=Math.max(s,t),r=Math.min(r,n),a=Math.max(a,n);if(r<-1)for(var d=0;d<i;d++)n=e[2*d+1]=e[2*d+1]+(-1-r);return e},Ct=function(e,t){var n=1/e*2*Math.PI,i=e%2==0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var o,r=new Array(2*e),s=0;s<e;s++)o=s*n+i,r[2*s]=Math.cos(o),r[2*s+1]=Math.sin(-o);return r},xt=function(e,t){return Math.min(e/4,t/4,8)},At=function(e,t){return Math.min(e/10,t/10,8)},Rt=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},It=ve({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Ot={pageRank:function(e){for(var t=It(e),n=t.dampingFactor,i=t.precision,o=t.iterations,r=t.weight,s=this._private.cy,a=this.byGroup(),l=a.nodes,c=a.edges,u=l.length,h=u*u,d=c.length,p=new Array(h),f=new Array(u),g=(1-n)/u,m=0;m<u;m++){for(var v=0;v<u;v++){p[m*u+v]=0}f[m]=0}for(var _=0;_<d;_++){var y=c[_],b=y.data("source"),T=y.data("target");if(b!==T){var E=l.indexOfId(b),w=l.indexOfId(T),k=r(y);p[w*u+E]+=k,f[E]+=k}}for(var S=1/u+g,C=0;C<u;C++)if(0===f[C])for(var x=0;x<u;x++){p[x*u+C]=S}else for(var A=0;A<u;A++){var R=A*u+C;p[R]=p[R]/f[C]+g}for(var I,O=new Array(u),M=new Array(u),L=0;L<u;L++)O[L]=1;for(var D=0;D<o;D++){for(var N=0;N<u;N++)M[N]=0;for(var P=0;P<u;P++)for(var B=0;B<u;B++){var F=P*u+B;M[P]+=p[F]*O[B]}qe(M),I=O,O=M,M=I;for(var W=0,H=0;H<u;H++){var U=I[H]-O[H];W+=U*U}if(W<i)break}return{rank:function(e){return e=s.collection(e)[0],O[l.indexOf(e)]}}}},Mt=ve({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Lt={degreeCentralityNormalized:function(e){e=Mt(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var o={},r={},s=0,a=0,l=0;l<i;l++){var c=n[l],u=c.id();e.root=c;var h=this.degreeCentrality(e);s<h.indegree&&(s=h.indegree),a<h.outdegree&&(a=h.outdegree),o[u]=h.indegree,r[u]=h.outdegree}return{indegree:function(e){return 0==s?0:(y(e)&&(e=t.filter(e)),o[e.id()]/s)},outdegree:function(e){return 0===a?0:(y(e)&&(e=t.filter(e)),r[e.id()]/a)}}}for(var d={},p=0,f=0;f<i;f++){var g=n[f];e.root=g;var m=this.degreeCentrality(e);p<m.degree&&(p=m.degree),d[g.id()]=m.degree}return{degree:function(e){return 0===p?0:(y(e)&&(e=t.filter(e)),d[e.id()]/p)}}},degreeCentrality:function(e){e=Mt(e);var t=this.cy(),n=this,i=e,o=i.root,r=i.weight,s=i.directed,a=i.alpha;if(o=t.collection(o)[0],s){for(var l=o.connectedEdges(),c=l.filter((function(e){return e.target().same(o)&&n.has(e)})),u=l.filter((function(e){return e.source().same(o)&&n.has(e)})),h=c.length,d=u.length,p=0,f=0,g=0;g<c.length;g++)p+=r(c[g]);for(var m=0;m<u.length;m++)f+=r(u[m]);return{indegree:Math.pow(h,1-a)*Math.pow(p,a),outdegree:Math.pow(d,1-a)*Math.pow(f,a)}}for(var v=o.connectedEdges().intersection(n),_=v.length,y=0,b=0;b<v.length;b++)y+=r(v[b]);return{degree:Math.pow(_,1-a)*Math.pow(y,a)}}};Lt.dc=Lt.degreeCentrality,Lt.dcn=Lt.degreeCentralityNormalised=Lt.degreeCentralityNormalized;var Dt=ve({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Nt={closenessCentralityNormalized:function(e){for(var t=Dt(e),n=t.harmonic,i=t.weight,o=t.directed,r=this.cy(),s={},a=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:o}),u=0;u<l.length;u++){for(var h=0,d=l[u],p=0;p<l.length;p++)if(u!==p){var f=c.distance(d,l[p]);h+=n?1/f:f}n||(h=1/h),a<h&&(a=h),s[d.id()]=h}return{closeness:function(e){return 0==a?0:(e=y(e)?r.filter(e)[0].id():e.id(),s[e]/a)}}},closenessCentrality:function(e){var t=Dt(e),n=t.root,i=t.weight,o=t.directed,r=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:o}),a=0,l=this.nodes(),c=0;c<l.length;c++){var u=l[c];if(!u.same(n)){var h=s.distanceTo(u);a+=r?1/h:h}}return r?a:1/a}};Nt.cc=Nt.closenessCentrality,Nt.ccn=Nt.closenessCentralityNormalised=Nt.closenessCentralityNormalized;var Pt=ve({weight:null,directed:!1}),Bt={betweennessCentrality:function(e){for(var t=Pt(e),n=t.directed,i=t.weight,o=null!=i,s=this.cy(),a=this.nodes(),l={},c={},u=0,h=function(e,t){c[e]=t,t>u&&(u=t)},d=function(e){return c[e]},p=0;p<a.length;p++){var f=a[p],g=f.id();l[g]=n?f.outgoers().nodes():f.openNeighborhood().nodes(),h(g,0)}for(var m=function(e){for(var t=a[e].id(),n=[],c={},u={},p={},f=new r((function(e,t){return p[e]-p[t]})),g=0;g<a.length;g++){var m=a[g].id();c[m]=[],u[m]=0,p[m]=1/0}for(u[t]=1,p[t]=0,f.push(t);!f.empty();){var v=f.pop();if(n.push(v),o)for(var _=0;_<l[v].length;_++){var y=l[v][_],b=s.getElementById(v),T=void 0;T=b.edgesTo(y).length>0?b.edgesTo(y)[0]:y.edgesTo(b)[0];var E=i(T);y=y.id(),p[y]>p[v]+E&&(p[y]=p[v]+E,f.nodes.indexOf(y)<0?f.push(y):f.updateItem(y),u[y]=0,c[y]=[]),p[y]==p[v]+E&&(u[y]=u[y]+u[v],c[y].push(v))}else for(var w=0;w<l[v].length;w++){var k=l[v][w].id();p[k]==1/0&&(f.push(k),p[k]=p[v]+1),p[k]==p[v]+1&&(u[k]=u[k]+u[v],c[k].push(v))}}for(var S={},C=0;C<a.length;C++)S[a[C].id()]=0;for(;n.length>0;)for(var x=n.pop(),A=0;A<c[x].length;A++){var R=c[x][A];S[R]=S[R]+u[R]/u[x]*(1+S[x]),x!=a[e].id()&&h(x,d(x)+S[x])}},v=0;v<a.length;v++)m(v);var _={betweenness:function(e){var t=s.collection(e).id();return d(t)},betweennessNormalized:function(e){if(0==u)return 0;var t=s.collection(e).id();return d(t)/u}};return _.betweennessNormalised=_.betweennessNormalized,_}};Bt.bc=Bt.betweennessCentrality;var Ft=ve({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),Wt=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},Ht=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var o=0;o<t;o++)n+=e[o*t+i];for(var r=0;r<t;r++)e[r*t+i]=e[r*t+i]/n}},Ut=function(e,t,n){for(var i=new Array(n*n),o=0;o<n;o++){for(var r=0;r<n;r++)i[o*n+r]=0;for(var s=0;s<n;s++)for(var a=0;a<n;a++)i[o*n+a]+=e[o*n+s]*t[s*n+a]}return i},$t=function(e,t,n){for(var i=e.slice(0),o=1;o<n;o++)e=Ut(e,i,t);return e},Vt=function(e,t,n){for(var i=new Array(t*t),o=0;o<t*t;o++)i[o]=Math.pow(e[o],n);return Ht(i,t),i},Gt=function(e,t,n,i){for(var o=0;o<n;o++){if(Math.round(e[o]*Math.pow(10,i))/Math.pow(10,i)!==Math.round(t[o]*Math.pow(10,i))/Math.pow(10,i))return!1}return!0},zt=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},Xt=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),o=function(e){return Ft(e)}(e),r={},s=0;s<t.length;s++)r[t[s].id()]=s;for(var a,l=t.length,c=l*l,u=new Array(c),h=0;h<c;h++)u[h]=0;for(var d=0;d<n.length;d++){var p=n[d],f=r[p.source().id()],g=r[p.target().id()],m=Wt(p,o.attributes);u[f*l+g]+=m,u[g*l+f]+=m}!function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n}(u,l,o.multFactor),Ht(u,l);for(var v=!0,_=0;v&&_<o.maxIterations;)v=!1,a=$t(u,l,o.expandFactor),u=Vt(a,l,o.inflateFactor),Gt(u,a,c,4)||(v=!0),_++;var y=function(e,t,n,i){for(var o=[],r=0;r<t;r++){for(var s=[],a=0;a<t;a++)Math.round(1e3*e[r*t+a])/1e3>0&&s.push(n[a]);0!==s.length&&o.push(i.collection(s))}return o}(u,l,t,i);return y=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&zt(e[t],e[n])&&e.splice(n,1);return e}(y)},jt={markovClustering:Xt,mcl:Xt},Kt=function(e){return e},Yt=function(e,t){return Math.abs(t-e)},qt=function(e,t,n){return e+Yt(t,n)},Jt=function(e,t,n){return e+Math.pow(n-t,2)},Zt=function(e){return Math.sqrt(e)},Qt=function(e,t,n){return Math.max(e,Yt(t,n))},en=function(e,t,n,i,o){for(var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Kt,s=i,a=0;a<e;a++)s=o(s,t(a),n(a));return r(s)},tn={euclidean:function(e,t,n){return e>=2?en(e,t,n,0,Jt,Zt):en(e,t,n,0,qt)},squaredEuclidean:function(e,t,n){return en(e,t,n,0,Jt)},manhattan:function(e,t,n){return en(e,t,n,0,qt)},max:function(e,t,n){return en(e,t,n,-1/0,Qt)}};function nn(e,t,n,i,o,r){var s;return s=b(e)?e:tn[e]||tn.euclidean,0===t&&b(e)?s(o,r):s(t,n,i,o,r)}tn["squared-euclidean"]=tn.squaredEuclidean,tn.squaredeuclidean=tn.squaredEuclidean;var on=ve({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),rn=function(e){return on(e)},sn=function(e,t,n,i,o){var r="kMedoids"!==o?function(e){return n[e]}:function(e){return i[e](n)},s=n,a=t;return nn(e,i.length,r,(function(e){return i[e](t)}),s,a)},an=function(e,t,n){for(var i=n.length,o=new Array(i),r=new Array(i),s=new Array(t),a=null,l=0;l<i;l++)o[l]=e.min(n[l]).value,r[l]=e.max(n[l]).value;for(var c=0;c<t;c++){a=[];for(var u=0;u<i;u++)a[u]=Math.random()*(r[u]-o[u])+o[u];s[c]=a}return s},ln=function(e,t,n,i,o){for(var r=1/0,s=0,a=0;a<t.length;a++){var l=sn(n,e,t[a],i,o);l<r&&(r=l,s=a)}return s},cn=function(e,t,n){for(var i=[],o=null,r=0;r<t.length;r++)n[(o=t[r]).id()]===e&&i.push(o);return i},un=function(e,t,n){for(var i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++){if(Math.abs(e[i][o]-t[i][o])>n)return!1}return!0},hn=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},dn=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var o=e[Math.floor(Math.random()*e.length)];hn(o,n,i);)o=e[Math.floor(Math.random()*e.length)];n[i]=o}else for(var r=0;r<t;r++)n[r]=e[Math.floor(Math.random()*e.length)];return n},pn=function(e,t,n){for(var i=0,o=0;o<t.length;o++)i+=sn("manhattan",t[o],e,n,"kMedoids");return i},fn=function(e,t,n,i,o){for(var r,s,a=0;a<t.length;a++)for(var l=0;l<e.length;l++)i[a][l]=Math.pow(n[a][l],o.m);for(var c=0;c<e.length;c++)for(var u=0;u<o.attributes.length;u++){r=0,s=0;for(var h=0;h<t.length;h++)r+=i[h][c]*o.attributes[u](t[h]),s+=i[h][c];e[c][u]=r/s}},gn=function(e,t,n,i,o){for(var r=0;r<e.length;r++)t[r]=e[r].slice();for(var s,a,l,c=2/(o.m-1),u=0;u<n.length;u++)for(var h=0;h<i.length;h++){s=0;for(var d=0;d<n.length;d++)a=sn(o.distance,i[h],n[u],o.attributes,"cmeans"),l=sn(o.distance,i[h],n[d],o.attributes,"cmeans"),s+=Math.pow(a/l,c);e[h][u]=1/s}},mn=function(e){var t,n,i,o,r=this.cy(),s=this.nodes(),a=rn(e);i=new Array(s.length);for(var l=0;l<s.length;l++)i[l]=new Array(a.k);n=new Array(s.length);for(var c=0;c<s.length;c++)n[c]=new Array(a.k);for(var u=0;u<s.length;u++){for(var h=0,d=0;d<a.k;d++)n[u][d]=Math.random(),h+=n[u][d];for(var p=0;p<a.k;p++)n[u][p]=n[u][p]/h}t=new Array(a.k);for(var f=0;f<a.k;f++)t[f]=new Array(a.attributes.length);o=new Array(s.length);for(var g=0;g<s.length;g++)o[g]=new Array(a.k);for(var m=!0,v=0;m&&v<a.maxIterations;)m=!1,fn(t,s,n,o,a),gn(n,i,t,s,a),un(n,i,a.sensitivityThreshold)||(m=!0),v++;return{clusters:function(e,t,n,i){for(var o,r,s=new Array(n.k),a=0;a<s.length;a++)s[a]=[];for(var l=0;l<t.length;l++){o=-1/0,r=-1;for(var c=0;c<t[0].length;c++)t[l][c]>o&&(o=t[l][c],r=c);s[r].push(e[l])}for(var u=0;u<s.length;u++)s[u]=i.collection(s[u]);return s}(s,n,a,r),degreeOfMembership:n}},vn={kMeans:function(e){var t,n=this.cy(),i=this.nodes(),o=null,r=rn(e),a=new Array(r.k),l={};t=r.testMode?"number"==typeof r.testCentroids?an(i,r.k,r.attributes):"object"===s(r.testCentroids)?r.testCentroids:an(i,r.k,r.attributes):an(i,r.k,r.attributes);for(var c,u,h,d=!0,p=0;d&&p<r.maxIterations;){for(var f=0;f<i.length;f++)l[(o=i[f]).id()]=ln(o,t,r.distance,r.attributes,"kMeans");d=!1;for(var g=0;g<r.k;g++){var m=cn(g,i,l);if(0!==m.length){for(var v=r.attributes.length,_=t[g],y=new Array(v),b=new Array(v),T=0;T<v;T++){b[T]=0;for(var E=0;E<m.length;E++)o=m[E],b[T]+=r.attributes[T](o);y[T]=b[T]/m.length,c=y[T],u=_[T],h=r.sensitivityThreshold,Math.abs(u-c)<=h||(d=!0)}t[g]=y,a[g]=n.collection(m)}}p++}return a},kMedoids:function(e){var t,n,i=this.cy(),o=this.nodes(),r=null,a=rn(e),l=new Array(a.k),c={},u=new Array(a.k);a.testMode?"number"==typeof a.testCentroids||(t="object"===s(a.testCentroids)?a.testCentroids:dn(o,a.k)):t=dn(o,a.k);for(var h=!0,d=0;h&&d<a.maxIterations;){for(var p=0;p<o.length;p++)c[(r=o[p]).id()]=ln(r,t,a.distance,a.attributes,"kMedoids");h=!1;for(var f=0;f<t.length;f++){var g=cn(f,o,c);if(0!==g.length){u[f]=pn(t[f],g,a.attributes);for(var m=0;m<g.length;m++)(n=pn(g[m],g,a.attributes))<u[f]&&(u[f]=n,t[f]=g[m],h=!0);l[f]=i.collection(g)}}d++}return l},fuzzyCMeans:mn,fcm:mn},_n=ve({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),yn={single:"min",complete:"max"},bn=function(e,t,n,i,o){for(var r,s=0,a=1/0,l=o.attributes,c=function(e,t){return nn(o.distance,l.length,(function(t){return l[t](e)}),(function(e){return l[e](t)}),e,t)},u=0;u<e.length;u++){var h=e[u].key,d=n[h][i[h]];d<a&&(s=h,a=d)}if("threshold"===o.mode&&a>=o.threshold||"dendrogram"===o.mode&&1===e.length)return!1;var p,f=t[s],g=t[i[s]];p="dendrogram"===o.mode?{left:f,right:g,key:f.key}:{value:f.value.concat(g.value),key:f.key},e[f.index]=p,e.splice(g.index,1),t[f.key]=p;for(var m=0;m<e.length;m++){var v=e[m];f.key===v.key?r=1/0:"min"===o.linkage?(r=n[f.key][v.key],n[f.key][v.key]>n[g.key][v.key]&&(r=n[g.key][v.key])):"max"===o.linkage?(r=n[f.key][v.key],n[f.key][v.key]<n[g.key][v.key]&&(r=n[g.key][v.key])):r="mean"===o.linkage?(n[f.key][v.key]*f.size+n[g.key][v.key]*g.size)/(f.size+g.size):"dendrogram"===o.mode?c(v.value,f.value):c(v.value[0],f.value[0]),n[f.key][v.key]=n[v.key][f.key]=r}for(var _=0;_<e.length;_++){var y=e[_].key;if(i[y]===f.key||i[y]===g.key){for(var b=y,T=0;T<e.length;T++){var E=e[T].key;n[y][E]<n[y][b]&&(b=E)}i[y]=b}e[_].index=_}return f.key=g.key=f.index=g.index=null,!0},Tn=function e(t,n,i){t&&(t.value?n.push(t.value):(t.left&&e(t.left,n),t.right&&e(t.right,n)))},En=function(e){for(var t=this.cy(),n=this.nodes(),i=function(e){var t=_n(e),n=yn[t.linkage];return null!=n&&(t.linkage=n),t}(e),o=i.attributes,r=function(e,t){return nn(i.distance,o.length,(function(t){return o[t](e)}),(function(e){return o[e](t)}),e,t)},s=[],a=[],l=[],c=[],u=0;u<n.length;u++){var h={value:"dendrogram"===i.mode?n[u]:[n[u]],key:u,index:u};s[u]=h,c[u]=h,a[u]=[],l[u]=0}for(var d=0;d<s.length;d++)for(var p=0;p<=d;p++){var f=void 0;f="dendrogram"===i.mode?d===p?1/0:r(s[d].value,s[p].value):d===p?1/0:r(s[d].value[0],s[p].value[0]),a[d][p]=f,a[p][d]=f,f<a[d][l[d]]&&(l[d]=p)}for(var g,m=bn(s,c,a,l,i);m;)m=bn(s,c,a,l,i);return"dendrogram"===i.mode?(g=function e(t,n,i){if(!t)return[];var o=[],r=[],s=[];return 0===n?(t.left&&Tn(t.left,o),t.right&&Tn(t.right,r),s=o.concat(r),[i.collection(s)]):1===n?t.value?[i.collection(t.value)]:(t.left&&Tn(t.left,o),t.right&&Tn(t.right,r),[i.collection(o),i.collection(r)]):t.value?[i.collection(t.value)]:(t.left&&(o=e(t.left,n-1,i)),t.right&&(r=e(t.right,n-1,i)),o.concat(r))}(s[0],i.dendrogramDepth,t),i.addDendrogram&&function e(t,n){if(!t)return"";if(t.left&&t.right){var i=e(t.left,n),o=e(t.right,n),r=n.add({group:"nodes",data:{id:i+","+o}});return n.add({group:"edges",data:{source:i,target:r.id()}}),n.add({group:"edges",data:{source:o,target:r.id()}}),r.id()}return t.value?t.value.id():void 0}(s[0],t)):(g=new Array(s.length),s.forEach((function(e,n){e.key=e.index=null,g[n]=t.collection(e.value)}))),g},wn={hierarchicalClustering:En,hca:En},kn=ve({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Sn=function(e,t,n,i){var o=function(e,t){return i[t](e)};return-nn(e,i.length,(function(e){return o(t,e)}),(function(e){return o(n,e)}),t,n)},Cn=function(e,t){return"median"===t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,a=e.length-1;a>=0;a--){var l=e[a];r?isFinite(l)||(e[a]=-1/0,s++):e.splice(a,1)}o&&e.sort((function(e,t){return e-t}));var c=e.length,u=Math.floor(c/2);return c%2!=0?e[u+1+s]:(e[u-1+s]+e[u+s])/2}(e):"mean"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=0,o=0,r=t;r<n;r++){var s=e[r];isFinite(s)&&(i+=s,o++)}return i/o}(e):"min"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=1/0,o=t;o<n;o++){var r=e[o];isFinite(r)&&(i=Math.min(r,i))}return i}(e):"max"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=-1/0,o=t;o<n;o++){var r=e[o];isFinite(r)&&(i=Math.max(r,i))}return i}(e):t},xn=function(e,t,n){for(var i=[],o=0;o<e;o++){for(var r=-1,s=-1/0,a=0;a<n.length;a++){var l=n[a];t[o*e+l]>s&&(r=l,s=t[o*e+l])}r>0&&i.push(r)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},An=function(e){for(var t,n,i,o,r,s,a=this.cy(),l=this.nodes(),c=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||ue("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some((function(e){return e===n}))||w(n)||ue("Preference must be one of [".concat(i.map((function(e){return"'".concat(e,"'")})).join(", "),"] or a number.  Got: ").concat(n)),kn(e)}(e),u={},h=0;h<l.length;h++)u[l[h].id()]=h;n=(t=l.length)*t,i=new Array(n);for(var d=0;d<n;d++)i[d]=-1/0;for(var p=0;p<t;p++)for(var f=0;f<t;f++)p!==f&&(i[p*t+f]=Sn(c.distance,l[p],l[f],c.attributes));o=Cn(i,c.preference);for(var g=0;g<t;g++)i[g*t+g]=o;r=new Array(n);for(var m=0;m<n;m++)r[m]=0;s=new Array(n);for(var v=0;v<n;v++)s[v]=0;for(var _=new Array(t),y=new Array(t),b=new Array(t),T=0;T<t;T++)_[T]=0,y[T]=0,b[T]=0;for(var E,k=new Array(t*c.minIterations),S=0;S<k.length;S++)k[S]=0;for(E=0;E<c.maxIterations;E++){for(var C=0;C<t;C++){for(var x=-1/0,A=-1/0,R=-1,I=0,O=0;O<t;O++)_[O]=r[C*t+O],(I=s[C*t+O]+i[C*t+O])>=x?(A=x,x=I,R=O):I>A&&(A=I);for(var M=0;M<t;M++)r[C*t+M]=(1-c.damping)*(i[C*t+M]-x)+c.damping*_[M];r[C*t+R]=(1-c.damping)*(i[C*t+R]-A)+c.damping*_[R]}for(var L=0;L<t;L++){for(var D=0,N=0;N<t;N++)_[N]=s[N*t+L],y[N]=Math.max(0,r[N*t+L]),D+=y[N];D-=y[L],y[L]=r[L*t+L],D+=y[L];for(var P=0;P<t;P++)s[P*t+L]=(1-c.damping)*Math.min(0,D-y[P])+c.damping*_[P];s[L*t+L]=(1-c.damping)*(D-y[L])+c.damping*_[L]}for(var B=0,F=0;F<t;F++){var W=s[F*t+F]+r[F*t+F]>0?1:0;k[E%c.minIterations*t+F]=W,B+=W}if(B>0&&(E>=c.minIterations-1||E==c.maxIterations-1)){for(var H=0,U=0;U<t;U++){b[U]=0;for(var $=0;$<c.minIterations;$++)b[U]+=k[$*t+U];0!==b[U]&&b[U]!==c.minIterations||H++}if(H===t)break}}for(var V=function(e,t,n){for(var i=[],o=0;o<e;o++)t[o*e+o]+n[o*e+o]>0&&i.push(o);return i}(t,r,s),G=function(e,t,n){for(var i=xn(e,t,n),o=0;o<n.length;o++){for(var r=[],s=0;s<i.length;s++)i[s]===n[o]&&r.push(s);for(var a=-1,l=-1/0,c=0;c<r.length;c++){for(var u=0,h=0;h<r.length;h++)u+=t[r[h]*e+r[c]];u>l&&(a=c,l=u)}n[o]=r[a]}return i=xn(e,t,n)}(t,i,V),z={},X=0;X<V.length;X++)z[V[X]]=[];for(var j=0;j<l.length;j++){var K=G[u[l[j].id()]];null!=K&&z[K].push(l[j])}for(var Y=new Array(V.length),q=0;q<V.length;q++)Y[q]=a.collection(z[V[q]]);return Y},Rn={affinityPropagation:An,ap:An},In=ve({root:void 0,directed:!1}),On=function(){var e=this,t={},n=0,i=0,o=[],r=[],s={},a=function a(l,c,u){l===u&&(i+=1),t[c]={id:n,low:n++,cutVertex:!1};var h,d,p,f,g=e.getElementById(c).connectedEdges().intersection(e);0===g.size()?o.push(e.spawn(e.getElementById(c))):g.forEach((function(n){h=n.source().id(),d=n.target().id(),(p=h===c?d:h)!==u&&(f=n.id(),s[f]||(s[f]=!0,r.push({x:c,y:p,edge:n})),p in t?t[c].low=Math.min(t[c].low,t[p].id):(a(l,p,c),t[c].low=Math.min(t[c].low,t[p].low),t[c].id<=t[p].low&&(t[c].cutVertex=!0,function(n,i){for(var s=r.length-1,a=[],l=e.spawn();r[s].x!=n||r[s].y!=i;)a.push(r.pop().edge),s--;a.push(r.pop().edge),a.forEach((function(n){var i=n.connectedNodes().intersection(e);l.merge(n),i.forEach((function(n){var i=n.id(),o=n.connectedEdges().intersection(e);l.merge(n),t[i].cutVertex?l.merge(o.filter((function(e){return e.isLoop()}))):l.merge(o)}))})),o.push(l)}(c,p))))}))};e.forEach((function(e){if(e.isNode()){var n=e.id();n in t||(i=0,a(n,n),t[n].cutVertex=i>1)}}));var l=Object.keys(t).filter((function(e){return t[e].cutVertex})).map((function(t){return e.getElementById(t)}));return{cut:e.spawn(l),components:o}},Mn=function(){var e=this,t={},n=0,i=[],o=[],r=e.spawn(e);return e.forEach((function(s){if(s.isNode()){var a=s.id();a in t||function s(a){if(o.push(a),t[a]={index:n,low:n++,explored:!1},e.getElementById(a).connectedEdges().intersection(e).forEach((function(e){var n=e.target().id();n!==a&&(n in t||s(n),t[n].explored||(t[a].low=Math.min(t[a].low,t[n].low)))})),t[a].index===t[a].low){for(var l=e.spawn();;){var c=o.pop();if(l.merge(e.getElementById(c)),t[c].low=t[a].index,t[c].explored=!0,c===a)break}var u=l.edgesWith(l),h=l.merge(u);i.push(h),r=r.difference(h)}}(a)}})),{cut:r,components:i}},Ln={};[xe,Re,Ie,Me,De,Pe,He,Ot,Lt,Nt,Bt,jt,vn,wn,Rn,{hierholzer:function(e){if(!E(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n,i,o,r=In(e),s=r.root,a=r.directed,l=this,c=!1;s&&(o=y(s)?this.filter(s)[0].id():s[0].id());var u={},h={};a?l.forEach((function(e){var t=e.id();if(e.isNode()){var o=e.indegree(!0),r=e.outdegree(!0),s=o-r,a=r-o;1==s?n?c=!0:n=t:1==a?i?c=!0:i=t:(a>1||s>1)&&(c=!0),u[t]=[],e.outgoers().forEach((function(e){e.isEdge()&&u[t].push(e.id())}))}else h[t]=[void 0,e.target().id()]})):l.forEach((function(e){var t=e.id();e.isNode()?(e.degree(!0)%2&&(n?i?c=!0:i=t:n=t),u[t]=[],e.connectedEdges().forEach((function(e){return u[t].push(e.id())}))):h[t]=[e.source().id(),e.target().id()]}));var d={found:!1,trail:void 0};if(c)return d;if(i&&n)if(a){if(o&&i!=o)return d;o=i}else{if(o&&i!=o&&n!=o)return d;o||(o=i)}else o||(o=l[0].id());var p=function(e){for(var t,n,i,o=e,r=[e];u[o].length;)t=u[o].shift(),n=h[t][0],o!=(i=h[t][1])?(u[i]=u[i].filter((function(e){return e!=t})),o=i):a||o==n||(u[n]=u[n].filter((function(e){return e!=t})),o=n),r.unshift(t),r.unshift(o);return r},f=[],g=[];for(g=p(o);1!=g.length;)0==u[g[0]].length?(f.unshift(l.getElementById(g.shift())),f.unshift(l.getElementById(g.shift()))):g=p(g.shift()).concat(g);for(var m in f.unshift(l.getElementById(g.shift())),u)if(u[m].length)return d;return d.found=!0,d.trail=this.spawn(f),d}},{hopcroftTarjanBiconnected:On,htbc:On,htb:On,hopcroftTarjanBiconnectedComponents:On},{tarjanStronglyConnected:Mn,tsc:Mn,tscc:Mn,tarjanStronglyConnectedComponents:Mn}].forEach((function(e){H(Ln,e)}));
/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/
var Dn=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};Dn.prototype={fulfill:function(e){return Nn(this,1,"fulfillValue",e)},reject:function(e){return Nn(this,2,"rejectReason",e)},then:function(e,t){var n=new Dn;return this.onFulfilled.push(Fn(e,n,"fulfill")),this.onRejected.push(Fn(t,n,"reject")),Pn(this),n.proxy}};var Nn=function(e,t,n,i){return 0===e.state&&(e.state=t,e[n]=i,Pn(e)),e},Pn=function(e){1===e.state?Bn(e,"onFulfilled",e.fulfillValue):2===e.state&&Bn(e,"onRejected",e.rejectReason)},Bn=function(e,n,i){if(0!==e[n].length){var o=e[n];e[n]=[];var r=function(){for(var e=0;e<o.length;e++)o[e](i)};"function"==typeof t?t(r):setTimeout(r,0)}},Fn=function(e,t,n){return function(i){if("function"!=typeof e)t[n].call(t,i);else{var o;try{o=e(i)}catch(e){return void t.reject(e)}Wn(t,o)}}},Wn=function e(t,n){if(t!==n&&t.proxy!==n){var i;if("object"===s(n)&&null!==n||"function"==typeof n)try{i=n.then}catch(e){return void t.reject(e)}if("function"!=typeof i)t.fulfill(n);else{var o=!1;try{i.call(n,(function(i){o||(o=!0,i===n?t.reject(new TypeError("circular thenable chain")):e(t,i))}),(function(e){o||(o=!0,t.reject(e))}))}catch(e){o||t.reject(e)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};Dn.all=function(e){return new Dn((function(t,n){for(var i=new Array(e.length),o=0,r=function(n,r){i[n]=r,++o===e.length&&t(i)},s=0;s<e.length;s++)!function(t){var i=e[t];null!=i&&null!=i.then?i.then((function(e){r(t,e)}),(function(e){n(e)})):r(t,i)}(s)}))},Dn.resolve=function(e){return new Dn((function(t,n){t(e)}))},Dn.reject=function(e){return new Dn((function(t,n){n(e)}))};var Hn="undefined"!=typeof Promise?Promise:Dn,Un=function(e,t,n){var i=A(e),o=!i,r=this._private=H({duration:1e3},t,n);if(r.target=e,r.style=r.style||r.css,r.started=!1,r.playing=!1,r.hooked=!1,r.applying=!1,r.progress=0,r.completes=[],r.frames=[],r.complete&&b(r.complete)&&r.completes.push(r.complete),o){var s=e.position();r.startPosition=r.startPosition||{x:s.x,y:s.y},r.startStyle=r.startStyle||e.cy().style().getAnimationStartStyle(e,r.style)}if(i){var a=e.pan();r.startPan={x:a.x,y:a.y},r.startZoom=e.zoom()}this.length=1,this[0]=this},$n=Un.prototype;H($n,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),S(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(t,n){var i=e[t];null!=i&&(e[t]=e[n],e[n]=i)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var o=e.style[i],r=o.name,s=e.startStyle[r];e.startStyle[r]=o,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t,n=this._private;switch(e){case"frame":t=n.frames;break;default:case"complete":case"completed":t=n.completes}return new Hn((function(e,n){t.push((function(){e()}))}))}}),$n.complete=$n.completed,$n.run=$n.play,$n.running=$n.playing;var Vn={};[{animated:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var t=e[0];return t?t._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var t=0;t<e.length;t++){e[t]._private.animation.queue=[]}return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=void 0!==this.length,i=n?this:[this],o=this._private.cy||this,r=!n,s=!r;if(!o.styleEnabled())return this;var a=o.style();if(e=H({},e,t),0===Object.keys(e).length)return new Un(i[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(s&&(e.style=a.getPropsList(e.style||e.css),e.css=void 0),s&&null!=e.renderedPosition){var l=e.renderedPosition,c=o.pan(),u=o.zoom();e.position=Ve(l,u,c)}if(r&&null!=e.panBy){var h=e.panBy,d=o.pan();e.pan={x:d.x+h.x,y:d.y+h.y}}var p=e.center||e.centre;if(r&&null!=p){var f=o.getCenterPan(p.eles,e.zoom);null!=f&&(e.pan=f)}if(r&&null!=e.fit){var g=e.fit,m=o.getFitViewport(g.eles||g.boundingBox,g.padding);null!=m&&(e.pan=m.pan,e.zoom=m.zoom)}if(r&&E(e.zoom)){var v=o.getZoomedViewport(e.zoom);null!=v?(v.zoomed&&(e.zoom=v.zoom),v.panned&&(e.pan=v.pan)):e.zoom=null}return new Un(i[0],e)}},animate:function(){return function(e,t){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=H({},e,t));for(var i=0;i<n.length;i++){var o=n[i],r=o.animated()&&(void 0===e.queue||e.queue);o.animation(e,r?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var n=void 0!==this.length?this:[this],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<n.length;o++){for(var r=n[o]._private,s=r.animation.current,a=0;a<s.length;a++){var l=s[a]._private;t&&(l.duration=0)}e&&(r.animation.queue=[]),t||(r.animation.current=[])}return i.notify("draw"),this}}},{data:function(e){return e=H({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,n){var i=e,o=void 0!==this.length,r=o?this:[this],s=o?this[0]:this;if(y(t)){var a;if(i.allowGetting&&void 0===n)return s&&(i.beforeGet(s),a=s._private[i.field][t]),a;if(i.allowSetting&&void 0!==n&&!i.immutableKeys[t]){var l=u({},t,n);i.beforeSet(this,l);for(var c=0,h=r.length;c<h;c++){var d=r[c];i.canSet(d)&&(d._private[i.field][t]=n)}i.updateStyle&&this.updateStyle(),i.onSet(this),i.settingTriggersEvent&&this[i.triggerFnName](i.settingEvent)}}else if(i.allowSetting&&E(t)){var p,f,g=t,m=Object.keys(g);i.beforeSet(this,g);for(var v=0;v<m.length;v++){if(f=g[p=m[v]],!i.immutableKeys[p])for(var _=0;_<r.length;_++){var T=r[_];i.canSet(T)&&(T._private[i.field][p]=f)}}i.updateStyle&&this.updateStyle(),i.onSet(this),i.settingTriggersEvent&&this[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&b(t)){var w=t;this.on(i.bindingEvent,w)}else if(i.allowGetting&&void 0===t){var k;return s&&(i.beforeGet(s),k=s._private[i.field]),k}return this}},removeData:function(e){return e=H({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var n=e,i=void 0!==this.length?this:[this];if(y(t)){for(var o=t.split(/\s+/),r=o.length,s=0;s<r;s++){var a=o[s];if(!I(a))if(!n.immutableKeys[a])for(var l=0,c=i.length;l<c;l++)i[l]._private[n.field][a]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===t){for(var u=0,h=i.length;u<h;u++)for(var d=i[u]._private[n.field],p=Object.keys(d),f=0;f<p.length;f++){var g=p[f];!n.immutableKeys[g]&&(d[g]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var n=this,i=Array.prototype.slice.call(arguments,0);return new Hn((function(e,t){var o=i.concat([function(t){n.off.apply(n,r),e(t)}]),r=o.concat([]);n.on.apply(n,o)}))}}}].forEach((function(e){H(Vn,e)}));var Gn={animate:Vn.animate(),animation:Vn.animation(),animated:Vn.animated(),clearQueue:Vn.clearQueue(),delay:Vn.delay(),delayAnimation:Vn.delayAnimation(),stop:Vn.stop()},zn={classes:function(e){if(void 0===e){var t=[];return this[0]._private.classes.forEach((function(e){return t.push(e)})),t}T(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],i=new ke(e),o=0;o<this.length;o++){for(var r=this[o],s=r._private,a=s.classes,l=!1,c=0;c<e.length;c++){var u=e[c];if(!a.has(u)){l=!0;break}}l||(l=a.size!==e.length),l&&(s.classes=i,n.push(r))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){T(e)||(e=e.match(/\S+/g)||[]);for(var n=void 0===t,i=[],o=0,r=this.length;o<r;o++)for(var s=this[o],a=s._private.classes,l=!1,c=0;c<e.length;c++){var u=e[c],h=a.has(u),d=!1;t||n&&!h?(a.add(u),d=!0):(!t||n&&h)&&(a.delete(u),d=!0),!l&&d&&(i.push(s),l=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),this},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout((function(){n.removeClass(e)}),t),n}};zn.className=zn.classNames=zn.classes;var Xn={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])*"|'+"'(?:\\\\'|[^'])*'",number:F,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Xn.variable="(?:[\\w-]|(?:\\\\"+Xn.metaChar+"))+",Xn.value=Xn.string+"|"+Xn.number,Xn.className=Xn.variable,Xn.id=Xn.variable,function(){var e,t,n;for(e=Xn.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],Xn.comparatorOp+="|@"+t;for(e=Xn.comparatorOp.split("|"),n=0;n<e.length;n++)(t=e[n]).indexOf("!")>=0||"="!==t&&(Xn.comparatorOp+="|\\!"+t)}();var jn=0,Kn=1,Yn=2,qn=3,Jn=4,Zn=5,Qn=6,ei=7,ti=8,ni=9,ii=10,oi=11,ri=12,si=13,ai=14,li=15,ci=16,ui=17,hi=18,di=19,pi=20,fi=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort((function(e,t){return function(e,t){return-1*W(e,t)}(e.selector,t.selector)})),gi=function(){for(var e,t={},n=0;n<fi.length;n++)t[(e=fi[n]).selector]=e.matches;return t}(),mi="("+fi.map((function(e){return e.selector})).join("|")+")",vi=function(e){return e.replace(new RegExp("\\\\("+Xn.metaChar+")","g"),(function(e,t){return t}))},_i=function(e,t,n){e[e.length-1]=n},yi=[{name:"group",query:!0,regex:"("+Xn.group+")",populate:function(e,t,n){var i=h(n,1)[0];t.checks.push({type:jn,value:"*"===i?i:i+"s"})}},{name:"state",query:!0,regex:mi,populate:function(e,t,n){var i=h(n,1)[0];t.checks.push({type:ei,value:i})}},{name:"id",query:!0,regex:"\\#("+Xn.id+")",populate:function(e,t,n){var i=h(n,1)[0];t.checks.push({type:ti,value:vi(i)})}},{name:"className",query:!0,regex:"\\.("+Xn.className+")",populate:function(e,t,n){var i=h(n,1)[0];t.checks.push({type:ni,value:vi(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Xn.variable+")\\s*\\]",populate:function(e,t,n){var i=h(n,1)[0];t.checks.push({type:Jn,field:vi(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Xn.variable+")\\s*("+Xn.comparatorOp+")\\s*("+Xn.value+")\\s*\\]",populate:function(e,t,n){var i=h(n,3),o=i[0],r=i[1],s=i[2];s=null!=new RegExp("^"+Xn.string+"$").exec(s)?s.substring(1,s.length-1):parseFloat(s),t.checks.push({type:qn,field:vi(o),operator:r,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Xn.boolOp+")\\s*("+Xn.variable+")\\s*\\]",populate:function(e,t,n){var i=h(n,2),o=i[0],r=i[1];t.checks.push({type:Zn,field:vi(r),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Xn.meta+")\\s*("+Xn.comparatorOp+")\\s*("+Xn.number+")\\s*\\]\\]",populate:function(e,t,n){var i=h(n,3),o=i[0],r=i[1],s=i[2];t.checks.push({type:Qn,field:vi(o),operator:r,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Xn.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,o=e.compoundCount,r=e[e.length-1];return null!=n&&(r.subject=n,e.currentSubject=null),r.edgeCount=i,r.compoundCount=o,e.edgeCount=0,e.compoundCount=0,e[e.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Xn.directedEdge,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},i=t,o={checks:[]};return n.checks.push({type:oi,source:i,target:o}),_i(e,0,n),e.edgeCount++,o}var r={checks:[]},s=t,a={checks:[]};return r.checks.push({type:ri,source:s,target:a}),_i(e,0,r),e.edgeCount++,a}},{name:"undirectedEdge",separator:!0,regex:Xn.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},i=t,o={checks:[]};return n.checks.push({type:ii,nodes:[i,o]}),_i(e,0,n),e.edgeCount++,o}var r={checks:[]},s=t,a={checks:[]};return r.checks.push({type:ai,node:s,neighbor:a}),_i(e,0,r),a}},{name:"child",separator:!0,regex:Xn.child,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},i={checks:[]},o=e[e.length-1];return n.checks.push({type:li,parent:o,child:i}),_i(e,0,n),e.compoundCount++,i}if(e.currentSubject===t){var r={checks:[]},s=e[e.length-1],a={checks:[]},l={checks:[]},c={checks:[]},u={checks:[]};return r.checks.push({type:di,left:s,right:a,subject:l}),l.checks=t.checks,t.checks=[{type:pi}],u.checks.push({type:pi}),a.checks.push({type:ui,parent:u,child:c}),_i(e,0,r),e.currentSubject=l,e.compoundCount++,c}var h={checks:[]},d={checks:[]},p=[{type:ui,parent:h,child:d}];return h.checks=t.checks,t.checks=p,e.compoundCount++,d}},{name:"descendant",separator:!0,regex:Xn.descendant,populate:function(e,t){if(null==e.currentSubject){var n={checks:[]},i={checks:[]},o=e[e.length-1];return n.checks.push({type:ci,ancestor:o,descendant:i}),_i(e,0,n),e.compoundCount++,i}if(e.currentSubject===t){var r={checks:[]},s=e[e.length-1],a={checks:[]},l={checks:[]},c={checks:[]},u={checks:[]};return r.checks.push({type:di,left:s,right:a,subject:l}),l.checks=t.checks,t.checks=[{type:pi}],u.checks.push({type:pi}),a.checks.push({type:hi,ancestor:u,descendant:c}),_i(e,0,r),e.currentSubject=l,e.compoundCount++,c}var h={checks:[]},d={checks:[]},p=[{type:hi,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=p,e.compoundCount++,d}},{name:"subject",modifier:!0,regex:Xn.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return de("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1].checks[0],i=null==n?null:n.type;i===oi?n.type=si:i===ii&&(n.type=ai,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];yi.forEach((function(e){return e.regexObj=new RegExp("^"+e.regex)}));var bi=function(e){for(var t,n,i,o=0;o<yi.length;o++){var r=yi[o],s=r.name,a=e.match(r.regexObj);if(null!=a){n=a,t=r,i=s;var l=a[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:i,remaining:e}},Ti={parse:function(e){var t=this.inputText=e,n=this[0]={checks:[]};for(this.length=1,t=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e}(t);;){var i=bi(t);if(null==i.expr)return de("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),r=i.expr.populate(this,n,o);if(!1===r)return!1;if(null!=r&&(n=r),(t=i.remaining).match(/^\s*$/))break}var s=this[this.length-1];null!=this.currentSubject&&(s.subject=this.currentSubject),s.edgeCount=this.edgeCount,s.compoundCount=this.compoundCount;for(var a=0;a<this.length;a++){var l=this[a];if(l.compoundCount>0&&l.edgeCount>0)return de("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return de("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&de("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null==e?"":e},t=function(t){return y(t)?'"'+t+'"':e(t)},n=function(e){return" "+e+" "},i=function(i,r){var s=i.type,a=i.value;switch(s){case jn:var l=e(a);return l.substring(0,l.length-1);case qn:var c=i.field,u=i.operator;return"["+c+n(e(u))+t(a)+"]";case Zn:var h=i.operator,d=i.field;return"["+e(h)+d+"]";case Jn:return"["+i.field+"]";case Qn:var p=i.operator;return"[["+i.field+n(e(p))+t(a)+"]]";case ei:return a;case ti:return"#"+a;case ni:return"."+a;case ui:case li:return o(i.parent,r)+n(">")+o(i.child,r);case hi:case ci:return o(i.ancestor,r)+" "+o(i.descendant,r);case di:var f=o(i.left,r),g=o(i.subject,r),m=o(i.right,r);return f+(f.length>0?" ":"")+g+m;case pi:return""}},o=function(e,t){return e.checks.reduce((function(n,o,r){return n+(t===e&&0===r?"$":"")+i(o,t)}),"")},r="",s=0;s<this.length;s++){var a=this[s];r+=o(a,a.subject),this.length>1&&s<this.length-1&&(r+=", ")}return this.toStringCache=r,r}},Ei=function(e,t,n){var i,o,r,s=y(e),a=w(e),l=y(n),c=!1,u=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),u=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(s||l||c)&&(o=s||a?""+e:"",r=""+n),c&&(e=o=o.toLowerCase(),n=r=r.toLowerCase()),t){case"*=":i=o.indexOf(r)>=0;break;case"$=":i=o.indexOf(r,o.length-r.length)>=0;break;case"^=":i=0===o.indexOf(r);break;case"=":i=e===n;break;case">":h=!0,i=e>n;break;case">=":h=!0,i=e>=n;break;case"<":h=!0,i=e<n;break;case"<=":h=!0,i=e<=n;break;default:i=!1}return!u||null==e&&h||(i=!i),i},wi=function(e,t){return e.data(t)},ki=[],Si=function(e,t){return e.checks.every((function(e){return ki[e.type](e,t)}))};ki[jn]=function(e,t){var n=e.value;return"*"===n||n===t.group()},ki[ei]=function(e,t){return function(e,t){return gi[e](t)}(e.value,t)},ki[ti]=function(e,t){var n=e.value;return t.id()===n},ki[ni]=function(e,t){var n=e.value;return t.hasClass(n)},ki[Qn]=function(e,t){var n=e.field,i=e.operator,o=e.value;return Ei(function(e,t){return e[t]()}(t,n),i,o)},ki[qn]=function(e,t){var n=e.field,i=e.operator,o=e.value;return Ei(wi(t,n),i,o)},ki[Zn]=function(e,t){var n=e.field,i=e.operator;return function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}}(wi(t,n),i)},ki[Jn]=function(e,t){var n=e.field;e.operator;return void 0!==wi(t,n)},ki[ii]=function(e,t){var n=e.nodes[0],i=e.nodes[1],o=t.source(),r=t.target();return Si(n,o)&&Si(i,r)||Si(i,o)&&Si(n,r)},ki[ai]=function(e,t){return Si(e.node,t)&&t.neighborhood().some((function(t){return t.isNode()&&Si(e.neighbor,t)}))},ki[oi]=function(e,t){return Si(e.source,t.source())&&Si(e.target,t.target())},ki[ri]=function(e,t){return Si(e.source,t)&&t.outgoers().some((function(t){return t.isNode()&&Si(e.target,t)}))},ki[si]=function(e,t){return Si(e.target,t)&&t.incomers().some((function(t){return t.isNode()&&Si(e.source,t)}))},ki[li]=function(e,t){return Si(e.child,t)&&Si(e.parent,t.parent())},ki[ui]=function(e,t){return Si(e.parent,t)&&t.children().some((function(t){return Si(e.child,t)}))},ki[ci]=function(e,t){return Si(e.descendant,t)&&t.ancestors().some((function(t){return Si(e.ancestor,t)}))},ki[hi]=function(e,t){return Si(e.ancestor,t)&&t.descendants().some((function(t){return Si(e.descendant,t)}))},ki[di]=function(e,t){return Si(e.subject,t)&&Si(e.left,t)&&Si(e.right,t)},ki[pi]=function(){return!0},ki[Kn]=function(e,t){return e.value.has(t)},ki[Yn]=function(e,t){return(0,e.value)(t)};var Ci=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||y(e)&&e.match(/^\s*$/)||(S(e)?this.addQuery({checks:[{type:Kn,value:e.collection()}]}):b(e)?this.addQuery({checks:[{type:Yn,value:e}]}):y(e)?this.parse(e)||(this.invalid=!0):ue("A selector must be created from a string; found "))},xi=Ci.prototype;[Ti,{matches:function(e){for(var t=0;t<this.length;t++){var n=this[t];if(Si(n,e))return!0}return!1},filter:function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===ti)return e.getElementById(t[0].checks[0].value).collection();var n=function(e){for(var n=0;n<t.length;n++){var i=t[n];if(Si(i,e))return!0}return!1};return null==t.text()&&(n=function(){return!0}),e.filter(n)}}].forEach((function(e){return H(xi,e)})),xi.text=function(){return this.inputText},xi.size=function(){return this.length},xi.eq=function(e){return this[e]},xi.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},xi.addQuery=function(e){this[this.length++]=e},xi.selector=xi.toString;var Ai={allAre:function(e){var t=new Ci(e);return this.every((function(e){return t.matches(e)}))},is:function(e){var t=new Ci(e);return this.some((function(e){return t.matches(e)}))},some:function(e,t){for(var n=0;n<this.length;n++){if(t?e.apply(t,[this[n],n,this]):e(this[n],n,this))return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){if(!(t?e.apply(t,[this[n],n,this]):e(this[n],n,this)))return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every((function(t){return e.hasElementWithId(t.id())})))},anySame:function(e){return e=this.cy().collection(e),this.some((function(t){return e.hasElementWithId(t.id())}))},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every((function(e){return t.hasElementWithId(e.id())}))},contains:function(e){e=this.cy().collection(e);var t=this;return e.every((function(e){return t.hasElementWithId(e.id())}))}};Ai.allAreNeighbours=Ai.allAreNeighbors,Ai.has=Ai.contains,Ai.equal=Ai.equals=Ai.same;var Ri,Ii,Oi=function(e,t){return function(n,i,o,r){var s,a=n;if(null==a?s="":S(a)&&1===a.length&&(s=a.id()),1===this.length&&s){var l=this[0]._private,c=l.traversalCache=l.traversalCache||{},u=c[t]=c[t]||[],h=Q(s),d=u[h];return d||(u[h]=e.call(this,n,i,o,r))}return e.call(this,n,i,o,r)}},Mi={parent:function(e){var t=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var o=this[i]._private.parent;o&&t.push(o)}return this.spawn(t,{unique:!0}).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var o=n[i];t.push(o)}n=n.parent()}return this.spawn(t,{unique:!0}).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n].parents();t=(t=t||i).intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter((function(e){return e.isOrphan()})).filter(e)},nonorphans:function(e){return this.stdFilter((function(e){return e.isChild()})).filter(e)},children:Oi((function(e){for(var t=[],n=0;n<this.length;n++)for(var i=this[n]._private.children,o=0;o<i.length;o++)t.push(i[o]);return this.spawn(t,{unique:!0}).filter(e)}),"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return function e(n){for(var i=0;i<n.length;i++){var o=n[i];t.push(o),o.children().nonempty()&&e(o.children())}}(this.children()),this.spawn(t,{unique:!0}).filter(e)}};function Li(e,t,n,i){for(var o=[],r=new ke,s=e.cy().hasCompoundNodes(),a=0;a<e.length;a++){var l=e[a];n?o.push(l):s&&i(o,r,l)}for(;o.length>0;){var c=o.shift();t(c),r.add(c.id()),s&&i(o,r,c)}return e}function Di(e,t,n){if(n.isParent())for(var i=n._private.children,o=0;o<i.length;o++){var r=i[o];t.has(r.id())||e.push(r)}}function Ni(e,t,n){if(n.isChild()){var i=n._private.parent;t.has(i.id())||e.push(i)}}function Pi(e,t,n){Ni(e,t,n),Di(e,t,n)}Mi.forEachDown=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Li(this,e,t,Di)},Mi.forEachUp=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Li(this,e,t,Ni)},Mi.forEachUpAndDown=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Li(this,e,t,Pi)},Mi.ancestors=Mi.parents,(Ri=Ii={data:Vn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Vn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Vn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Vn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Vn.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Vn.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=Ri.data,Ri.removeAttr=Ri.removeData;var Bi,Fi,Wi=Ii,Hi={};function Ui(e){return function(t){if(void 0===t&&(t=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,i=this[0],o=i._private.edges,r=0;r<o.length;r++){var s=o[r];!t&&s.isLoop()||(n+=e(i,s))}return n}}}function $i(e,t){return function(n){for(var i,o=this.nodes(),r=0;r<o.length;r++){var s=o[r][e](n);void 0===s||void 0!==i&&!t(s,i)||(i=s)}return i}}H(Hi,{degree:Ui((function(e,t){return t.source().same(t.target())?2:1})),indegree:Ui((function(e,t){return t.target().same(e)?1:0})),outdegree:Ui((function(e,t){return t.source().same(e)?1:0}))}),H(Hi,{minDegree:$i("degree",(function(e,t){return e<t})),maxDegree:$i("degree",(function(e,t){return e>t})),minIndegree:$i("indegree",(function(e,t){return e<t})),maxIndegree:$i("indegree",(function(e,t){return e>t})),minOutdegree:$i("outdegree",(function(e,t){return e<t})),maxOutdegree:$i("outdegree",(function(e,t){return e>t}))}),H(Hi,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var Vi=function(e,t,n){for(var i=0;i<e.length;i++){var o=e[i];if(!o.locked()){var r=o._private.position,s={x:null!=t.x?t.x-r.x:0,y:null!=t.y?t.y-r.y:0};!o.isParent()||0===s.x&&0===s.y||o.children().shift(s,n),o.shiftCachedBoundingBox(s)}}},Gi={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Vi(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};(Bi=Fi={position:Vn.data(Gi),silentPosition:Vn.data(H({},Gi,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Vi(e,t,!0)}})),positions:function(e,t){if(E(e))t?this.silentPosition(e):this.position(e);else if(b(e)){var n=e,i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var r,s=this[o];(r=n(s,o))&&(t?s.silentPosition(r):s.position(r))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if(E(e)?(i={x:w(e.x)?e.x:0,y:w(e.y)?e.y:0},n=t):y(e)&&w(t)&&((i={x:0,y:0})[e]=t),null!=i){var o=this.cy();o.startBatch();for(var r=0;r<this.length;r++){var s=this[r],a=s.position(),l={x:a.x+i.x,y:a.y+i.y};n?s.silentPosition(l):s.position(l)}o.endBatch()}return this},silentShift:function(e,t){return E(e)?this.shift(e,!0):y(e)&&w(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),o=i.zoom(),r=i.pan(),s=E(e)?e:void 0,a=void 0!==s||void 0!==t&&y(e);if(n&&n.isNode()){if(!a){var l=n.position();return s=$e(l,o,r),void 0===e?s:s[e]}for(var c=0;c<this.length;c++){var u=this[c];void 0!==t?u.position(e,(t-r[e])/o):void 0!==s&&u.position(Ve(s,o,r))}}else if(!a)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),o=E(e)?e:void 0,r=void 0!==o||void 0!==t&&y(e),s=i.hasCompoundNodes();if(n&&n.isNode()){if(!r){var a=n.position(),l=s?n.parent():null,c=l&&l.length>0,u=c;c&&(l=l[0]);var h=u?l.position():{x:0,y:0};return o={x:a.x-h.x,y:a.y-h.y},void 0===e?o:o[e]}for(var d=0;d<this.length;d++){var p=this[d],f=s?p.parent():null,g=f&&f.length>0,m=g;g&&(f=f[0]);var v=m?f.position():{x:0,y:0};void 0!==t?p.position(e,t+v[e]):void 0!==o&&p.position({x:o.x+v.x,y:o.y+v.y})}}else if(!r)return;return this}}).modelPosition=Bi.point=Bi.position,Bi.modelPositions=Bi.points=Bi.positions,Bi.renderedPoint=Bi.renderedPosition,Bi.relativePoint=Bi.relativePosition;var zi,Xi,ji=Fi;zi=Xi={},Xi.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),i=n.zoom(),o=n.pan(),r=t.x1*i+o.x,s=t.x2*i+o.x,a=t.y1*i+o.y,l=t.y2*i+o.y;return{x1:r,x2:s,y1:a,y2:l,w:s-r,h:l-a}},Xi.dirtyCompoundBoundsCache=function(){var e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp((function(e){if(e.isParent()){var t=e._private;t.compoundBoundsClean=!1,t.bbCache=null,e.emitAndNotify("bounds")}})),this):this},Xi.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function n(e){if(e.isParent()){var t=e._private,n=e.children(),i="include"===e.pstyle("compound-sizing-wrt-labels").value,o={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},r=n.boundingBox({includeLabels:i,includeOverlays:!1,useCache:!1}),s=t.position;0!==r.w&&0!==r.h||((r={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=s.x-r.w/2,r.x2=s.x+r.w/2,r.y1=s.y-r.h/2,r.y2=s.y+r.h/2);var a=o.width.left.value;"px"===o.width.left.units&&o.width.val>0&&(a=100*a/o.width.val);var l=o.width.right.value;"px"===o.width.right.units&&o.width.val>0&&(l=100*l/o.width.val);var c=o.height.top.value;"px"===o.height.top.units&&o.height.val>0&&(c=100*c/o.height.val);var u=o.height.bottom.value;"px"===o.height.bottom.units&&o.height.val>0&&(u=100*u/o.height.val);var h=v(o.width.val-r.w,a,l),d=h.biasDiff,p=h.biasComplementDiff,f=v(o.height.val-r.h,c,u),g=f.biasDiff,m=f.biasComplementDiff;t.autoPadding=function(e,t,n,i){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(i){case"width":return e>0?n.pfValue*e:0;case"height":return t>0?n.pfValue*t:0;case"average":return e>0&&t>0?n.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?n.pfValue*t:n.pfValue*e:0;case"max":return e>0&&t>0?e>t?n.pfValue*e:n.pfValue*t:0;default:return 0}}(r.w,r.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(r.w,o.width.val),s.x=(-d+r.x1+r.x2+p)/2,t.autoHeight=Math.max(r.h,o.height.val),s.y=(-g+r.y1+r.y2+m)/2}function v(e,t,n){var i=0,o=0,r=t+n;return e>0&&r>0&&(i=t/r*e,o=n/r*e),{biasDiff:i,biasComplementDiff:o}}}for(var i=0;i<this.length;i++){var o=this[i],r=o._private;r.compoundBoundsClean||(n(o),t.batching()||(r.compoundBoundsClean=!0))}return this};var Ki=function(e){return e===1/0||e===-1/0?0:e},Yi=function(e,t,n,i,o){i-t!=0&&o-n!=0&&null!=t&&null!=n&&null!=i&&null!=o&&(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},qi=function(e,t){return null==t?e:Yi(e,t.x1,t.y1,t.x2,t.y2)},Ji=function(e,t,n){return be(e,t,n)},Zi=function(e,t,n){if(!t.cy().headless()){var i,o,r=t._private,s=r.rstyle,a=s.arrowWidth/2;if("none"!==t.pstyle(n+"-arrow-shape").value){"source"===n?(i=s.srcX,o=s.srcY):"target"===n?(i=s.tgtX,o=s.tgtY):(i=s.midX,o=s.midY);var l=r.arrowBounds=r.arrowBounds||{},c=l[n]=l[n]||{};c.x1=i-a,c.y1=o-a,c.x2=i+a,c.y2=o+a,c.w=c.x2-c.x1,c.h=c.y2-c.y1,nt(c,1),Yi(e,c.x1,c.y1,c.x2,c.y2)}}},Qi=function(e,t,n){if(!t.cy().headless()){var i;i=n?n+"-":"";var o=t._private,r=o.rstyle;if(t.pstyle(i+"label").strValue){var s,a,l,c,u=t.pstyle("text-halign"),h=t.pstyle("text-valign"),d=Ji(r,"labelWidth",n),p=Ji(r,"labelHeight",n),f=Ji(r,"labelX",n),g=Ji(r,"labelY",n),m=t.pstyle(i+"text-margin-x").pfValue,v=t.pstyle(i+"text-margin-y").pfValue,_=t.isEdge(),y=t.pstyle(i+"text-rotation"),b=t.pstyle("text-outline-width").pfValue,T=t.pstyle("text-border-width").pfValue/2,E=t.pstyle("text-background-padding").pfValue,w=p,k=d,S=k/2,C=w/2;if(_)s=f-S,a=f+S,l=g-C,c=g+C;else{switch(u.value){case"left":s=f-k,a=f;break;case"center":s=f-S,a=f+S;break;case"right":s=f,a=f+k}switch(h.value){case"top":l=g-w,c=g;break;case"center":l=g-C,c=g+C;break;case"bottom":l=g,c=g+w}}s+=m-Math.max(b,T)-E,a+=m+Math.max(b,T)+E,l+=v-Math.max(b,T)-E,c+=v+Math.max(b,T)+E;var x=n||"main",A=o.labelBounds,R=A[x]=A[x]||{};R.x1=s,R.y1=l,R.x2=a,R.y2=c,R.w=a-s,R.h=c-l,nt(R,1);var I=_&&"autorotate"===y.strValue,O=null!=y.pfValue&&0!==y.pfValue;if(I||O){var M=I?Ji(o.rstyle,"labelAngle",n):y.pfValue,L=Math.cos(M),D=Math.sin(M),N=(s+a)/2,P=(l+c)/2;if(!_){switch(u.value){case"left":N=a;break;case"right":N=s}switch(h.value){case"top":P=c;break;case"bottom":P=l}}var B=function(e,t){return{x:(e-=N)*L-(t-=P)*D+N,y:e*D+t*L+P}},F=B(s,l),W=B(s,c),H=B(a,l),U=B(a,c);s=Math.min(F.x,W.x,H.x,U.x),a=Math.max(F.x,W.x,H.x,U.x),l=Math.min(F.y,W.y,H.y,U.y),c=Math.max(F.y,W.y,H.y,U.y)}var $=x+"Rot",V=A[$]=A[$]||{};V.x1=s,V.y1=l,V.x2=a,V.y2=c,V.w=a-s,V.h=c-l,Yi(e,s,l,a,c),Yi(o.labelBounds.all,s,l,a,c)}return e}},eo=function(e){var t=0,n=function(e){return(e?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays)},to=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),i=function(e){return Math.round(e)};return Z([i(t.x),i(t.y),i(n.x),i(n.y)])}return 0},no=function(e,t){var n,i=e._private,o=e.isEdge(),r=(null==t?oo:eo(t))===oo,s=to(e),a=i.bbCachePosKey===s,l=function(e){return null==e._private.bbCache},c=!(t.useCache&&a)||l(e)||o&&l(e.source())||l(e.target());if(c?(a||e.recalculateRenderedStyle(),n=function(e,t){var n,i,o,r,s,a,l,c=e._private.cy,u=c.styleEnabled(),h=c.headless(),d=et(),p=e._private,f=e.isNode(),g=e.isEdge(),m=p.rstyle,v=f&&u?e.pstyle("bounds-expansion").pfValue:[0],_=function(e){return"none"!==e.pstyle("display").value},y=!u||_(e)&&(!g||_(e.source())&&_(e.target()));if(y){var b=0;u&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(b=e.pstyle("overlay-padding").value);var T=0;if(u&&(T=e.pstyle("width").pfValue/2),f&&t.includeNodes){var E=e.position();s=E.x,a=E.y;var w=e.outerWidth()/2,k=e.outerHeight()/2;Yi(d,n=s-w,o=a-k,i=s+w,r=a+k)}else if(g&&t.includeEdges)if(u&&!h){var S=e.pstyle("curve-style").strValue;if(n=Math.min(m.srcX,m.midX,m.tgtX),i=Math.max(m.srcX,m.midX,m.tgtX),o=Math.min(m.srcY,m.midY,m.tgtY),r=Math.max(m.srcY,m.midY,m.tgtY),Yi(d,n-=T,o-=T,i+=T,r+=T),"haystack"===S){var C=m.haystackPts;if(C&&2===C.length){if(n=C[0].x,o=C[0].y,n>(i=C[1].x)){var x=n;n=i,i=x}if(o>(r=C[1].y)){var A=o;o=r,r=A}Yi(d,n-T,o-T,i+T,r+T)}}else if("bezier"===S||"unbundled-bezier"===S||"segments"===S||"taxi"===S){var R;switch(S){case"bezier":case"unbundled-bezier":R=m.bezierPts;break;case"segments":case"taxi":R=m.linePts}if(null!=R)for(var I=0;I<R.length;I++){var O=R[I];n=O.x-T,i=O.x+T,o=O.y-T,r=O.y+T,Yi(d,n,o,i,r)}}}else{var M=e.source().position(),L=e.target().position();if((n=M.x)>(i=L.x)){var D=n;n=i,i=D}if((o=M.y)>(r=L.y)){var N=o;o=r,r=N}Yi(d,n-=T,o-=T,i+=T,r+=T)}if(u&&t.includeEdges&&g&&(Zi(d,e,"mid-source"),Zi(d,e,"mid-target"),Zi(d,e,"source"),Zi(d,e,"target")),u)if("yes"===e.pstyle("ghost").value){var P=e.pstyle("ghost-offset-x").pfValue,B=e.pstyle("ghost-offset-y").pfValue;Yi(d,d.x1+P,d.y1+B,d.x2+P,d.y2+B)}var F=p.bodyBounds=p.bodyBounds||{};ot(F,d),it(F,v),nt(F,1),u&&(n=d.x1,i=d.x2,o=d.y1,r=d.y2,Yi(d,n-b,o-b,i+b,r+b));var W=p.overlayBounds=p.overlayBounds||{};ot(W,d),it(W,v),nt(W,1);var H=p.labelBounds=p.labelBounds||{};null!=H.all?((l=H.all).x1=1/0,l.y1=1/0,l.x2=-1/0,l.y2=-1/0,l.w=0,l.h=0):H.all=et(),u&&t.includeLabels&&(t.includeMainLabels&&Qi(d,e,null),g&&(t.includeSourceLabels&&Qi(d,e,"source"),t.includeTargetLabels&&Qi(d,e,"target")))}return d.x1=Ki(d.x1),d.y1=Ki(d.y1),d.x2=Ki(d.x2),d.y2=Ki(d.y2),d.w=Ki(d.x2-d.x1),d.h=Ki(d.y2-d.y1),d.w>0&&d.h>0&&y&&(it(d,v),nt(d,1)),d}(e,io),i.bbCache=n,i.bbCacheShift.x=i.bbCacheShift.y=0,i.bbCachePosKey=s):n=i.bbCache,!c&&(0!==i.bbCacheShift.x||0!==i.bbCacheShift.y)){var u=rt,h=i.bbCacheShift,d=function(e,t){null!=e&&u(e,t)};u(n,h);var p=i.bodyBounds,f=i.overlayBounds,g=i.labelBounds,m=i.arrowBounds;d(p,h),d(f,h),null!=m&&(d(m.source,h),d(m.target,h),d(m["mid-source"],h),d(m["mid-target"],h)),null!=g&&(d(g.main,h),d(g.all,h),d(g.source,h),d(g.target,h))}if(i.bbCacheShift.x=i.bbCacheShift.y=0,!r){var v=e.isNode();n=et(),(t.includeNodes&&v||t.includeEdges&&!v)&&(t.includeOverlays?qi(n,i.overlayBounds):qi(n,i.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!o||t.includeSourceLabels&&t.includeTargetLabels)?qi(n,i.labelBounds.all):(t.includeMainLabels&&qi(n,i.labelBounds.mainRot),t.includeSourceLabels&&qi(n,i.labelBounds.sourceRot),t.includeTargetLabels&&qi(n,i.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},io={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},oo=eo(io),ro=ve(io);Xi.boundingBox=function(e){var t;if(1!==this.length||null==this[0]._private.bbCache||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){t=et();var n=ro(e=e||io);if(this.cy().styleEnabled())for(var i=0;i<this.length;i++){var o=this[i],r=o._private,s=to(o),a=r.bbCachePosKey===s,l=n.useCache&&a;o.recalculateRenderedStyle(l)}this.updateCompoundBounds();for(var c=0;c<this.length;c++){var u=this[c];qi(t,no(u,n))}}else e=void 0===e?io:ro(e),t=no(this[0],e);return t.x1=Ki(t.x1),t.y1=Ki(t.y1),t.x2=Ki(t.x2),t.y2=Ki(t.y2),t.w=Ki(t.x2-t.x1),t.h=Ki(t.y2-t.y1),t},Xi.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCacheShift.x=t.bbCacheShift.y=0,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Xi.shiftCachedBoundingBox=function(e){for(var t=0;t<this.length;t++){var n=this[t]._private;null!=n.bbCache&&(n.bbCacheShift.x+=e.x,n.bbCacheShift.y+=e.y)}return this.emitAndNotify("bounds"),this},Xi.boundingBoxAt=function(e){var t=this.nodes(),n=this.cy(),i=n.hasCompoundNodes();if(i&&(t=t.filter((function(e){return!e.isParent()}))),E(e)){var o=e;e=function(){return o}}n.startBatch(),t.forEach((function(t,n){return t._private.bbAtOldPos=e(t,n)})).silentPositions(e),i&&this.updateCompoundBounds(!0);var r=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}}(this.boundingBox({useCache:!1}));return t.silentPositions((function(e){return e._private.bbAtOldPos})),n.endBatch(),r},zi.boundingbox=zi.bb=zi.boundingBox,zi.renderedBoundingbox=zi.renderedBoundingBox;var so,ao,lo=Xi;so=ao={};var co=function(e){e.uppercaseName=B(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=B(e.outerName),so[e.name]=function(){var t=this[0],n=t._private,i=n.cy._private.styleEnabled;if(t){if(!i)return 1;if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var o=t.pstyle(e.name);switch(o.strValue){case"label":return t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return o.pfValue}}},so["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private.cy._private.styleEnabled;if(t)return n?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1},so["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},so["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};co({name:"width"}),co({name:"height"}),ao.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},ao.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},ao.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var uo=ao,ho={controlPoints:{get:function(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function(e){return e.renderer().getEdgeMidpoint(e)}}},po=Object.keys(ho).reduce((function(e,t){var n=ho[t],i=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)}(t);return e[t]=function(){return function(e,t){if(e.isEdge())return t(e)}(this,n.get)},n.mult?e[i]=function(){return function(e,t){if(e.isEdge()){var n=e.cy(),i=n.pan(),o=n.zoom();return t(e).map((function(e){return $e(e,o,i)}))}}(this,n.get)}:e[i]=function(){return function(e,t){if(e.isEdge()){var n=e.cy();return $e(t(e),n.zoom(),n.pan())}}(this,n.get)},e}),{}),fo=H({},ji,lo,uo,po),go=function(e,t){this.recycle(e,t)};function mo(){return!1}function vo(){return!0}go.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=mo,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?vo:mo):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,i=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:n.x*i+o.x,y:n.y*i+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=vo;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=vo;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=vo,this.stopPropagation()},isDefaultPrevented:mo,isPropagationStopped:mo,isImmediatePropagationStopped:mo};var _o=/^([^.]+)(\.(?:[^.]+))?$/,yo={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},bo=Object.keys(yo),To={};function Eo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:To,t=arguments.length>1?arguments[1]:void 0,n=0;n<bo.length;n++){var i=bo[n];this[i]=e[i]||yo[i]}this.context=t||this.context,this.listeners=[],this.emitting=0}var wo=Eo.prototype,ko=function(e,t,n,i,o,r,s){b(i)&&(o=i,i=null),s&&(r=null==r?s:H({},r,s));for(var a=T(n)?n:n.split(/\s+/),l=0;l<a.length;l++){var c=a[l];if(!I(c)){var u=c.match(_o);if(u)if(!1===t(e,c,u[1],u[2]?u[2]:null,i,o,r))break}}},So=function(e,t){return e.addEventFields(e.context,t),new go(t.type,t)},Co=function(e,t,n){if("event"!==_(n))if(E(n))t(e,So(e,n));else for(var i=T(n)?n:n.split(/\s+/),o=0;o<i.length;o++){var r=i[o];if(!I(r)){var s=r.match(_o);if(s){var a=s[1],l=s[2]?s[2]:null;t(e,So(e,{type:a,namespace:l,target:e.context}))}}}else t(e,n)};wo.on=wo.addListener=function(e,t,n,i,o){return ko(this,(function(e,t,n,i,o,r,s){b(r)&&e.listeners.push({event:t,callback:r,type:n,namespace:i,qualifier:o,conf:s})}),e,t,n,i,o),this},wo.one=function(e,t,n,i){return this.on(e,t,n,i,{one:!0})},wo.removeListener=wo.off=function(e,t,n,i){var o=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var r=this.listeners,s=function(s){var a=r[s];ko(o,(function(t,n,i,o,l,c){if((a.type===i||"*"===e)&&(!o&&".*"!==a.namespace||a.namespace===o)&&(!l||t.qualifierCompare(a.qualifier,l))&&(!c||a.callback===c))return r.splice(s,1),!1}),e,t,n,i)},a=r.length-1;a>=0;a--)s(a);return this},wo.removeAllListeners=function(){return this.removeListener("*")},wo.emit=wo.trigger=function(e,t,n){var i=this.listeners,o=i.length;return this.emitting++,T(t)||(t=[t]),Co(this,(function(e,r){null!=n&&(i=[{event:r.event,type:r.type,namespace:r.namespace,callback:n}],o=i.length);for(var s=function(n){var o=i[n];if(o.type===r.type&&(!o.namespace||o.namespace===r.namespace||".*"===o.namespace)&&e.eventMatches(e.context,o,r)){var s=[r];null!=t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}}(s,t),e.beforeEmit(e.context,o,r),o.conf&&o.conf.one&&(e.listeners=e.listeners.filter((function(e){return e!==o})));var a=e.callbackContext(e.context,o,r),l=o.callback.apply(a,s);e.afterEmit(e.context,o,r),!1===l&&(r.stopPropagation(),r.preventDefault())}},a=0;a<o;a++)s(a);e.bubble(e.context)&&!r.isPropagationStopped()&&e.parent(e.context).emit(r,t)}),e),this.emitting--,this};var xo={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return null==i||e!==n.target&&C(n.target)&&i.matches(n.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Ao=function(e){return y(e)?new Ci(e):e},Ro={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new Eo(xo,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=Ao(t),o=0;o<this.length;o++){this[o].emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=Ao(t),o=0;o<this.length;o++){this[o].emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){this[e].emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=Ao(t),o=0;o<this.length;o++){this[o].emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=Ao(t),o=0;o<this.length;o++){this[o].emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){this[n].emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};Vn.eventAliasesOn(Ro);var Io={nodes:function(e){return this.filter((function(e){return e.isNode()})).filter(e)},edges:function(e){return this.filter((function(e){return e.isEdge()})).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.merge(i):t.merge(i)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(y(e)||S(e))return new Ci(e).filter(this);if(b(e)){for(var n=this.spawn(),i=0;i<this.length;i++){var o=this[i];(t?e.apply(t,[o,i,this]):e(o,i,this))&&n.merge(o)}return n}return this.spawn()},not:function(e){if(e){y(e)&&(e=this.filter(e));for(var t=[],n=e._private.map,i=0;i<this.length;i++){var o=this[i];n.has(o.id())||t.push(o)}return this.spawn(t)}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(y(e)){var t=e;return this.filter(t)}for(var n=[],i=e,o=this.length<e.length,r=o?i._private.map:this._private.map,s=o?this:i,a=0;a<s.length;a++){var l=s[a]._private.data.id,c=r.get(l);c&&n.push(c.ele)}return this.spawn(n)},xor:function(e){var t=this._private.cy;y(e)&&(e=t.$(e));var n=[],i=e,o=function(e,t){for(var i=0;i<e.length;i++){var o=e[i],r=o._private.data.id;t.hasElementWithId(r)||n.push(o)}};return o(this,i),o(i,this),this.spawn(n)},diff:function(e){var t=this._private.cy;y(e)&&(e=t.$(e));var n=[],i=[],o=[],r=e,s=function(e,t,n){for(var i=0;i<e.length;i++){var r=e[i],s=r._private.data.id;t.hasElementWithId(s)?o.push(r):n.push(r)}};return s(this,r,n),s(r,this,i),{left:this.spawn(n,{unique:!0}),right:this.spawn(i,{unique:!0}),both:this.spawn(o,{unique:!0})}},add:function(e){var t=this._private.cy;if(!e)return this;if(y(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=[],o=0;o<this.length;o++)i.push(this[o]);for(var r=this._private.map,s=0;s<e.length;s++){var a=!r.has(e[s].id());a&&i.push(e[s])}return this.spawn(i)},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&y(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=t.map,r=0;r<e.length;r++){var s=e[r],a=s._private.data.id;if(!o.has(a)){var l=this.length++;this[l]=s,o.set(a,{ele:s,index:l})}else{var c=o.get(a).index;this[c]=s,o.set(a,{ele:s,index:c})}}return this},unmergeAt:function(e){var t=this[e].id(),n=this._private.map;this[e]=void 0,n.delete(t);var i=e===this.length-1;if(this.length>1&&!i){var o=this.length-1,r=this[o],s=r._private.data.id;this[o]=void 0,this[e]=r,n.set(s,{ele:r,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&y(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){e(this[t])&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=0;i<this.length;i++){var o=this[i],r=t?e.apply(t,[o,i,this]):e(o,i,this);n.push(r)}return n},reduce:function(e,t){for(var n=t,i=0;i<this.length;i++)n=e(n,this[i],i,this);return n},max:function(e,t){for(var n,i=-1/0,o=0;o<this.length;o++){var r=this[o],s=t?e.apply(t,[r,o,this]):e(r,o,this);s>i&&(i=s,n=r)}return{value:i,ele:n}},min:function(e,t){for(var n,i=1/0,o=0;o<this.length;o++){var r=this[o],s=t?e.apply(t,[r,o,this]):e(r,o,this);s<i&&(i=s,n=r)}return{value:i,ele:n}}},Oo=Io;Oo.u=Oo["|"]=Oo["+"]=Oo.union=Oo.or=Oo.add,Oo["\\"]=Oo["!"]=Oo["-"]=Oo.difference=Oo.relativeComplement=Oo.subtract=Oo.not,Oo.n=Oo["&"]=Oo["."]=Oo.and=Oo.intersection=Oo.intersect,Oo["^"]=Oo["(+)"]=Oo["(-)"]=Oo.symmetricDifference=Oo.symdiff=Oo.xor,Oo.fnFilter=Oo.filterFn=Oo.stdFilter=Oo.filter,Oo.complement=Oo.abscomp=Oo.absoluteComplement;var Mo=function(e,t){var n=e.cy().hasCompoundNodes();function i(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?n?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?re:0}var o=i(e)-i(t);if(0!==o)return o;function r(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}var s=r(e)-r(t);if(0!==s)return s;var a=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==a?a:e.poolIndex()-t.poolIndex()},Lo={forEach:function(e,t){if(b(e))for(var n=this.length,i=0;i<n;i++){var o=this[i];if(!1===(t?e.apply(t,[o,i,this]):e(o,i,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;null==t&&(t=i),null==e&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var o=e;o>=0&&o<t&&o<i;o++)n.push(this[o]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!b(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(Mo)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var n=t.data.parent?e.parents().size():0;return e.isParent()?n:re-1}var i=t.source,o=t.target,r=i.zDepth(),s=o.zDepth();return Math.max(r,s,0)}}};Lo.each=Lo.forEach;"undefined"!=("undefined"==typeof Symbol?"undefined":s(Symbol))&&"undefined"!=s(Symbol.iterator)&&(Lo[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},n=0,i=this.length;return u({next:function(){return n<i?t.value=e[n++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,(function(){return this}))});var Do=ve({nodeDimensionsIncludeLabels:!1}),No={layoutDimensions:function(e){var t;if(e=Do(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return 0!==t.w&&0!==t.h||(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes(),o=this.cy(),r=t.eles,s=function(e){return e.id()},a=L(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=t.spacingFactor&&1!==t.spacingFactor,c=function(){if(!l)return null;for(var e=et(),t=0;t<i.length;t++){var n=i[t],o=a(n,t);tt(e,o.x,o.y)}return e}(),u=L((function(e,n){var i=a(e,n);l&&(i=function(e,t,n){var i=t.x1+t.w/2,o=t.y1+t.h/2;return{x:i+(n.x-i)*e,y:o+(n.y-o)*e}}(Math.abs(t.spacingFactor),c,i));return null!=t.transform&&(i=t.transform(e,i)),i}),s);if(t.animate){for(var h=0;h<i.length;h++){var d=i[h],p=u(d,h);if(null==t.animateFilter||t.animateFilter(d,h)){var f=d.animation({position:p,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(f)}else d.position(p)}if(t.fit){var g=o.animation({fit:{boundingBox:r.boundingBoxAt(u),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}else if(void 0!==t.zoom&&void 0!==t.pan){var m=o.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}e.animations.forEach((function(e){return e.play()})),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Hn.all(e.animations.map((function(e){return e.promise()}))).then((function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})}))}else i.positions(u),t.fit&&o.fit(t.eles,t.padding),null!=t.zoom&&o.zoom(t.zoom),t.pan&&o.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(H({},e,{eles:this}))}};function Po(e,t,n){var i,o=n._private,r=o.styleCache=o.styleCache||[];return null!=(i=r[e])?i:i=r[e]=t(n)}function Bo(e,t){return e=Q(e),function(n){return Po(e,t,n)}}function Fo(e,t){e=Q(e);var n=function(e){return t.call(e)};return function(){var t=this[0];if(t)return Po(e,n,t)}}No.createLayout=No.makeLayout=No.layout;var Wo={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),n=function(e){return e._private.styleCache=null};t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(n)):this.forEach((function(e){n(e),e.connectedEdges().forEach(n)}));return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var n=t.hasCompoundNodes(),i=t.style(),o=this;e=!(!e&&void 0!==e),n&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var r=i.apply(o);return e?r.emitAndNotify("style"):r.emit("style"),this},parsedStyle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],i=n.cy();if(i.styleEnabled()&&n){var o=n._private.style[e];return null!=o?o:t?i.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];return n?t.style().getRenderedStyle(n,e):void 0},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=n.style();if(E(e)){var o=e;i.applyBypass(this,o,!1),this.emitAndNotify("style")}else if(y(e)){if(void 0===t){var r=this[0];return r?i.getStylePropertyValue(r,e):void 0}i.applyBypass(this,e,t,!1),this.emitAndNotify("style")}else if(void 0===e){var s=this[0];return s?i.getRawStyle(s):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=t.style();if(void 0===e)for(var i=0;i<this.length;i++){var o=this[i];n.removeAllBypasses(o,!1)}else{e=e.split(/\s+/);for(var r=0;r<this.length;r++){var s=this[r];n.removeBypasses(s,e,!1)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,o=n.pstyle("opacity").value;if(!t)return o;var r=i.data.parent?n.parents():null;if(r)for(var s=0;s<r.length;s++){o*=r[s].pstyle("opacity").value}return o}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function Ho(e,t){var n=e._private.data.parent?e.parents():null;if(n)for(var i=0;i<n.length;i++){if(!t(n[i]))return!1}return!0}function Uo(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,i=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var o=this[0],r=e.hasCompoundNodes();if(o){var s=o._private;if(!t(o))return!1;if(o.isNode())return!r||Ho(o,i);var a=s.source,l=s.target;return n(a)&&(!r||Ho(a,n))&&(a===l||n(l)&&(!r||Ho(l,n)))}}}var $o=Bo("eleTakesUpSpace",(function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())}));Wo.takesUpSpace=Fo("takesUpSpace",Uo({ok:$o}));var Vo=Bo("eleInteractive",(function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&$o(e)})),Go=Bo("parentInteractive",(function(e){return"visible"===e.pstyle("visibility").value&&$o(e)}));Wo.interactive=Fo("interactive",Uo({ok:Vo,parentOk:Go,edgeOkViaNode:$o})),Wo.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var zo=Bo("eleVisible",(function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&$o(e)})),Xo=$o;Wo.visible=Fo("visible",Uo({ok:zo,edgeOkViaNode:Xo})),Wo.hidden=function(){var e=this[0];if(e)return!e.visible()},Wo.isBundledBezier=Fo("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())})),Wo.bypass=Wo.css=Wo.style,Wo.renderedCss=Wo.renderedStyle,Wo.removeBypass=Wo.removeCss=Wo.removeStyle,Wo.pstyle=Wo.parsedStyle;var jo={};function Ko(e){return function(){var t=arguments,n=[];if(2===t.length){var i=t[0],o=t[1];this.on(e.event,i,o)}else if(1===t.length&&b(t[0])){var r=t[0];this.on(e.event,r)}else if(0===t.length||1===t.length&&T(t[0])){for(var s=1===t.length?t[0]:null,a=0;a<this.length;a++){var l=this[a],c=!e.ableField||l._private[e.ableField],u=l._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(l);if(void 0!==h&&(c=h,!h))return this}c&&(l._private[e.field]=e.value,u&&n.push(l))}var d=this.spawn(n);d.updateStyle(),d.emit(e.event),s&&d.emit(s)}return this}}function Yo(e){jo[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},jo[e.on]=Ko({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),jo[e.off]=Ko({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}Yo({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),Yo({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Yo({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Yo({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),jo.deselect=jo.unselect,jo.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},Yo({field:"active",on:"activate",off:"unactivate"}),Yo({field:"pannable",on:"panify",off:"unpanify"}),jo.inactive=function(){var e=this[0];if(e)return!e._private.active};var qo={},Jo=function(e){return function(t){for(var n=[],i=0;i<this.length;i++){var o=this[i];if(o.isNode()){for(var r=!1,s=o.connectedEdges(),a=0;a<s.length;a++){var l=s[a],c=l.source(),u=l.target();if(e.noIncomingEdges&&u===o&&c!==o||e.noOutgoingEdges&&c===o&&u!==o){r=!0;break}}r||n.push(o)}}return this.spawn(n,{unique:!0}).filter(t)}},Zo=function(e){return function(t){for(var n=[],i=0;i<this.length;i++){var o=this[i];if(o.isNode())for(var r=o.connectedEdges(),s=0;s<r.length;s++){var a=r[s],l=a.source(),c=a.target();e.outgoing&&l===o?(n.push(a),n.push(c)):e.incoming&&c===o&&(n.push(a),n.push(l))}}return this.spawn(n,{unique:!0}).filter(t)}},Qo=function(e){return function(t){for(var n=this,i=[],o={};;){var r=e.outgoing?n.outgoers():n.incomers();if(0===r.length)break;for(var s=!1,a=0;a<r.length;a++){var l=r[a],c=l.id();o[c]||(o[c]=!0,i.push(l),s=!0)}if(!s)break;n=r}return this.spawn(i,{unique:!0}).filter(t)}};function er(e){return function(t){for(var n=[],i=0;i<this.length;i++){var o=this[i]._private[e.attr];o&&n.push(o)}return this.spawn(n,{unique:!0}).filter(t)}}function tr(e){return function(t){var n=[],i=this._private.cy,o=e||{};y(t)&&(t=i.$(t));for(var r=0;r<t.length;r++)for(var s=t[r]._private.edges,a=0;a<s.length;a++){var l=s[a],c=l._private.data,u=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),h=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target);if(u||h){if(o.thisIsSrc||o.thisIsTgt){if(o.thisIsSrc&&!u)continue;if(o.thisIsTgt&&!h)continue}n.push(l)}}return this.spawn(n,{unique:!0})}}function nr(e){return e=H({},{codirected:!1},e),function(t){for(var n=[],i=this.edges(),o=e,r=0;r<i.length;r++)for(var s=i[r]._private,a=s.source,l=a._private.data.id,c=s.data.target,u=a._private.edges,h=0;h<u.length;h++){var d=u[h],p=d._private.data,f=p.target,g=p.source,m=f===c&&g===l,v=l===f&&c===g;(o.codirected&&m||!o.codirected&&(m||v))&&n.push(d)}return this.spawn(n,{unique:!0}).filter(t)}}qo.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},H(qo,{roots:Jo({noIncomingEdges:!0}),leaves:Jo({noOutgoingEdges:!0}),outgoers:Oi(Zo({outgoing:!0}),"outgoers"),successors:Qo({outgoing:!0}),incomers:Oi(Zo({incoming:!0}),"incomers"),predecessors:Qo({incoming:!0})}),H(qo,{neighborhood:Oi((function(e){for(var t=[],n=this.nodes(),i=0;i<n.length;i++)for(var o=n[i],r=o.connectedEdges(),s=0;s<r.length;s++){var a=r[s],l=a.source(),c=a.target(),u=o===l?c:l;u.length>0&&t.push(u[0]),t.push(a[0])}return this.spawn(t,{unique:!0}).filter(e)}),"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),qo.neighbourhood=qo.neighborhood,qo.closedNeighbourhood=qo.closedNeighborhood,qo.openNeighbourhood=qo.openNeighborhood,H(qo,{source:Oi((function(e){var t,n=this[0];return n&&(t=n._private.source||n.cy().collection()),t&&e?t.filter(e):t}),"source"),target:Oi((function(e){var t,n=this[0];return n&&(t=n._private.target||n.cy().collection()),t&&e?t.filter(e):t}),"target"),sources:er({attr:"source"}),targets:er({attr:"target"})}),H(qo,{edgesWith:Oi(tr(),"edgesWith"),edgesTo:Oi(tr({thisIsSrc:!0}),"edgesTo")}),H(qo,{connectedEdges:Oi((function(e){for(var t=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode())for(var o=i._private.edges,r=0;r<o.length;r++){var s=o[r];t.push(s)}}return this.spawn(t,{unique:!0}).filter(e)}),"connectedEdges"),connectedNodes:Oi((function(e){for(var t=[],n=0;n<this.length;n++){var i=this[n];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,{unique:!0}).filter(e)}),"connectedNodes"),parallelEdges:Oi(nr(),"parallelEdges"),codirectedEdges:Oi(nr({codirected:!0}),"codirectedEdges")}),H(qo,{components:function(e){var t=this,n=t.cy(),i=n.collection(),o=null==e?t.nodes():e.nodes(),r=[];null!=e&&o.empty()&&(o=e.sources());var s=function(e,t){i.merge(e),o.unmerge(e),t.merge(e)};if(o.empty())return t.spawn();var a=function(){var e=n.collection();r.push(e);var i=o[0];s(i,e),t.bfs({directed:!1,roots:i,visit:function(t){return s(t,e)}}),e.forEach((function(n){n.connectedEdges().forEach((function(n){t.has(n)&&e.has(n.source())&&e.has(n.target())&&e.merge(n)}))}))};do{a()}while(o.length>0);return r},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),qo.componentsOf=qo.components;var ir=function(e,t,n){for(var i=null!=n?n:fe();e.hasElementWithId(i);)i=fe();return i},or=function(e,t,n){if(void 0!==e&&A(e)){var i=new Ee,o=!1;if(t){if(t.length>0&&E(t[0])&&!C(t[0])){o=!0;for(var r=[],s=new ke,a=0,l=t.length;a<l;a++){var c=t[a];null==c.data&&(c.data={});var u=c.data;if(null==u.id)u.id=ir(e,c);else if(e.hasElementWithId(u.id)||s.has(u.id))continue;var h=new Se(e,c,!1);r.push(h),s.add(u.id)}t=r}}else t=[];this.length=0;for(var d=0,p=t.length;d<p;d++){var f=t[d][0];if(null!=f){var g=f._private.data.id;(null==n||n.unique&&!i.has(g))&&(i.set(g,{index:this.length,ele:f}),this[this.length]=f,this.length++)}}this._private={cy:e,map:i},o&&this.restore()}else ue("A collection must have a reference to the core")},rr=Se.prototype=or.prototype;rr.instanceString=function(){return"collection"},rr.spawn=function(e,t,n){return A(e)||(n=t,t=e,e=this.cy()),new or(e,t,n)},rr.spawnSelf=function(){return this.spawn(this)},rr.cy=function(){return this._private.cy},rr.renderer=function(){return this._private.cy.renderer()},rr.element=function(){return this[0]},rr.collection=function(){return x(this)?this:new or(this._private.cy,[this])},rr.unique=function(){return new or(this._private.cy,this,{unique:!0})},rr.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},rr.getElementById=function(e){e=""+e;var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new or(t)},rr.$id=rr.getElementById,rr.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},rr.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},rr.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},rr.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null!=t){var i=t._private;if(E(e)){if(n.startBatch(),e.data){t.data(e.data);var o=i.data;if(t.isEdge()){var r=!1,s={},a=e.data.source,l=e.data.target;null!=a&&a!=o.source&&(s.source=""+a,r=!0),null!=l&&l!=o.target&&(s.target=""+l,r=!0),r&&(t=t.move(s))}else{var c=e.data.parent;null==c&&null==o.parent||c==o.parent||(void 0===c&&(c=null),null!=c&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var u=function(n,o,r){var s=e[n];null!=s&&s!==i[n]&&(s?t[o]():t[r]())};return u("removed","remove","restore"),u("selected","select","unselect"),u("selectable","selectify","unselectify"),u("locked","lock","unlock"),u("grabbable","grabify","ungrabify"),u("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var h={data:pe(i.data),position:pe(i.position),group:i.group,removed:i.removed,selected:i.selected,selectable:i.selectable,locked:i.locked,grabbable:i.grabbable,pannable:i.pannable,classes:null};h.classes="";var d=0;return i.classes.forEach((function(e){return h.classes+=0==d++?e:" "+e})),h}}},rr.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].json();e.push(n)}return e},rr.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var i=this[n].json(),o=new Se(e,i,!1);t.push(o)}return new or(e,t)},rr.copy=rr.clone,rr.restore=function(){for(var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=this,r=o.cy(),s=r._private,a=[],l=[],c=0,u=o.length;c<u;c++){var h=o[c];i&&!h.removed()||(h.isNode()?a.push(h):l.push(h))}e=a.concat(l);var d=function(){e.splice(t,1),t--};for(t=0;t<e.length;t++){var p=e[t],f=p._private,g=f.data;if(p.clearTraversalCache(),i||f.removed)if(void 0===g.id)g.id=ir(r,p);else if(w(g.id))g.id=""+g.id;else{if(I(g.id)||!y(g.id)){ue("Can not create element with invalid string ID `"+g.id+"`"),d();continue}if(r.hasElementWithId(g.id)){ue("Can not create second element with ID `"+g.id+"`"),d();continue}}else;var m=g.id;if(p.isNode()){var v=f.position;null==v.x&&(v.x=0),null==v.y&&(v.y=0)}if(p.isEdge()){for(var _=p,b=["source","target"],T=b.length,E=!1,k=0;k<T;k++){var S=b[k],C=g[S];w(C)&&(C=g[S]=""+g[S]),null==C||""===C?(ue("Can not create edge `"+m+"` with unspecified "+S),E=!0):r.hasElementWithId(C)||(ue("Can not create edge `"+m+"` with nonexistant "+S+" `"+C+"`"),E=!0)}if(E){d();continue}var x=r.getElementById(g.source),A=r.getElementById(g.target);x.same(A)?x._private.edges.push(_):(x._private.edges.push(_),A._private.edges.push(_)),_._private.source=x,_._private.target=A}f.map=new Ee,f.map.set(m,{ele:p,index:0}),f.removed=!1,i&&r.addToPool(p)}for(var R=0;R<a.length;R++){var O=a[R],M=O._private.data;w(M.parent)&&(M.parent=""+M.parent);var L=M.parent,D=null!=L;if(D){var N=r.getElementById(L);if(N.empty())M.parent=void 0;else{for(var P=!1,B=N;!B.empty();){if(O.same(B)){P=!0,M.parent=void 0;break}B=B.parent()}P||(N[0]._private.children.push(O),O._private.parent=N[0],s.hasCompoundNodes=!0)}}}if(e.length>0){for(var F=new or(r,e),W=0;W<F.length;W++){var H=F[W];H.isNode()||(H.parallelEdges().clearTraversalCache(),H.source().clearTraversalCache(),H.target().clearTraversalCache())}(s.hasCompoundNodes?r.collection().merge(F).merge(F.connectedNodes()).merge(F.parent()):F).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?F.emitAndNotify("add"):i&&F.emit("add")}return o},rr.removed=function(){var e=this[0];return e&&e._private.removed},rr.inside=function(){var e=this[0];return e&&!e._private.removed},rr.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=[],o={},r=n._private.cy;function s(e){for(var t=e._private.edges,n=0;n<t.length;n++)l(t[n])}function a(e){for(var t=e._private.children,n=0;n<t.length;n++)l(t[n])}function l(e){var n=o[e.id()];t&&e.removed()||n||(o[e.id()]=!0,e.isNode()?(i.push(e),s(e),a(e)):i.unshift(e))}for(var c=0,u=n.length;c<u;c++){var h=n[c];l(h)}function d(e,t){var n=e._private.edges;_e(n,t),e.clearTraversalCache()}function p(e){e.clearTraversalCache()}var f=[];function g(e,t){t=t[0];var n=(e=e[0])._private.children,i=e.id();_e(n,t),t._private.parent=null,f.ids[i]||(f.ids[i]=!0,f.push(e))}f.ids={},n.dirtyCompoundBoundsCache(),t&&r.removeFromPool(i);for(var m=0;m<i.length;m++){var v=i[m];if(v.isEdge()){var _=v.source()[0],y=v.target()[0];d(_,v),d(y,v);for(var b=v.parallelEdges(),T=0;T<b.length;T++){var E=b[T];p(E),E.isBundledBezier()&&E.dirtyBoundingBoxCache()}}else{var w=v.parent();0!==w.length&&g(w,v)}t&&(v._private.removed=!0)}var k=r._private.elements;r._private.hasCompoundNodes=!1;for(var S=0;S<k.length;S++){var C=k[S];if(C.isParent()){r._private.hasCompoundNodes=!0;break}}var x=new or(this.cy(),i);x.size()>0&&(e?x.emitAndNotify("remove"):t&&x.emit("remove"));for(var A=0;A<f.length;A++){var R=f[A];t&&R.removed()||R.updateStyle()}return x},rr.move=function(e){var t=this._private.cy,n=this,i=function(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var o=i(e.source),r=i(e.target),s=null!=o&&t.hasElementWithId(o),a=null!=r&&t.hasElementWithId(r);(s||a)&&(t.batch((function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var t=n[e],i=t._private.data;t.isEdge()&&(s&&(i.source=o),a&&(i.target=r))}n.restore(!1,!1)})),n.emitAndNotify("move"))}else if(void 0!==e.parent){var l=i(e.parent);if(null===l||t.hasElementWithId(l)){var c=null===l?void 0:l;t.batch((function(){var e=n.remove(!1,!1);e.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var i=n[t],o=i._private.data;i.isNode()&&(o.parent=c)}e.restore(!1,!1)})),n.emitAndNotify("move")}}return this},[Ln,Gn,zn,Ai,Mi,Wi,Hi,fo,Ro,Io,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Lo,No,Wo,jo,qo].forEach((function(e){H(rr,e)}));var sr={add:function(e){var t,n=this;if(S(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var o=[],r=0;r<i.length;r++){var s=i[r];o.push(s.json())}t=new or(n,o)}}else if(T(e)){t=new or(n,e)}else if(E(e)&&(T(e.nodes)||T(e.edges))){for(var a=e,l=[],c=["nodes","edges"],u=0,h=c.length;u<h;u++){var d=c[u],p=a[d];if(T(p))for(var f=0,g=p.length;f<g;f++){var m=H({group:d},p[f]);l.push(m)}}t=new or(n,l)}else{t=new Se(n,e).collection()}return t},remove:function(e){if(S(e));else if(y(e)){var t=e;e=this.$(t)}return e.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function ar(e,t,n,i){var o=4,r=.001,s=1e-7,a=10,l=11,c=1/(l-1),u="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var d=u?new Float32Array(l):new Array(l);function p(e,t){return 1-3*t+3*e}function f(e,t){return 3*t-6*e}function g(e){return 3*e}function m(e,t,n){return((p(t,n)*e+f(t,n))*e+g(t))*e}function v(e,t,n){return 3*p(t,n)*e*e+2*f(t,n)*e+g(t)}function _(t){for(var i=0,u=1,h=l-1;u!==h&&d[u]<=t;++u)i+=c;--u;var p=i+(t-d[u])/(d[u+1]-d[u])*c,f=v(p,e,n);return f>=r?function(t,i){for(var r=0;r<o;++r){var s=v(i,e,n);if(0===s)return i;i-=(m(i,e,n)-t)/s}return i}(t,p):0===f?p:function(t,i,o){var r,l,c=0;do{(r=m(l=i+(o-i)/2,e,n)-t)>0?o=l:i=l}while(Math.abs(r)>s&&++c<a);return l}(t,i,i+c)}var y=!1;function b(){y=!0,e===t&&n===i||function(){for(var t=0;t<l;++t)d[t]=m(t*c,e,n)}()}var T=function(o){return y||b(),e===t&&n===i?o:0===o?0:1===o?1:m(_(o),t,i)};T.getControlPoints=function(){return[{x:e,y:t},{x:n,y:i}]};var E="generateBezier("+[e,t,n,i]+")";return T.toString=function(){return E},T}
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var lr=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,i){var o={x:t.x+i.dx*n,v:t.v+i.dv*n,tension:t.tension,friction:t.friction};return{dx:o.v,dv:e(o)}}function n(n,i){var o={dx:n.v,dv:e(n)},r=t(n,.5*i,o),s=t(n,.5*i,r),a=t(n,i,s),l=1/6*(o.dx+2*(r.dx+s.dx)+a.dx),c=1/6*(o.dv+2*(r.dv+s.dv)+a.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function e(t,i,o){var r,s,a,l={x:-1,v:0,tension:null,friction:null},c=[0],u=0;for(t=parseFloat(t)||500,i=parseFloat(i)||20,o=o||null,l.tension=t,l.friction=i,s=(r=null!==o)?(u=e(t,i))/o*.016:.016;a=n(a||l,s),c.push(1+a.x),u+=16,Math.abs(a.x)>1e-4&&Math.abs(a.v)>1e-4;);return r?function(e){return c[e*(c.length-1)|0]}:u}}(),cr=function(e,t,n,i){var o=ar(e,t,n,i);return function(e,t,n){return e+(t-e)*o(n)}},ur={linear:function(e,t,n){return e+(t-e)*n},ease:cr(.25,.1,.25,1),"ease-in":cr(.42,0,1,1),"ease-out":cr(0,0,.58,1),"ease-in-out":cr(.42,0,.58,1),"ease-in-sine":cr(.47,0,.745,.715),"ease-out-sine":cr(.39,.575,.565,1),"ease-in-out-sine":cr(.445,.05,.55,.95),"ease-in-quad":cr(.55,.085,.68,.53),"ease-out-quad":cr(.25,.46,.45,.94),"ease-in-out-quad":cr(.455,.03,.515,.955),"ease-in-cubic":cr(.55,.055,.675,.19),"ease-out-cubic":cr(.215,.61,.355,1),"ease-in-out-cubic":cr(.645,.045,.355,1),"ease-in-quart":cr(.895,.03,.685,.22),"ease-out-quart":cr(.165,.84,.44,1),"ease-in-out-quart":cr(.77,0,.175,1),"ease-in-quint":cr(.755,.05,.855,.06),"ease-out-quint":cr(.23,1,.32,1),"ease-in-out-quint":cr(.86,0,.07,1),"ease-in-expo":cr(.95,.05,.795,.035),"ease-out-expo":cr(.19,1,.22,1),"ease-in-out-expo":cr(1,0,0,1),"ease-in-circ":cr(.6,.04,.98,.335),"ease-out-circ":cr(.075,.82,.165,1),"ease-in-out-circ":cr(.785,.135,.15,.86),spring:function(e,t,n){if(0===n)return ur.linear;var i=lr(e,t,n);return function(e,t,n){return e+(t-e)*i(n)}},"cubic-bezier":cr};function hr(e,t,n,i,o){if(1===i)return n;if(t===n)return n;var r=o(t,n,i);return null==e?r:((e.roundValue||e.color)&&(r=Math.round(r)),void 0!==e.min&&(r=Math.max(r,e.min)),void 0!==e.max&&(r=Math.min(r,e.max)),r)}function dr(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function pr(e,t,n,i,o){var r=null!=o?o.type:null;n<0?n=0:n>1&&(n=1);var s=dr(e,o),a=dr(t,o);if(w(s)&&w(a))return hr(r,s,a,n,i);if(T(s)&&T(a)){for(var l=[],c=0;c<a.length;c++){var u=s[c],h=a[c];if(null!=u&&null!=h){var d=hr(r,u,h,n,i);l.push(d)}else l.push(h)}return l}}function fr(e,t,n,i){var o=!i,r=e._private,s=t._private,a=s.easing,l=s.startTime,c=(i?e:e.cy()).style();if(!s.easingImpl)if(null==a)s.easingImpl=ur.linear;else{var u,h,d;if(y(a))u=c.parse("transition-timing-function",a).value;else u=a;y(u)?(h=u,d=[]):(h=u[1],d=u.slice(2).map((function(e){return+e}))),d.length>0?("spring"===h&&d.push(s.duration),s.easingImpl=ur[h].apply(null,d)):s.easingImpl=ur[h]}var p,f=s.easingImpl;if(p=0===s.duration?1:(n-l)/s.duration,s.applying&&(p=s.progress),p<0?p=0:p>1&&(p=1),null==s.delay){var g=s.startPosition,m=s.position;if(m&&o&&!e.locked()){var v={};gr(g.x,m.x)&&(v.x=pr(g.x,m.x,p,f)),gr(g.y,m.y)&&(v.y=pr(g.y,m.y,p,f)),e.position(v)}var _=s.startPan,b=s.pan,T=r.pan,E=null!=b&&i;E&&(gr(_.x,b.x)&&(T.x=pr(_.x,b.x,p,f)),gr(_.y,b.y)&&(T.y=pr(_.y,b.y,p,f)),e.emit("pan"));var w=s.startZoom,k=s.zoom,S=null!=k&&i;S&&(gr(w,k)&&(r.zoom=Qe(r.minZoom,pr(w,k,p,f),r.maxZoom)),e.emit("zoom")),(E||S)&&e.emit("viewport");var C=s.style;if(C&&C.length>0&&o){for(var x=0;x<C.length;x++){var A=C[x],R=A.name,I=A,O=s.startStyle[R],M=pr(O,I,p,f,c.properties[O.name]);c.overrideBypass(e,R,M)}e.emit("style")}}return s.progress=p,p}function gr(e,t){return null!=e&&null!=t&&(!(!w(e)||!w(t))||!(!e||!t))}function mr(e,t,n,i){var o=t._private;o.started=!0,o.startTime=n-o.progress*o.duration}function vr(e,t){var n=t._private.aniEles,i=[];function o(t,n){var o=t._private,r=o.animation.current,s=o.animation.queue,a=!1;if(!n&&"none"===t.pstyle("display").value){r=r.splice(0,r.length).concat(s.splice(0,s.length));for(var l=0;l<r.length;l++)r[l].stop()}if(0===r.length){var c=s.shift();c&&r.push(c)}for(var u=function(e){for(var t=e.length-1;t>=0;t--){(0,e[t])()}e.splice(0,e.length)},h=r.length-1;h>=0;h--){var d=r[h],p=d._private;p.stopped?(r.splice(h,1),p.hooked=!1,p.playing=!1,p.started=!1,u(p.frames)):(p.playing||p.applying)&&(p.playing&&p.applying&&(p.applying=!1),p.started||mr(0,d,e),fr(t,d,e,n),p.applying&&(p.applying=!1),u(p.frames),null!=p.step&&p.step(e),d.completed()&&(r.splice(h,1),p.hooked=!1,p.playing=!1,p.started=!1,u(p.completes)),a=!0)}return n||0!==r.length||0!==s.length||i.push(t),a}for(var r=!1,s=0;s<n.length;s++){var a=o(n[s]);r=r||a}var l=o(t,!0);(r||l)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(i),t.emit("step")}var _r={animate:Vn.animate(),animation:Vn.animation(),animated:Vn.animated(),clearQueue:Vn.clearQueue(),delay:Vn.delay(),delayAnimation:Vn.delayAnimation(),stop:Vn.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender((function(t,n){vr(n,e)}),t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&K((function(n){vr(n,e),t()}))}()}}},yr={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return null==i||e!==n.target&&C(n.target)&&i.matches(n.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e}},br=function(e){return y(e)?new Ci(e):e},Tr={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Eo(yr,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,br(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,br(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,br(t),n),this},once:function(e,t,n){return this.emitter().one(e,br(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Vn.eventAliasesOn(Tr);var Er={png:function(e){return e=e||{},this._private.renderer.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};Er.jpeg=Er.jpg;var wr={layout:function(e){if(null!=e)if(null!=e.name){var t=e.name,n=this.extension("layout",t);if(null!=n){var i;i=y(e.eles)?this.$(e.eles):null!=e.eles?e.eles:this.$();var o=new n(H({},e,{cy:this,eles:i}));return o}ue("No such layout `"+t+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else ue("A `name` must be specified to make a layout");else ue("Layout options must be specified to make a layout")}};wr.createLayout=wr.makeLayout=wr.layout;var kr={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();null!=t&&i.merge(t)}else if(n.notificationsEnabled){var o=this.renderer();!this.destroyed()&&o&&o.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach((function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)}))}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch((function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],r=e[o];t.getElementById(o).data(r)}}))}},Sr=ve({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Cr={renderTo:function(e,t,n,i){return this._private.renderer.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this.extension("renderer",e.name);if(null!=t){void 0!==e.wheelSensitivity&&de("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=Sr(e);n.cy=this,this._private.renderer=new t(n),this.notify("init")}else ue("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var e=this.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach((function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]}))},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Cr.invalidateDimensions=Cr.resize;var xr={collection:function(e,t){return y(e)?this.$(e):S(e)?e.collection():T(e)?new or(this,e,t):new or(this)},nodes:function(e){var t=this.$((function(e){return e.isNode()}));return e?t.filter(e):t},edges:function(e){var t=this.$((function(e){return e.isEdge()}));return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};xr.elements=xr.filter=xr.$;var Ar={};Ar.apply=function(e){var t=this._private,n=t.cy.collection();t.newStyle&&(t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0));for(var i=0;i<e.length;i++){var o=e[i],r=this.getContextMeta(o);if(!r.empty){var s=this.getContextStyle(r),a=this.applyContextStyle(r,s,o);t.newStyle||this.updateTransitions(o,a.diffProps),this.updateStyleHints(o)&&n.merge(o)}}return t.newStyle=!1,n},Ar.getPropertiesDiff=function(e,t){var n=this._private.propDiffs=this._private.propDiffs||{},i=e+"-"+t,o=n[i];if(o)return o;for(var r=[],s={},a=0;a<this.length;a++){var l=this[a],c="t"===e[a],u="t"===t[a],h=c!==u,d=l.mappedProperties.length>0;if(h||u&&d){var p=void 0;h&&d?p=l.properties:h?p=l.properties:d&&(p=l.mappedProperties);for(var f=0;f<p.length;f++){for(var g=p[f],m=g.name,v=!1,_=a+1;_<this.length;_++){var y=this[_];if("t"===t[_]&&(v=null!=y.properties[g.name]))break}s[m]||v||(s[m]=!0,r.push(m))}}}return n[i]=r,r},Ar.getContextMeta=function(e){var t,n="",i=e._private.styleCxtKey||"";this._private.newStyle&&(i="");for(var o=0;o<this.length;o++){var r=this[o];n+=r.selector&&r.selector.matches(e)?"t":"f"}return t=this.getPropertiesDiff(i,n),e._private.styleCxtKey=n,{key:n,diffPropNames:t,empty:0===t.length}},Ar.getContextStyle=function(e){var t=e.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];for(var i={_private:{key:t}},o=0;o<this.length;o++){var r=this[o];if("t"===t[o])for(var s=0;s<r.properties.length;s++){var a=r.properties[s];i[a.name]=a}}return n[t]=i,i},Ar.applyContextStyle=function(e,t,n){for(var i=e.diffPropNames,o={},r=this.types,s=0;s<i.length;s++){var a=i[s],l=t[a],c=n.pstyle(a);if(!l){if(!c)continue;l=c.bypass?{name:a,deleteBypassed:!0}:{name:a,delete:!0}}if(c!==l){if(l.mapped===r.fn&&null!=c&&null!=c.mapping&&c.mapping.value===l.value){var u=c.mapping;if((u.fnValue=l.value(n))===u.prevFnValue)continue}var h=o[a]={prev:c};this.applyParsedProperty(n,l),h.next=n.pstyle(a),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:o}},Ar.updateStyleHints=function(e){var t=e._private,n=this,i=n.propertyGroupNames,o=n.propertyGroupKeys,r=function(e,t,i){return n.getPropertiesHash(e,t,i)},s=t.styleKey;if(e.removed())return!1;var a="nodes"===t.group,l=e._private.style;i=Object.keys(l);for(var c=0;c<o.length;c++){var u=o[c];t.styleKeys[u]=0}for(var h=function(e,n){return t.styleKeys[n]=J(e,t.styleKeys[n])},d=function(e,t){for(var n=0;n<e.length;n++)h(e.charCodeAt(n),t)},p=function(e){return-128<e&&e<128&&Math.floor(e)!==e?2e9-(1024*e|0):e},f=0;f<i.length;f++){var g=i[f],m=l[g];if(null!=m){var v=this.properties[g],_=v.type,y=v.groupKey,b=void 0;null!=v.hashOverride?b=v.hashOverride(e,m):null!=m.pfValue&&(b=m.pfValue);var T=null==v.enums?m.value:null,E=null!=b,w=E||null!=T,k=m.units;if(_.number&&w){var S=E?b:T;if(_.multiple)for(var C=0;C<S.length;C++)h(p(S[C]),y);else h(p(S),y);E||null==k||d(k,y)}else d(m.strValue,y)}}for(var x=0,A=0;A<o.length;A++){var R=o[A],I=t.styleKeys[R];x=J(I,x)}t.styleKey=x;var O=t.labelDimsKey=t.styleKeys.labelDimensions;if(t.labelKey=r(e,["label"],O),t.labelStyleKey=J(t.styleKeys.commonLabel,t.labelKey),a||(t.sourceLabelKey=r(e,["source-label"],O),t.sourceLabelStyleKey=J(t.styleKeys.commonLabel,t.sourceLabelKey),t.targetLabelKey=r(e,["target-label"],O),t.targetLabelStyleKey=J(t.styleKeys.commonLabel,t.targetLabelKey)),a){var M=t.styleKeys,L=M.nodeBody,D=M.nodeBorder,N=M.backgroundImage,P=M.compound,B=M.pie;t.nodeKey=Z([D,N,P,B],L),t.hasPie=0!=B}return s!==t.styleKey},Ar.clearStyleHints=function(e){var t=e._private;t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},Ar.applyParsedProperty=function(e,t){var n,i=this,o=t,r=e._private.style,s=i.types,a=i.properties[o.name].type,l=o.bypass,c=r[o.name],u=c&&c.bypass,h=e._private,d=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},p=function(){var t=d(c),n=d(o);i.checkTriggers(e,o.name,t,n)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(o=t=this.parse(t.name,"bezier",l)),o.delete)return r[o.name]=void 0,p(),!0;if(o.deleteBypassed)return c?!!c.bypass&&(c.bypassed=void 0,p(),!0):(p(),!0);if(o.deleteBypass)return c?!!c.bypass&&(r[o.name]=c.bypassed,p(),!0):(p(),!0);var f=function(){de("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case s.mapData:for(var g,m=o.field.split("."),v=h.data,_=0;_<m.length&&v;_++){v=v[m[_]]}if(null==v)return f(),!1;if(!w(v))return de("Do not use continuous mappers without specifying numeric data (i.e. `"+o.field+": "+v+"` for `"+e.id()+"` is non-numeric)"),!1;var y=o.fieldMax-o.fieldMin;if((g=0===y?0:(v-o.fieldMin)/y)<0?g=0:g>1&&(g=1),a.color){var b=o.valueMin[0],T=o.valueMax[0],E=o.valueMin[1],k=o.valueMax[1],S=o.valueMin[2],C=o.valueMax[2],x=null==o.valueMin[3]?1:o.valueMin[3],A=null==o.valueMax[3]?1:o.valueMax[3],R=[Math.round(b+(T-b)*g),Math.round(E+(k-E)*g),Math.round(S+(C-S)*g),Math.round(x+(A-x)*g)];n={bypass:o.bypass,name:o.name,value:R,strValue:"rgb("+R[0]+", "+R[1]+", "+R[2]+")"}}else{if(!a.number)return!1;var I=o.valueMin+(o.valueMax-o.valueMin)*g;n=this.parse(o.name,I,o.bypass,"mapping")}if(!n)return f(),!1;n.mapping=o,o=n;break;case s.data:for(var O=o.field.split("."),M=h.data,L=0;L<O.length&&M;L++){M=M[O[L]]}if(null!=M&&(n=this.parse(o.name,M,o.bypass,"mapping")),!n)return f(),!1;n.mapping=o,o=n;break;case s.fn:var D=o.value,N=null!=o.fnValue?o.fnValue:D(e);if(o.prevFnValue=N,null==N)return de("Custom function mappers may not return null (i.e. `"+o.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(n=this.parse(o.name,N,o.bypass,"mapping")))return de("Custom function mappers may not return invalid values for the property type (i.e. `"+o.name+"` for ele `"+e.id()+"` is invalid)"),!1;n.mapping=pe(o),o=n;break;case void 0:break;default:return!1}return l?(o.bypassed=u?c.bypassed:c,r[o.name]=o):u?c.bypassed=o:r[o.name]=o,p(),!0},Ar.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(this.clearStyleHints(i),i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),t)for(var o=i._private.style,r=Object.keys(o),s=0;s<r.length;s++){var a=r[s],l=o[a];null!=l&&(l.bypass?l.bypassed=null:o[a]=null)}else i._private.style={}}},Ar.update=function(){this._private.cy.mutableElements().updateStyle()},Ar.updateTransitions=function(e,t){var n=this,i=e._private,o=e.pstyle("transition-property").value,r=e.pstyle("transition-duration").pfValue,s=e.pstyle("transition-delay").pfValue;if(o.length>0&&r>0){for(var a={},l=!1,c=0;c<o.length;c++){var u=o[c],h=e.pstyle(u),d=t[u];if(d){var p=d.prev,f=null!=d.next?d.next:h,g=!1,m=void 0;p&&(w(p.pfValue)&&w(f.pfValue)?(g=f.pfValue-p.pfValue,m=p.pfValue+1e-6*g):w(p.value)&&w(f.value)?(g=f.value-p.value,m=p.value+1e-6*g):T(p.value)&&T(f.value)&&(g=p.value[0]!==f.value[0]||p.value[1]!==f.value[1]||p.value[2]!==f.value[2],m=p.strValue),g&&(a[u]=f.strValue,this.applyBypass(e,u,m),l=!0))}}if(!l)return;i.transitioning=!0,new Hn((function(t){s>0?e.delayAnimation(s).play().promise().then(t):t()})).then((function(){return e.animation({style:a,duration:r,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){n.removeBypasses(e,o),e.emitAndNotify("style"),i.transitioning=!1}))}else i.transitioning&&(this.removeBypasses(e,o),e.emitAndNotify("style"),i.transitioning=!1)},Ar.checkTrigger=function(e,t,n,i,o,r){var s=this.properties[t],a=o(s);null!=a&&a(n,i)&&r(s)},Ar.checkZOrderTrigger=function(e,t,n,i){var o=this;this.checkTrigger(e,t,n,i,(function(e){return e.triggersZOrder}),(function(){o._private.cy.notify("zorder",e)}))},Ar.checkBoundsTrigger=function(e,t,n,i){this.checkTrigger(e,t,n,i,(function(e){return e.triggersBounds}),(function(o){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),"bezier"!==e.pstyle("curve-style").value&&("curve-style"!==t||"bezier"!==n&&"bezier"!==i)||!o.triggersBoundsOfParallelBeziers||e.parallelEdges().forEach((function(e){e.isBundledBezier()&&e.dirtyBoundingBoxCache()}))}))},Ar.checkTriggers=function(e,t,n,i){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,i),this.checkBoundsTrigger(e,t,n,i)};var Rr={applyBypass:function(e,t,n,i){var o=[];if("*"===t||"**"===t){if(void 0!==n)for(var r=0;r<this.properties.length;r++){var s=this.properties[r].name,a=this.parse(s,n,!0);a&&o.push(a)}}else if(y(t)){var l=this.parse(t,n,!0);l&&o.push(l)}else{if(!E(t))return!1;var c=t;i=n;for(var u=Object.keys(c),h=0;h<u.length;h++){var d=u[h],p=c[d];if(void 0===p&&(p=c[N(d)]),void 0!==p){var f=this.parse(d,p,!0);f&&o.push(f)}}}if(0===o.length)return!1;for(var g=!1,m=0;m<e.length;m++){for(var v=e[m],_={},b=void 0,T=0;T<o.length;T++){var w=o[T];if(i){var k=v.pstyle(w.name);b=_[w.name]={prev:k}}g=this.applyParsedProperty(v,w)||g,i&&(b.next=v.pstyle(w.name))}g&&this.updateStyleHints(v),i&&this.updateTransitions(v,_,!0)}return g},overrideBypass:function(e,t,n){t=D(t);for(var i=0;i<e.length;i++){var o=e[i],r=o._private.style[t],s=this.properties[t].type,a=s.color,l=s.mutiple,c=r?null!=r.pfValue?r.pfValue:r.value:null;r&&r.bypass?(r.value=n,null!=r.pfValue&&(r.pfValue=n),r.strValue=a?"rgb("+n.join(",")+")":l?n.join(" "):""+n,this.updateStyleHints(o)):this.applyBypass(o,t,n),this.checkTriggers(o,t,c,n)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,n){for(var i=0;i<e.length;i++){for(var o=e[i],r={},s=0;s<t.length;s++){var a=t[s],l=this.properties[a],c=o.pstyle(l.name);if(c&&c.bypass){var u=this.parse(a,"",!0),h=r[l.name]={prev:c};this.applyParsedProperty(o,u),h.next=o.pstyle(l.name)}}this.updateStyleHints(o),n&&this.updateTransitions(o,r,!0)}}},Ir={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy.container();if(d&&t&&d.getComputedStyle)return d.getComputedStyle(t).getPropertyValue(e)}},Or={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){if(e=e[0]){for(var n={},i=0;i<this.properties.length;i++){var o=this.properties[i],r=this.getStylePropertyValue(e,o.name,t);null!=r&&(n[o.name]=r,n[N(o.name)]=r)}return n}},getIndexedStyle:function(e,t,n,i){var o=e.pstyle(t)[n][i];return null!=o?o:e.cy().style().getDefaultProperty(t)[n][0]},getStylePropertyValue:function(e,t,n){if(e=e[0]){var i=this.properties[t];i.alias&&(i=i.pointsTo);var o=i.type,r=e.pstyle(i.name);if(r){var s=r.value,a=r.units,l=r.strValue;if(n&&o.number&&null!=s&&w(s)){var c=e.cy().zoom(),u=function(e){return e*c},h=function(e,t){return u(e)+t},d=T(s);return(d?a.every((function(e){return null!=e})):null!=a)?d?s.map((function(e,t){return h(e,a[t])})).join(" "):h(s,a):d?s.map((function(e){return y(e)?e:""+u(e)})).join(" "):""+u(s)}if(null!=l)return l}return null}},getAnimationStartStyle:function(e,t){for(var n={},i=0;i<t.length;i++){var o=t[i].name,r=e.pstyle(o);void 0!==r&&(r=E(r)?this.parse(o,r.strValue):this.parse(o,r)),r&&(n[o]=r)}return n},getPropsList:function(e){var t=[],n=e,i=this.properties;if(n)for(var o=Object.keys(n),r=0;r<o.length;r++){var s=o[r],a=n[s],l=i[s]||i[D(s)],c=this.parse(l.name,a);c&&t.push(c)}return t},getNonDefaultPropertiesHash:function(e,t,n){var i,o,r,s,a,l,c=n;for(a=0;a<t.length;a++)if(i=t[a],null!=(o=e.pstyle(i,!1)))if(null!=o.pfValue)c=J(s,c);else for(r=o.strValue,l=0;l<r.length;l++)s=r.charCodeAt(l),c=J(s,c);return c}};Or.getPropertiesHash=Or.getNonDefaultPropertiesHash;var Mr={appendFromJson:function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.selector,o=n.style||n.css,r=Object.keys(o);this.selector(i);for(var s=0;s<r.length;s++){var a=r[s],l=o[a];this.css(a,l)}}return this},fromJson:function(e){return this.resetToDefault(),this.appendFromJson(e),this},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],i=n.selector,o=n.properties,r={},s=0;s<o.length;s++){var a=o[s];r[a.name]=a.strValue}e.push({selector:i?i.toString():"core",style:r})}return e}},Lr={appendFromString:function(e){var t,n,i,o=""+e;function r(){o=o.length>t.length?o.substr(t.length):""}function s(){n=n.length>i.length?n.substr(i.length):""}for(o=o.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(o.match(/^\s*$/))break;var a=o.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!a){de("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+o);break}t=a[0];var l=a[1];if("core"!==l)if(new Ci(l).invalid){de("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),r();continue}var c=a[2],u=!1;n=c;for(var h=[];;){if(n.match(/^\s*$/))break;var d=n.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!d){de("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+c),u=!0;break}i=d[0];var p=d[1],f=d[2];if(this.properties[p])this.parse(p,f)?(h.push({name:p,val:f}),s()):(de("Skipping property: Invalid property definition in: "+i),s());else de("Skipping property: Invalid property name in: "+i),s()}if(u){r();break}this.selector(l);for(var g=0;g<h.length;g++){var m=h[g];this.css(m.name,m.val)}r()}return this},fromString:function(e){return this.resetToDefault(),this.appendFromString(e),this}},Dr={};!function(){var e=F,t=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},n=function(t){var n=e+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+t+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+n+")\\s*\\,\\s*("+n+")\\)$"},i=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Dr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:t("data")},layoutData:{mapping:!0,regex:t("layoutData")},scratch:{mapping:!0,regex:t("scratch")},mapData:{mapping:!0,regex:n("mapData")},mapLayoutData:{mapping:!0,regex:n("mapLayoutData")},mapScratch:{mapping:!0,regex:n("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:i,singleRegexMatchValue:!0},urls:{regexes:i,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return y(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(e){var t=e.length;return 1===t||2===t||4===t}}};var o={zeroNonZero:function(e,t){return(null==e||null==t)&&e!==t||(0==e&&0!=t||0!=e&&0==t)},any:function(e,t){return e!=t}},r=Dr.types,s=[{name:"label",type:r.text,triggersBounds:o.any},{name:"text-rotation",type:r.textRotation,triggersBounds:o.any},{name:"text-margin-x",type:r.bidirectionalSize,triggersBounds:o.any},{name:"text-margin-y",type:r.bidirectionalSize,triggersBounds:o.any}],a=[{name:"source-label",type:r.text,triggersBounds:o.any},{name:"source-text-rotation",type:r.textRotation,triggersBounds:o.any},{name:"source-text-margin-x",type:r.bidirectionalSize,triggersBounds:o.any},{name:"source-text-margin-y",type:r.bidirectionalSize,triggersBounds:o.any},{name:"source-text-offset",type:r.size,triggersBounds:o.any}],l=[{name:"target-label",type:r.text,triggersBounds:o.any},{name:"target-text-rotation",type:r.textRotation,triggersBounds:o.any},{name:"target-text-margin-x",type:r.bidirectionalSize,triggersBounds:o.any},{name:"target-text-margin-y",type:r.bidirectionalSize,triggersBounds:o.any},{name:"target-text-offset",type:r.size,triggersBounds:o.any}],c=[{name:"font-family",type:r.fontFamily,triggersBounds:o.any},{name:"font-style",type:r.fontStyle,triggersBounds:o.any},{name:"font-weight",type:r.fontWeight,triggersBounds:o.any},{name:"font-size",type:r.size,triggersBounds:o.any},{name:"text-transform",type:r.textTransform,triggersBounds:o.any},{name:"text-wrap",type:r.textWrap,triggersBounds:o.any},{name:"text-overflow-wrap",type:r.textOverflowWrap,triggersBounds:o.any},{name:"text-max-width",type:r.size,triggersBounds:o.any},{name:"text-outline-width",type:r.size,triggersBounds:o.any},{name:"line-height",type:r.positiveNumber,triggersBounds:o.any}],u=[{name:"text-valign",type:r.valign,triggersBounds:o.any},{name:"text-halign",type:r.halign,triggersBounds:o.any},{name:"color",type:r.color},{name:"text-outline-color",type:r.color},{name:"text-outline-opacity",type:r.zeroOneNumber},{name:"text-background-color",type:r.color},{name:"text-background-opacity",type:r.zeroOneNumber},{name:"text-background-padding",type:r.size,triggersBounds:o.any},{name:"text-border-opacity",type:r.zeroOneNumber},{name:"text-border-color",type:r.color},{name:"text-border-width",type:r.size,triggersBounds:o.any},{name:"text-border-style",type:r.borderStyle,triggersBounds:o.any},{name:"text-background-shape",type:r.textBackgroundShape,triggersBounds:o.any},{name:"text-justification",type:r.justification}],h=[{name:"events",type:r.bool},{name:"text-events",type:r.bool}],d=[{name:"display",type:r.display,triggersZOrder:o.any,triggersBounds:o.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:r.visibility,triggersZOrder:o.any},{name:"opacity",type:r.zeroOneNumber,triggersZOrder:o.zeroNonZero},{name:"text-opacity",type:r.zeroOneNumber},{name:"min-zoomed-font-size",type:r.size},{name:"z-compound-depth",type:r.zCompoundDepth,triggersZOrder:o.any},{name:"z-index-compare",type:r.zIndexCompare,triggersZOrder:o.any},{name:"z-index",type:r.nonNegativeInt,triggersZOrder:o.any}],p=[{name:"overlay-padding",type:r.size,triggersBounds:o.any},{name:"overlay-color",type:r.color},{name:"overlay-opacity",type:r.zeroOneNumber,triggersBounds:o.zeroNonZero}],f=[{name:"transition-property",type:r.propList},{name:"transition-duration",type:r.time},{name:"transition-delay",type:r.time},{name:"transition-timing-function",type:r.easing}],g=function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},m=[{name:"height",type:r.nodeSize,triggersBounds:o.any,hashOverride:g},{name:"width",type:r.nodeSize,triggersBounds:o.any,hashOverride:g},{name:"shape",type:r.nodeShape,triggersBounds:o.any},{name:"shape-polygon-points",type:r.polygonPointList,triggersBounds:o.any},{name:"background-color",type:r.color},{name:"background-fill",type:r.fill},{name:"background-opacity",type:r.zeroOneNumber},{name:"background-blacken",type:r.nOneOneNumber},{name:"background-gradient-stop-colors",type:r.colors},{name:"background-gradient-stop-positions",type:r.percentages},{name:"background-gradient-direction",type:r.gradientDirection},{name:"padding",type:r.sizeMaybePercent,triggersBounds:o.any},{name:"padding-relative-to",type:r.paddingRelativeTo,triggersBounds:o.any},{name:"bounds-expansion",type:r.boundsExpansion,triggersBounds:o.any}],v=[{name:"border-color",type:r.color},{name:"border-opacity",type:r.zeroOneNumber},{name:"border-width",type:r.size,triggersBounds:o.any},{name:"border-style",type:r.borderStyle}],_=[{name:"background-image",type:r.urls},{name:"background-image-crossorigin",type:r.bgCrossOrigin},{name:"background-image-opacity",type:r.zeroOneNumbers},{name:"background-position-x",type:r.bgPos},{name:"background-position-y",type:r.bgPos},{name:"background-width-relative-to",type:r.bgRelativeTo},{name:"background-height-relative-to",type:r.bgRelativeTo},{name:"background-repeat",type:r.bgRepeat},{name:"background-fit",type:r.bgFit},{name:"background-clip",type:r.bgClip},{name:"background-width",type:r.bgWH},{name:"background-height",type:r.bgWH},{name:"background-offset-x",type:r.bgPos},{name:"background-offset-y",type:r.bgPos}],b=[{name:"position",type:r.position,triggersBounds:o.any},{name:"compound-sizing-wrt-labels",type:r.compoundIncludeLabels,triggersBounds:o.any},{name:"min-width",type:r.size,triggersBounds:o.any},{name:"min-width-bias-left",type:r.sizeMaybePercent,triggersBounds:o.any},{name:"min-width-bias-right",type:r.sizeMaybePercent,triggersBounds:o.any},{name:"min-height",type:r.size,triggersBounds:o.any},{name:"min-height-bias-top",type:r.sizeMaybePercent,triggersBounds:o.any},{name:"min-height-bias-bottom",type:r.sizeMaybePercent,triggersBounds:o.any}],T=[{name:"line-style",type:r.lineStyle},{name:"line-color",type:r.color},{name:"line-fill",type:r.fill},{name:"line-cap",type:r.lineCap},{name:"line-dash-pattern",type:r.numbers},{name:"line-dash-offset",type:r.number},{name:"line-gradient-stop-colors",type:r.colors},{name:"line-gradient-stop-positions",type:r.percentages},{name:"curve-style",type:r.curveStyle,triggersBounds:o.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:r.zeroOneNumber,triggersBounds:o.any},{name:"source-endpoint",type:r.edgeEndpoint,triggersBounds:o.any},{name:"target-endpoint",type:r.edgeEndpoint,triggersBounds:o.any},{name:"control-point-step-size",type:r.size,triggersBounds:o.any},{name:"control-point-distances",type:r.bidirectionalSizes,triggersBounds:o.any},{name:"control-point-weights",type:r.numbers,triggersBounds:o.any},{name:"segment-distances",type:r.bidirectionalSizes,triggersBounds:o.any},{name:"segment-weights",type:r.numbers,triggersBounds:o.any},{name:"taxi-turn",type:r.bidirectionalSizeMaybePercent,triggersBounds:o.any},{name:"taxi-turn-min-distance",type:r.size,triggersBounds:o.any},{name:"taxi-direction",type:r.axisDirection,triggersBounds:o.any},{name:"edge-distances",type:r.edgeDistances,triggersBounds:o.any},{name:"arrow-scale",type:r.positiveNumber,triggersBounds:o.any},{name:"loop-direction",type:r.angle,triggersBounds:o.any},{name:"loop-sweep",type:r.angle,triggersBounds:o.any},{name:"source-distance-from-node",type:r.size,triggersBounds:o.any},{name:"target-distance-from-node",type:r.size,triggersBounds:o.any}],E=[{name:"ghost",type:r.bool,triggersBounds:o.any},{name:"ghost-offset-x",type:r.bidirectionalSize,triggersBounds:o.any},{name:"ghost-offset-y",type:r.bidirectionalSize,triggersBounds:o.any},{name:"ghost-opacity",type:r.zeroOneNumber}],w=[{name:"selection-box-color",type:r.color},{name:"selection-box-opacity",type:r.zeroOneNumber},{name:"selection-box-border-color",type:r.color},{name:"selection-box-border-width",type:r.size},{name:"active-bg-color",type:r.color},{name:"active-bg-opacity",type:r.zeroOneNumber},{name:"active-bg-size",type:r.size},{name:"outside-texture-bg-color",type:r.color},{name:"outside-texture-bg-opacity",type:r.zeroOneNumber}],k=[];Dr.pieBackgroundN=16,k.push({name:"pie-size",type:r.sizeMaybePercent});for(var S=1;S<=Dr.pieBackgroundN;S++)k.push({name:"pie-"+S+"-background-color",type:r.color}),k.push({name:"pie-"+S+"-background-size",type:r.percent}),k.push({name:"pie-"+S+"-background-opacity",type:r.zeroOneNumber});var C=[],x=Dr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:r.arrowShape,triggersBounds:o.any},{name:"arrow-color",type:r.color},{name:"arrow-fill",type:r.arrowFill}].forEach((function(e){x.forEach((function(t){var n=t+"-"+e.name,i=e.type,o=e.triggersBounds;C.push({name:n,type:i,triggersBounds:o})}))}),{});var A=Dr.properties=[].concat(h,f,d,p,E,u,c,s,a,l,m,v,_,k,b,T,C,w),R=Dr.propertyGroups={behavior:h,transition:f,visibility:d,overlay:p,ghost:E,commonLabel:u,labelDimensions:c,mainLabel:s,sourceLabel:a,targetLabel:l,nodeBody:m,nodeBorder:v,backgroundImage:_,pie:k,compound:b,edgeLine:T,edgeArrow:C,core:w},I=Dr.propertyGroupNames={};(Dr.propertyGroupKeys=Object.keys(R)).forEach((function(e){I[e]=R[e].map((function(e){return e.name})),R[e].forEach((function(t){return t.groupKey=e}))}));var O=Dr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Dr.propertyNames=A.map((function(e){return e.name}));for(var M=0;M<A.length;M++){var L=A[M];A[L.name]=L}for(var D=0;D<O.length;D++){var N=O[D],P=A[N.pointsTo],B={name:N.name,alias:!0,pointsTo:P};A.push(B),A[N.name]=B}}(),Dr.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},Dr.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=H({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(e,t){for(var n=1;n<=Dr.pieBackgroundN;n++){var i=t.name.replace("{{i}}",n),o=t.value;e[i]=o}return e}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce((function(e,t){return Dr.arrowPrefixes.forEach((function(n){var i=n+"-"+t.name,o=t.value;e[i]=o})),e}),{})),n={},i=0;i<this.properties.length;i++){var o=this.properties[i];if(!o.pointsTo){var r=o.name,s=t[r],a=this.parse(r,s);n[r]=a}}return e.defaultProperties=n,e.defaultProperties},Dr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Nr={parse:function(e,t,n,i){if(b(t))return this.parseImplWarn(e,t,n,i);var o,r=ee(e,""+t,n?"t":"f","mapping"===i||!0===i||!1===i||null==i?"dontcare":i),s=this.propCache=this.propCache||[];return(o=s[r])||(o=s[r]=this.parseImplWarn(e,t,n,i)),(n||"mapping"===i)&&(o=pe(o))&&(o.value=pe(o.value)),o},parseImplWarn:function(e,t,n,i){var o=this.parseImpl(e,t,n,i);return o||null==t||de("The style property `".concat(e,": ").concat(t,"` is invalid")),o}};Nr.parseImpl=function(e,t,n,i){e=D(e);var o=this.properties[e],r=t,s=this.types;if(!o)return null;if(void 0===t)return null;o.alias&&(o=o.pointsTo,e=o.name);var a=y(t);a&&(t=t.trim());var l,c,u=o.type;if(!u)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(b(t))return{name:e,value:t,strValue:"fn",mapped:s.fn,bypass:n};if(!a||i||t.length<7||"a"!==t[1]);else{if(t.length>=7&&"d"===t[0]&&(l=new RegExp(s.data.regex).exec(t))){if(n)return!1;var h=s.data;return{name:e,value:l,strValue:""+t,mapped:h,field:l[1],bypass:n}}if(t.length>=10&&"m"===t[0]&&(c=new RegExp(s.mapData.regex).exec(t))){if(n)return!1;if(u.multiple)return!1;var d=s.mapData;if(!u.color&&!u.number)return!1;var p=this.parse(e,c[4]);if(!p||p.mapped)return!1;var f=this.parse(e,c[5]);if(!f||f.mapped)return!1;if(p.pfValue===f.pfValue||p.strValue===f.strValue)return de("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+p.strValue+"`"),this.parse(e,p.strValue);if(u.color){var g=p.value,m=f.value;if(!(g[0]!==m[0]||g[1]!==m[1]||g[2]!==m[2]||g[3]!==m[3]&&(null!=g[3]&&1!==g[3]||null!=m[3]&&1!==m[3])))return!1}return{name:e,value:c,strValue:""+t,mapped:d,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:p.value,valueMax:f.value,bypass:n}}}if(u.multiple&&"multiple"!==i){var v;if(v=a?t.split(/\s+/):T(t)?t:[t],u.evenMultiple&&v.length%2!=0)return null;for(var _=[],E=[],k=[],S="",C=!1,x=0;x<v.length;x++){var A=this.parse(e,v[x],n,"multiple");C=C||y(A.value),_.push(A.value),k.push(null!=A.pfValue?A.pfValue:A.value),E.push(A.units),S+=(x>0?" ":"")+A.strValue}return u.validate&&!u.validate(_,E)?null:u.singleEnum&&C?1===_.length&&y(_[0])?{name:e,value:_[0],strValue:_[0],bypass:n}:null:{name:e,value:_,pfValue:k,strValue:S,bypass:n,units:E}}var R,I,O=function(){for(var i=0;i<u.enums.length;i++){if(u.enums[i]===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(u.number){var M,L="px";if(u.units&&(M=u.units),u.implicitUnits&&(L=u.implicitUnits),!u.unitless)if(a){var N="px|em"+(u.allowPercent?"|\\%":"");M&&(N=M);var P=t.match("^("+F+")("+N+")?$");P&&(t=P[1],M=P[2]||L)}else M&&!u.implicitUnits||(M=L);if(t=parseFloat(t),isNaN(t)&&void 0===u.enums)return null;if(isNaN(t)&&void 0!==u.enums)return t=r,O();if(u.integer&&(!w(I=t)||Math.floor(I)!==I))return null;if(void 0!==u.min&&(t<u.min||u.strictMin&&t===u.min)||void 0!==u.max&&(t>u.max||u.strictMax&&t===u.max))return null;var B={name:e,value:t,strValue:""+t+(M||""),units:M,bypass:n};return u.unitless||"px"!==M&&"em"!==M?B.pfValue=t:B.pfValue="px"!==M&&M?this.getEmSizeInPixels()*t:t,"ms"!==M&&"s"!==M||(B.pfValue="ms"===M?t:1e3*t),"deg"!==M&&"rad"!==M||(B.pfValue="rad"===M?t:(R=t,Math.PI*R/180)),"%"===M&&(B.pfValue=t/100),B}if(u.propList){var W=[],H=""+t;if("none"===H);else{for(var $=H.split(/\s*,\s*|\s+/),V=0;V<$.length;V++){var G=$[V].trim();this.properties[G]?W.push(G):de("`"+G+"` is not a valid property name")}if(0===W.length)return null}return{name:e,value:W,strValue:0===W.length?"none":W.join(" "),bypass:n}}if(u.color){var z=U(t);return z?{name:e,value:z,pfValue:z,strValue:"rgb("+z[0]+","+z[1]+","+z[2]+")",bypass:n}:null}if(u.regex||u.regexes){if(u.enums){var X=O();if(X)return X}for(var j=u.regexes?u.regexes:[u.regex],K=0;K<j.length;K++){var Y=new RegExp(j[K]).exec(t);if(Y)return{name:e,value:u.singleRegexMatchValue?Y[1]:Y,strValue:""+t,bypass:n}}return null}return u.string?{name:e,value:""+t,strValue:""+t,bypass:n}:u.enums?O():null};var Pr=function e(t){if(!(this instanceof e))return new e(t);A(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):ue("A style must have a core reference")},Br=Pr.prototype;Br.instanceString=function(){return"style"},Br.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;return this.length=0,this._private.newStyle=!0,this},Br.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Br.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},Br.selector=function(e){var t="core"===e?null:new Ci(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},Br.css=function(){var e=this,t=arguments;if(1===t.length)for(var n=t[0],i=0;i<e.properties.length;i++){var o=e.properties[i],r=n[o.name];void 0===r&&(r=n[N(o.name)]),void 0!==r&&this.cssRule(o.name,r)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},Br.style=Br.css,Br.cssRule=function(e,t){var n=this.parse(e,t);if(n){var i=this.length-1;this[i].properties.push(n),this[i].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[i].mappedProperties.push(n),!this[i].selector&&(this._private.coreStyle[n.name]=n)}return this},Br.append=function(e){return R(e)?e.appendToStyle(this):T(e)?this.appendFromJson(e):y(e)&&this.appendFromString(e),this},Pr.fromJson=function(e,t){var n=new Pr(e);return n.fromJson(t),n},Pr.fromString=function(e,t){return new Pr(e).fromString(t)},[Ar,Rr,Ir,Or,Mr,Lr,Dr,Nr].forEach((function(e){H(Br,e)})),Pr.types=Br.types,Pr.properties=Br.properties,Pr.propertyGroups=Br.propertyGroups,Pr.propertyGroupNames=Br.propertyGroupNames,Pr.propertyGroupKeys=Br.propertyGroupKeys;var Fr={style:function(e){e&&this.setStyle(e).update();return this._private.style},setStyle:function(e){var t=this._private;return R(e)?t.style=e.generateStyle(this):T(e)?t.style=Pr.fromJson(this,e):y(e)?t.style=Pr.fromString(this,e):t.style=Pr(this),t.style}},Wr={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return null==t.selectionType&&(t.selectionType="single"),void 0===e?t.selectionType:("additive"!==e&&"single"!==e||(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,n,i,o,r=arguments,s=this._private.pan;switch(r.length){case 0:return s;case 1:if(y(r[0]))return s[e=r[0]];if(E(r[0])){if(!this._private.panningEnabled)return this;i=(n=r[0]).x,o=n.y,w(i)&&(s.x=i),w(o)&&(s.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=r[0],t=r[1],"x"!==e&&"y"!==e||!w(t)||(s[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var n,i,o,r,s,a=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(a.length){case 1:E(e)&&(r=(o=a[0]).x,s=o.y,w(r)&&(l.x+=r),w(s)&&(l.y+=s),this.emit("pan viewport"));break;case 2:i=t,"x"!==(n=e)&&"y"!==n||!w(i)||(l[n]+=i),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(w(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n,i;if(y(e)){var o=e;e=this.$(o)}else if(E(i=e)&&w(i.x1)&&w(i.x2)&&w(i.y1)&&w(i.y2)){var r=e;(n={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else S(e)||(e=this.mutableElements());if(!S(e)||!e.empty()){n=n||e.boundingBox();var s,a=this.width(),l=this.height();if(t=w(t)?t:0,!isNaN(a)&&!isNaN(l)&&a>0&&l>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:s=(s=(s=Math.min((a-2*t)/n.w,(l-2*t)/n.h))>this._private.maxZoom?this._private.maxZoom:s)<this._private.minZoom?this._private.minZoom:s,pan:{x:(a-s*(n.x1+n.x2))/2,y:(l-s*(n.y1+n.y2))/2}}}}},zoomRange:function(e,t){var n=this._private;if(null==t){var i=e;e=i.min,t=i.max}return w(e)&&w(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):w(e)&&void 0===t&&e<=n.maxZoom?n.minZoom=e:w(t)&&void 0===e&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,n,i=this._private,o=i.pan,r=i.zoom,s=!1;if(i.zoomingEnabled||(s=!0),w(e)?n=e:E(e)&&(n=e.level,null!=e.position?t=$e(e.position,r,o):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||i.panningEnabled||(s=!0)),n=(n=n>i.maxZoom?i.maxZoom:n)<i.minZoom?i.minZoom:n,s||!w(n)||n===r||null!=t&&(!w(t.x)||!w(t.y)))return null;if(null!=t){var a=o,l=r,c=n;return{zoomed:!0,panned:!0,zoom:c,pan:{x:-c/l*(t.x-a.x)+t.x,y:-c/l*(t.y-a.y)+t.y}}}return{zoomed:!0,panned:!1,zoom:n,pan:o}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return null!=t&&t.zoomed?(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var t=this._private,n=!0,i=!0,o=[],r=!1,s=!1;if(!e)return this;if(w(e.zoom)||(n=!1),E(e.pan)||(i=!1),!n&&!i)return this;if(n){var a=e.zoom;a<t.minZoom||a>t.maxZoom||!t.zoomingEnabled?r=!0:(t.zoom=a,o.push("zoom"))}if(i&&(!r||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;w(l.x)&&(t.pan.x=l.x,s=!1),w(l.y)&&(t.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(y(e)){var n=e;e=this.mutableElements().filter(n)}else S(e)||(e=this.mutableElements());if(0!==e.length){var i=e.boundingBox(),o=this.width(),r=this.height();return{x:(o-(t=void 0===t?this._private.zoom:t)*(i.x1+i.x2))/2,y:(r-t*(i.y1+i.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,n=this._private,i=n.container;return n.sizeCache=n.sizeCache||(i?(e=d.getComputedStyle(i),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:i.clientWidth-t("padding-left")-t("padding-right"),height:i.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}};Wr.centre=Wr.center,Wr.autolockNodes=Wr.autolock,Wr.autoungrabifyNodes=Wr.autoungrabify;var Hr={data:Vn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:Vn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:Vn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:Vn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})};Hr.attr=Hr.data,Hr.removeAttr=Hr.removeData;var Ur=function(e){var t=this,n=(e=H({},e)).container;n&&!k(n)&&k(n[0])&&(n=n[0]);var i=n?n._cyreg:null;(i=i||{})&&i.cy&&(i.cy.destroy(),i={});var o=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var r=void 0!==d&&void 0!==n&&!e.headless,s=e;s.layout=H({name:r?"grid":"null"},s.layout),s.renderer=H({name:r?"canvas":"null"},s.renderer);var a=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},l=this._private={container:n,ready:!1,options:s,elements:new or(this),listeners:[],aniEles:new or(this),data:{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:a(!0,s.zoomingEnabled),userZoomingEnabled:a(!0,s.userZoomingEnabled),panningEnabled:a(!0,s.panningEnabled),userPanningEnabled:a(!0,s.userPanningEnabled),boxSelectionEnabled:a(!0,s.boxSelectionEnabled),autolock:a(!1,s.autolock,s.autolockNodes),autoungrabify:a(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:a(!1,s.autounselectify),styleEnabled:void 0===s.styleEnabled?r:s.styleEnabled,zoom:w(s.zoom)?s.zoom:1,pan:{x:E(s.pan)&&w(s.pan.x)?s.pan.x:0,y:E(s.pan)&&w(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});l.styleEnabled&&t.setStyle([]);var c=H({},s,s.renderer);t.initRenderer(c);!function(e,t){if(e.some(O))return Hn.all(e).then(t);t(e)}([s.style,s.elements],(function(e){var n=e[0],r=e[1];l.styleEnabled&&t.style().append(n),function(e,n,i){t.notifications(!1);var o=t.mutableElements();o.length>0&&o.remove(),null!=e&&(E(e)||T(e))&&t.add(e),t.one("layoutready",(function(e){t.notifications(!0),t.emit(e),t.one("load",n),t.emitAndNotify("load")})).one("layoutstop",(function(){t.one("done",i),t.emit("done")}));var r=H({},t._private.options.layout);r.eles=t.elements(),t.layout(r).run()}(r,(function(){t.startAnimationLoop(),l.ready=!0,b(s.ready)&&t.on("ready",s.ready);for(var e=0;e<o.length;e++){var n=o[e];t.on("ready",n)}i&&(i.readies=[]),t.emit("ready")}),s.done)}))},$r=Ur.prototype;H($r,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(null!=e){var t=this,n=t._private,i=n.options;return!k(e)&&k(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(H({},i,i.renderer,{name:"null"===i.renderer.name?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return pe(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements();if(E(e)){if(t.startBatch(),e.elements){var o={},r=function(e,n){for(var i=[],r=[],s=0;s<e.length;s++){var a=e[s],l=""+a.data.id,c=t.getElementById(l);o[l]=!0,0!==c.length?r.push({ele:c,json:a}):n?(a.group=n,i.push(a)):i.push(a)}t.add(i);for(var u=0;u<r.length;u++){var h=r[u],d=h.ele,p=h.json;d.json(p)}};if(T(e.elements))r(e.elements);else for(var s=["nodes","edges"],a=0;a<s.length;a++){var l=s[a],c=e.elements[l];T(c)&&r(c,l)}var u=t.collection();i.filter((function(e){return!o[e.id()]})).forEach((function(e){e.isParent()?u.merge(e):e.remove()})),u.forEach((function(e){return e.children().move({parent:null})})),u.forEach((function(e){return function(e){return t.getElementById(e.id())}(e).remove()}))}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===n.pan.x&&e.pan.y===n.pan.y||t.pan(e.pan)),e.data&&t.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],d=0;d<h.length;d++){var p=h[d];null!=e[p]&&t[p](e[p])}return t.endBatch(),this}var f={};!!e?f.elements=this.elements().map((function(e){return e.json()})):(f.elements={},i.forEach((function(e){var t=e.group();f.elements[t]||(f.elements[t]=[]),f.elements[t].push(e.json())}))),this._private.styleEnabled&&(f.style=t.style().json()),f.data=pe(t.data());var g=n.options;return f.zoomingEnabled=n.zoomingEnabled,f.userZoomingEnabled=n.userZoomingEnabled,f.zoom=n.zoom,f.minZoom=n.minZoom,f.maxZoom=n.maxZoom,f.panningEnabled=n.panningEnabled,f.userPanningEnabled=n.userPanningEnabled,f.pan=pe(n.pan),f.boxSelectionEnabled=n.boxSelectionEnabled,f.renderer=pe(g.renderer),f.hideEdgesOnViewport=g.hideEdgesOnViewport,f.textureOnViewport=g.textureOnViewport,f.wheelSensitivity=g.wheelSensitivity,f.motionBlur=g.motionBlur,f}}),$r.$id=$r.getElementById,[sr,_r,Tr,Er,wr,kr,Cr,xr,Fr,Wr,Hr].forEach((function(e){H($r,e)}));var Vr={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},Gr=function(e){return e.scratch("breadthfirst")},zr=function(e,t){return e.scratch("breadthfirst",t)};function Xr(e){this.options=H({},Vr,e)}Xr.prototype.run=function(){var e,t=this.options,n=t,i=t.cy,o=n.eles,r=o.nodes().filter((function(e){return!e.isParent()})),s=o,a=n.directed,l=n.maximal||n.maximalAdjustments>0,c=et(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()});if(S(n.roots))e=n.roots;else if(T(n.roots)){for(var u=[],h=0;h<n.roots.length;h++){var d=n.roots[h],p=i.getElementById(d);u.push(p)}e=i.collection(u)}else if(y(n.roots))e=i.$(n.roots);else if(a)e=r.roots();else{var f=o.components();e=i.collection();for(var g=function(t){var n=f[t],i=n.maxDegree(!1),o=n.filter((function(e){return e.degree(!1)===i}));e=e.add(o)},m=0;m<f.length;m++)g(m)}var v=[],_={},b=function(e,t){null==v[t]&&(v[t]=[]);var n=v[t].length;v[t].push(e),zr(e,{index:n,depth:t})};s.bfs({roots:e,directed:n.directed,visit:function(e,t,n,i,o){var r=e[0],s=r.id();b(r,o),_[s]=!0}});for(var E=[],w=0;w<r.length;w++){var k=r[w];_[k.id()]||E.push(k)}var C=function(e){for(var t=v[e],n=0;n<t.length;n++){var i=t[n];null!=i?zr(i,{depth:e,index:n}):(t.splice(n,1),n--)}},x=function(){for(var e=0;e<v.length;e++)C(e)},A=function(e,t){for(var n=Gr(e),i=e.incomers().filter((function(e){return e.isNode()&&o.has(e)})),r=-1,s=e.id(),a=0;a<i.length;a++){var l=i[a],c=Gr(l);r=Math.max(r,c.depth)}return n.depth<=r&&(t[s]?null:(function(e,t){var n=Gr(e),i=n.depth,o=n.index;v[i][o]=null,b(e,t)}(e,r+1),t[s]=!0,!0))};if(a&&l){var R=[],I={},O=function(e){return R.push(e)};for(r.forEach((function(e){return R.push(e)}));R.length>0;){var M=R.shift(),L=A(M,I);if(L)M.outgoers().filter((function(e){return e.isNode()&&o.has(e)})).forEach(O);else if(null===L){de("Detected double maximal shift for node `"+M.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}x();var D=0;if(n.avoidOverlap)for(var N=0;N<r.length;N++){var P=r[N].layoutDimensions(n),B=P.w,F=P.h;D=Math.max(D,B,F)}for(var H={},U=function(e){if(H[e.id()])return H[e.id()];for(var t=Gr(e).depth,n=e.neighborhood(),i=0,o=0,s=0;s<n.length;s++){var a=n[s];if(!a.isEdge()&&!a.isParent()&&r.has(a)){var l=Gr(a),c=l.index,u=l.depth;if(null!=c&&null!=u){var h=v[u].length;u<t&&(i+=c/h,o++)}}}return i/=o=Math.max(1,o),0===o&&(i=0),H[e.id()]=i,i},$=function(e,t){var n=U(e)-U(t);return 0===n?W(e.id(),t.id()):n},V=0;V<v.length;V++)v[V].sort($),C(V);for(var G=[],z=0;z<E.length;z++)G.push(E[z]);v.unshift(G),x();for(var X=0,j=0;j<v.length;j++)X=Math.max(v[j].length,X);var K=c.x1+c.w/2,Y=c.x1+c.h/2,q=v.reduce((function(e,t){return Math.max(e,t.length)}),0);return r.layoutPositions(this,n,(function(e){var t=Gr(e),i=t.depth,o=t.index,r=v[i].length,s=Math.max(c.w/((n.grid?q:r)+1),D),a=Math.max(c.h/(v.length+1),D),l=Math.min(c.w/2/v.length,c.h/2/v.length);if(l=Math.max(l,D),n.circle){var u=l*i+l-(v.length>0&&v[0].length<=3?l/2:0),h=2*Math.PI/v[i].length*o;return 0===i&&1===v[0].length&&(u=1),{x:K+u*Math.cos(h),y:Y+u*Math.sin(h)}}return{x:K+(o+1-(r+1)/2)*s,y:(i+1)*a}})),this};var jr={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Kr(e){this.options=H({},jr,e)}Kr.prototype.run=function(){var e=this.options,t=e,n=e.cy,i=t.eles,o=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,r=i.nodes().not(":parent");t.sort&&(r=r.sort(t.sort));for(var s,a=et(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l=a.x1+a.w/2,c=a.y1+a.h/2,u=(void 0===t.sweep?2*Math.PI-2*Math.PI/r.length:t.sweep)/Math.max(1,r.length-1),h=0,d=0;d<r.length;d++){var p=r[d].layoutDimensions(t),f=p.w,g=p.h;h=Math.max(h,f,g)}if(s=w(t.radius)?t.radius:r.length<=1?0:Math.min(a.h,a.w)/2-h,r.length>1&&t.avoidOverlap){h*=1.75;var m=Math.cos(u)-Math.cos(0),v=Math.sin(u)-Math.sin(0),_=Math.sqrt(h*h/(m*m+v*v));s=Math.max(_,s)}return r.layoutPositions(this,t,(function(e,n){var i=t.startAngle+n*u*(o?1:-1),r=s*Math.cos(i),a=s*Math.sin(i);return{x:l+r,y:c+a}})),this};var Yr,qr={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Jr(e){this.options=H({},qr,e)}Jr.prototype.run=function(){for(var e=this.options,t=e,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,i=e.cy,o=t.eles.nodes().not(":parent"),r=et(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),s=r.x1+r.w/2,a=r.y1+r.h/2,l=[],c=0,u=0;u<o.length;u++){var h,d=o[u];h=t.concentric(d),l.push({value:h,node:d}),d._private.scratch.concentric=h}o.updateStyle();for(var p=0;p<o.length;p++){var f=o[p].layoutDimensions(t);c=Math.max(c,f.w,f.h)}l.sort((function(e,t){return t.value-e.value}));for(var g=t.levelWidth(o),m=[[]],v=m[0],_=0;_<l.length;_++){var y=l[_];if(v.length>0)Math.abs(v[0].value-y.value)>=g&&(v=[],m.push(v));v.push(y)}var b=c+t.minNodeSpacing;if(!t.avoidOverlap){var T=m.length>0&&m[0].length>1,E=(Math.min(r.w,r.h)/2-b)/(m.length+T?1:0);b=Math.min(b,E)}for(var w=0,k=0;k<m.length;k++){var S=m[k],C=void 0===t.sweep?2*Math.PI-2*Math.PI/S.length:t.sweep,x=S.dTheta=C/Math.max(1,S.length-1);if(S.length>1&&t.avoidOverlap){var A=Math.cos(x)-Math.cos(0),R=Math.sin(x)-Math.sin(0),I=Math.sqrt(b*b/(A*A+R*R));w=Math.max(I,w)}S.r=w,w+=b}if(t.equidistant){for(var O=0,M=0,L=0;L<m.length;L++){var D=m[L].r-M;O=Math.max(O,D)}M=0;for(var N=0;N<m.length;N++){var P=m[N];0===N&&(M=P.r),P.r=M,M+=O}}for(var B={},F=0;F<m.length;F++)for(var W=m[F],H=W.dTheta,U=W.r,$=0;$<W.length;$++){var V=W[$],G=t.startAngle+(n?1:-1)*H*$,z={x:s+U*Math.cos(G),y:a+U*Math.sin(G)};B[V.node.id()]=z}return o.layoutPositions(this,t,(function(e){var t=e.id();return B[t]})),this};var Zr={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Qr(e){this.options=H({},Zr,e),this.options.layout=this}Qr.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,!0!==e.animate&&!1!==e.animate||n.emit({type:"layoutstart",layout:n}),Yr=!0===e.debug;var i=es(t,n,e);Yr&&(void 0)(i),e.randomize&&is(i);var o=Y(),r=function(){rs(i,t,e),!0===e.fit&&t.fit(e.padding)},s=function(t){return!(n.stopped||t>=e.numIter)&&(ss(i,e),i.temperature=i.temperature*e.coolingFactor,!(i.temperature<e.minTemp))},a=function(){if(!0===e.animate||!1===e.animate)r(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var t=e.eles.nodes(),o=os(i,e,t);t.layoutPositions(n,e,o)}},l=0,c=!0;if(!0===e.animate){!function t(){for(var n=0;c&&n<e.refresh;)c=s(l),l++,n++;c?(Y()-o>=e.animationThreshold&&r(),K(t)):(_s(i,e),a())}()}else{for(;c;)c=s(l),l++;_s(i,e),a()}return this},Qr.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Qr.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var es=function(e,t,n){for(var i=n.eles.edges(),o=n.eles.nodes(),r={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:et(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},s=n.eles.components(),a={},l=0;l<s.length;l++)for(var c=s[l],u=0;u<c.length;u++){a[c[u].id()]=l}for(l=0;l<r.nodeSize;l++){var h=(m=o[l]).layoutDimensions(n);(L={}).isLocked=m.locked(),L.id=m.data("id"),L.parentId=m.data("parent"),L.cmptId=a[m.id()],L.children=[],L.positionX=m.position("x"),L.positionY=m.position("y"),L.offsetX=0,L.offsetY=0,L.height=h.w,L.width=h.h,L.maxX=L.positionX+L.width/2,L.minX=L.positionX-L.width/2,L.maxY=L.positionY+L.height/2,L.minY=L.positionY-L.height/2,L.padLeft=parseFloat(m.style("padding")),L.padRight=parseFloat(m.style("padding")),L.padTop=parseFloat(m.style("padding")),L.padBottom=parseFloat(m.style("padding")),L.nodeRepulsion=b(n.nodeRepulsion)?n.nodeRepulsion(m):n.nodeRepulsion,r.layoutNodes.push(L),r.idToIndex[L.id]=l}var d=[],p=0,f=-1,g=[];for(l=0;l<r.nodeSize;l++){var m,v=(m=r.layoutNodes[l]).parentId;null!=v?r.layoutNodes[r.idToIndex[v]].children.push(m.id):(d[++f]=m.id,g.push(m.id))}for(r.graphSet.push(g);p<=f;){var _=d[p++],y=r.idToIndex[_],T=r.layoutNodes[y].children;if(T.length>0){r.graphSet.push(T);for(l=0;l<T.length;l++)d[++f]=T[l]}}for(l=0;l<r.graphSet.length;l++){var E=r.graphSet[l];for(u=0;u<E.length;u++){var w=r.idToIndex[E[u]];r.indexToGraph[w]=l}}for(l=0;l<r.edgeSize;l++){var k=i[l],S={};S.id=k.data("id"),S.sourceId=k.data("source"),S.targetId=k.data("target");var C=b(n.idealEdgeLength)?n.idealEdgeLength(k):n.idealEdgeLength,x=b(n.edgeElasticity)?n.edgeElasticity(k):n.edgeElasticity,A=r.idToIndex[S.sourceId],R=r.idToIndex[S.targetId];if(r.indexToGraph[A]!=r.indexToGraph[R]){for(var I=ts(S.sourceId,S.targetId,r),O=r.graphSet[I],M=0,L=r.layoutNodes[A];-1===O.indexOf(L.id);)L=r.layoutNodes[r.idToIndex[L.parentId]],M++;for(L=r.layoutNodes[R];-1===O.indexOf(L.id);)L=r.layoutNodes[r.idToIndex[L.parentId]],M++;C*=M*n.nestingFactor}S.idealLength=C,S.elasticity=x,r.layoutEdges.push(S)}return r},ts=function(e,t,n){var i=ns(e,t,0,n);return 2>i.count?0:i.graph},ns=function e(t,n,i,o){var r=o.graphSet[i];if(-1<r.indexOf(t)&&-1<r.indexOf(n))return{count:2,graph:i};for(var s=0,a=0;a<r.length;a++){var l=r[a],c=o.idToIndex[l],u=o.layoutNodes[c].children;if(0!==u.length){var h=e(t,n,o.indexToGraph[o.idToIndex[u[0]]],o);if(0!==h.count){if(1!==h.count)return h;if(2===++s)break}}}return{count:s,graph:i}},is=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,o=0;o<e.nodeSize;o++){var r=e.layoutNodes[o];0!==r.children.length||r.isLocked||(r.positionX=Math.random()*n,r.positionY=Math.random()*i)}},os=function(e,t,n){var i=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach((function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];o.x1=Math.min(o.x1,n.positionX),o.x2=Math.max(o.x2,n.positionX),o.y1=Math.min(o.y1,n.positionY),o.y2=Math.max(o.y2,n.positionY)})),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(n,r){var s=e.layoutNodes[e.idToIndex[n.data("id")]];if(t.boundingBox){var a=(s.positionX-o.x1)/o.w,l=(s.positionY-o.y1)/o.h;return{x:i.x1+a*i.w,y:i.y1+l*i.h}}return{x:s.positionX,y:s.positionY}}},rs=function(e,t,n){var i=n.layout,o=n.eles.nodes(),r=os(e,n,o);o.positions(r),!0!==e.ready&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},ss=function(e,t,n){as(e,t),ds(e),ps(e,t),fs(e),gs(e)},as=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],o=i.length,r=0;r<o;r++)for(var s=e.layoutNodes[e.idToIndex[i[r]]],a=r+1;a<o;a++){var l=e.layoutNodes[e.idToIndex[i[a]]];cs(s,l,e,t)}},ls=function(e){return-e+2*e*Math.random()},cs=function(e,t,n,i){if(e.cmptId===t.cmptId||n.isCompound){var o=t.positionX-e.positionX,r=t.positionY-e.positionY;0===o&&0===r&&(o=ls(1),r=ls(1));var s=us(e,t,o,r);if(s>0)var a=(c=i.nodeOverlap*s)*o/(g=Math.sqrt(o*o+r*r)),l=c*r/g;else{var c,u=hs(e,o,r),h=hs(t,-1*o,-1*r),d=h.x-u.x,p=h.y-u.y,f=d*d+p*p,g=Math.sqrt(f);a=(c=(e.nodeRepulsion+t.nodeRepulsion)/f)*d/g,l=c*p/g}e.isLocked||(e.offsetX-=a,e.offsetY-=l),t.isLocked||(t.offsetX+=a,t.offsetY+=l)}},us=function(e,t,n,i){if(n>0)var o=e.maxX-t.minX;else o=t.maxX-e.minX;if(i>0)var r=e.maxY-t.minY;else r=t.maxY-e.minY;return o>=0&&r>=0?Math.sqrt(o*o+r*r):0},hs=function(e,t,n){var i=e.positionX,o=e.positionY,r=e.height||1,s=e.width||1,a=n/t,l=r/s,c={};return 0===t&&0<n?(c.x=i,c.y=o+r/2,c):0===t&&0>n?(c.x=i,c.y=o+r/2,c):0<t&&-1*l<=a&&a<=l?(c.x=i+s/2,c.y=o+s*n/2/t,c):0>t&&-1*l<=a&&a<=l?(c.x=i-s/2,c.y=o-s*n/2/t,c):0<n&&(a<=-1*l||a>=l)?(c.x=i+r*t/2/n,c.y=o+r/2,c):0>n&&(a<=-1*l||a>=l)?(c.x=i-r*t/2/n,c.y=o-r/2,c):c},ds=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],o=e.idToIndex[i.sourceId],r=e.layoutNodes[o],s=e.idToIndex[i.targetId],a=e.layoutNodes[s],l=a.positionX-r.positionX,c=a.positionY-r.positionY;if(0!==l||0!==c){var u=hs(r,l,c),h=hs(a,-1*l,-1*c),d=h.x-u.x,p=h.y-u.y,f=Math.sqrt(d*d+p*p),g=Math.pow(i.idealLength-f,2)/i.elasticity;if(0!==f)var m=g*d/f,v=g*p/f;else m=0,v=0;r.isLocked||(r.offsetX+=m,r.offsetY+=v),a.isLocked||(a.offsetX-=m,a.offsetY-=v)}}},ps=function(e,t){for(var n=0;n<e.graphSet.length;n++){var i=e.graphSet[n],o=i.length;if(0===n)var r=e.clientHeight/2,s=e.clientWidth/2;else{var a=e.layoutNodes[e.idToIndex[i[0]]],l=e.layoutNodes[e.idToIndex[a.parentId]];r=l.positionX,s=l.positionY}for(var c=0;c<o;c++){var u=e.layoutNodes[e.idToIndex[i[c]]];if(!u.isLocked){var h=r-u.positionX,d=s-u.positionY,p=Math.sqrt(h*h+d*d);if(p>1){var f=t.gravity*h/p,g=t.gravity*d/p;u.offsetX+=f,u.offsetY+=g}}}}},fs=function(e,t){var n=[],i=0,o=-1;for(n.push.apply(n,e.graphSet[0]),o+=e.graphSet[0].length;i<=o;){var r=n[i++],s=e.idToIndex[r],a=e.layoutNodes[s],l=a.children;if(0<l.length&&!a.isLocked){for(var c=a.offsetX,u=a.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=c,d.offsetY+=u,n[++o]=l[h]}a.offsetX=0,a.offsetY=0}}},gs=function(e,t){for(var n=0;n<e.nodeSize;n++){0<(o=e.layoutNodes[n]).children.length&&(o.maxX=void 0,o.minX=void 0,o.maxY=void 0,o.minY=void 0)}for(n=0;n<e.nodeSize;n++){if(!(0<(o=e.layoutNodes[n]).children.length||o.isLocked)){var i=ms(o.offsetX,o.offsetY,e.temperature);o.positionX+=i.x,o.positionY+=i.y,o.offsetX=0,o.offsetY=0,o.minX=o.positionX-o.width,o.maxX=o.positionX+o.width,o.minY=o.positionY-o.height,o.maxY=o.positionY+o.height,vs(o,e)}}for(n=0;n<e.nodeSize;n++){var o;0<(o=e.layoutNodes[n]).children.length&&!o.isLocked&&(o.positionX=(o.maxX+o.minX)/2,o.positionY=(o.maxY+o.minY)/2,o.width=o.maxX-o.minX,o.height=o.maxY-o.minY)}},ms=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var o={x:n*e/i,y:n*t/i};else o={x:e,y:t};return o},vs=function e(t,n){var i=t.parentId;if(null!=i){var o=n.layoutNodes[n.idToIndex[i]],r=!1;return(null==o.maxX||t.maxX+o.padRight>o.maxX)&&(o.maxX=t.maxX+o.padRight,r=!0),(null==o.minX||t.minX-o.padLeft<o.minX)&&(o.minX=t.minX-o.padLeft,r=!0),(null==o.maxY||t.maxY+o.padBottom>o.maxY)&&(o.maxY=t.maxY+o.padBottom,r=!0),(null==o.minY||t.minY-o.padTop<o.minY)&&(o.minY=t.minY-o.padTop,r=!0),r?e(o,n):void 0}},_s=function(e,t){for(var n=e.layoutNodes,i=[],o=0;o<n.length;o++){var r=n[o],s=r.cmptId;(i[s]=i[s]||[]).push(r)}var a=0;for(o=0;o<i.length;o++){if(g=i[o]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var l=0;l<g.length;l++){var c=g[l];g.x1=Math.min(g.x1,c.positionX-c.width/2),g.x2=Math.max(g.x2,c.positionX+c.width/2),g.y1=Math.min(g.y1,c.positionY-c.height/2),g.y2=Math.max(g.y2,c.positionY+c.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,a+=g.w*g.h}}i.sort((function(e,t){return t.w*t.h-e.w*e.h}));var u=0,h=0,d=0,p=0,f=Math.sqrt(a)*e.clientWidth/e.clientHeight;for(o=0;o<i.length;o++){var g;if(g=i[o]){for(l=0;l<g.length;l++){(c=g[l]).isLocked||(c.positionX+=u-g.x1,c.positionY+=h-g.y1)}u+=g.w+t.componentSpacing,d+=g.w+t.componentSpacing,p=Math.max(p,g.h),d>f&&(h+=p+t.componentSpacing,u=0,d=0,p=0)}}},ys={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function bs(e){this.options=H({},ys,e)}bs.prototype.run=function(){var e=this.options,t=e,n=e.cy,i=t.eles.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var o=et(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)i.layoutPositions(this,t,(function(e){return{x:o.x1,y:o.y1}}));else{var r=i.size(),s=Math.sqrt(r*o.h/o.w),a=Math.round(s),l=Math.round(o.w/o.h*s),c=function(e){if(null==e)return Math.min(a,l);Math.min(a,l)==a?a=e:l=e},u=function(e){if(null==e)return Math.max(a,l);Math.max(a,l)==a?a=e:l=e},h=t.rows,d=null!=t.cols?t.cols:t.columns;if(null!=h&&null!=d)a=h,l=d;else if(null!=h&&null==d)a=h,l=Math.ceil(r/a);else if(null==h&&null!=d)l=d,a=Math.ceil(r/l);else if(l*a>r){var p=c(),f=u();(p-1)*f>=r?c(p-1):(f-1)*p>=r&&u(f-1)}else for(;l*a<r;){var g=c(),m=u();(m+1)*g>=r?u(m+1):c(g+1)}var v=o.w/l,_=o.h/a;if(t.condense&&(v=0,_=0),t.avoidOverlap)for(var y=0;y<i.length;y++){var b=i[y],T=b._private.position;null!=T.x&&null!=T.y||(T.x=0,T.y=0);var E=b.layoutDimensions(t),w=t.avoidOverlapPadding,k=E.w+w,S=E.h+w;v=Math.max(v,k),_=Math.max(_,S)}for(var C={},x=function(e,t){return!!C["c-"+e+"-"+t]},A=function(e,t){C["c-"+e+"-"+t]=!0},R=0,I=0,O=function(){++I>=l&&(I=0,R++)},M={},L=0;L<i.length;L++){var D=i[L],N=t.position(D);if(N&&(void 0!==N.row||void 0!==N.col)){var P={row:N.row,col:N.col};if(void 0===P.col)for(P.col=0;x(P.row,P.col);)P.col++;else if(void 0===P.row)for(P.row=0;x(P.row,P.col);)P.row++;M[D.id()]=P,A(P.row,P.col)}}i.layoutPositions(this,t,(function(e,t){var n,i;if(e.locked()||e.isParent())return!1;var r=M[e.id()];if(r)n=r.col*v+v/2+o.x1,i=r.row*_+_/2+o.y1;else{for(;x(R,I);)O();n=I*v+v/2+o.x1,i=R*_+_/2+o.y1,A(R,I),O()}return{x:n,y:i}}))}return this};var Ts={ready:function(){},stop:function(){}};function Es(e){this.options=H({},Ts,e)}Es.prototype.run=function(){var e=this.options,t=e.eles;e.cy;return this.emit("layoutstart"),t.nodes().positions((function(){return{x:0,y:0}})),this.one("layoutready",e.ready),this.emit("layoutready"),this.one("layoutstop",e.stop),this.emit("layoutstop"),this},Es.prototype.stop=function(){return this};var ws={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function ks(e){this.options=H({},ws,e)}ks.prototype.run=function(){var e=this.options,t=e.eles.nodes(),n=b(e.positions);return t.layoutPositions(this,e,(function(t,i){var o=function(t){if(null==e.positions)return Ue(t.position());if(n)return e.positions(t);var i=e.positions[t._private.data.id];return null==i?null:i}(t);return!t.locked()&&null!=o&&o})),this};var Ss={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Cs(e){this.options=H({},Ss,e)}Cs.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles.nodes().not(":parent"),i=et(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return n.layoutPositions(this,e,(function(e,t){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}})),this};var xs=[{name:"breadthfirst",impl:Xr},{name:"circle",impl:Kr},{name:"concentric",impl:Jr},{name:"cose",impl:Qr},{name:"grid",impl:bs},{name:"null",impl:Es},{name:"preset",impl:ks},{name:"random",impl:Cs}];function As(e){this.options=e,this.notifications=0}var Rs=function(){},Is=function(){throw new Error("A headless instance can not render images")};As.prototype={recalculateRenderedStyle:Rs,notify:function(){this.notifications++},init:Rs,isHeadless:function(){return!0},png:Is,jpg:Is};var Os={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,n=function(e,t,n,i,o,r,s){var a=o.x-n/2-s,l=o.x+n/2+s,c=o.y-n/2-s,u=o.y+n/2+s;return a<=e&&e<=l&&c<=t&&t<=u},i=function(e,t,n,i,o){var r=e*Math.cos(i)-t*Math.sin(i),s=(e*Math.sin(i)+t*Math.cos(i))*n;return{x:r*n+o.x,y:s+o.y}},o=function(e,t,n,o){for(var r=[],s=0;s<e.length;s+=2){var a=e[s],l=e[s+1];r.push(i(a,l,t,n,o))}return r},r=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i.x,i.y)}return t},s=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},a=function(i,a){y(a)&&(a=e[a]),e[i]=H({name:i,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,n,i,s,a){var l=r(o(this.points,n+2*a,i,s));return ft(e,t,l)},roughCollide:n,draw:function(e,n,i,r){var s=o(this.points,n,i,r);t.arrowShapeImpl("polygon")(e,s)},spacing:function(e){return 0},gap:s},a)};a("none",{collide:ae,roughCollide:ae,draw:ce,spacing:le,gap:le}),a("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),a("arrow","triangle"),a("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(e,n,r,s,a){var l=o(this.points,n,r,s),c=this.controlPoint,u=i(c[0],c[1],n,r,s);t.arrowShapeImpl(this.name)(e,l,u)},gap:function(e){return.8*s(e)}}),a("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,n,i,s,a,l){var c=r(o(this.points,n+2*l,i,s)),u=r(o(this.pointsTee,n+2*l,i,s));return ft(e,t,c)||ft(e,t,u)},draw:function(e,n,i,r,s){var a=o(this.points,n,i,r),l=o(this.pointsTee,n,i,r);t.arrowShapeImpl(this.name)(e,a,l)}}),a("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var n=this.baseCrossLinePts.slice(),i=t/e;return n[3]=n[3]-i,n[5]=n[5]-i,n},collide:function(e,t,n,i,s,a,l){var c=r(o(this.points,n+2*l,i,s)),u=r(o(this.crossLinePts(n,a),n+2*l,i,s));return ft(e,t,c)||ft(e,t,u)},draw:function(e,n,i,r,s){var a=o(this.points,n,i,r),l=o(this.crossLinePts(n,s),n,i,r);t.arrowShapeImpl(this.name)(e,a,l)}}),a("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return.525*s(e)}}),a("circle",{radius:.15,collide:function(e,t,n,i,o,r,s){var a=o;return Math.pow(a.x-e,2)+Math.pow(a.y-t,2)<=Math.pow((n+2*s)*this.radius,2)},draw:function(e,n,i,o,r){t.arrowShapeImpl(this.name)(e,o.x,o.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),a("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),a("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),a("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),a("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})}},Ms={projectIntoViewport:function(e,t){var n=this.cy,i=this.findContainerClientCoords(),o=i[0],r=i[1],s=i[4],a=n.pan(),l=n.zoom();return[((e-o)/s-a.x)/l,((t-r)/s-a.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=d.getComputedStyle(e),i=function(e){return parseFloat(n.getPropertyValue(e))},o=i("padding-left"),r=i("padding-right"),s=i("padding-top"),a=i("padding-bottom"),l=i("border-left-width"),c=i("border-right-width"),u=i("border-top-width"),h=(i("border-bottom-width"),e.clientWidth),p=e.clientHeight,f=o+r,g=s+a,m=l+c,v=t.width/(h+m),_=h-f,y=p-g,b=t.left+o+l,T=t.top+s+u;return this.containerBB=[b,T,_,y,v]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,n,i){return this.findNearestElements(e,t,n,i)[0]},findNearestElements:function(e,t,n,i){var o,r,s=this,a=this,l=a.getCachedZSortedEles(),c=[],u=a.cy.zoom(),h=a.cy.hasCompoundNodes(),d=(i?24:8)/u,p=(i?8:2)/u,f=(i?8:2)/u,g=1/0;function m(e,t){if(e.isNode()){if(r)return;r=e,c.push(e)}if(e.isEdge()&&(null==t||t<g))if(o){if(o.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&o.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var n=0;n<c.length;n++)if(c[n].isEdge()){c[n]=e,o=e,g=null!=t?t:g;break}}else c.push(e),o=e,g=null!=t?t:g}function v(n){var i=n.outerWidth()+2*p,o=n.outerHeight()+2*p,r=i/2,l=o/2,c=n.position();if(c.x-r<=e&&e<=c.x+r&&c.y-l<=t&&t<=c.y+l&&a.nodeShapes[s.getNodeShape(n)].checkPoint(e,t,0,i,o,c.x,c.y))return m(n,0),!0}function _(n){var i,o=n._private,r=o.rscratch,l=n.pstyle("width").pfValue,u=n.pstyle("arrow-scale").value,p=l/2+d,f=p*p,g=2*p,_=o.source,y=o.target;if("segments"===r.edgeType||"straight"===r.edgeType||"haystack"===r.edgeType){for(var b=r.allpts,T=0;T+3<b.length;T+=2)if(ut(e,t,b[T],b[T+1],b[T+2],b[T+3],g)&&f>(i=pt(e,t,b[T],b[T+1],b[T+2],b[T+3])))return m(n,i),!0}else if("bezier"===r.edgeType||"multibezier"===r.edgeType||"self"===r.edgeType||"compound"===r.edgeType)for(b=r.allpts,T=0;T+5<r.allpts.length;T+=4)if(ht(e,t,b[T],b[T+1],b[T+2],b[T+3],b[T+4],b[T+5],g)&&f>(i=dt(e,t,b[T],b[T+1],b[T+2],b[T+3],b[T+4],b[T+5])))return m(n,i),!0;_=_||o.source,y=y||o.target;var E=s.getArrowWidth(l,u),w=[{name:"source",x:r.arrowStartX,y:r.arrowStartY,angle:r.srcArrowAngle},{name:"target",x:r.arrowEndX,y:r.arrowEndY,angle:r.tgtArrowAngle},{name:"mid-source",x:r.midX,y:r.midY,angle:r.midsrcArrowAngle},{name:"mid-target",x:r.midX,y:r.midY,angle:r.midtgtArrowAngle}];for(T=0;T<w.length;T++){var k=w[T],S=a.arrowShapes[n.pstyle(k.name+"-arrow-shape").value],C=n.pstyle("width").pfValue;if(S.roughCollide(e,t,E,k.angle,{x:k.x,y:k.y},C,d)&&S.collide(e,t,E,k.angle,{x:k.x,y:k.y},C,d))return m(n),!0}h&&c.length>0&&(v(_),v(y))}function y(e,t,n){return be(e,t,n)}function b(n,i){var o,r=n._private,s=f;o=i?i+"-":"",n.boundingBox();var a=r.labelBounds[i||"main"],l=n.pstyle(o+"label").value;if("yes"===n.pstyle("text-events").strValue&&l){var c=r.rstyle,u=y(c,"labelX",i),h=y(c,"labelY",i),d=y(r.rscratch,"labelAngle",i),p=a.x1-s,g=a.x2+s,v=a.y1-s,_=a.y2+s;if(d){var b=Math.cos(d),T=Math.sin(d),E=function(e,t){return{x:(e-=u)*b-(t-=h)*T+u,y:e*T+t*b+h}},w=E(p,v),k=E(p,_),S=E(g,v),C=E(g,_),x=[w.x,w.y,S.x,S.y,C.x,C.y,k.x,k.y];if(ft(e,t,x))return m(n),!0}else if(at(a,e,t))return m(n),!0}}n&&(l=l.interactive);for(var T=l.length-1;T>=0;T--){var E=l[T];E.isNode()?v(E)||b(E):_(E)||b(E)||b(E,"source")||b(E,"target")}return c},getAllInBox:function(e,t,n,i){for(var o,r,s=this.getCachedZSortedEles().interactive,a=[],l=Math.min(e,n),c=Math.max(e,n),u=Math.min(t,i),h=Math.max(t,i),d=et({x1:e=l,y1:t=u,x2:n=c,y2:i=h}),p=0;p<s.length;p++){var f=s[p];if(f.isNode()){var g=f,m=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});st(d,m)&&!lt(m,d)&&a.push(g)}else{var v=f,_=v._private,y=_.rscratch;if(null!=y.startX&&null!=y.startY&&!at(d,y.startX,y.startY))continue;if(null!=y.endX&&null!=y.endY&&!at(d,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var b=_.rstyle.bezierPts||_.rstyle.linePts||_.rstyle.haystackPts,T=!0,E=0;E<b.length;E++)if(o=d,r=b[E],!at(o,r.x,r.y)){T=!1;break}T&&a.push(v)}else"haystack"!==y.edgeType&&"straight"!==y.edgeType||a.push(v)}}return a}},Ls={calculateArrowAngles:function(e){var t,n,i,o,r,s,a=e._private.rscratch,l="haystack"===a.edgeType,c="bezier"===a.edgeType,u="multibezier"===a.edgeType,h="segments"===a.edgeType,d="compound"===a.edgeType,p="self"===a.edgeType;if(l?(i=a.haystackPts[0],o=a.haystackPts[1],r=a.haystackPts[2],s=a.haystackPts[3]):(i=a.arrowStartX,o=a.arrowStartY,r=a.arrowEndX,s=a.arrowEndY),g=a.midX,m=a.midY,h)t=i-a.segpts[0],n=o-a.segpts[1];else if(u||d||p||c){var f=a.allpts;t=i-Je(f[0],f[2],f[4],.1),n=o-Je(f[1],f[3],f[5],.1)}else t=i-g,n=o-m;a.srcArrowAngle=ze(t,n);var g=a.midX,m=a.midY;if(l&&(g=(i+r)/2,m=(o+s)/2),t=r-i,n=s-o,h)if((f=a.allpts).length/2%2==0){var v=(_=f.length/2)-2;t=f[_]-f[v],n=f[_+1]-f[v+1]}else{v=(_=f.length/2-1)-2;var _,y=_+2;t=f[_]-f[v],n=f[_+1]-f[v+1]}else if(u||d||p){var b,T,E,w,f=a.allpts;if(a.ctrlpts.length/2%2==0){var k=(S=(C=f.length/2-1)+2)+2;b=Je(f[C],f[S],f[k],0),T=Je(f[C+1],f[S+1],f[k+1],0),E=Je(f[C],f[S],f[k],1e-4),w=Je(f[C+1],f[S+1],f[k+1],1e-4)}else{var S,C;k=(S=f.length/2-1)+2;b=Je(f[C=S-2],f[S],f[k],.4999),T=Je(f[C+1],f[S+1],f[k+1],.4999),E=Je(f[C],f[S],f[k],.5),w=Je(f[C+1],f[S+1],f[k+1],.5)}t=E-b,n=w-T}(a.midtgtArrowAngle=ze(t,n),a.midDispX=t,a.midDispY=n,t*=-1,n*=-1,h)&&((f=a.allpts).length/2%2==0||(t=-(f[y=(_=f.length/2-1)+2]-f[_]),n=-(f[y+1]-f[_+1])));if(a.midsrcArrowAngle=ze(t,n),h)t=r-a.segpts[a.segpts.length-2],n=s-a.segpts[a.segpts.length-1];else if(u||d||p||c){var x=(f=a.allpts).length;t=r-Je(f[x-6],f[x-4],f[x-2],.9),n=s-Je(f[x-5],f[x-3],f[x-1],.9)}else t=r-g,n=s-m;a.tgtArrowAngle=ze(t,n)}};Ls.getArrowWidth=Ls.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},i=n[e+", "+t];return i||(i=Math.max(Math.pow(13.37*e,.9),29)*t,n[e+", "+t]=i,i)};var Ds={};function Ns(e){var t=[];if(null!=e){for(var n=0;n<e.length;n+=2){var i=e[n],o=e[n+1];t.push({x:i,y:o})}return t}}Ds.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n._private,o=i.rscratch;if(!o.haystack){var r=2*Math.random()*Math.PI;o.source={x:Math.cos(r),y:Math.sin(r)},r=2*Math.random()*Math.PI,o.target={x:Math.cos(r),y:Math.sin(r)}}var s=i.source,a=i.target,l=s.position(),c=a.position(),u=s.width(),h=a.width(),d=s.height(),p=a.height(),f=n.pstyle("haystack-radius").value/2;o.haystackPts=o.allpts=[o.source.x*u*f+l.x,o.source.y*d*f+l.y,o.target.x*h*f+c.x,o.target.y*p*f+c.y],o.midX=(o.allpts[0]+o.allpts[2])/2,o.midY=(o.allpts[1]+o.allpts[3])/2,o.edgeType="haystack",o.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},Ds.findSegmentsPoints=function(e,t){var n=e._private.rscratch,i=t.posPts,o=t.intersectionPts,r=t.vectorNormInverse,s=e.pstyle("edge-distances").value,a=e.pstyle("segment-weights"),l=e.pstyle("segment-distances"),c=Math.min(a.pfValue.length,l.pfValue.length);n.edgeType="segments",n.segpts=[];for(var u=0;u<c;u++){var h=a.pfValue[u],d=l.pfValue[u],p=1-h,f=h,g="node-position"===s?i:o,m={x:g.x1*p+g.x2*f,y:g.y1*p+g.y2*f};n.segpts.push(m.x+r.x*d,m.y+r.y*d)}},Ds.findLoopPoints=function(e,t,n,i){var o=e._private.rscratch,r=t.dirCounts,s=t.srcPos,a=e.pstyle("control-point-distances"),l=a?a.pfValue[0]:void 0,c=e.pstyle("loop-direction").pfValue,u=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;o.edgeType="self";var d=n,p=h;i&&(d=0,p=l);var f=c-Math.PI/2,g=f-u/2,m=f+u/2,v=String(c+"_"+u);d=void 0===r[v]?r[v]=0:++r[v],o.ctrlpts=[s.x+1.4*Math.cos(g)*p*(d/3+1),s.y+1.4*Math.sin(g)*p*(d/3+1),s.x+1.4*Math.cos(m)*p*(d/3+1),s.y+1.4*Math.sin(m)*p*(d/3+1)]},Ds.findCompoundLoopPoints=function(e,t,n,i){var o=e._private.rscratch;o.edgeType="compound";var r=t.srcPos,s=t.tgtPos,a=t.srcW,l=t.srcH,c=t.tgtW,u=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),p=d?d.pfValue[0]:void 0,f=n,g=h;i&&(f=0,g=p);var m={x:r.x-a/2,y:r.y-l/2},v={x:s.x-c/2,y:s.y-u/2},_={x:Math.min(m.x,v.x),y:Math.min(m.y,v.y)},y=Math.max(.5,Math.log(.01*a)),b=Math.max(.5,Math.log(.01*c));o.ctrlpts=[_.x,_.y-(1+Math.pow(50,1.12)/100)*g*(f/3+1)*y,_.x-(1+Math.pow(50,1.12)/100)*g*(f/3+1)*b,_.y]},Ds.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},Ds.findBezierPoints=function(e,t,n,i,o){var r=e._private.rscratch,s=t.vectorNormInverse,a=t.posPts,l=t.intersectionPts,c=e.pstyle("edge-distances").value,u=e.pstyle("control-point-step-size").pfValue,h=e.pstyle("control-point-distances"),d=e.pstyle("control-point-weights"),p=h&&d?Math.min(h.value.length,d.value.length):1,f=h?h.pfValue[0]:void 0,g=d.value[0],m=i;r.edgeType=m?"multibezier":"bezier",r.ctrlpts=[];for(var v=0;v<p;v++){var _=(.5-t.eles.length/2+n)*u*(o?-1:1),y=void 0,b=je(_);m&&(f=h?h.pfValue[v]:u,g=d.value[v]);var T=void 0!==(y=i?f:void 0!==f?b*f:void 0)?y:_,E=1-g,w=g,k="node-position"===c?a:l,S={x:k.x1*E+k.x2*w,y:k.y1*E+k.y2*w};r.ctrlpts.push(S.x+s.x*T,S.y+s.y*T)}},Ds.findTaxiPoints=function(e,t){var n=e._private.rscratch;n.edgeType="segments";var i=t.posPts,o=t.srcW,r=t.srcH,s=t.tgtW,a=t.tgtH,l="node-position"!==e.pstyle("edge-distances").value,c=e.pstyle("taxi-direction").value,u=c,h=e.pstyle("taxi-turn"),d="%"===h.units,p=d&&h.pfValue<0?1+h.pfValue:h.pfValue,f=e.pstyle("taxi-turn-min-distance").pfValue,g=l?(o+s)/2:0,m=l?(r+a)/2:0,v=i.x2-i.x1,_=i.y2-i.y1,y=function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},b=y(v,g),T=y(_,m),E=!1;"auto"===c?c=Math.abs(b)>Math.abs(T)?"horizontal":"vertical":"upward"===c||"downward"===c?(c="vertical",E=!0):"leftward"!==c&&"rightward"!==c||(c="horizontal",E=!0);var w="vertical"===c,k=w?T:b,S=w?_:v,C=je(S),x=!1;E&&d||!("downward"===u&&S<0||"upward"===u&&S>0||"leftward"===u&&S>0||"rightward"===u&&S<0)||(k=(C*=-1)*Math.abs(k),x=!0);var A=d?p*k:p*C,R=function(e){return Math.abs(e)<f||Math.abs(e)>=Math.abs(k)},I=R(A),O=R(k-Math.abs(A));if((I||O)&&!x)if(w){var M=Math.abs(S)<=r/2,L=Math.abs(v)<=s/2;if(M){var D=(i.x1+i.x2)/2,N=i.y1,P=i.y2;n.segpts=[D,N,D,P]}else if(L){var B=(i.y1+i.y2)/2,F=i.x1,W=i.x2;n.segpts=[F,B,W,B]}else n.segpts=[i.x1,i.y2]}else{var H=Math.abs(S)<=o/2,U=Math.abs(_)<=a/2;if(H){var $=(i.y1+i.y2)/2,V=i.x1,G=i.x2;n.segpts=[V,$,G,$]}else if(U){var z=(i.x1+i.x2)/2,X=i.y1,j=i.y2;n.segpts=[z,X,z,j]}else n.segpts=[i.x2,i.y1]}else if(w){var K=(A<0?i.y2:i.y1)+A+(l?r/2*C:0),Y=i.x1,q=i.x2;n.segpts=[Y,K,q,K]}else{var J=(A<0?i.x2:i.x1)+A+(l?o/2*C:0),Z=i.y1,Q=i.y2;n.segpts=[J,Z,J,Q]}},Ds.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if("bezier"===n.edgeType){var i=t.srcPos,o=t.tgtPos,r=t.srcW,s=t.srcH,a=t.tgtW,l=t.tgtH,c=t.srcShape,u=t.tgtShape,h=!w(n.startX)||!w(n.startY),d=!w(n.arrowStartX)||!w(n.arrowStartY),p=!w(n.endX)||!w(n.endY),f=!w(n.arrowEndX)||!w(n.arrowEndY),g=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),m=Ke({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),v=m<g,_=Ke({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),y=_<g,b=!1;if(h||d||v){b=!0;var T={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},E=Math.sqrt(T.x*T.x+T.y*T.y),k={x:T.x/E,y:T.y/E},S=Math.max(r,s),C={x:n.ctrlpts[0]+2*k.x*S,y:n.ctrlpts[1]+2*k.y*S},x=c.intersectLine(i.x,i.y,r,s,C.x,C.y,0);v?(n.ctrlpts[0]=n.ctrlpts[0]+k.x*(g-m),n.ctrlpts[1]=n.ctrlpts[1]+k.y*(g-m)):(n.ctrlpts[0]=x[0]+k.x*g,n.ctrlpts[1]=x[1]+k.y*g)}if(p||f||y){b=!0;var A={x:n.ctrlpts[0]-o.x,y:n.ctrlpts[1]-o.y},R=Math.sqrt(A.x*A.x+A.y*A.y),I={x:A.x/R,y:A.y/R},O=Math.max(r,s),M={x:n.ctrlpts[0]+2*I.x*O,y:n.ctrlpts[1]+2*I.y*O},L=u.intersectLine(o.x,o.y,a,l,M.x,M.y,0);y?(n.ctrlpts[0]=n.ctrlpts[0]+I.x*(g-_),n.ctrlpts[1]=n.ctrlpts[1]+I.y*(g-_)):(n.ctrlpts[0]=L[0]+I.x*g,n.ctrlpts[1]=L[1]+I.y*g)}b&&this.findEndpoints(e)}},Ds.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);var i;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(i=t.allpts.length/2-1,t.midX=t.allpts[i],t.midY=t.allpts[i+1]):(i=t.allpts.length/2-3,.5,t.midX=Je(t.allpts[i],t.allpts[i+2],t.allpts[i+4],.5),t.midY=Je(t.allpts[i+1],t.allpts[i+3],t.allpts[i+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType)if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.segpts.length%4==0){var o=t.segpts.length/2,r=o-2;t.midX=(t.segpts[r]+t.segpts[o])/2,t.midY=(t.segpts[r+1]+t.segpts[o+1])/2}else{var s=t.segpts.length/2-1;t.midX=t.segpts[s],t.midY=t.segpts[s+1]}},Ds.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||w(t.startX)&&w(t.startY)&&w(t.endX)&&w(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,de("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Ds.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var n=this,i=n.cy.hasCompoundNodes(),o={map:new Ee,get:function(e){var t=this.map.get(e[0]);return null!=t?t.get(e[1]):null},set:function(e,t){var n=this.map.get(e[0]);null==n&&(n=new Ee,this.map.set(e[0],n)),n.set(e[1],t)}},r=[],s=[],a=0;a<e.length;a++){var l=e[a],c=l._private,u=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace())if("haystack"!==u){var h="unbundled-bezier"===u||"segments"===u||"straight"===u||"taxi"===u,d="unbundled-bezier"===u||"bezier"===u,p=c.source,f=c.target,g=[p.poolIndex(),f.poolIndex()].sort(),m=o.get(g);null==m&&(m={eles:[]},o.set(g,m),r.push(g)),m.eles.push(l),h&&(m.hasUnbundled=!0),d&&(m.hasBezier=!0)}else s.push(l)}for(var v=function(e){var s=r[e],a=o.get(s),l=void 0;if(!a.hasUnbundled){var c=a.eles[0].parallelEdges().filter((function(e){return e.isBundledBezier()}));ye(a.eles),c.forEach((function(e){return a.eles.push(e)})),a.eles.sort((function(e,t){return e.poolIndex()-t.poolIndex()}))}var u=a.eles[0],h=u.source(),d=u.target();if(h.poolIndex()>d.poolIndex()){var p=h;h=d,d=p}var f=a.srcPos=h.position(),g=a.tgtPos=d.position(),m=a.srcW=h.outerWidth(),v=a.srcH=h.outerHeight(),_=a.tgtW=d.outerWidth(),y=a.tgtH=d.outerHeight(),b=a.srcShape=n.nodeShapes[t.getNodeShape(h)],T=a.tgtShape=n.nodeShapes[t.getNodeShape(d)];a.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var E=0;E<a.eles.length;E++){var k=a.eles[E],S=k[0]._private.rscratch,C=k.pstyle("curve-style").value,x="unbundled-bezier"===C||"segments"===C||"taxi"===C,A=!h.same(k.source());if(!a.calculatedIntersection&&h!==d&&(a.hasBezier||a.hasUnbundled)){a.calculatedIntersection=!0;var R=b.intersectLine(f.x,f.y,m,v,g.x,g.y,0),I=a.srcIntn=R,O=T.intersectLine(g.x,g.y,_,y,f.x,f.y,0),M=a.tgtIntn=O,L=a.intersectionPts={x1:R[0],x2:O[0],y1:R[1],y2:O[1]},D=a.posPts={x1:f.x,x2:g.x,y1:f.y,y2:g.y},N=O[1]-R[1],P=O[0]-R[0],B=Math.sqrt(P*P+N*N),F=a.vector={x:P,y:N},W=a.vectorNorm={x:F.x/B,y:F.y/B},H={x:-W.y,y:W.x};a.nodesOverlap=!w(B)||T.checkPoint(R[0],R[1],0,_,y,g.x,g.y)||b.checkPoint(O[0],O[1],0,m,v,f.x,f.y),a.vectorNormInverse=H,l={nodesOverlap:a.nodesOverlap,dirCounts:a.dirCounts,calculatedIntersection:!0,hasBezier:a.hasBezier,hasUnbundled:a.hasUnbundled,eles:a.eles,srcPos:g,tgtPos:f,srcW:_,srcH:y,tgtW:m,tgtH:v,srcIntn:M,tgtIntn:I,srcShape:T,tgtShape:b,posPts:{x1:D.x2,y1:D.y2,x2:D.x1,y2:D.y1},intersectionPts:{x1:L.x2,y1:L.y2,x2:L.x1,y2:L.y1},vector:{x:-F.x,y:-F.y},vectorNorm:{x:-W.x,y:-W.y},vectorNormInverse:{x:-H.x,y:-H.y}}}var U=A?l:a;S.nodesOverlap=U.nodesOverlap,S.srcIntn=U.srcIntn,S.tgtIntn=U.tgtIntn,i&&(h.isParent()||h.isChild()||d.isParent()||d.isChild())&&(h.parents().anySame(d)||d.parents().anySame(h)||h.same(d)&&h.isParent())?t.findCompoundLoopPoints(k,U,E,x):h===d?t.findLoopPoints(k,U,E,x):"segments"===C?t.findSegmentsPoints(k,U):"taxi"===C?t.findTaxiPoints(k,U):"straight"===C||!x&&a.eles.length%2==1&&E===Math.floor(a.eles.length/2)?t.findStraightEdgePoints(k):t.findBezierPoints(k,U,E,x,A),t.findEndpoints(k),t.tryToCorrectInvalidPoints(k,U),t.checkForInvalidEdgeWarning(k),t.storeAllpts(k),t.storeEdgeProjections(k),t.calculateArrowAngles(k),t.recalculateEdgeLabelProjections(k),t.calculateLabelAngles(k)}},_=0;_<r.length;_++)v(_);this.findHaystackPoints(s)}},Ds.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if("segments"===t.edgeType)return this.recalculateRenderedStyle(e),Ns(t.segpts)},Ds.getControlPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(e),Ns(t.ctrlpts)},Ds.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var Ps={manualEndptToPx:function(e,t){var n=e.position(),i=e.outerWidth(),o=e.outerHeight();if(2===t.value.length){var r=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(r[0]=r[0]*i),"%"===t.units[1]&&(r[1]=r[1]*o),r[0]+=n.x,r[1]+=n.y,r}var s=t.pfValue[0];s=-Math.PI/2+s;var a=2*Math.max(i,o),l=[n.x+Math.cos(s)*a,n.y+Math.sin(s)*a];return this.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,i,o,l[0],l[1],0)},findEndpoints:function(e){var t,n,i,o,r,s=this,a=e.source()[0],l=e.target()[0],c=a.position(),u=l.position(),h=e.pstyle("target-arrow-shape").value,d=e.pstyle("source-arrow-shape").value,p=e.pstyle("target-distance-from-node").pfValue,f=e.pstyle("source-distance-from-node").pfValue,g=e.pstyle("curve-style").value,m=e._private.rscratch,v=m.edgeType,_="self"===v||"compound"===v,y="bezier"===v||"multibezier"===v||_,b="bezier"!==v,T="straight"===v||"segments"===v,E="segments"===v,k=y||b||T,S=_||"taxi"===g,C=e.pstyle("source-endpoint"),x=S?"outside-to-node":C.value,A=e.pstyle("target-endpoint"),R=S?"outside-to-node":A.value;if(m.srcManEndpt=C,m.tgtManEndpt=A,y){var I=[m.ctrlpts[0],m.ctrlpts[1]];n=b?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:I,i=I}else if(T){var O=E?m.segpts.slice(0,2):[u.x,u.y];n=E?m.segpts.slice(m.segpts.length-2):[c.x,c.y],i=O}if("inside-to-node"===R)t=[u.x,u.y];else if(A.units)t=this.manualEndptToPx(l,A);else if("outside-to-line"===R)t=m.tgtIntn;else if("outside-to-node"===R||"outside-to-node-or-label"===R?o=n:"outside-to-line"!==R&&"outside-to-line-or-label"!==R||(o=[c.x,c.y]),t=s.nodeShapes[this.getNodeShape(l)].intersectLine(u.x,u.y,l.outerWidth(),l.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===R||"outside-to-line-or-label"===R){var M=l._private.rscratch,L=M.labelWidth,D=M.labelHeight,N=M.labelX,P=M.labelY,B=L/2,F=D/2,W=l.pstyle("text-valign").value;"top"===W?P-=F:"bottom"===W&&(P+=F);var H=l.pstyle("text-halign").value;"left"===H?N-=B:"right"===H&&(N+=B);var U=Et(o[0],o[1],[N-B,P-F,N+B,P-F,N+B,P+F,N-B,P+F],u.x,u.y);if(U.length>0){var $=c,V=Ye($,Ge(t)),G=Ye($,Ge(U)),z=V;if(G<V&&(t=U,z=G),U.length>2)Ye($,{x:U[2],y:U[3]})<z&&(t=[U[2],U[3]])}}var X=wt(t,n,s.arrowShapes[h].spacing(e)+p),j=wt(t,n,s.arrowShapes[h].gap(e)+p);if(m.endX=j[0],m.endY=j[1],m.arrowEndX=X[0],m.arrowEndY=X[1],"inside-to-node"===x)t=[c.x,c.y];else if(C.units)t=this.manualEndptToPx(a,C);else if("outside-to-line"===x)t=m.srcIntn;else if("outside-to-node"===x||"outside-to-node-or-label"===x?r=i:"outside-to-line"!==x&&"outside-to-line-or-label"!==x||(r=[u.x,u.y]),t=s.nodeShapes[this.getNodeShape(a)].intersectLine(c.x,c.y,a.outerWidth(),a.outerHeight(),r[0],r[1],0),"outside-to-node-or-label"===x||"outside-to-line-or-label"===x){var K=a._private.rscratch,Y=K.labelWidth,q=K.labelHeight,J=K.labelX,Z=K.labelY,Q=Y/2,ee=q/2,te=a.pstyle("text-valign").value;"top"===te?Z-=ee:"bottom"===te&&(Z+=ee);var ne=a.pstyle("text-halign").value;"left"===ne?J-=Q:"right"===ne&&(J+=Q);var ie=Et(r[0],r[1],[J-Q,Z-ee,J+Q,Z-ee,J+Q,Z+ee,J-Q,Z+ee],c.x,c.y);if(ie.length>0){var oe=u,re=Ye(oe,Ge(t)),se=Ye(oe,Ge(ie)),ae=re;if(se<re&&(t=[ie[0],ie[1]],ae=se),ie.length>2)Ye(oe,{x:ie[2],y:ie[3]})<ae&&(t=[ie[2],ie[3]])}}var le=wt(t,i,s.arrowShapes[d].spacing(e)+f),ce=wt(t,i,s.arrowShapes[d].gap(e)+f);m.startX=ce[0],m.startY=ce[1],m.arrowStartX=le[0],m.arrowStartY=le[1],k&&(w(m.startX)&&w(m.startY)&&w(m.endX)&&w(m.endY)?m.badLine=!1:m.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}}},Bs={};function Fs(e,t,n){for(var i=function(e,t,n,i){return Je(e,t,n,i)},o=t._private.rstyle.bezierPts,r=0;r<e.bezierProjPcts.length;r++){var s=e.bezierProjPcts[r];o.push({x:i(n[0],n[2],n[4],s),y:i(n[1],n[3],n[5],s)})}}Bs.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,i=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===i||"bezier"===i||"self"===i||"compound"===i){t.rstyle.bezierPts=[];for(var o=0;o+5<n.allpts.length;o+=4)Fs(this,e,n.allpts.slice(o,o+6))}else if("segments"===i){var r=t.rstyle.linePts=[];for(o=0;o+1<n.allpts.length;o+=2)r.push({x:n.allpts[o],y:n.allpts[o+1]})}else if("haystack"===i){var s=n.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},Bs.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var Ws={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!I(t)){var n,i,o=e._private,r=e.width(),s=e.height(),a=e.padding(),l=e.position(),c=e.pstyle("text-halign").strValue,u=e.pstyle("text-valign").strValue,h=o.rscratch,d=o.rstyle;switch(c){case"left":n=l.x-r/2-a;break;case"right":n=l.x+r/2+a;break;default:n=l.x}switch(u){case"top":i=l.y-s/2-a;break;case"bottom":i=l.y+s/2+a;break;default:i=l.y}h.labelX=n,h.labelY=i,d.labelX=n,d.labelY=i,this.applyLabelDimensions(e)}}},Hs=function(e,t){var n=Math.atan(t/e);return 0===e&&n<0&&(n*=-1),n},Us=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Hs(n,i)};Ws.recalculateEdgeLabelProjections=function(e){var t,n=e._private,i=n.rscratch,o=this,r={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(r.mid||r.source||r.target){t={x:i.midX,y:i.midY};var s=function(e,t,i){Te(n.rscratch,e,t,i),Te(n.rstyle,e,t,i)};s("labelX",null,t.x),s("labelY",null,t.y);var a=Hs(i.midDispX,i.midDispY);s("labelAutoAngle",null,a);var l=function(a){var l,c="source"===a;if(r[a]){var u=e.pstyle(a+"-text-offset").pfValue;switch(i.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var h,d=function e(){if(e.cache)return e.cache;for(var t=[],r=0;r+5<i.allpts.length;r+=4){var s={x:i.allpts[r],y:i.allpts[r+1]},a={x:i.allpts[r+2],y:i.allpts[r+3]},l={x:i.allpts[r+4],y:i.allpts[r+5]};t.push({p0:s,p1:a,p2:l,startDist:0,length:0,segments:[]})}var c=n.rstyle.bezierPts,u=o.bezierProjPcts.length;function h(e,t,n,i,o){var r=Ke(t,n),s=e.segments[e.segments.length-1],a={p0:t,p1:n,t0:i,t1:o,startDist:s?s.startDist+s.length:0,length:r};e.segments.push(a),e.length+=r}for(var d=0;d<t.length;d++){var p=t[d],f=t[d-1];f&&(p.startDist=f.startDist+f.length),h(p,p.p0,c[d*u],0,o.bezierProjPcts[0]);for(var g=0;g<u-1;g++)h(p,c[d*u+g],c[d*u+g+1],o.bezierProjPcts[g],o.bezierProjPcts[g+1]);h(p,c[d*u+u-1],p.p2,o.bezierProjPcts[u-1],1)}return e.cache=t}(),p=0,f=0,g=0;g<d.length;g++){for(var m=d[c?g:d.length-1-g],v=0;v<m.segments.length;v++){var _=m.segments[c?v:m.segments.length-1-v],y=g===d.length-1&&v===m.segments.length-1;if(p=f,(f+=_.length)>=u||y){h={cp:m,segment:_};break}}if(h)break}var b=h.cp,T=h.segment,E=(u-p)/T.length,w=T.t1-T.t0,k=c?T.t0+w*E:T.t1-w*E;k=Qe(0,k,1),t=Ze(b.p0,b.p1,b.p2,k),l=function(e,t,n,i){var o=Qe(0,i-.001,1),r=Qe(0,i+.001,1),s=Ze(e,t,n,o),a=Ze(e,t,n,r);return Us(s,a)}(b.p0,b.p1,b.p2,k);break;case"straight":case"segments":case"haystack":for(var S,C,x,A,R=0,I=i.allpts.length,O=0;O+3<I&&(c?(x={x:i.allpts[O],y:i.allpts[O+1]},A={x:i.allpts[O+2],y:i.allpts[O+3]}):(x={x:i.allpts[I-2-O],y:i.allpts[I-1-O]},A={x:i.allpts[I-4-O],y:i.allpts[I-3-O]}),C=R,!((R+=S=Ke(x,A))>=u));O+=2);var M=(u-C)/S;M=Qe(0,M,1),t=function(e,t,n,i){var o=t.x-e.x,r=t.y-e.y,s=Ke(e,t),a=o/s,l=r/s;return n=null==n?0:n,i=null!=i?i:n*s,{x:e.x+a*i,y:e.y+l*i}}(x,A,M),l=Us(x,A)}s("labelX",a,t.x),s("labelY",a,t.y),s("labelAutoAngle",a,l)}};l("source"),l("target"),this.applyLabelDimensions(e)}},Ws.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},Ws.applyPrefixedLabelDimensions=function(e,t){var n=e._private,i=this.getLabelText(e,t),o=this.calculateLabelDimensions(e,i),r=e.pstyle("line-height").pfValue,s=e.pstyle("text-wrap").strValue,a=be(n.rscratch,"labelWrapCachedLines",t)||[],l="wrap"!==s?1:Math.max(a.length,1),c=o.height/l,u=c*r,h=o.width,d=o.height+(l-1)*(r-1)*c;Te(n.rstyle,"labelWidth",t,h),Te(n.rscratch,"labelWidth",t,h),Te(n.rstyle,"labelHeight",t,d),Te(n.rscratch,"labelHeight",t,d),Te(n.rscratch,"labelLineHeight",t,u)},Ws.getLabelText=function(e,t){var n=e._private,i=t?t+"-":"",o=e.pstyle(i+"label").strValue,r=e.pstyle("text-transform").value,s=function(e,i){return i?(Te(n.rscratch,e,t,i),i):be(n.rscratch,e,t)};if(!o)return"";"none"==r||("uppercase"==r?o=o.toUpperCase():"lowercase"==r&&(o=o.toLowerCase()));var a=e.pstyle("text-wrap").value;if("wrap"===a){var l=s("labelKey");if(null!=l&&s("labelWrapKey")===l)return s("labelWrapCachedText");for(var c=o.split("\n"),u=e.pstyle("text-max-width").pfValue,h="anywhere"===e.pstyle("text-overflow-wrap").value,d=[],p=/[\s\u200b]+/,f=h?"":" ",g=0;g<c.length;g++){var m=c[g],v=this.calculateLabelDimensions(e,m).width;if(h){var _=m.split("").join("​");m=_}if(v>u){for(var y=m.split(p),b="",T=0;T<y.length;T++){var E=y[T],w=0===b.length?E:b+f+E;this.calculateLabelDimensions(e,w).width<=u?b+=E+f:(b&&d.push(b),b=E+f)}b.match(/^[\s\u200b]+$/)||d.push(b)}else d.push(m)}s("labelWrapCachedLines",d),o=s("labelWrapCachedText",d.join("\n")),s("labelWrapKey",l)}else if("ellipsis"===a){for(var k=e.pstyle("text-max-width").pfValue,S="",C=!1,x=0;x<o.length;x++){if(this.calculateLabelDimensions(e,S+o[x]+"…").width>k)break;S+=o[x],x===o.length-1&&(C=!0)}return C||(S+="…"),S}return o},Ws.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},Ws.calculateLabelDimensions=function(e,t){var n=Q(t,e._private.labelDimsKey),i=this.labelDimCache||(this.labelDimCache=[]),o=i[n];if(null!=o)return o;var r=e.pstyle("font-style").strValue,s=1*e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,l=e.pstyle("font-weight").strValue,c=this.labelCalcDiv;c||(c=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(c));var u=c.style;return u.fontFamily=a,u.fontStyle=r,u.fontSize=s,u.fontWeight=l,u.position="absolute",u.left="-9999px",u.top="-9999px",u.zIndex="-1",u.visibility="hidden",u.pointerEvents="none",u.padding="0",u.lineHeight="1",u.whiteSpace="pre",c.textContent=t,i[n]={width:Math.ceil(c.clientWidth/1),height:Math.ceil(c.clientHeight/1)}},Ws.calculateLabelAngle=function(e,t){var n=e._private.rscratch,i=e.isEdge(),o=t?t+"-":"",r=e.pstyle(o+"text-rotation"),s=r.strValue;return"none"===s?0:i&&"autorotate"===s?n.labelAutoAngle:"autorotate"===s?0:r.pfValue},Ws.calculateLabelAngles=function(e){var t=this,n=e.isEdge(),i=e._private.rscratch;i.labelAngle=t.calculateLabelAngle(e),n&&(i.sourceLabelAngle=t.calculateLabelAngle(e,"source"),i.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var $s={},Vs=!1;$s.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<28||e.height()<28))return Vs||(de("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Vs=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"cutrectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var n=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return t};var Gs={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),n=this,i=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),n)for(var i=0;i<e.length;i++){var o=e[i],r=o._private,s=r.rstyle;s.clean=!1,s.cleanConnected=!1}};n.binder(e).on("bounds.* dirty.*",(function(e){var t=e.target;i(t)})).on("style.* background.*",(function(e){var t=e.target;i(t,!1)}));var o=function(o){if(o){for(var r=n.onUpdateEleCalcsFns,s=0;s<t.length;s++){var a=t[s],l=a._private.rstyle;a.isNode()&&!l.cleanConnected&&(i(a.connectedEdges()),l.cleanConnected=!0)}if(r)for(var c=0;c<r.length;c++){(0,r[c])(o,t)}n.recalculateRenderedStyle(t),t=e.collection()}};n.flushRenderedStyleQueue=function(){o(!0)},n.beforeRender(o,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var n=function(e){return e._private.rstyle.cleanConnected},i=[],o=[];if(!this.destroyed){void 0===t&&(t=!0);for(var r=0;r<e.length;r++){var s=e[r],a=s._private,l=a.rstyle;!s.isEdge()||n(s.source())&&n(s.target())||(l.clean=!1),t&&l.clean||s.removed()||"none"!==s.pstyle("display").value&&("nodes"===a.group?o.push(s):i.push(s),l.clean=!0)}for(var c=0;c<o.length;c++){var u=o[c],h=u._private.rstyle,d=u.position();this.recalculateNodeLabelProjection(u),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=u.pstyle("width").pfValue,h.nodeH=u.pstyle("height").pfValue}this.recalculateEdgeProjections(i);for(var p=0;p<i.length;p++){var f=i[p]._private,g=f.rstyle,m=f.rscratch;g.srcX=m.arrowStartX,g.srcY=m.arrowStartY,g.tgtX=m.arrowEndX,g.tgtY=m.arrowEndY,g.midX=m.midX,g.midY=m.midY,g.labelAngle=m.labelAngle,g.sourceLabelAngle=m.sourceLabelAngle,g.targetLabelAngle=m.targetLabelAngle}}}},zs={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var i=(o=e[n])._private.rscratch;o.grabbed()&&!o.isParent()?t.push(o):i.inDragLayer?e.drag.push(o):e.nondrag.push(o)}for(n=0;n<t.length;n++){var o=t[n];e.drag.push(o)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(Mo),t.interactive=t.filter((function(e){return e.interactive()})),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},Xs={};[Ms,Ls,Ds,Ps,Bs,Ws,$s,Gs,zs].forEach((function(e){H(Xs,e)}));var js={getCachedImage:function(e,t,n){var i=this.imageCache=this.imageCache||{},o=i[e];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;var r=(o=i[e]=i[e]||{}).image=new Image;r.addEventListener("load",n),r.addEventListener("error",(function(){r.error=!0}));return"data:"===e.substring(0,"data:".length).toLowerCase()||(r.crossOrigin=t),r.src=e,r}},Ks={registerBinding:function(e,t,n,i){var o=Array.prototype.slice.apply(arguments,[1]),r=this.binder(e);return r.on.apply(r,o)}};Ks.binder=function(e){var t,n=this,i=e===window||e===document||e===document.body||(t=e,"undefined"!=typeof HTMLElement&&t instanceof HTMLElement);if(null==n.supportsPassiveEvents){var o=!1;try{var r=Object.defineProperty({},"passive",{get:function(){return o=!0,!0}});window.addEventListener("test",null,r)}catch(e){}n.supportsPassiveEvents=o}var s=function(t,o,r){var s=Array.prototype.slice.call(arguments);return i&&n.supportsPassiveEvents&&(s[2]={capture:null!=r&&r,passive:!1,once:!1}),n.bindings.push({target:e,args:s}),(e.addEventListener||e.on).apply(e,s),this};return{on:s,addEventListener:s,addListener:s,bind:s}},Ks.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},Ks.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},Ks.load=function(){var e=this,t=function(e){return e.selected()},n=function(t,n,i,o){null==t&&(t=e.cy);for(var r=0;r<n.length;r++){var s=n[r];t.emit({originalEvent:i,type:s,position:o})}},i=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},r=function(t,n){var i=!0;if(e.cy.hasCompoundNodes()&&t&&t.pannable())for(var o=0;n&&o<n.length;o++){if((t=n[o]).isNode()&&t.isParent()){i=!1;break}}else i=!0;return i},s=function(e){e[0]._private.rscratch.inDragLayer=!0},a=function(e){e[0]._private.rscratch.isGrabTarget=!0},l=function(e,t){var n=t.addToList;n.has(e)||(n.merge(e),function(e){e[0]._private.grabbed=!0}(e))},c=function(t,n){n=n||{};var i=t.cy().hasCompoundNodes();n.inDragLayer&&(t.forEach(s),t.neighborhood().stdFilter((function(e){return!i||e.isEdge()})).forEach(s)),n.addToList&&t.forEach((function(e){l(e,n)})),function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var n=e.descendants();t.inDragLayer&&(n.forEach(s),n.connectedEdges().forEach(s)),t.addToList&&t.addToList.unmerge(n)}}(t,n),d(t,{inDragLayer:n.inDragLayer}),e.updateCachedGrabbedEles()},u=c,h=function(t){t&&(e.getCachedZSortedEles().forEach((function(e){!function(e){e[0]._private.grabbed=!1}(e),function(e){e[0]._private.rscratch.inDragLayer=!1}(e),function(e){e[0]._private.rscratch.isGrabTarget=!1}(e)})),e.updateCachedGrabbedEles())},d=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var n=e.ancestors().orphans();if(!n.same(e)){var i=n.descendants().spawnSelf().merge(n).unmerge(e).unmerge(e.descendants()),o=i.connectedEdges();t.inDragLayer&&(o.forEach(s),i.forEach(s)),t.addToList&&i.forEach((function(e){l(e,t)}))}}},p=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},f="undefined"!=typeof MutationObserver,g="undefined"!=typeof ResizeObserver;f?(e.removeObserver=new MutationObserver((function(t){for(var n=0;n<t.length;n++){var i=t[n].removedNodes;if(i)for(var o=0;o<i.length;o++){if(i[o]===e.container){e.destroy();break}}}})),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",(function(t){e.destroy()}));var m=o((function(){e.cy.resize()}),100);f&&(e.styleObserver=new MutationObserver(m),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(window,"resize",m),g&&(e.resizeObserver=new ResizeObserver(m),e.resizeObserver.observe(e.container));var v=function(){e.invalidateContainerClientCoordsCache()};!function(e,t){for(;null!=e;)t(e),e=e.parentNode}(e.container,(function(t){e.registerBinding(t,"transitionend",v),e.registerBinding(t,"animationend",v),e.registerBinding(t,"scroll",v)})),e.registerBinding(e.container,"contextmenu",(function(e){e.preventDefault()}));var _=function(t){for(var n=e.findContainerClientCoords(),i=n[0],o=n[1],r=n[2],s=n[3],a=t.touches?t.touches:[t],l=!1,c=0;c<a.length;c++){var u=a[c];if(i<=u.clientX&&u.clientX<=i+r&&o<=u.clientY&&u.clientY<=o+s){l=!0;break}}if(!l)return!1;for(var h=e.container,d=t.target.parentNode,p=!1;d;){if(d===h){p=!0;break}d=d.parentNode}return!!p};e.registerBinding(e.container,"mousedown",(function(t){if(_(t)){t.preventDefault(),p(),e.hoverData.capture=!0,e.hoverData.which=t.which;var i=e.cy,o=[t.clientX,t.clientY],r=e.projectIntoViewport(o[0],o[1]),s=e.selection,l=e.findNearestElements(r[0],r[1],!0,!1),h=l[0],d=e.dragData.possibleDragElements;e.hoverData.mdownPos=r,e.hoverData.mdownGPos=o;if(3==t.which){e.hoverData.cxtStarted=!0;var f={originalEvent:t,type:"cxttapstart",position:{x:r[0],y:r[1]}};h?(h.activate(),h.emit(f),e.hoverData.down=h):i.emit(f),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(h&&h.activate(),null!=h&&e.nodeIsGrabbable(h)){var g=function(e){return{originalEvent:t,type:e,position:{x:r[0],y:r[1]}}};if(a(h),h.selected()){d=e.dragData.possibleDragElements=i.collection();var m=i.$((function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)}));c(m,{addToList:d}),h.emit(g("grabon")),m.forEach((function(e){e.emit(g("grab"))}))}else d=e.dragData.possibleDragElements=i.collection(),u(h,{addToList:d}),h.emit(g("grabon")).emit(g("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=h,e.hoverData.downs=l,e.hoverData.downTime=(new Date).getTime(),n(h,["mousedown","tapstart","vmousedown"],t,{x:r[0],y:r[1]}),null==h?(s[4]=1,e.data.bgActivePosistion={x:r[0],y:r[1]},e.redrawHint("select",!0),e.redraw()):h.pannable()&&(s[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout((function(){if(!e.hoverData.tapholdCancelled){var n=e.hoverData.down;n?n.emit({originalEvent:t,type:"taphold",position:{x:r[0],y:r[1]}}):i.emit({originalEvent:t,type:"taphold",position:{x:r[0],y:r[1]}})}}),e.tapholdDuration)}s[0]=s[2]=r[0],s[1]=s[3]=r[1]}}),!1),e.registerBinding(window,"mousemove",(function(t){if(e.hoverData.capture||_(t)){var o=!1,s=e.cy,a=s.zoom(),l=[t.clientX,t.clientY],u=e.projectIntoViewport(l[0],l[1]),d=e.hoverData.mdownPos,p=e.hoverData.mdownGPos,f=e.selection,g=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(g=e.findNearestElement(u[0],u[1],!0,!1));var m,v=e.hoverData.last,y=e.hoverData.down,b=[u[0]-f[2],u[1]-f[3]],T=e.dragData.possibleDragElements;if(p){var E=l[0]-p[0],k=E*E,S=l[1]-p[1],C=k+S*S;e.hoverData.isOverThresholdDrag=m=C>=e.desktopTapThreshold2}var x=i(t);m&&(e.hoverData.tapholdCancelled=!0);o=!0,n(g,["mousemove","vmousemove","tapdrag"],t,{x:u[0],y:u[1]});var A=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||s.emit({originalEvent:t,type:"boxstart",position:{x:u[0],y:u[1]}}),f[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(m){var R={originalEvent:t,type:"cxtdrag",position:{x:u[0],y:u[1]}};y?y.emit(R):s.emit(R),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&g===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:u[0],y:u[1]}}),e.hoverData.cxtOver=g,g&&g.emit({originalEvent:t,type:"cxtdragover",position:{x:u[0],y:u[1]}}))}}else if(e.hoverData.dragging){if(o=!0,s.panningEnabled()&&s.userPanningEnabled()){var I;if(e.hoverData.justStartedPan){var O=e.hoverData.mdownPos;I={x:(u[0]-O[0])*a,y:(u[1]-O[1])*a},e.hoverData.justStartedPan=!1}else I={x:b[0]*a,y:b[1]*a};s.panBy(I),e.hoverData.dragged=!0}u=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=f[4]||null!=y&&!y.pannable()){if(y&&y.pannable()&&y.active()&&y.unactivate(),y&&y.grabbed()||g==v||(v&&n(v,["mouseout","tapdragout"],t,{x:u[0],y:u[1]}),g&&n(g,["mouseover","tapdragover"],t,{x:u[0],y:u[1]}),e.hoverData.last=g),y)if(m){if(s.boxSelectionEnabled()&&x)y&&y.grabbed()&&(h(T),y.emit("freeon"),T.emit("free"),e.dragData.didDrag&&(y.emit("dragfreeon"),T.emit("dragfree"))),A();else if(y&&y.grabbed()&&e.nodeIsDraggable(y)){var M=!e.dragData.didDrag;M&&e.redrawHint("eles",!0),e.dragData.didDrag=!0;var L=s.collection();e.hoverData.draggingEles||c(T,{inDragLayer:!0});var D={x:0,y:0};if(w(b[0])&&w(b[1])&&(D.x+=b[0],D.y+=b[1],M)){var N=e.hoverData.dragDelta;N&&w(N[0])&&w(N[1])&&(D.x+=N[0],D.y+=N[1])}for(var P=0;P<T.length;P++){var B=T[P];e.nodeIsDraggable(B)&&B.grabbed()&&L.merge(B)}e.hoverData.draggingEles=!0,L.silentShift(D).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else!function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(b[0]),t.push(b[1])):(t[0]+=b[0],t[1]+=b[1])}();o=!0}else if(m){if(e.hoverData.dragging||!s.boxSelectionEnabled()||!x&&s.panningEnabled()&&s.userPanningEnabled()){if(!e.hoverData.selecting&&s.panningEnabled()&&s.userPanningEnabled()){r(y,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,f[4]=0,e.data.bgActivePosistion=Ge(d),e.redrawHint("select",!0),e.redraw())}}else A();y&&y.pannable()&&y.active()&&y.unactivate()}return f[2]=u[0],f[3]=u[1],o?(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1):void 0}}),!1),e.registerBinding(window,"mouseup",(function(o){if(e.hoverData.capture){e.hoverData.capture=!1;var r=e.cy,s=e.projectIntoViewport(o.clientX,o.clientY),a=e.selection,l=e.findNearestElement(s[0],s[1],!0,!1),c=e.dragData.possibleDragElements,u=e.hoverData.down,d=i(o);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,u&&u.unactivate(),3===e.hoverData.which){var p={originalEvent:o,type:"cxttapend",position:{x:s[0],y:s[1]}};if(u?u.emit(p):r.emit(p),!e.hoverData.cxtDragged){var f={originalEvent:o,type:"cxttap",position:{x:s[0],y:s[1]}};u?u.emit(f):r.emit(f)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(n(l,["mouseup","tapend","vmouseup"],o,{x:s[0],y:s[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||n(u,["click","tap","vclick"],o,{x:s[0],y:s[1]}),null!=u||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||i(o)||(r.$(t).unselect(["tapunselect"]),c.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=c=r.collection()),l!=u||e.dragData.didDrag||e.hoverData.selecting||null!=l&&l._private.selectable&&(e.hoverData.dragging||("additive"===r.selectionType()||d?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):d||(r.$(t).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var g=r.collection(e.getAllInBox(a[0],a[1],a[2],a[3]));e.redrawHint("select",!0),g.length>0&&e.redrawHint("eles",!0),r.emit({type:"boxend",originalEvent:o,position:{x:s[0],y:s[1]}});var m=function(e){return e.selectable()&&!e.selected()};"additive"===r.selectionType()?g.emit("box").stdFilter(m).select().emit("boxselect"):(d||r.$(t).unmerge(g).unselect(),g.emit("box").stdFilter(m).select().emit("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!a[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var v=u&&u.grabbed();h(c),v&&(u.emit("freeon"),c.emit("free"),e.dragData.didDrag&&(u.emit("dragfreeon"),c.emit("dragfree")))}}a[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}}),!1);var y,b,T,E,k,S,C,x,A,R,I,O,M;e.registerBinding(e.container,"wheel",(function(t){if(!e.scrollingPage){var n,i=e.cy,o=e.projectIntoViewport(t.clientX,t.clientY),r=[o[0]*i.zoom()+i.pan().x,o[1]*i.zoom()+i.pan().y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])t.preventDefault();else if(i.panningEnabled()&&i.userPanningEnabled()&&i.zoomingEnabled()&&i.userZoomingEnabled())t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout((function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()}),150),n=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,n*=e.wheelSensitivity,1===t.deltaMode&&(n*=33),i.zoom({level:i.zoom()*Math.pow(10,n),renderedPosition:{x:r[0],y:r[1]}})}}),!0),e.registerBinding(window,"scroll",(function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout((function(){e.scrollingPage=!1}),250)}),!0),e.registerBinding(e.container,"mouseout",(function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:n[0],y:n[1]}})}),!1),e.registerBinding(e.container,"mouseover",(function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:n[0],y:n[1]}})}),!1);var L,D,N,P,B=function(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))},F=function(e,t,n,i){return(n-e)*(n-e)+(i-t)*(i-t)};if(e.registerBinding(e.container,"touchstart",L=function(t){if(_(t)){p(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var i=e.cy,o=e.touchData.now,r=e.touchData.earlier;if(t.touches[0]){var s=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);o[0]=s[0],o[1]=s[1]}if(t.touches[1]){s=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);o[2]=s[0],o[3]=s[1]}if(t.touches[2]){s=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);o[4]=s[0],o[5]=s[1]}if(t.touches[1]){e.touchData.singleTouchMoved=!0,h(e.dragData.touchDragEles);var l=e.findContainerClientCoords();A=l[0],R=l[1],I=l[2],O=l[3],y=t.touches[0].clientX-A,b=t.touches[0].clientY-R,T=t.touches[1].clientX-A,E=t.touches[1].clientY-R,M=0<=y&&y<=I&&0<=T&&T<=I&&0<=b&&b<=O&&0<=E&&E<=O;var d=i.pan(),f=i.zoom();k=B(y,b,T,E),S=F(y,b,T,E),x=[((C=[(y+T)/2,(b+E)/2])[0]-d.x)/f,(C[1]-d.y)/f];if(S<4e4&&!t.touches[2]){var g=e.findNearestElement(o[0],o[1],!0,!0),m=e.findNearestElement(o[2],o[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:o[0],y:o[1]}}),e.touchData.start=g):m&&m.isNode()?(m.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:o[0],y:o[1]}}),e.touchData.start=m):i.emit({originalEvent:t,type:"cxttapstart",position:{x:o[0],y:o[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2])i.boxSelectionEnabled()&&t.preventDefault();else if(t.touches[1]);else if(t.touches[0]){var v=e.findNearestElements(o[0],o[1],!0,!0),w=v[0];if(null!=w&&(w.activate(),e.touchData.start=w,e.touchData.starts=v,e.nodeIsGrabbable(w))){var L=e.dragData.touchDragEles=i.collection(),D=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),w.selected()?(D=i.$((function(t){return t.selected()&&e.nodeIsGrabbable(t)})),c(D,{addToList:L})):u(w,{addToList:L}),a(w);var N=function(e){return{originalEvent:t,type:e,position:{x:o[0],y:o[1]}}};w.emit(N("grabon")),D?D.forEach((function(e){e.emit(N("grab"))})):w.emit(N("grab"))}n(w,["touchstart","tapstart","vmousedown"],t,{x:o[0],y:o[1]}),null==w&&(e.data.bgActivePosistion={x:s[0],y:s[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout((function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||n(e.touchData.start,["taphold"],t,{x:o[0],y:o[1]})}),e.tapholdDuration)}if(t.touches.length>=1){for(var P=e.touchData.startPosition=[],W=0;W<o.length;W++)P[W]=r[W]=o[W];var H=t.touches[0];e.touchData.startGPosition=[H.clientX,H.clientY]}}},!1),e.registerBinding(window,"touchmove",D=function(t){var i=e.touchData.capture;if(i||_(t)){var o=e.selection,s=e.cy,a=e.touchData.now,l=e.touchData.earlier,u=s.zoom();if(t.touches[0]){var d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);a[0]=d[0],a[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);a[2]=d[0],a[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);a[4]=d[0],a[5]=d[1]}var p,f=e.touchData.startGPosition;if(i&&t.touches[0]&&f){for(var g=[],m=0;m<a.length;m++)g[m]=a[m]-l[m];var v=t.touches[0].clientX-f[0],C=v*v,I=t.touches[0].clientY-f[1];p=C+I*I>=e.touchTapThreshold2}if(i&&e.touchData.cxt){t.preventDefault();var O=t.touches[0].clientX-A,L=t.touches[0].clientY-R,D=t.touches[1].clientX-A,N=t.touches[1].clientY-R,P=F(O,L,D,N);if(P/S>=2.25||P>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var W={originalEvent:t,type:"cxttapend",position:{x:a[0],y:a[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(W),e.touchData.start=null):s.emit(W)}}if(i&&e.touchData.cxt){W={originalEvent:t,type:"cxtdrag",position:{x:a[0],y:a[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(W):s.emit(W),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var H=e.findNearestElement(a[0],a[1],!0,!0);e.touchData.cxtOver&&H===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:a[0],y:a[1]}}),e.touchData.cxtOver=H,H&&H.emit({originalEvent:t,type:"cxtdragover",position:{x:a[0],y:a[1]}}))}else if(i&&t.touches[2]&&s.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||s.emit({originalEvent:t,type:"boxstart",position:{x:a[0],y:a[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,o[4]=1,o&&0!==o.length&&void 0!==o[0]?(o[2]=(a[0]+a[2]+a[4])/3,o[3]=(a[1]+a[3]+a[5])/3):(o[0]=(a[0]+a[2]+a[4])/3,o[1]=(a[1]+a[3]+a[5])/3,o[2]=(a[0]+a[2]+a[4])/3+1,o[3]=(a[1]+a[3]+a[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(i&&t.touches[1]&&!e.touchData.didSelect&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){if(t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),ee=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var U=0;U<ee.length;U++){var $=ee[U]._private;$.grabbed=!1,$.rscratch.inDragLayer=!1}}var V=e.touchData.start,G=(O=t.touches[0].clientX-A,L=t.touches[0].clientY-R,D=t.touches[1].clientX-A,N=t.touches[1].clientY-R,B(O,L,D,N)),z=G/k;if(M){var X=(O-y+(D-T))/2,j=(L-b+(N-E))/2,K=s.zoom(),Y=K*z,q=s.pan(),J=x[0]*K+q.x,Z=x[1]*K+q.y,Q={x:-Y/K*(J-q.x-X)+J,y:-Y/K*(Z-q.y-j)+Z};if(V&&V.active()){var ee=e.dragData.touchDragEles;h(ee),e.redrawHint("drag",!0),e.redrawHint("eles",!0),V.unactivate().emit("freeon"),ee.emit("free"),e.dragData.didDrag&&(V.emit("dragfreeon"),ee.emit("dragfree"))}s.viewport({zoom:Y,pan:Q,cancelOnFailedZoom:!0}),k=G,y=O,b=L,T=D,E=N,e.pinching=!0}if(t.touches[0]){d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);a[0]=d[0],a[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);a[2]=d[0],a[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);a[4]=d[0],a[5]=d[1]}}else if(t.touches[0]&&!e.touchData.didSelect){var te=e.touchData.start,ne=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(H=e.findNearestElement(a[0],a[1],!0,!0)),i&&null!=te&&t.preventDefault(),i&&null!=te&&e.nodeIsDraggable(te))if(p){ee=e.dragData.touchDragEles;var ie=!e.dragData.didDrag;ie&&c(ee,{inDragLayer:!0}),e.dragData.didDrag=!0;var oe={x:0,y:0};if(w(g[0])&&w(g[1]))if(oe.x+=g[0],oe.y+=g[1],ie)e.redrawHint("eles",!0),(re=e.touchData.dragDelta)&&w(re[0])&&w(re[1])&&(oe.x+=re[0],oe.y+=re[1]);e.hoverData.draggingEles=!0,ee.silentShift(oe).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==l[0]&&e.touchData.startPosition[1]==l[1]&&e.redrawHint("eles",!0),e.redraw()}else{var re;0===(re=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(re.push(g[0]),re.push(g[1])):(re[0]+=g[0],re[1]+=g[1])}if(n(te||H,["touchmove","tapdrag","vmousemove"],t,{x:a[0],y:a[1]}),te&&te.grabbed()||H==ne||(ne&&ne.emit({originalEvent:t,type:"tapdragout",position:{x:a[0],y:a[1]}}),H&&H.emit({originalEvent:t,type:"tapdragover",position:{x:a[0],y:a[1]}})),e.touchData.last=H,i)for(U=0;U<a.length;U++)a[U]&&e.touchData.startPosition[U]&&p&&(e.touchData.singleTouchMoved=!0);if(i&&(null==te||te.pannable())&&s.panningEnabled()&&s.userPanningEnabled()){r(te,e.touchData.starts)&&(t.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=Ge(e.touchData.startPosition)),e.swipePanning?s.panBy({x:g[0]*u,y:g[1]*u}):p&&(e.swipePanning=!0,s.panBy({x:v*u,y:I*u}),te&&(te.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);a[0]=d[0],a[1]=d[1]}}for(m=0;m<a.length;m++)l[m]=a[m];i&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(window,"touchcancel",N=function(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()}),e.registerBinding(window,"touchend",P=function(i){var o=e.touchData.start;if(e.touchData.capture){0===i.touches.length&&(e.touchData.capture=!1),i.preventDefault();var r=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var s,a=e.cy,l=a.zoom(),c=e.touchData.now,u=e.touchData.earlier;if(i.touches[0]){var d=e.projectIntoViewport(i.touches[0].clientX,i.touches[0].clientY);c[0]=d[0],c[1]=d[1]}if(i.touches[1]){d=e.projectIntoViewport(i.touches[1].clientX,i.touches[1].clientY);c[2]=d[0],c[3]=d[1]}if(i.touches[2]){d=e.projectIntoViewport(i.touches[2].clientX,i.touches[2].clientY);c[4]=d[0],c[5]=d[1]}if(o&&o.unactivate(),e.touchData.cxt){if(s={originalEvent:i,type:"cxttapend",position:{x:c[0],y:c[1]}},o?o.emit(s):a.emit(s),!e.touchData.cxtDragged){var p={originalEvent:i,type:"cxttap",position:{x:c[0],y:c[1]}};o?o.emit(p):a.emit(p)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!i.touches[2]&&a.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var f=a.collection(e.getAllInBox(r[0],r[1],r[2],r[3]));r[0]=void 0,r[1]=void 0,r[2]=void 0,r[3]=void 0,r[4]=0,e.redrawHint("select",!0),a.emit({type:"boxend",originalEvent:i,position:{x:c[0],y:c[1]}});f.emit("box").stdFilter((function(e){return e.selectable()&&!e.selected()})).select().emit("boxselect"),f.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=o&&o.unactivate(),i.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(i.touches[1]);else if(i.touches[0]);else if(!i.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var g=e.dragData.touchDragEles;if(null!=o){var m=o._private.grabbed;h(g),e.redrawHint("drag",!0),e.redrawHint("eles",!0),m&&(o.emit("freeon"),g.emit("free"),e.dragData.didDrag&&(o.emit("dragfreeon"),g.emit("dragfree"))),n(o,["touchend","tapend","vmouseup","tapdragout"],i,{x:c[0],y:c[1]}),o.unactivate(),e.touchData.start=null}else{var v=e.findNearestElement(c[0],c[1],!0,!0);n(v,["touchend","tapend","vmouseup","tapdragout"],i,{x:c[0],y:c[1]})}var _=e.touchData.startPosition[0]-c[0],y=_*_,b=e.touchData.startPosition[1]-c[1],T=(y+b*b)*l*l;e.touchData.singleTouchMoved||(o||a.$(":selected").unselect(["tapunselect"]),n(o,["tap","vclick"],i,{x:c[0],y:c[1]})),null!=o&&!e.dragData.didDrag&&o._private.selectable&&T<e.touchTapThreshold2&&!e.pinching&&("single"===a.selectionType()?(a.$(t).unmerge(o).unselect(["tapunselect"]),o.select(["tapselect"])):o.selected()?o.unselect(["tapunselect"]):o.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var E=0;E<c.length;E++)u[E]=c[E];e.dragData.didDrag=!1,0===i.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=null,e.touchData.startGPosition=null,e.touchData.didSelect=!1),i.touches.length<2&&(1===i.touches.length&&(e.touchData.startGPosition=[i.touches[0].clientX,i.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var W=[],H=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},U=function(e){W.push(function(e){return{event:e,touch:H(e)}}(e))},$=function(e){for(var t=0;t<W.length;t++){if(W[t].event.pointerId===e.pointerId)return void W.splice(t,1)}},V=function(e){e.touches=W.map((function(e){return e.touch}))},G=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",(function(e){G(e)||(e.preventDefault(),U(e),V(e),L(e))})),e.registerBinding(e.container,"pointerup",(function(e){G(e)||($(e),V(e),P(e))})),e.registerBinding(e.container,"pointercancel",(function(e){G(e)||($(e),V(e),N())})),e.registerBinding(e.container,"pointermove",(function(e){G(e)||(e.preventDefault(),function(e){var t=W.filter((function(t){return t.event.pointerId===e.pointerId}))[0];t.event=e,t.touch=H(e)}(e),V(e),D(e))}))}};var Ys={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,n,i,o){this.renderer.nodeShapeImpl("polygon",e,t,n,i,o,this.points)},intersectLine:function(e,t,n,i,o,r,s){return Et(o,r,this.points,e,t,n/2,i/2,s)},checkPoint:function(e,t,n,i,o,r,s){return gt(e,t,this.points,r,s,i,o,[0,-1],n)}}}};Ys.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,r,s){return function(e,t,n,i,o,r){var s=n-e,a=i-t;s/=o,a/=r;var l=Math.sqrt(s*s+a*a),c=l-1;if(c<0)return[];var u=c/l;return[(n-e)*u+e,(i-t)*u+t]}(o,r,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,o,r,s){return _t(e,t,i,o,r,s,n)}}},Ys.generateRoundPolygon=function(e,t){for(var n=new Array(2*t.length),i=0;i<t.length/2;i++){var o=2*i,r=void 0;r=i<t.length/2-1?2*(i+1):0,n[4*i]=t[o],n[4*i+1]=t[o+1];var s=t[r]-t[o],a=t[r+1]-t[o+1],l=Math.sqrt(s*s+a*a);n[4*i+2]=s/l,n[4*i+3]=a/l}return this.nodeShapes[e]={renderer:this,name:e,points:n,draw:function(e,t,n,i,o){this.renderer.nodeShapeImpl("round-polygon",e,t,n,i,o,this.points)},intersectLine:function(e,t,n,i,o,r,s){return function(e,t,n,i,o,r,s,a){for(var l,c=[],u=new Array(n.length),h=r/2,d=s/2,p=At(r,s),f=0;f<n.length/4;f++){var g,m=void 0;m=0===f?n.length-2:4*f-2,g=4*f+2;var v=i+h*n[4*f],_=o+d*n[4*f+1],y=-n[m]*n[g]-n[m+1]*n[g+1],b=p/Math.tan(Math.acos(y)/2),T=v-b*n[m],E=_-b*n[m+1],w=v+b*n[g],k=_+b*n[g+1];0===f?(u[n.length-2]=T,u[n.length-1]=E):(u[4*f-2]=T,u[4*f-1]=E),u[4*f]=w,u[4*f+1]=k;var S=n[m+1],C=-n[m];S*n[g]+C*n[g+1]<0&&(S*=-1,C*=-1),0!==(l=yt(e,t,i,o,T+S*p,E+C*p,p)).length&&c.push(l[0],l[1])}for(var x=0;x<u.length/4;x++)0!==(l=Tt(e,t,i,o,u[4*x],u[4*x+1],u[4*x+2],u[4*x+3],!1)).length&&c.push(l[0],l[1]);if(c.length>2){for(var A=[c[0],c[1]],R=Math.pow(A[0]-e,2)+Math.pow(A[1]-t,2),I=1;I<c.length/2;I++){var O=Math.pow(c[2*I]-e,2)+Math.pow(c[2*I+1]-t,2);O<=R&&(A[0]=c[2*I],A[1]=c[2*I+1],R=O)}return A}return c}(o,r,this.points,e,t,n,i)},checkPoint:function(e,t,n,i,o,r,s){return function(e,t,n,i,o,r,s){for(var a=new Array(n.length),l=r/2,c=s/2,u=At(r,s),h=u*u,d=0;d<n.length/4;d++){var p,f=void 0;f=0===d?n.length-2:4*d-2,p=4*d+2;var g=i+l*n[4*d],m=o+c*n[4*d+1],v=-n[f]*n[p]-n[f+1]*n[p+1],_=u/Math.tan(Math.acos(v)/2),y=g-_*n[f],b=m-_*n[f+1],T=g+_*n[p],E=m+_*n[p+1];a[4*d]=y,a[4*d+1]=b,a[4*d+2]=T,a[4*d+3]=E;var w=n[f+1],k=-n[f];w*n[p]+k*n[p+1]<0&&(w*=-1,k*=-1);var S=y+w*u,C=b+k*u;if(Math.pow(S-e,2)+Math.pow(C-t,2)<=h)return!0}return ft(e,t,a)}(e,t,this.points,r,s,i,o)}}},Ys.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:kt(4,0),draw:function(e,t,n,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,r,s){return ct(o,r,e,t,n,i,s)},checkPoint:function(e,t,n,i,o,r,s){var a=xt(i,o),l=2*a;return!!gt(e,t,this.points,r,s,i,o-l,[0,-1],n)||(!!gt(e,t,this.points,r,s,i-l,o,[0,-1],n)||(!!_t(e,t,l,l,r-i/2+a,s-o/2+a,n)||(!!_t(e,t,l,l,r+i/2-a,s-o/2+a,n)||(!!_t(e,t,l,l,r+i/2-a,s+o/2-a,n)||!!_t(e,t,l,l,r-i/2+a,s+o/2-a,n)))))}}},Ys.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:kt(4,0),draw:function(e,t,n,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},generateCutTrianglePts:function(e,t,n,i){var o=this.cornerLength,r=t/2,s=e/2,a=n-s,l=n+s,c=i-r,u=i+r;return{topLeft:[a,c+o,a+o,c,a+o,c+o],topRight:[l-o,c,l,c+o,l-o,c+o],bottomRight:[l,u-o,l-o,u,l-o,u-o],bottomLeft:[a+o,u,a,u-o,a+o,u-o]}},intersectLine:function(e,t,n,i,o,r,s){var a=this.generateCutTrianglePts(n+2*s,i+2*s,e,t),l=[].concat.apply([],[a.topLeft.splice(0,4),a.topRight.splice(0,4),a.bottomRight.splice(0,4),a.bottomLeft.splice(0,4)]);return Et(o,r,l,e,t)},checkPoint:function(e,t,n,i,o,r,s){if(gt(e,t,this.points,r,s,i,o-2*this.cornerLength,[0,-1],n))return!0;if(gt(e,t,this.points,r,s,i-2*this.cornerLength,o,[0,-1],n))return!0;var a=this.generateCutTrianglePts(i,o,r,s);return ft(e,t,a.topLeft)||ft(e,t,a.topRight)||ft(e,t,a.bottomRight)||ft(e,t,a.bottomLeft)}}},Ys.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:kt(4,0),draw:function(e,t,n,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,r,s){var a=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),l=function(e){var t=Ze({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),n=Ze({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),i=Ze({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,n.x,n.y,i.x,i.y,e[4],e[5]]},c=[].concat(l(a.topLeft),l(a.topRight),l(a.bottomRight),l(a.bottomLeft));return Et(o,r,c,e,t)},generateBarrelBezierPts:function(e,t,n,i){var o=t/2,r=e/2,s=n-r,a=n+r,l=i-o,c=i+o,u=Rt(e,t),h=u.heightOffset,d=u.widthOffset,p=u.ctrlPtOffsetPct*e,f={topLeft:[s,l+h,s+p,l,s+d,l],topRight:[a-d,l,a-p,l,a,l+h],bottomRight:[a,c-h,a-p,c,a-d,c],bottomLeft:[s+d,c,s+p,c,s,c-h]};return f.topLeft.isTop=!0,f.topRight.isTop=!0,f.bottomLeft.isBottom=!0,f.bottomRight.isBottom=!0,f},checkPoint:function(e,t,n,i,o,r,s){var a=Rt(i,o),l=a.heightOffset,c=a.widthOffset;if(gt(e,t,this.points,r,s,i,o-2*l,[0,-1],n))return!0;if(gt(e,t,this.points,r,s,i-2*c,o,[0,-1],n))return!0;for(var u=this.generateBarrelBezierPts(i,o,r,s),h=function(e,t,n){var i,o,r=n[4],s=n[2],a=n[0],l=n[5],c=n[1],u=Math.min(r,a),h=Math.max(r,a),d=Math.min(l,c),p=Math.max(l,c);if(u<=e&&e<=h&&d<=t&&t<=p){var f=[(i=r)-2*(o=s)+a,2*(o-i),i],g=function(e,t,n,i){var o=t*t-4*e*(n-=i);if(o<0)return[];var r=Math.sqrt(o),s=2*e;return[(-t+r)/s,(-t-r)/s]}(f[0],f[1],f[2],e).filter((function(e){return 0<=e&&e<=1}));if(g.length>0)return g[0]}return null},d=Object.keys(u),p=0;p<d.length;p++){var f=u[d[p]],g=h(e,t,f);if(null!=g){var m=f[5],v=f[3],_=f[1],y=Je(m,v,_,g);if(f.isTop&&y<=t)return!0;if(f.isBottom&&t<=y)return!0}}return!1}}},Ys.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:kt(4,0),draw:function(e,t,n,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,r,s){var a=t-(i/2+s),l=Tt(o,r,e,t,e-(n/2+s),a,e+(n/2+s),a,!1);return l.length>0?l:ct(o,r,e,t,n,i,s)},checkPoint:function(e,t,n,i,o,r,s){var a=xt(i,o),l=2*a;if(gt(e,t,this.points,r,s,i,o-l,[0,-1],n))return!0;if(gt(e,t,this.points,r,s,i-l,o,[0,-1],n))return!0;var c=i/2+2*n,u=o/2+2*n;return!!ft(e,t,[r-c,s-u,r-c,s,r+c,s,r+c,s-u])||(!!_t(e,t,l,l,r+i/2-a,s+o/2-a,n)||!!_t(e,t,l,l,r-i/2+a,s+o/2-a,n))}}},Ys.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",kt(3,0)),this.generateRoundPolygon("round-triangle",kt(3,0)),this.generatePolygon("rectangle",kt(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",kt(5,0)),this.generateRoundPolygon("round-pentagon",kt(5,0)),this.generatePolygon("hexagon",kt(6,0)),this.generateRoundPolygon("round-hexagon",kt(6,0)),this.generatePolygon("heptagon",kt(7,0)),this.generateRoundPolygon("round-heptagon",kt(7,0)),this.generatePolygon("octagon",kt(8,0)),this.generateRoundPolygon("round-octagon",kt(8,0));var i=new Array(20),o=Ct(5,0),r=Ct(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var a=0;a<r.length/2;a++)r[2*a]*=s,r[2*a+1]*=s;for(a=0;a<5;a++)i[4*a]=o[2*a],i[4*a+1]=o[2*a+1],i[4*a+2]=r[2*a],i[4*a+3]=r[2*a+1];i=St(i),this.generatePolygon("star",i),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var n,i="polygon-"+e.join("$");return(n=this[i])?n:t.generatePolygon(i,e)}};var qs={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||me();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&ue("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort((function(e,t){return t.priority-e.priority}))}}},Js=function(e,t,n){for(var i=e.beforeRenderCallbacks,o=0;o<i.length;o++)i[o].fn(t,n)};qs.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;K((function n(i){if(!e.destroyed){if(t.batching());else if(e.requestedFrame&&!e.skipFrame){Js(e,!0,i);var o=Y();e.render(e.renderOptions);var r=e.lastDrawTime=Y();void 0===e.averageRedrawTime&&(e.averageRedrawTime=r-o),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var s=r-o;e.redrawTotalTime+=s,e.lastRedrawTime=s,e.averageRedrawTime=e.averageRedrawTime/2+s/2,e.requestedFrame=!1}else Js(e,!1,i);e.skipFrame=!1,K(n)}}))}};var Zs=function(e){this.init(e)},Qs=Zs.prototype;Qs.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Qs.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container();if(d){var i=d.document,o=i.head,r="__________cytoscape_container",s=null!=i.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(r)<0&&(n.className=(n.className||"")+" "+r),!s){var a=i.createElement("style");a.id="__________cytoscape_stylesheet",a.innerHTML="."+r+" { position: relative; }",o.insertBefore(a,o.children[0])}"static"===d.getComputedStyle(n).getPropertyValue("position")&&de("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=w(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},Qs.notify=function(e,t){var n=this,i=n.cy;this.destroyed||("init"!==e?"destroy"!==e?(("add"===e||"remove"===e||"move"===e&&i.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&n.invalidateCachedZSortedEles(),"viewport"===e&&n.redrawHint("select",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},Qs.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(e){}},Qs.isHeadless=function(){return!1},[Os,Xs,js,Ks,Ys,qs].forEach((function(e){H(Qs,e)}));var ea=function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var i=o((function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()}),e.deqRedrawThreshold),r=e.priority||ce;n.beforeRender((function(o,r){var s=Y(),a=n.averageRedrawTime,l=n.lastRedrawTime,c=[],u=n.cy.extent(),h=n.getPixelRatio();for(o||n.flushRenderedStyleQueue();;){var d=Y(),p=d-s,f=d-r;if(l<1e3/60){var g=1e3/60-(o?a:0);if(f>=e.deqFastCost*g)break}else if(o){if(p>=e.deqCost*l||p>=e.deqAvgCost*a)break}else if(f>=e.deqNoDrawCost*(1e3/60))break;var m=e.deq(t,h,u);if(!(m.length>0))break;for(var v=0;v<m.length;v++)c.push(m[v])}c.length>0&&(e.onDeqd(t,c),!o&&e.shouldRedraw(t,c,h,u)&&i())}),r(t))}}},ta=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;a(this,e),this.idsByKey=new Ee,this.keyForId=new Ee,this.cachesByLvl=new Ee,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=n}return c(e,[{key:"getIdsFor",value:function(e){null==e&&ue("Can not get id list for null key");var t=this.idsByKey,n=this.idsByKey.get(e);return n||(n=new ke,t.set(e,n)),n}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t),i=this.getKey(e);this.deleteIdForKey(n,t),this.addIdForKey(i,t),this.keyForId.set(t,i)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteIdForKey(n,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,n=this.lvls,i=t.get(e);return i||(i=new Ee,t.set(e,i),n.push(e)),i}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var n=this.getKey(e),i=this.getCache(n,t);return null!=i&&this.updateKeyMappingFor(e),i}},{key:"getForCachedKey",value:function(e,t){var n=this.keyForId.get(e.id());return this.getCache(n,t)}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var n=this.getKey(e);return this.hasCache(n,t)}},{key:"setCache",value:function(e,t,n){n.key=e,this.getCachesAt(t).set(e,n)}},{key:"set",value:function(e,t,n){var i=this.getKey(e);this.setCache(i,t,n),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function(e,t){var n=this.getKey(e);this.deleteCache(n,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach((function(n){return t.deleteCache(e,n)}))}},{key:"invalidate",value:function(e){var t=e.id(),n=this.keyForId.get(t);this.deleteKeyMappingFor(e);var i=this.doesEleInvalidateKey(e);return i&&this.invalidateKey(n),i||0===this.getNumberOfIdsForKey(n)}}]),e}(),na={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},ia=ve({getKey:null,doesEleInvalidateKey:ae,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:se,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),oa=function(e,t){this.renderer=e,this.onDequeues=[];var n=ia(t);H(this,n),this.lookup=new ta(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},ra=oa.prototype;ra.reasons=na,ra.getTextureQueue=function(e){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[e]=this.eleImgCaches[e]||[]},ra.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},ra.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new r((function(e,t){return t.reqs-e.reqs}))},ra.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},ra.getElement=function(e,t,n,i,o){var r=this,s=this.renderer,a=s.cy.zoom(),l=this.lookup;if(0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible())return null;if(!r.allowEdgeTxrCaching&&e.isEdge()||!r.allowParentTxrCaching&&e.isParent())return null;if(null==i&&(i=Math.ceil(Xe(a*n))),i<-4)i=-4;else if(a>=7.99||i>3)return null;var c=Math.pow(2,i),u=t.h*c,h=t.w*c,d=s.eleTextBiggerThanMin(e,c);if(!this.isVisible(e,d))return null;var p,f=l.get(e,i);if(f&&f.invalidated&&(f.invalidated=!1,f.texture.invalidatedWidth-=f.width),f)return f;if(p=u<=25?25:u<=50?50:50*Math.ceil(u/50),u>1024||h>1024)return null;var g=r.getTextureQueue(p),m=g[g.length-2],v=function(){return r.recycleTexture(p,h)||r.addTexture(p,h)};m||(m=g[g.length-1]),m||(m=v()),m.width-m.usedWidth<h&&(m=v());for(var _,y=function(e){return e&&e.scaledLabelShown===d},b=o&&o===na.dequeue,T=o&&o===na.highQuality,E=o&&o===na.downscale,w=i+1;w<=3;w++){var k=l.get(e,w);if(k){_=k;break}}var S=_&&_.level===i+1?_:null,C=function(){m.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,m.usedWidth,0,h,u)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,h,p),y(S))C();else if(y(_)){if(!T)return r.queueElement(e,_.level-1),_;for(var x=_.level;x>i;x--)S=r.getElement(e,t,n,x,na.downscale);C()}else{var A;if(!b&&!T&&!E)for(var R=i-1;R>=-4;R--){var I=l.get(e,R);if(I){A=I;break}}if(y(A))return r.queueElement(e,i),A;m.context.translate(m.usedWidth,0),m.context.scale(c,c),this.drawElement(m.context,e,t,d,!1),m.context.scale(1/c,1/c),m.context.translate(-m.usedWidth,0)}return f={x:m.usedWidth,texture:m,level:i,scale:c,width:h,height:u,scaledLabelShown:d},m.usedWidth+=Math.ceil(h+8),m.eleCaches.push(f),l.set(e,i,f),r.checkTextureFullness(m),f},ra.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},ra.invalidateElement=function(e){var t=this.lookup,n=[];if(t.isInvalid(e)){for(var i=-4;i<=3;i++){var o=t.getForCachedKey(e,i);o&&n.push(o)}if(t.invalidate(e))for(var r=0;r<n.length;r++){var s=n[r],a=s.texture;a.invalidatedWidth+=s.width,s.invalidated=!0,this.checkTextureUtility(a)}this.removeFromQueue(e)}},ra.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},ra.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?_e(t,e):e.fullnessChecks++},ra.retireTexture=function(e){var t=e.height,n=this.getTextureQueue(t),i=this.lookup;_e(n,e),e.retired=!0;for(var o=e.eleCaches,r=0;r<o.length;r++){var s=o[r];i.deleteCache(s.key,s.level)}ye(o),this.getRetiredTextureQueue(t).push(e)},ra.addTexture=function(e,t){var n={};return this.getTextureQueue(e).push(n),n.eleCaches=[],n.height=e,n.width=Math.max(1024,t),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},ra.recycleTexture=function(e,t){for(var n=this.getTextureQueue(e),i=this.getRetiredTextureQueue(e),o=0;o<i.length;o++){var r=i[o];if(r.width>=t)return r.retired=!1,r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,ye(r.eleCaches),r.context.setTransform(1,0,0,1,0,0),r.context.clearRect(0,0,r.width,r.height),_e(i,r),n.push(r),r}},ra.queueElement=function(e,t){var n=this.getElementQueue(),i=this.getElementKeyToQueue(),o=this.getKey(e),r=i[o];if(r)r.level=Math.max(r.level,t),r.eles.merge(e),r.reqs++,n.updateItem(r);else{var s={eles:e.spawn().merge(e),level:t,reqs:1,key:o};n.push(s),i[o]=s}},ra.dequeue=function(e){for(var t=this.getElementQueue(),n=this.getElementKeyToQueue(),i=[],o=this.lookup,r=0;r<1&&t.size()>0;r++){var s=t.pop(),a=s.key,l=s.eles[0],c=o.hasCache(l,s.level);if(n[a]=null,!c){i.push(s);var u=this.getBoundingBox(l);this.getElement(l,u,e,s.level,na.dequeue)}}return i},ra.removeFromQueue=function(e){var t=this.getElementQueue(),n=this.getElementKeyToQueue(),i=this.getKey(e),o=n[i];null!=o&&(1===o.eles.length?(o.reqs=re,t.updateItem(o),t.pop(),n[i]=null):o.eles.unmerge(e))},ra.onDequeue=function(e){this.onDequeues.push(e)},ra.offDequeue=function(e){_e(this.onDequeues,e)},ra.setupDequeueing=ea({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){(0,e.onDequeues[n])(t)}},shouldRedraw:function(e,t,n,i){for(var o=0;o<t.length;o++)for(var r=t[o].eles,s=0;s<r.length;s++){var a=r[s].boundingBox();if(st(a,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var sa=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Y()-500,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=o((function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)}),50),n.beforeRender((function(e,n){n-t.lastInvalidationTime<=250?t.skipping=!0:t.skipping=!1}),n.beforeRenderPriorities.lyrTxrSkip);t.layersQueue=new r((function(e,t){return t.reqs-e.reqs})),t.setupDequeueing()},aa=sa.prototype,la=0,ca=Math.pow(2,53)-1;aa.makeLayer=function(e,t){var n=Math.pow(2,t),i=Math.ceil(e.w*n),o=Math.ceil(e.h*n),r=this.renderer.makeOffscreenCanvas(i,o),s={id:la=++la%ca,bb:e,level:t,width:i,height:o,canvas:r,context:r.getContext("2d"),eles:[],elesQueue:[],reqs:0},a=s.context,l=-s.bb.x1,c=-s.bb.y1;return a.scale(n,n),a.translate(l,c),s},aa.getLayers=function(e,t,n){var i=this,o=i.renderer.cy.zoom(),r=i.firstGet;if(i.firstGet=!1,null==n)if((n=Math.ceil(Xe(o*t)))<-4)n=-4;else if(o>=3.99||n>2)return null;i.validateLayersElesOrdering(n,e);var s,a,l=i.layersByLevel,c=Math.pow(2,n),u=l[n]=l[n]||[];if(i.levelIsComplete(n,e))return u;!function(){var t=function(t){if(i.validateLayersElesOrdering(t,e),i.levelIsComplete(t,e))return a=l[t],!0},o=function(e){if(!a)for(var i=n+e;-4<=i&&i<=2&&!t(i);i+=e);};o(1),o(-1);for(var r=u.length-1;r>=0;r--){var s=u[r];s.invalid&&_e(u,s)}}();var h=function(t){var o=(t=t||{}).after;if(function(){if(!s){s=et();for(var t=0;t<e.length;t++)n=s,i=e[t].boundingBox(),n.x1=Math.min(n.x1,i.x1),n.x2=Math.max(n.x2,i.x2),n.w=n.x2-n.x1,n.y1=Math.min(n.y1,i.y1),n.y2=Math.max(n.y2,i.y2),n.h=n.y2-n.y1}var n,i}(),s.w*c*(s.h*c)>16e6)return null;var r=i.makeLayer(s,n);if(null!=o){var a=u.indexOf(o)+1;u.splice(a,0,r)}else(void 0===t.insert||t.insert)&&u.unshift(r);return r};if(i.skipping&&!r)return null;for(var d=null,p=e.length/1,f=!r,g=0;g<e.length;g++){var m=e[g],v=m._private.rscratch,_=v.imgLayerCaches=v.imgLayerCaches||{},y=_[n];if(y)d=y;else{if((!d||d.eles.length>=p||!lt(d.bb,m.boundingBox()))&&!(d=h({insert:!0,after:d})))return null;a||f?i.queueLayer(d,m):i.drawEleInLayer(d,m,n,t),d.eles.push(m),_[n]=d}}return a||(f?null:u)},aa.getEleLevelForLayerLevel=function(e,t){return e},aa.drawEleInLayer=function(e,t,n,i){var o=this.renderer,r=e.context,s=t.boundingBox();0!==s.w&&0!==s.h&&t.visible()&&(n=this.getEleLevelForLayerLevel(n,i),o.setImgSmoothing(r,!1),o.drawCachedElement(r,t,null,null,n,!0),o.setImgSmoothing(r,!0))},aa.levelIsComplete=function(e,t){var n=this.layersByLevel[e];if(!n||0===n.length)return!1;for(var i=0,o=0;o<n.length;o++){var r=n[o];if(r.reqs>0)return!1;if(r.invalid)return!1;i+=r.eles.length}return i===t.length},aa.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var i=0;i<n.length;i++){for(var o=n[i],r=-1,s=0;s<t.length;s++)if(o.eles[0]===t[s]){r=s;break}if(r<0)this.invalidateLayer(o);else{var a=r;for(s=0;s<o.eles.length;s++)if(o.eles[s]!==t[a+s]){this.invalidateLayer(o);break}}}},aa.updateElementsInLayers=function(e,t){for(var n=C(e[0]),i=0;i<e.length;i++)for(var o=n?null:e[i],r=n?e[i]:e[i].ele,s=r._private.rscratch,a=s.imgLayerCaches=s.imgLayerCaches||{},l=-4;l<=2;l++){var c=a[l];c&&(o&&this.getEleLevelForLayerLevel(c.level)!==o.level||t(c,r,o))}},aa.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var n=this.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e},aa.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=Y(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,(function(e,n,i){t.invalidateLayer(e)})))},aa.invalidateLayer=function(e){if(this.lastInvalidationTime=Y(),!e.invalid){var t=e.level,n=e.eles,i=this.layersByLevel[t];_e(i,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var o=0;o<n.length;o++){var r=n[o]._private.rscratch.imgLayerCaches;r&&(r[t]=null)}}},aa.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,(function(e,n,i){var o=e.replacement;if(o||((o=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,o.eles=e.eles),!o.reqs)for(var r=0;r<o.eles.length;r++)t.queueLayer(o,o.eles[r])}))},aa.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},aa.queueLayer=function(e,t){var n=this.layersQueue,i=e.elesQueue,o=i.hasId=i.hasId||{};if(!e.replacement){if(t){if(o[t.id()])return;i.push(t),o[t.id()]=!0}e.reqs?(e.reqs++,n.updateItem(e)):(e.reqs=1,n.push(e))}},aa.dequeue=function(e){for(var t=this.layersQueue,n=[],i=0;i<1&&0!==t.size();){var o=t.peek();if(o.replacement)t.pop();else if(o.replaces&&o!==o.replaces.replacement)t.pop();else if(o.invalid)t.pop();else{var r=o.elesQueue.shift();r&&(this.drawEleInLayer(o,r,o.level,e),i++),0===n.length&&n.push(!0),0===o.elesQueue.length&&(t.pop(),o.reqs=0,o.replaces&&this.applyLayerReplacement(o),this.requestRedraw())}}return n},aa.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],n=e.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=e;for(var o=0;o<e.eles.length;o++){var r=e.eles[o]._private,s=r.imgLayerCaches=r.imgLayerCaches||{};s&&(s[e.level]=e)}this.requestRedraw()}},aa.requestRedraw=o((function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()}),100),aa.setupDequeueing=ea({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t){return e.dequeue(t)},onDeqd:ce,shouldRedraw:se,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var ua,ha={};function da(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.lineTo(i.x,i.y)}}function pa(e,t,n){for(var i,o=0;o<t.length;o++){var r=t[o];0===o&&(i=r),e.lineTo(r.x,r.y)}e.quadraticCurveTo(n.x,n.y,i.x,i.y)}function fa(e,t,n){e.beginPath&&e.beginPath();for(var i=t,o=0;o<i.length;o++){var r=i[o];e.lineTo(r.x,r.y)}var s=n,a=n[0];e.moveTo(a.x,a.y);for(o=1;o<s.length;o++){r=s[o];e.lineTo(r.x,r.y)}e.closePath&&e.closePath()}function ga(e,t,n,i){e.arc(t,n,i,0,2*Math.PI,!1)}ha.arrowShapeImpl=function(e){return(ua||(ua={polygon:da,"triangle-backcurve":pa,"triangle-tee":fa,"triangle-cross":fa,circle:ga}))[e]};var ma={drawElement:function(e,t,n,i,o,r){t.isNode()?this.drawNode(e,t,n,i,o,r):this.drawEdge(e,t,n,i,o,r)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawCachedElementPortion:function(e,t,n,i,o,r,s,a){var l=this,c=n.getBoundingBox(t);if(0!==c.w&&0!==c.h){var u=n.getElement(t,c,i,o,r);if(null!=u){var h=a(l,t);if(0===h)return;var d,p,f,g,m,v,_=s(l,t),y=c.x1,b=c.y1,T=c.w,E=c.h;if(0!==_){var w=n.getRotationPoint(t);f=w.x,g=w.y,e.translate(f,g),e.rotate(_),(m=l.getImgSmoothing(e))||l.setImgSmoothing(e,!0);var k=n.getRotationOffset(t);d=k.x,p=k.y}else d=y,p=b;1!==h&&(v=e.globalAlpha,e.globalAlpha=v*h),e.drawImage(u.texture.canvas,u.x,0,u.width,u.height,d,p,T,E),1!==h&&(e.globalAlpha=v),0!==_&&(e.rotate(-_),e.translate(-f,-g),m||l.setImgSmoothing(e,!1))}else n.drawElement(e,t)}}},va=function(){return 0},_a=function(e,t){return e.getTextAngle(t,null)},ya=function(e,t){return e.getTextAngle(t,"source")},ba=function(e,t){return e.getTextAngle(t,"target")},Ta=function(e,t){return t.effectiveOpacity()},Ea=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};ma.drawCachedElement=function(e,t,n,i,o,r){var s=this,a=s.data,l=a.eleTxrCache,c=a.lblTxrCache,u=a.slbTxrCache,h=a.tlbTxrCache,d=t.boundingBox(),p=!0===r?l.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&t.visible()&&(!i||st(d,i))){var f=t.isEdge(),g=t.element()._private.rscratch.badLine;s.drawCachedElementPortion(e,t,l,n,o,p,va,Ta),f&&g||s.drawCachedElementPortion(e,t,c,n,o,p,_a,Ea),f&&!g&&(s.drawCachedElementPortion(e,t,u,n,o,p,ya,Ea),s.drawCachedElementPortion(e,t,h,n,o,p,ba,Ea)),s.drawElementOverlay(e,t)}},ma.drawElements=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];this.drawElement(e,i)}},ma.drawCachedElements=function(e,t,n,i){for(var o=0;o<t.length;o++){var r=t[o];this.drawCachedElement(e,r,n,i)}},ma.drawCachedNodes=function(e,t,n,i){for(var o=0;o<t.length;o++){var r=t[o];r.isNode()&&this.drawCachedElement(e,r,n,i)}},ma.drawLayeredElements=function(e,t,n,i){var o=this.data.lyrTxrCache.getLayers(t,n);if(o)for(var r=0;r<o.length;r++){var s=o[r],a=s.bb;0!==a.w&&0!==a.h&&e.drawImage(s.canvas,a.x1,a.y1,a.w,a.h)}else this.drawCachedElements(e,t,n,i)};var wa={drawEdge:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,a=t._private.rscratch;if((!r||t.visible())&&!a.badLine&&null!=a.allpts&&!isNaN(a.allpts[0])){var l;n&&(l=n,e.translate(-l.x1,-l.y1));var c=r?t.pstyle("opacity").value:1,u=t.pstyle("line-style").value,h=t.pstyle("width").pfValue,d=t.pstyle("line-cap").value,p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;e.lineWidth=h,e.lineCap=d,s.eleStrokeStyle(e,t,n),s.drawEdgePath(t,e,a.allpts,u),e.lineCap="butt"},f=function(){o&&s.drawEdgeOverlay(e,t)},g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;s.drawArrowheads(e,t,n)},m=function(){s.drawElementText(e,t,null,i)};e.lineJoin="round";var v="yes"===t.pstyle("ghost").value;if(v){var _=t.pstyle("ghost-offset-x").pfValue,y=t.pstyle("ghost-offset-y").pfValue,b=t.pstyle("ghost-opacity").value,T=c*b;e.translate(_,y),p(T),g(T),e.translate(-_,-y)}p(),g(),f(),m(),n&&e.translate(l.x1,l.y1)}},drawEdgeOverlay:function(e,t){if(t.visible()){var n=t.pstyle("overlay-opacity").value;if(0!==n){var i=this,o=i.usePaths(),r=t._private.rscratch,s=2*t.pstyle("overlay-padding").pfValue,a=t.pstyle("overlay-color").value;e.lineWidth=s,"self"!==r.edgeType||o?e.lineCap="round":e.lineCap="butt",i.colorStrokeStyle(e,a[0],a[1],a[2],n),i.drawEdgePath(t,e,r.allpts,"solid")}}},drawEdgePath:function(e,t,n,i){var o,r=e._private.rscratch,s=t,a=!1,l=this.usePaths(),c=e.pstyle("line-dash-pattern").pfValue,u=e.pstyle("line-dash-offset").pfValue;if(l){var h=n.join("$");r.pathCacheKey&&r.pathCacheKey===h?(o=t=r.pathCache,a=!0):(o=t=new Path2D,r.pathCacheKey=h,r.pathCache=o)}if(s.setLineDash)switch(i){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash(c),s.lineDashOffset=u;break;case"solid":s.setLineDash([])}if(!a&&!r.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),r.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<n.length;d+=4)t.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"segments":case"haystack":for(var p=2;p+1<n.length;p+=2)t.lineTo(n[p],n[p+1])}t=s,l?t.stroke(o):t.stroke(),t.setLineDash&&t.setLineDash([])},drawArrowheads:function(e,t,n){var i=t._private.rscratch,o="haystack"===i.edgeType;o||this.drawArrowhead(e,t,"source",i.arrowStartX,i.arrowStartY,i.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",i.midX,i.midY,i.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",i.midX,i.midY,i.midsrcArrowAngle,n),o||this.drawArrowhead(e,t,"target",i.arrowEndX,i.arrowEndY,i.tgtArrowAngle,n)},drawArrowhead:function(e,t,n,i,o,r,s){if(!(isNaN(i)||null==i||isNaN(o)||null==o||isNaN(r)||null==r)){var a=t.pstyle(n+"-arrow-shape").value;if("none"!==a){var l="hollow"===t.pstyle(n+"-arrow-fill").value?"both":"filled",c=t.pstyle(n+"-arrow-fill").value,u=t.pstyle("width").pfValue,h=t.pstyle("opacity").value;void 0===s&&(s=h);var d=e.globalCompositeOperation;1===s&&"hollow"!==c||(e.globalCompositeOperation="destination-out",this.colorFillStyle(e,255,255,255,1),this.colorStrokeStyle(e,255,255,255,1),this.drawArrowShape(t,e,l,u,a,i,o,r),e.globalCompositeOperation=d);var p=t.pstyle(n+"-arrow-color").value;this.colorFillStyle(e,p[0],p[1],p[2],s),this.colorStrokeStyle(e,p[0],p[1],p[2],s),this.drawArrowShape(t,e,c,u,a,i,o,r)}}},drawArrowShape:function(e,t,n,i,o,r,s,a){var l,c=this,u=this.usePaths()&&"triangle-cross"!==o,h=!1,d=t,p={x:r,y:s},f=e.pstyle("arrow-scale").value,g=this.getArrowWidth(i,f),m=c.arrowShapes[o];if(u){var v=c.arrowPathCache=c.arrowPathCache||[],_=Q(o),y=v[_];null!=y?(l=t=y,h=!0):(l=t=new Path2D,v[_]=l)}t.beginPath&&t.beginPath(),h||(u?m.draw(t,1,0,{x:0,y:0},1):m.draw(t,g,a,p,i)),t.closePath&&t.closePath(),t=d,u&&(t.translate(r,s),t.rotate(a),t.scale(g,g)),"filled"!==n&&"both"!==n||(u?t.fill(l):t.fill()),"hollow"!==n&&"both"!==n||(t.lineWidth=(m.matchEdgeWidth?i:1)/(u?g:1),t.lineJoin="miter",u?t.stroke(l):t.stroke()),u&&(t.scale(1/g,1/g),t.rotate(-a),t.translate(-r,-s))}},ka={safeDrawImage:function(e,t,n,i,o,r,s,a,l,c){o<=0||r<=0||l<=0||c<=0||e.drawImage(t,n,i,o,r,s,a,l,c)},drawInscribedImage:function(e,t,n,i,o){var r=this,s=n.position(),a=s.x,l=s.y,c=n.cy().style(),u=c.getIndexedStyle.bind(c),h=u(n,"background-fit","value",i),d=u(n,"background-repeat","value",i),p=n.width(),f=n.height(),g=2*n.padding(),m=p+("inner"===u(n,"background-width-relative-to","value",i)?0:g),v=f+("inner"===u(n,"background-height-relative-to","value",i)?0:g),_=n._private.rscratch,y="node"===u(n,"background-clip","value",i),b=u(n,"background-image-opacity","value",i)*o,T=t.width||t.cachedW,E=t.height||t.cachedH;null!=T&&null!=E||(document.body.appendChild(t),T=t.cachedW=t.width||t.offsetWidth,E=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var w=T,k=E;if("auto"!==u(n,"background-width","value",i)&&(w="%"===u(n,"background-width","units",i)?u(n,"background-width","pfValue",i)*m:u(n,"background-width","pfValue",i)),"auto"!==u(n,"background-height","value",i)&&(k="%"===u(n,"background-height","units",i)?u(n,"background-height","pfValue",i)*v:u(n,"background-height","pfValue",i)),0!==w&&0!==k){if("contain"===h)w*=S=Math.min(m/w,v/k),k*=S;else if("cover"===h){var S;w*=S=Math.max(m/w,v/k),k*=S}var C=a-m/2,x=u(n,"background-position-x","units",i),A=u(n,"background-position-x","pfValue",i);C+="%"===x?(m-w)*A:A;var R=u(n,"background-offset-x","units",i),I=u(n,"background-offset-x","pfValue",i);C+="%"===R?(m-w)*I:I;var O=l-v/2,M=u(n,"background-position-y","units",i),L=u(n,"background-position-y","pfValue",i);O+="%"===M?(v-k)*L:L;var D=u(n,"background-offset-y","units",i),N=u(n,"background-offset-y","pfValue",i);O+="%"===D?(v-k)*N:N,_.pathCache&&(C-=a,O-=l,a=0,l=0);var P=e.globalAlpha;if(e.globalAlpha=b,"no-repeat"===d)y&&(e.save(),_.pathCache?e.clip(_.pathCache):(r.nodeShapes[r.getNodeShape(n)].draw(e,a,l,m,v),e.clip())),r.safeDrawImage(e,t,0,0,T,E,C,O,w,k),y&&e.restore();else{var B=e.createPattern(t,d);e.fillStyle=B,r.nodeShapes[r.getNodeShape(n)].draw(e,a,l,m,v),e.translate(C,O),e.fill(),e.translate(-C,-O)}e.globalAlpha=P}}},Sa={};function Ca(e,t,n,i,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;e.beginPath(),e.moveTo(t+r,n),e.lineTo(t+i-r,n),e.quadraticCurveTo(t+i,n,t+i,n+r),e.lineTo(t+i,n+o-r),e.quadraticCurveTo(t+i,n+o,t+i-r,n+o),e.lineTo(t+r,n+o),e.quadraticCurveTo(t,n+o,t,n+o-r),e.lineTo(t,n+r),e.quadraticCurveTo(t,n,t+r,n),e.closePath(),e.fill()}Sa.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),i=this.getPixelRatio(),o=Math.ceil(Xe(n*i));t=Math.pow(2,o)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},Sa.drawElementText=function(e,t,n,i,o){var r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this;if(null==i){if(r&&!s.eleTextBiggerThanMin(t))return}else if(!1===i)return;if(t.isNode()){var a=t.pstyle("label");if(!a||!a.value)return;var l=s.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var c=t.element()._private.rscratch.badLine,u=t.pstyle("label"),h=t.pstyle("source-label"),d=t.pstyle("target-label");if(c||(!u||!u.value)&&(!h||!h.value)&&(!d||!d.value))return;e.textAlign="center",e.textBaseline="bottom"}var p,f=!n;n&&(p=n,e.translate(-p.x1,-p.y1)),null==o?(s.drawText(e,t,null,f,r),t.isEdge()&&(s.drawText(e,t,"source",f,r),s.drawText(e,t,"target",f,r))):s.drawText(e,t,o,f,r),n&&e.translate(p.x1,p.y1)},Sa.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((t=this.fontCaches[n]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},Sa.setupTextStyle=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue+"px",r=t.pstyle("font-family").strValue,s=t.pstyle("font-weight").strValue,a=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*a,c=t.pstyle("color").value,u=t.pstyle("text-outline-color").value;e.font=i+" "+s+" "+o+" "+r,e.lineJoin="round",this.colorFillStyle(e,c[0],c[1],c[2],a),this.colorStrokeStyle(e,u[0],u[1],u[2],l)},Sa.getTextAngle=function(e,t){var n=e._private.rscratch,i=t?t+"-":"",o=e.pstyle(i+"text-rotation"),r=be(n,"labelAngle",t);return"autorotate"===o.strValue?e.isEdge()?r:0:"none"===o.strValue?0:o.pfValue},Sa.drawText=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=t._private,s=r.rscratch,a=o?t.effectiveOpacity():1;if(!o||0!==a&&0!==t.pstyle("text-opacity").value){"main"===n&&(n=null);var l,c,u=be(s,"labelX",n),h=be(s,"labelY",n),d=this.getLabelText(t,n);if(null!=d&&""!==d&&!isNaN(u)&&!isNaN(h)){this.setupTextStyle(e,t,o);var p,f=n?n+"-":"",g=be(s,"labelWidth",n),m=be(s,"labelHeight",n),v=t.pstyle(f+"text-margin-x").pfValue,_=t.pstyle(f+"text-margin-y").pfValue,y=t.isEdge(),b=t.pstyle("text-halign").value,T=t.pstyle("text-valign").value;switch(y&&(b="center",T="center"),u+=v,h+=_,0!==(p=i?this.getTextAngle(t,n):0)&&(l=u,c=h,e.translate(l,c),e.rotate(p),u=0,h=0),T){case"top":break;case"center":h+=m/2;break;case"bottom":h+=m}var E=t.pstyle("text-background-opacity").value,w=t.pstyle("text-border-opacity").value,k=t.pstyle("text-border-width").pfValue,S=t.pstyle("text-background-padding").pfValue;if(E>0||k>0&&w>0){var C=u-S;switch(b){case"left":C-=g;break;case"center":C-=g/2}var x=h-m-S,A=g+2*S,R=m+2*S;if(E>0){var I=e.fillStyle,O=t.pstyle("text-background-color").value;e.fillStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+E*a+")";var M=t.pstyle("text-background-shape").strValue;0===M.indexOf("round")?Ca(e,C,x,A,R,2):e.fillRect(C,x,A,R),e.fillStyle=I}if(k>0&&w>0){var L=e.strokeStyle,D=e.lineWidth,N=t.pstyle("text-border-color").value,P=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+N[0]+","+N[1]+","+N[2]+","+w*a+")",e.lineWidth=k,e.setLineDash)switch(P){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=k/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(C,x,A,R),"double"===P){var B=k/2;e.strokeRect(C+B,x+B,A-2*B,R-2*B)}e.setLineDash&&e.setLineDash([]),e.lineWidth=D,e.strokeStyle=L}}var F=2*t.pstyle("text-outline-width").pfValue;if(F>0&&(e.lineWidth=F),"wrap"===t.pstyle("text-wrap").value){var W=be(s,"labelWrapCachedLines",n),H=be(s,"labelLineHeight",n),U=g/2,$=this.getLabelJustification(t);switch("auto"===$||("left"===b?"left"===$?u+=-g:"center"===$&&(u+=-U):"center"===b?"left"===$?u+=-U:"right"===$&&(u+=U):"right"===b&&("center"===$?u+=U:"right"===$&&(u+=g))),T){case"top":h-=(W.length-1)*H;break;case"center":case"bottom":h-=(W.length-1)*H}for(var V=0;V<W.length;V++)F>0&&e.strokeText(W[V],u,h),e.fillText(W[V],u,h),h+=H}else F>0&&e.strokeText(d,u,h),e.fillText(d,u,h);0!==p&&(e.rotate(-p),e.translate(-l,-c))}}};var xa={drawNode:function(e,t,n){var i,o,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,c=t._private,u=c.rscratch,h=t.position();if(w(h.x)&&w(h.y)&&(!a||t.visible())){var d,p,f=a?t.effectiveOpacity():1,g=l.usePaths(),m=!1,v=t.padding();i=t.width()+2*v,o=t.height()+2*v,n&&(p=n,e.translate(-p.x1,-p.y1));for(var _=t.pstyle("background-image"),y=_.value,b=new Array(y.length),T=new Array(y.length),E=0,k=0;k<y.length;k++){var S=y[k],C=b[k]=null!=S&&"none"!==S;if(C){var x=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",k);E++,T[k]=l.getCachedImage(S,x,(function(){c.backgroundTimestamp=Date.now(),t.emitAndNotify("background")}))}}var A=t.pstyle("background-blacken").value,R=t.pstyle("border-width").pfValue,I=t.pstyle("background-opacity").value*f,O=t.pstyle("border-color").value,M=t.pstyle("border-style").value,L=t.pstyle("border-opacity").value*f;e.lineJoin="miter";var D=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;l.eleFillStyle(e,t,n)},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;l.colorStrokeStyle(e,O[0],O[1],O[2],t)},P=t.pstyle("shape").strValue,B=t.pstyle("shape-polygon-points").pfValue;if(g){e.translate(h.x,h.y);var F=l.nodePathCache=l.nodePathCache||[],W=ee("polygon"===P?P+","+B.join(","):P,""+o,""+i),H=F[W];null!=H?(d=H,m=!0,u.pathCache=d):(d=new Path2D,F[W]=u.pathCache=d)}var U=function(){if(!m){var n=h;g&&(n={x:0,y:0}),l.nodeShapes[l.getNodeShape(t)].draw(d||e,n.x,n.y,i,o)}g?e.fill(d):e.fill()},$=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,i=c.backgrounding,o=0,r=0;r<T.length;r++)b[r]&&T[r].complete&&!T[r].error&&(o++,l.drawInscribedImage(e,T[r],t,r,n));c.backgrounding=!(o===E),i!==c.backgrounding&&t.updateStyle(!1)},V=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;l.hasPie(t)&&(l.drawPie(e,t,r),n&&(g||l.nodeShapes[l.getNodeShape(t)].draw(e,h.x,h.y,i,o)))},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=(A>0?A:-A)*t,i=A>0?0:255;0!==A&&(l.colorFillStyle(e,i,i,i,n),g?e.fill(d):e.fill())},z=function(){if(R>0){if(e.lineWidth=R,e.lineCap="butt",e.setLineDash)switch(M){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(g?e.stroke(d):e.stroke(),"double"===M){e.lineWidth=R/3;var t=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",g?e.stroke(d):e.stroke(),e.globalCompositeOperation=t}e.setLineDash&&e.setLineDash([])}},X=function(){s&&l.drawNodeOverlay(e,t,h,i,o)},j=function(){l.drawElementText(e,t,null,r)},K="yes"===t.pstyle("ghost").value;if(K){var Y=t.pstyle("ghost-offset-x").pfValue,q=t.pstyle("ghost-offset-y").pfValue,J=t.pstyle("ghost-opacity").value,Z=J*f;e.translate(Y,q),D(J*I),U(),$(Z),V(0!==A||0!==R),G(Z),N(J*L),z(),e.translate(-Y,-q)}D(),U(),$(),V(0!==A||0!==R),G(),N(),z(),g&&e.translate(-h.x,-h.y),j(),X(),n&&e.translate(p.x1,p.y1)}},drawNodeOverlay:function(e,t,n,i,o){if(t.visible()){var r=t.pstyle("overlay-padding").pfValue,s=t.pstyle("overlay-opacity").value,a=t.pstyle("overlay-color").value;if(s>0){if(n=n||t.position(),null==i||null==o){var l=t.padding();i=t.width()+2*l,o=t.height()+2*l}this.colorFillStyle(e,a[0],a[1],a[2],s),this.nodeShapes.roundrectangle.draw(e,n.x,n.y,i+2*r,o+2*r),e.fill()}}},hasPie:function(e){return(e=e[0])._private.hasPie},drawPie:function(e,t,n,i){t=t[0],i=i||t.position();var o=t.cy().style(),r=t.pstyle("pie-size"),s=i.x,a=i.y,l=t.width(),c=t.height(),u=Math.min(l,c)/2,h=0;this.usePaths()&&(s=0,a=0),"%"===r.units?u*=r.pfValue:void 0!==r.pfValue&&(u=r.pfValue/2);for(var d=1;d<=o.pieBackgroundN;d++){var p=t.pstyle("pie-"+d+"-background-size").value,f=t.pstyle("pie-"+d+"-background-color").value,g=t.pstyle("pie-"+d+"-background-opacity").value*n,m=p/100;m+h>1&&(m=1-h);var v=1.5*Math.PI+2*Math.PI*h,_=v+2*Math.PI*m;0===p||h>=1||h+m>1||(e.beginPath(),e.moveTo(s,a),e.arc(s,a,u,v,_),e.closePath(),this.colorFillStyle(e,f[0],f[1],f[2],g),e.fill(),h+=m)}}},Aa={};Aa.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},Aa.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],i=!0,o=0;o<n.length;o++)if((t=n[o]).context===e){i=!1;break}return i&&(t={context:e},n.push(t)),t},Aa.createGradientStyleFor=function(e,t,n,i,o){var r,s=this.usePaths(),a=n.pstyle(t+"-gradient-stop-colors").value,l=n.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===i)if(n.isEdge()){var c=n.sourceEndpoint(),u=n.targetEndpoint(),h=n.midpoint(),d=Ke(c,h),p=Ke(u,h);r=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,p))}else{var f=s?{x:0,y:0}:n.position(),g=n.paddedWidth(),m=n.paddedHeight();r=e.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(g,m))}else if(n.isEdge()){var v=n.sourceEndpoint(),_=n.targetEndpoint();r=e.createLinearGradient(v.x,v.y,_.x,_.y)}else{var y=s?{x:0,y:0}:n.position(),b=n.paddedWidth()/2,T=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":r=e.createLinearGradient(y.x,y.y-T,y.x,y.y+T);break;case"to-top":r=e.createLinearGradient(y.x,y.y+T,y.x,y.y-T);break;case"to-left":r=e.createLinearGradient(y.x+b,y.y,y.x-b,y.y);break;case"to-right":r=e.createLinearGradient(y.x-b,y.y,y.x+b,y.y);break;case"to-bottom-right":case"to-right-bottom":r=e.createLinearGradient(y.x-b,y.y-T,y.x+b,y.y+T);break;case"to-top-right":case"to-right-top":r=e.createLinearGradient(y.x-b,y.y+T,y.x+b,y.y-T);break;case"to-bottom-left":case"to-left-bottom":r=e.createLinearGradient(y.x+b,y.y-T,y.x-b,y.y+T);break;case"to-top-left":case"to-left-top":r=e.createLinearGradient(y.x+b,y.y+T,y.x-b,y.y-T)}}if(!r)return null;for(var E=l.length===a.length,w=a.length,k=0;k<w;k++)r.addColorStop(E?l[k]:k/(w-1),"rgba("+a[k][0]+","+a[k][1]+","+a[k][2]+","+o+")");return r},Aa.gradientFillStyle=function(e,t,n,i){var o=this.createGradientStyleFor(e,"background",t,n,i);if(!o)return null;e.fillStyle=o},Aa.colorFillStyle=function(e,t,n,i,o){e.fillStyle="rgba("+t+","+n+","+i+","+o+")"},Aa.eleFillStyle=function(e,t,n){var i=t.pstyle("background-fill").value;if("linear-gradient"===i||"radial-gradient"===i)this.gradientFillStyle(e,t,i,n);else{var o=t.pstyle("background-color").value;this.colorFillStyle(e,o[0],o[1],o[2],n)}},Aa.gradientStrokeStyle=function(e,t,n,i){var o=this.createGradientStyleFor(e,"line",t,n,i);if(!o)return null;e.strokeStyle=o},Aa.colorStrokeStyle=function(e,t,n,i,o){e.strokeStyle="rgba("+t+","+n+","+i+","+o+")"},Aa.eleStrokeStyle=function(e,t,n){var i=t.pstyle("line-fill").value;if("linear-gradient"===i||"radial-gradient"===i)this.gradientStrokeStyle(e,t,i,n);else{var o=t.pstyle("line-color").value;this.colorStrokeStyle(e,o[0],o[1],o[2],n)}},Aa.matchCanvasSize=function(e){var t=this,n=t.data,i=t.findContainerClientCoords(),o=i[2],r=i[3],s=t.getPixelRatio(),a=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(s=a);var l,c=o*s,u=r*s;if(c!==t.canvasWidth||u!==t.canvasHeight){t.fontCaches=null;var h=n.canvasContainer;h.style.width=o+"px",h.style.height=r+"px";for(var d=0;d<t.CANVAS_LAYERS;d++)(l=n.canvases[d]).width=c,l.height=u,l.style.width=o+"px",l.style.height=r+"px";for(d=0;d<t.BUFFER_COUNT;d++)(l=n.bufferCanvases[d]).width=c,l.height=u,l.style.width=o+"px",l.style.height=r+"px";t.textureMult=1,s<=1&&(l=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,l.width=c*t.textureMult,l.height=u*t.textureMult),t.canvasWidth=c,t.canvasHeight=u}},Aa.renderTo=function(e,t,n,i){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:i})},Aa.render=function(e){var t=(e=e||me()).forcedContext,n=e.drawAllLayers,i=e.drawOnlyNodeLayer,o=e.forcedZoom,r=e.forcedPan,s=this,a=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,l=s.cy,c=s.data,u=c.canvasNeedsRedraw,h=s.textureOnViewport&&!t&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming),d=void 0!==e.motionBlur?e.motionBlur:s.motionBlur,p=s.motionBlurPxRatio,f=l.hasCompoundNodes(),g=s.hoverData.draggingEles,m=!(!s.hoverData.selecting&&!s.touchData.selecting),v=d=d&&!t&&s.motionBlurEnabled&&!m;t||(s.prevPxRatio!==a&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container),s.redrawHint("eles",!0),s.redrawHint("drag",!0)),s.prevPxRatio=a),!t&&s.motionBlurTimeout&&clearTimeout(s.motionBlurTimeout),d&&(null==s.mbFrames&&(s.mbFrames=0),s.mbFrames++,s.mbFrames<3&&(v=!1),s.mbFrames>s.minMbLowQualFrames&&(s.motionBlurPxRatio=s.mbPxRBlurry)),s.clearingMotionBlur&&(s.motionBlurPxRatio=1),s.textureDrawLastFrame&&!h&&(u[s.NODE]=!0,u[s.SELECT_BOX]=!0);var _=l.style(),y=l.zoom(),b=void 0!==o?o:y,T=l.pan(),E={x:T.x,y:T.y},w={zoom:y,pan:{x:T.x,y:T.y}},k=s.prevViewport;void 0===k||w.zoom!==k.zoom||w.pan.x!==k.pan.x||w.pan.y!==k.pan.y||g&&!f||(s.motionBlurPxRatio=1),r&&(E=r),b*=a,E.x*=a,E.y*=a;var S=s.getCachedZSortedEles();function C(e,t,n,i,o){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",s.colorFillStyle(e,255,255,255,s.motionBlurTransparency),e.fillRect(t,n,i,o),e.globalCompositeOperation=r}function x(e,i){var a,l,u,h;s.clearingMotionBlur||e!==c.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]&&e!==c.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]?(a=E,l=b,u=s.canvasWidth,h=s.canvasHeight):(a={x:T.x*p,y:T.y*p},l=y*p,u=s.canvasWidth*p,h=s.canvasHeight*p),e.setTransform(1,0,0,1,0,0),"motionBlur"===i?C(e,0,0,u,h):t||void 0!==i&&!i||e.clearRect(0,0,u,h),n||(e.translate(a.x,a.y),e.scale(l,l)),r&&e.translate(r.x,r.y),o&&e.scale(o,o)}if(h||(s.textureDrawLastFrame=!1),h){if(s.textureDrawLastFrame=!0,!s.textureCache){s.textureCache={},s.textureCache.bb=l.mutableElements().boundingBox(),s.textureCache.texture=s.data.bufferCanvases[s.TEXTURE_BUFFER];var A=s.data.bufferContexts[s.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,s.canvasWidth*s.textureMult,s.canvasHeight*s.textureMult),s.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:a*s.textureMult}),(w=s.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:s.canvasWidth,height:s.canvasHeight}).mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}u[s.DRAG]=!1,u[s.NODE]=!1;var R=c.contexts[s.NODE],I=s.textureCache.texture;w=s.textureCache.viewport;R.setTransform(1,0,0,1,0,0),d?C(R,0,0,w.width,w.height):R.clearRect(0,0,w.width,w.height);var O=_.core("outside-texture-bg-color").value,M=_.core("outside-texture-bg-opacity").value;s.colorFillStyle(R,O[0],O[1],O[2],M),R.fillRect(0,0,w.width,w.height);y=l.zoom();x(R,!1),R.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/a,w.height/w.zoom/a),R.drawImage(I,w.mpan.x,w.mpan.y,w.width/w.zoom/a,w.height/w.zoom/a)}else s.textureOnViewport&&!t&&(s.textureCache=null);var L=l.extent(),D=s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles||s.cy.animated(),N=s.hideEdgesOnViewport&&D,P=[];if(P[s.NODE]=!u[s.NODE]&&d&&!s.clearedForMotionBlur[s.NODE]||s.clearingMotionBlur,P[s.NODE]&&(s.clearedForMotionBlur[s.NODE]=!0),P[s.DRAG]=!u[s.DRAG]&&d&&!s.clearedForMotionBlur[s.DRAG]||s.clearingMotionBlur,P[s.DRAG]&&(s.clearedForMotionBlur[s.DRAG]=!0),u[s.NODE]||n||i||P[s.NODE]){var B=d&&!P[s.NODE]&&1!==p;x(R=t||(B?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]:c.contexts[s.NODE]),d&&!B?"motionBlur":void 0),N?s.drawCachedNodes(R,S.nondrag,a,L):s.drawLayeredElements(R,S.nondrag,a,L),s.debug&&s.drawDebugPoints(R,S.nondrag),n||d||(u[s.NODE]=!1)}if(!i&&(u[s.DRAG]||n||P[s.DRAG])){B=d&&!P[s.DRAG]&&1!==p;x(R=t||(B?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]:c.contexts[s.DRAG]),d&&!B?"motionBlur":void 0),N?s.drawCachedNodes(R,S.drag,a,L):s.drawCachedElements(R,S.drag,a,L),s.debug&&s.drawDebugPoints(R,S.drag),n||d||(u[s.DRAG]=!1)}if(s.showFps||!i&&u[s.SELECT_BOX]&&!n){if(x(R=t||c.contexts[s.SELECT_BOX]),1==s.selection[4]&&(s.hoverData.selecting||s.touchData.selecting)){y=s.cy.zoom();var F=_.core("selection-box-border-width").value/y;R.lineWidth=F,R.fillStyle="rgba("+_.core("selection-box-color").value[0]+","+_.core("selection-box-color").value[1]+","+_.core("selection-box-color").value[2]+","+_.core("selection-box-opacity").value+")",R.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),F>0&&(R.strokeStyle="rgba("+_.core("selection-box-border-color").value[0]+","+_.core("selection-box-border-color").value[1]+","+_.core("selection-box-border-color").value[2]+","+_.core("selection-box-opacity").value+")",R.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(c.bgActivePosistion&&!s.hoverData.selecting){y=s.cy.zoom();var W=c.bgActivePosistion;R.fillStyle="rgba("+_.core("active-bg-color").value[0]+","+_.core("active-bg-color").value[1]+","+_.core("active-bg-color").value[2]+","+_.core("active-bg-opacity").value+")",R.beginPath(),R.arc(W.x,W.y,_.core("active-bg-size").pfValue/y,0,2*Math.PI),R.fill()}var H=s.lastRedrawTime;if(s.showFps&&H){H=Math.round(H);var U=Math.round(1e3/H);R.setTransform(1,0,0,1,0,0),R.fillStyle="rgba(255, 0, 0, 0.75)",R.strokeStyle="rgba(255, 0, 0, 0.75)",R.lineWidth=1,R.fillText("1 frame = "+H+" ms = "+U+" fps",0,20);R.strokeRect(0,30,250,20),R.fillRect(0,30,250*Math.min(U/60,1),20)}n||(u[s.SELECT_BOX]=!1)}if(d&&1!==p){var $=c.contexts[s.NODE],V=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE],G=c.contexts[s.DRAG],z=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG],X=function(e,t,n){e.setTransform(1,0,0,1,0,0),n||!v?e.clearRect(0,0,s.canvasWidth,s.canvasHeight):C(e,0,0,s.canvasWidth,s.canvasHeight);var i=p;e.drawImage(t,0,0,s.canvasWidth*i,s.canvasHeight*i,0,0,s.canvasWidth,s.canvasHeight)};(u[s.NODE]||P[s.NODE])&&(X($,V,P[s.NODE]),u[s.NODE]=!1),(u[s.DRAG]||P[s.DRAG])&&(X(G,z,P[s.DRAG]),u[s.DRAG]=!1)}s.prevViewport=w,s.clearingMotionBlur&&(s.clearingMotionBlur=!1,s.motionBlurCleared=!0,s.motionBlur=!0),d&&(s.motionBlurTimeout=setTimeout((function(){s.motionBlurTimeout=null,s.clearedForMotionBlur[s.NODE]=!1,s.clearedForMotionBlur[s.DRAG]=!1,s.motionBlur=!1,s.clearingMotionBlur=!h,s.mbFrames=0,u[s.NODE]=!0,u[s.DRAG]=!0,s.redraw()}),100)),t||l.emit("render")};for(var Ra={drawPolygonPath:function(e,t,n,i,o,r){var s=i/2,a=o/2;e.beginPath&&e.beginPath(),e.moveTo(t+s*r[0],n+a*r[1]);for(var l=1;l<r.length/2;l++)e.lineTo(t+s*r[2*l],n+a*r[2*l+1]);e.closePath()},drawRoundPolygonPath:function(e,t,n,i,o,r){var s=i/2,a=o/2,l=At(i,o);e.beginPath&&e.beginPath();for(var c=0;c<r.length/4;c++){var u,h=void 0;h=0===c?r.length-2:4*c-2,u=4*c+2;var d=t+s*r[4*c],p=n+a*r[4*c+1],f=-r[h]*r[u]-r[h+1]*r[u+1],g=l/Math.tan(Math.acos(f)/2),m=d-g*r[h],v=p-g*r[h+1],_=d+g*r[u],y=p+g*r[u+1];0===c?e.moveTo(m,v):e.lineTo(m,v),e.arcTo(d,p,_,y,l)}e.closePath()},drawRoundRectanglePath:function(e,t,n,i,o){var r=i/2,s=o/2,a=xt(i,o);e.beginPath&&e.beginPath(),e.moveTo(t,n-s),e.arcTo(t+r,n-s,t+r,n,a),e.arcTo(t+r,n+s,t,n+s,a),e.arcTo(t-r,n+s,t-r,n,a),e.arcTo(t-r,n-s,t,n-s,a),e.lineTo(t,n-s),e.closePath()},drawBottomRoundRectanglePath:function(e,t,n,i,o){var r=i/2,s=o/2,a=xt(i,o);e.beginPath&&e.beginPath(),e.moveTo(t,n-s),e.lineTo(t+r,n-s),e.lineTo(t+r,n),e.arcTo(t+r,n+s,t,n+s,a),e.arcTo(t-r,n+s,t-r,n,a),e.lineTo(t-r,n-s),e.lineTo(t,n-s),e.closePath()},drawCutRectanglePath:function(e,t,n,i,o){var r=i/2,s=o/2;e.beginPath&&e.beginPath(),e.moveTo(t-r+8,n-s),e.lineTo(t+r-8,n-s),e.lineTo(t+r,n-s+8),e.lineTo(t+r,n+s-8),e.lineTo(t+r-8,n+s),e.lineTo(t-r+8,n+s),e.lineTo(t-r,n+s-8),e.lineTo(t-r,n-s+8),e.closePath()},drawBarrelPath:function(e,t,n,i,o){var r=i/2,s=o/2,a=t-r,l=t+r,c=n-s,u=n+s,h=Rt(i,o),d=h.widthOffset,p=h.heightOffset,f=h.ctrlPtOffsetPct*d;e.beginPath&&e.beginPath(),e.moveTo(a,c+p),e.lineTo(a,u-p),e.quadraticCurveTo(a+f,u,a+d,u),e.lineTo(l-d,u),e.quadraticCurveTo(l-f,u,l,u-p),e.lineTo(l,c+p),e.quadraticCurveTo(l-f,c,l-d,c),e.lineTo(a+d,c),e.quadraticCurveTo(a+f,c,a,c+p),e.closePath()}},Ia=Math.sin(0),Oa=Math.cos(0),Ma={},La={},Da=Math.PI/40,Na=0*Math.PI;Na<2*Math.PI;Na+=Da)Ma[Na]=Math.sin(Na),La[Na]=Math.cos(Na);Ra.drawEllipsePath=function(e,t,n,i,o){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,i/2,o/2,0,0,2*Math.PI);else for(var r,s,a=i/2,l=o/2,c=0*Math.PI;c<2*Math.PI;c+=Da)r=t-a*Ma[c]*Ia+a*La[c]*Oa,s=n+l*La[c]*Ia+l*Ma[c]*Oa,0===c?e.moveTo(r,s):e.lineTo(r,s);e.closePath()};var Pa={};function Ba(e){var t=e.indexOf(",");return e.substr(t+1)}function Fa(e,t,n){var i=function(){return t.toDataURL(n,e.quality)};switch(e.output){case"blob-promise":return new Hn((function(i,o){try{t.toBlob((function(e){null!=e?i(e):o(new Error("`canvas.toBlob()` sent a null value in its callback"))}),n,e.quality)}catch(e){o(e)}}));case"blob":return function(e,t){for(var n=atob(e),i=new ArrayBuffer(n.length),o=new Uint8Array(i),r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return new Blob([i],{type:t})}(Ba(i()),n);case"base64":return Ba(i());case"base64uri":default:return i()}}Pa.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},Pa.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements().boundingBox(),i=this.findContainerClientCoords(),o=e.full?Math.ceil(n.w):i[2],r=e.full?Math.ceil(n.h):i[3],s=w(e.maxWidth)||w(e.maxHeight),a=this.getPixelRatio(),l=1;if(void 0!==e.scale)o*=e.scale,r*=e.scale,l=e.scale;else if(s){var c=1/0,u=1/0;w(e.maxWidth)&&(c=l*e.maxWidth/o),w(e.maxHeight)&&(u=l*e.maxHeight/r),o*=l=Math.min(c,u),r*=l}s||(o*=a,r*=a,l*=a);var h=document.createElement("canvas");h.width=o,h.height=r,h.style.width=o+"px",h.style.height=r+"px";var d=h.getContext("2d");if(o>0&&r>0){d.clearRect(0,0,o,r),d.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(e.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,p),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var f=t.pan(),g={x:f.x*l,y:f.y*l};l*=t.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,p),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}e.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=e.bg,d.rect(0,0,o,r),d.fill())}return h},Pa.png=function(e){return Fa(e,this.bufferCanvasImage(e),"image/png")},Pa.jpg=function(e){return Fa(e,this.bufferCanvasImage(e),"image/jpeg")};var Wa={nodeShapeImpl:function(e,t,n,i,o,r,s){switch(e){case"ellipse":return this.drawEllipsePath(t,n,i,o,r);case"polygon":return this.drawPolygonPath(t,n,i,o,r,s);case"round-polygon":return this.drawRoundPolygonPath(t,n,i,o,r,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,i,o,r);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,i,o,r);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,i,o,r);case"barrel":return this.drawBarrelPath(t,n,i,o,r)}}},Ha=$a,Ua=$a.prototype;function $a(e){var t=this;t.data={canvases:new Array(Ua.CANVAS_LAYERS),contexts:new Array(Ua.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ua.CANVAS_LAYERS),bufferCanvases:new Array(Ua.BUFFER_COUNT),bufferContexts:new Array(Ua.CANVAS_LAYERS)};t.data.canvasContainer=document.createElement("div");var n=t.data.canvasContainer.style;t.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",n.position="relative",n.zIndex="0",n.overflow="hidden";var i=e.cy.container();i.appendChild(t.data.canvasContainer),i.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};M()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var r=0;r<Ua.CANVAS_LAYERS;r++){var s=t.data.canvases[r]=document.createElement("canvas");t.data.contexts[r]=s.getContext("2d"),Object.keys(o).forEach((function(e){s.style[e]=o[e]})),s.style.position="absolute",s.setAttribute("data-id","layer"+r),s.style.zIndex=String(Ua.CANVAS_LAYERS-r),t.data.canvasContainer.appendChild(s),t.data.canvasNeedsRedraw[r]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[Ua.NODE].setAttribute("data-id","layer"+Ua.NODE+"-node"),t.data.canvases[Ua.SELECT_BOX].setAttribute("data-id","layer"+Ua.SELECT_BOX+"-selectbox"),t.data.canvases[Ua.DRAG].setAttribute("data-id","layer"+Ua.DRAG+"-drag");for(r=0;r<Ua.BUFFER_COUNT;r++)t.data.bufferCanvases[r]=document.createElement("canvas"),t.data.bufferContexts[r]=t.data.bufferCanvases[r].getContext("2d"),t.data.bufferCanvases[r].style.position="absolute",t.data.bufferCanvases[r].setAttribute("data-id","buffer"+r),t.data.bufferCanvases[r].style.zIndex=String(-r-1),t.data.bufferCanvases[r].style.visibility="hidden";t.pathsEnabled=!0;var a=et(),l=function(e){return{x:-e.w/2,y:-e.h/2}},c=function(e){return e.boundingBox(),e[0]._private.bodyBounds},u=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||a},h=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||a},d=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||a},p=function(e,t){return t},f=function(e,t,n){var i=e?e+"-":"";return{x:t.x+n.pstyle(i+"text-margin-x").pfValue,y:t.y+n.pstyle(i+"text-margin-y").pfValue}},g=function(e,t,n){var i=e[0]._private.rscratch;return{x:i[t],y:i[n]}},m=t.data.eleTxrCache=new oa(t,{getKey:function(e){return e[0]._private.nodeKey},doesEleInvalidateKey:function(e){var t=e[0]._private;return!(t.oldBackgroundTimestamp===t.backgroundTimestamp)},drawElement:function(e,n,i,o,r){return t.drawElement(e,n,i,!1,!1,r)},getBoundingBox:c,getRotationPoint:function(e){return{x:((t=c(e)).x1+t.x2)/2,y:(t.y1+t.y2)/2};var t},getRotationOffset:function(e){return l(c(e))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),v=t.data.lblTxrCache=new oa(t,{getKey:function(e){return e[0]._private.labelStyleKey},drawElement:function(e,n,i,o,r){return t.drawElementText(e,n,i,o,"main",r)},getBoundingBox:u,getRotationPoint:function(e){return f("",g(e,"labelX","labelY"),e)},getRotationOffset:function(e){var t=u(e),n=l(u(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":n.x=-t.w;break;case"right":n.x=0}switch(e.pstyle("text-valign").value){case"top":n.y=-t.h;break;case"bottom":n.y=0}}return n},isVisible:p}),_=t.data.slbTxrCache=new oa(t,{getKey:function(e){return e[0]._private.sourceLabelStyleKey},drawElement:function(e,n,i,o,r){return t.drawElementText(e,n,i,o,"source",r)},getBoundingBox:h,getRotationPoint:function(e){return f("source",g(e,"sourceLabelX","sourceLabelY"),e)},getRotationOffset:function(e){return l(h(e))},isVisible:p}),y=t.data.tlbTxrCache=new oa(t,{getKey:function(e){return e[0]._private.targetLabelStyleKey},drawElement:function(e,n,i,o,r){return t.drawElementText(e,n,i,o,"target",r)},getBoundingBox:d,getRotationPoint:function(e){return f("target",g(e,"targetLabelX","targetLabelY"),e)},getRotationOffset:function(e){return l(d(e))},isVisible:p}),b=t.data.lyrTxrCache=new sa(t);t.onUpdateEleCalcs((function(e,t){m.invalidateElements(t),v.invalidateElements(t),_.invalidateElements(t),y.invalidateElements(t),b.invalidateElements(t);for(var n=0;n<t.length;n++){var i=t[n]._private;i.oldBackgroundTimestamp=i.backgroundTimestamp}}));var T=function(e){for(var t=0;t<e.length;t++)b.enqueueElementRefinement(e[t].ele)};m.onDequeue(T),v.onDequeue(T),_.onDequeue(T),y.onDequeue(T)}Ua.CANVAS_LAYERS=3,Ua.SELECT_BOX=0,Ua.DRAG=1,Ua.NODE=2,Ua.BUFFER_COUNT=3,Ua.TEXTURE_BUFFER=0,Ua.MOTIONBLUR_BUFFER_NODE=1,Ua.MOTIONBLUR_BUFFER_DRAG=2,Ua.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[Ua.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[Ua.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[Ua.SELECT_BOX]=t}};var Va="undefined"!=typeof Path2D;Ua.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},Ua.usePaths=function(){return Va&&this.pathsEnabled},Ua.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},Ua.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},Ua.makeOffscreenCanvas=function(e,t){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":s(OffscreenCanvas))?n=new OffscreenCanvas(e,t):((n=document.createElement("canvas")).width=e,n.height=t),n},[ha,ma,wa,ka,Sa,xa,Aa,Ra,Pa,Wa].forEach((function(e){H(Ua,e)}));var Ga=[{type:"layout",extensions:xs},{type:"renderer",extensions:[{name:"null",impl:As},{name:"base",impl:Zs},{name:"canvas",impl:Ha}]}],za={},Xa={};function ja(e,t,n){var i=n,o=function(n){ue("Can not register `"+t+"` for `"+e+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===e){if(Ur.prototype[t])return o(t);Ur.prototype[t]=n}else if("collection"===e){if(or.prototype[t])return o(t);or.prototype[t]=n}else if("layout"===e){for(var r=function(e){this.options=e,n.call(this,e),E(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},s=r.prototype=Object.create(n.prototype),a=[],l=0;l<a.length;l++){var c=a[l];s[c]=s[c]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var u=n.prototype.stop;s.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var n=0;n<t.length;n++)t[n].stop()}return u?u.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var h=function(e){return e._private.cy},d={addEventFields:function(e,t){t.layout=e,t.cy=h(e),t.target=e},bubble:function(){return!0},parent:function(e){return h(e)}};H(s,{createEmitter:function(){return this._private.emitter=new Eo(d,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),Vn.eventAliasesOn(s),i=r}else if("renderer"===e&&"null"!==t&&"base"!==t){var p=Ka("renderer","base"),f=p.prototype,g=n,m=n.prototype,v=function(){p.apply(this,arguments),g.apply(this,arguments)},_=v.prototype;for(var y in f){var b=f[y];if(null!=m[y])return o(y);_[y]=b}for(var T in m)_[T]=m[T];f.clientFunctions.forEach((function(e){_[e]=_[e]||function(){ue("Renderer does not implement `renderer."+e+"()` on its prototype")}})),i=v}return V({map:za,keys:[e,t],value:i})}function Ka(e,t){return G({map:za,keys:[e,t]})}function Ya(e,t,n,i,o){return V({map:Xa,keys:[e,t,n,i],value:o})}function qa(e,t,n,i){return G({map:Xa,keys:[e,t,n,i]})}var Ja=function(){return 2===arguments.length?Ka.apply(null,arguments):3===arguments.length?ja.apply(null,arguments):4===arguments.length?qa.apply(null,arguments):5===arguments.length?Ya.apply(null,arguments):void ue("Invalid extension access syntax")};Ur.prototype.extension=Ja,Ga.forEach((function(e){e.extensions.forEach((function(t){ja(e.type,t.name,t.impl)}))}));var Za=function e(){if(!(this instanceof e))return new e;this.length=0},Qa=Za.prototype;Qa.instanceString=function(){return"stylesheet"},Qa.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},Qa.css=function(e,t){var n=this.length-1;if(y(e))this[n].properties.push({name:e,value:t});else if(E(e))for(var i=e,o=Object.keys(i),r=0;r<o.length;r++){var s=o[r],a=i[s];if(null!=a){var l=Pr.properties[s]||Pr.properties[N(s)];if(null!=l){var c=l.name,u=a;this[n].properties.push({name:c,value:u})}}}return this},Qa.style=Qa.css,Qa.generateStyle=function(e){var t=new Pr(e);return this.appendToStyle(t)},Qa.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],i=n.selector,o=n.properties;e.selector(i);for(var r=0;r<o.length;r++){var s=o[r];e.css(s.name,s.value)}}return e};var el=function(e){return void 0===e&&(e={}),E(e)?new Ur(e):y(e)?Ja.apply(Ja,arguments):void 0};el.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(el),e.apply(null,t),this},el.warnings=function(e){return he(e)},el.version="3.14.0",el.stylesheet=el.Stylesheet=Za,e.exports=el}).call(this,n(199).setImmediate)},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(200),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(8))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,o,r,s,a,l=1,c={},u=!1,h=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){f(e.data)},i=function(e){r.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(o=h.documentElement,i=function(e){var t=h.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):i=function(e){setTimeout(f,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return c[l]=o,i(l),l++},d.clearImmediate=p}function p(e){delete c[e]}function f(e){if(u)setTimeout(f,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{p(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(8),n(35))},function(e,t,n){(function(t){var n="Expected a function",i=NaN,o="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,h="object"==typeof self&&self&&self.Object===Object&&self,d=u||h||Function("return this")(),p=Object.prototype.toString,f=Math.max,g=Math.min,m=function(){return d.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==o}(e))return i;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?i:+e}e.exports=function(e,t,i){var o,r,s,a,l,c,u=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(n);function y(t){var n=o,i=r;return o=r=void 0,u=t,a=e.apply(i,n)}function b(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=s}function T(){var e=m();if(b(e))return E(e);l=setTimeout(T,function(e){var n=t-(e-c);return d?g(n,s-(e-u)):n}(e))}function E(e){return l=void 0,p&&o?y(e):(o=r=void 0,a)}function w(){var e=m(),n=b(e);if(o=arguments,r=this,c=e,n){if(void 0===l)return function(e){return u=e,l=setTimeout(T,t),h?y(e):a}(c);if(d)return l=setTimeout(T,t),y(c)}return void 0===l&&(l=setTimeout(T,t)),a}return t=_(t)||0,v(i)&&(h=!!i.leading,s=(d="maxWait"in i)?f(_(i.maxWait)||0,t):s,p="trailing"in i?!!i.trailing:p),w.cancel=function(){void 0!==l&&clearTimeout(l),u=0,o=c=r=l=void 0},w.flush=function(){return void 0===l?a:E(m())},w}}).call(this,n(8))},function(e,t,n){e.exports=n(203)},function(e,t,n){var i,o,r;(function(){var n,s,a,l,c,u,h,d,p,f,g,m,v,_,y;a=Math.floor,f=Math.min,s=function(e,t){return e<t?-1:e>t?1:0},p=function(e,t,n,i,o){var r;if(null==n&&(n=0),null==o&&(o=s),n<0)throw new Error("lo must be non-negative");for(null==i&&(i=e.length);n<i;)o(t,e[r=a((n+i)/2)])<0?i=r:n=r+1;return[].splice.apply(e,[n,n-n].concat(t)),t},u=function(e,t,n){return null==n&&(n=s),e.push(t),_(e,0,e.length-1,n)},c=function(e,t){var n,i;return null==t&&(t=s),n=e.pop(),e.length?(i=e[0],e[0]=n,y(e,0,t)):i=n,i},d=function(e,t,n){var i;return null==n&&(n=s),i=e[0],e[0]=t,y(e,0,n),i},h=function(e,t,n){var i;return null==n&&(n=s),e.length&&n(e[0],t)<0&&(t=(i=[e[0],t])[0],e[0]=i[1],y(e,0,n)),t},l=function(e,t){var n,i,o,r,l,c;for(null==t&&(t=s),l=[],i=0,o=(r=function(){c=[];for(var t=0,n=a(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)c.push(t);return c}.apply(this).reverse()).length;i<o;i++)n=r[i],l.push(y(e,n,t));return l},v=function(e,t,n){var i;if(null==n&&(n=s),-1!==(i=e.indexOf(t)))return _(e,0,i,n),y(e,i,n)},g=function(e,t,n){var i,o,r,a,c;if(null==n&&(n=s),!(o=e.slice(0,t)).length)return o;for(l(o,n),r=0,a=(c=e.slice(t)).length;r<a;r++)i=c[r],h(o,i,n);return o.sort(n).reverse()},m=function(e,t,n){var i,o,r,a,u,h,d,g,m;if(null==n&&(n=s),10*t<=e.length){if(!(r=e.slice(0,t).sort(n)).length)return r;for(o=r[r.length-1],a=0,h=(d=e.slice(t)).length;a<h;a++)n(i=d[a],o)<0&&(p(r,i,0,null,n),r.pop(),o=r[r.length-1]);return r}for(l(e,n),m=[],u=0,g=f(t,e.length);0<=g?u<g:u>g;0<=g?++u:--u)m.push(c(e,n));return m},_=function(e,t,n,i){var o,r,a;for(null==i&&(i=s),o=e[n];n>t&&i(o,r=e[a=n-1>>1])<0;)e[n]=r,n=a;return e[n]=o},y=function(e,t,n){var i,o,r,a,l;for(null==n&&(n=s),o=e.length,l=t,r=e[t],i=2*t+1;i<o;)(a=i+1)<o&&!(n(e[i],e[a])<0)&&(i=a),e[t]=e[i],i=2*(t=i)+1;return e[t]=r,_(e,l,t,n)},n=function(){function e(e){this.cmp=null!=e?e:s,this.nodes=[]}return e.push=u,e.pop=c,e.replace=d,e.pushpop=h,e.heapify=l,e.updateItem=v,e.nlargest=g,e.nsmallest=m,e.prototype.push=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pop=function(){return c(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return d(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return h(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return l(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return v(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),o=[],void 0===(r="function"==typeof(i=function(){return n})?i.apply(t,o):i)||(e.exports=r)}).call(this)},function(e,t,n){(function(n){var i,o,r;o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e={};return e.Blocks=Object.create(null),e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n?n:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.Coordinate=function(e,t){this.x=e,this.y=t},e.utils.Coordinate.equals=function(e,t){return e==t||!(!e||!t)&&e.x==t.x&&e.y==t.y},e.utils.Coordinate.distance=function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},e.utils.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.scale=function(e){return this.x*=e,this.y*=e,this},e.utils.Coordinate.prototype.translate=function(e,t){return this.x+=e,this.y+=t,this},e.utils.string={},e.utils.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},e.utils.string.shortestStringLength=function(e){return e.length?e.reduce((function(e,t){return e.length<t.length?e:t})).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;for(var i=0,o=n||e.utils.string.shortestStringLength(t),r=0;r<o;r++){for(var s=t[0][r],a=1;a<t.length;a++)if(s!=t[a][r])return i;" "==s&&(i=r+1)}for(a=1;a<t.length;a++)if((s=t[a][r])&&" "!=s)return i;return o},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;for(var i=0,o=n||e.utils.string.shortestStringLength(t),r=0;r<o;r++){for(var s=t[0].substr(-r-1,1),a=1;a<t.length;a++)if(s!=t[a].substr(-r-1,1))return i;" "==s&&(i=r+1)}for(a=1;a<t.length;a++)if((s=t[a].charAt(t[a].length-r-1))&&" "!=s)return i;return o},e.utils.string.wrap=function(t,n){for(var i=t.split("\n"),o=0;o<i.length;o++)i[o]=e.utils.string.wrapLine_(i[o],n);return i.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var i=t.trim().split(/\s+/),o=0;o<i.length;o++)i[o].length>n&&(n=i[o].length);o=-1/0;var r=1;do{var s=o,a=t,l=[],c=i.length/r,u=1;for(o=0;o<i.length-1;o++)u<(o+1.5)/c?(u++,l[o]=!0):l[o]=!1;l=e.utils.string.wrapMutate_(i,l,n),o=e.utils.string.wrapScore_(i,l,n),t=e.utils.string.wrapToText_(i,l),r++}while(o>s);return a},e.utils.string.wrapScore_=function(e,t,n){for(var i=[0],o=[],r=0;r<e.length;r++)i[i.length-1]+=e[r].length,!0===t[r]?(i.push(0),o.push(e[r].charAt(e[r].length-1))):!1===t[r]&&i[i.length-1]++;for(e=Math.max.apply(Math,i),r=t=0;r<i.length;r++)t-=2*Math.pow(Math.abs(n-i[r]),1.5),t-=Math.pow(e-i[r],1.5),-1!=".?!".indexOf(o[r])?t+=n/3:-1!=",;)]}".indexOf(o[r])&&(t+=n/4);return 1<i.length&&i[i.length-1]<=i[i.length-2]&&(t+=.5),t},e.utils.string.wrapMutate_=function(t,n,i){for(var o,r=e.utils.string.wrapScore_(t,n,i),s=0;s<n.length-1;s++)if(n[s]!=n[s+1]){var a=[].concat(n);a[s]=!a[s],a[s+1]=!a[s+1];var l=e.utils.string.wrapScore_(t,a,i);l>r&&(r=l,o=a)}return o?e.utils.string.wrapMutate_(t,o,i):n},e.utils.string.wrapToText_=function(e,t){for(var n=[],i=0;i<e.length;i++)n.push(e[i]),void 0!==t[i]&&n.push(t[i]?"\n":" ");return n.join("")},e.utils.Size=function(e,t){this.width=e,this.height=t},e.utils.Size.equals=function(e,t){return e==t||!(!e||!t)&&e.width==t.width&&e.height==t.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,i=n.display,o=n.visibility,r=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var s=t.offsetWidth;return t=t.offsetHeight,n.display=i,n.position=r,n.visibility=o,new e.utils.Size(s,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(e,t){if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(e,null);if(n)return n[t]||n.getPropertyValue(t)||""}return""},e.utils.style.getCascadedStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var i=document.documentElement;return i=new e.utils.Coordinate(window.pageXOffset||i.scrollLeft,window.pageYOffset||i.scrollTop),n.x=t.left+i.x,n.y=t.top+i.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(e,t){e.style.display=t?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),i=e.utils.style.getComputedStyle(t,"borderRightWidth"),o=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(o),right:parseFloat(i),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,i){t=e.utils.style.getContainerOffsetToScrollInto(t,n,i),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,i){var o=e.utils.style.getPageOffset(t),r=e.utils.style.getPageOffset(n),s=e.utils.style.getBorderBox(n),a=o.x-r.x-s.left;return o=o.y-r.y-s.top,r=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-r.width,r=n.clientHeight-r.height,s=n.scrollLeft,n=n.scrollTop,i?(s+=a-t/2,n+=o-r/2):(s+=Math.min(a,Math.max(a-t,0)),n+=Math.min(o,Math.max(o-r,0))),new e.utils.Coordinate(s,n)},e.utils.userAgent={},function(t){function n(e){return-1!=i.indexOf(e.toUpperCase())}e.utils.userAgent.raw=t;var i=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),e.utils.userAgent.IPAD=n("iPad"),e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(e){e.preventDefault(),e.stopPropagation()},e.utils.isTargetInput=function(e){return"textarea"==e.target.type||"text"==e.target.type||"number"==e.target.type||"email"==e.target.type||"password"==e.target.type||"search"==e.target.type||"tel"==e.target.type||"url"==e.target.type||e.target.isContentEditable},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),i=t.getAttribute("x");return i&&(n.x=parseInt(i,10)),(i=t.getAttribute("y"))&&(n.y=parseInt(i,10)),(i=(i=t.getAttribute("transform"))&&i.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(i[1]),i[3]&&(n.y+=Number(i[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,i=0;t;){var o=e.utils.getRelativeXY(t);if(n+=o.x,i+=o.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,i)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(e,t,n){var i=t.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,n||(n=t.getScreenCTM().inverse()),i.matrixTransform(n)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){case 0:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?t[0]:""},e.utils.checkMessageReferences=function(t){for(var n=!0,i=e.Msg,o=t.match(/%{BKY_[A-Z]\w*}/gi),r=0;r<o.length;r++)null==i[o[r].toUpperCase().slice(6,-1)]&&(console.log("WARNING: No message string for "+o[r]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var i=[],o=t.split("");o.push("");for(var r=0,s=[],a=null,l=0;l<o.length;l++){var c=o[l];0==r?"%"==c?((c=s.join(""))&&i.push(c),s.length=0,r=1):s.push(c):1==r?"%"==c?(s.push(c),r=0):n&&"0"<=c&&"9">=c?(r=2,a=c,(c=s.join(""))&&i.push(c),s.length=0):"{"==c?r=3:(s.push("%",c),r=0):2==r?"0"<=c&&"9">=c?a+=c:(i.push(parseInt(a,10)),l--,r=0):3==r&&(""==c?(s.splice(0,0,"%{"),l--,r=0):"}"!=c?s.push(c):(r=s.join(""),/[A-Z]\w*/i.test(r)?(c=r.toUpperCase(),(c=e.utils.string.startsWith(c,"BKY_")?c.substring(4):null)&&c in e.Msg?"string"==typeof(r=e.Msg[c])?Array.prototype.push.apply(i,e.utils.tokenizeInterpolation_(r,n)):n?i.push(String(r)):i.push(r):i.push("%{"+r+"}")):i.push("%{"+r+"}"),r=s.length=0))}for((c=s.join(""))&&i.push(c),o=[],l=s.length=0;l<i.length;++l)"string"==typeof i[l]?s.push(i[l]):((c=s.join(""))&&o.push(c),s.length=0,o.push(i[l]));return(c=s.join(""))&&o.push(c),s.length=0,o},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],i=0;20>i;i++)n[i]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var o in document.body.insertBefore(t,null),i)if(void 0!==t.style[o]){if(t.style[o]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(i[o])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(e){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)e();else var t=setInterval((function(){"complete"==document.readyState&&(clearInterval(t),e())}),10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return{right:document.documentElement.clientWidth+t.x,bottom:document.documentElement.clientHeight+t.y,top:t.y,left:t.x}},e.utils.arrayRemove=function(e,t){var n=e.indexOf(t);return-1!=n&&(e.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(e,t){var n,i=Object.create(null),o=e.getDescendants(!0);if(t){var r=e.getNextBlock();r&&(r=o.indexOf(r),o.splice(r,o.length-r))}for(r=0;n=o[r];r++)i[n.type]?i[n.type]++:i[n.type]=1;return i},e.utils.screenToWsCoordinates=function(t,n){var i=n.x,o=n.y,r=t.getInjectionDiv().getBoundingClientRect();return i=new e.utils.Coordinate(i-r.left,o-r.top),o=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(i,o).scale(1/t.scale)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var t,n=e.Events.filter(e.Events.FIRE_QUEUE_,!0),i=e.Events.FIRE_QUEUE_.length=0;t=n[i];i++)if(t.workspaceId){var o=e.Workspace.getById(t.workspaceId);o&&o.fireChangeListener(t)}},e.Events.filter=function(t,n){var i=t.slice();n||i.reverse();for(var o,r=[],s=Object.create(null),a=0;o=i[a];a++)if(!o.isNull()){var l=[o.type,o.blockId,o.workspaceId].join(" "),c=s[l],u=c?c.event:null;c?o.type==e.Events.MOVE&&c.index==a-1?(u.newParentId=o.newParentId,u.newInputName=o.newInputName,u.newCoordinate=o.newCoordinate,c.index=a):o.type==e.Events.CHANGE&&o.element==u.element&&o.name==u.name?u.newValue=o.newValue:(o.type!=e.Events.UI||"click"!=o.element||"commentOpen"!=u.element&&"mutatorOpen"!=u.element&&"warningOpen"!=u.element)&&(s[l]={event:o,index:1},r.push(o)):(s[l]={event:o,index:a},r.push(o))}for(i=r.filter((function(e){return!e.isNull()})),n||i.reverse(),a=1;o=i[a];a++)o.type==e.Events.CHANGE&&"mutation"==o.element&&i.unshift(i.splice(a,1)[0]);return i},e.Events.clearPendingUndo=function(){for(var t,n=0;t=e.Events.FIRE_QUEUE_[n];n++)t.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(e){var t=[];e=e.getDescendants(!1);for(var n,i=0;n=e[i];i++)t[i]=n.id;return t},e.Events.fromJson=function(t,n){switch(t.type){case e.Events.CREATE:var i=new e.Events.Create(null);break;case e.Events.DELETE:i=new e.Events.Delete(null);break;case e.Events.CHANGE:i=new e.Events.Change(null,"","","","");break;case e.Events.MOVE:i=new e.Events.Move(null);break;case e.Events.VAR_CREATE:i=new e.Events.VarCreate(null);break;case e.Events.VAR_DELETE:i=new e.Events.VarDelete(null);break;case e.Events.VAR_RENAME:i=new e.Events.VarRename(null,"");break;case e.Events.UI:i=new e.Events.Ui(null,"","","");break;case e.Events.COMMENT_CREATE:i=new e.Events.CommentCreate(null);break;case e.Events.COMMENT_CHANGE:i=new e.Events.CommentChange(null,"","");break;case e.Events.COMMENT_MOVE:i=new e.Events.CommentMove(null);break;case e.Events.COMMENT_DELETE:i=new e.Events.CommentDelete(null);break;default:throw Error("Unknown event type.")}return i.fromJson(t),i.workspaceId=n.id,i},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId);if(t=n.getBlockById(t.blockId)){var i=t.getParent();if(i&&i.isEnabled())for(n=t.getDescendants(!1),t=0;i=n[t];t++)i.setEnabled(!0);else if((t.outputConnection||t.previousConnection)&&!n.isDragging())do{t.setEnabled(!1),t=t.getNextBlock()}while(t)}}},e.Events.Abstract=function(){this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),e},e.Events.Abstract.prototype.fromJson=function(e){this.group=e.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(e){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(e,t){e.superClass_=t.prototype,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},e.utils.object.mixin=function(e,t){for(var n in t)e[n]=t[n]},e.utils.object.values=function(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(e){return(new DOMParser).parseFromString(e,"text/xml")},e.utils.xml.domToText=function(e){return(new XMLSerializer).serializeToString(e)},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=t.id,this.workspaceId=t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.Change=function(t,n,i,o,r){t&&(e.Events.Change.superClass_.constructor.call(this,t),this.element=n,this.name=i,this.oldValue=o,this.newValue=r)},e.utils.object.inherits(e.Events.Change,e.Events.BlockBase),e.Events.BlockChange=e.Events.Change,e.Events.Change.prototype.type=e.Events.CHANGE,e.Events.Change.prototype.toJson=function(){var t=e.Events.Change.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.newValue=this.newValue,t},e.Events.Change.prototype.fromJson=function(t){e.Events.Change.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.newValue=t.newValue},e.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.Change.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var i="";if(n.mutationToDom&&(i=(i=n.mutationToDom())&&e.Xml.domToText(i)),n.domToMutation){var o=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(o)}e.Events.fire(new e.Events.Change(n,"mutation",null,i,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){t&&(e.Events.Create.superClass_.constructor.call(this,t),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var i;i=this.ids[t];t++){var o=n.getBlockById(i);o?o.dispose(!1):i==this.blockId&&console.warn("Can't uncreate non-existent block: "+i)}}},e.Events.Delete=function(t){if(t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");e.Events.Delete.superClass_.constructor.call(this,t),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.ids=this.ids,t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.ids=t.ids},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var i;i=this.ids[t];t++){var o=n.getBlockById(i);o?o.dispose(!1):i==this.blockId&&console.warn("Can't delete non-existent block: "+i)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){t&&(e.Events.Move.superClass_.constructor.call(this,t),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),t},e.Events.Move.prototype.fromJson=function(t){e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate&&(t=t.newCoordinate.split(","),this.newCoordinate=new e.utils.Coordinate(Number(t[0]),Number(t[1])))},e.Events.Move.prototype.recordNew=function(){var e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate},e.Events.Move.prototype.currentLocation_=function(){var e=this.getEventWorkspace_().getBlockById(this.blockId),t={},n=e.getParent();return n?(t.parentId=n.id,(e=n.getInputWithBlock(e))&&(t.inputName=e.name)):t.coordinate=e.getRelativeToSurfaceXY(),t},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),i=n.getBlockById(this.blockId);if(i){var o=t?this.newParentId:this.oldParentId,r=t?this.newInputName:this.oldInputName;t=t?this.newCoordinate:this.oldCoordinate;var s=null;if(o&&!(s=n.getBlockById(o)))return void console.warn("Can't connect to non-existent block: "+o);if(i.getParent()&&i.unplug(),t)r=i.getRelativeToSurfaceXY(),i.moveBy(t.x-r.x,t.y-r.y);else{if(i=i.outputConnection||i.previousConnection,r){if(n=s.getInput(r))var a=n.connection}else i.type==e.PREVIOUS_STATEMENT&&(a=s.nextConnection);a?i.connect(a):console.warn("Can't connect to non-existent input: "+r)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.Events.FinishedLoading=function(t){this.workspaceId=t.id,this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),this.workspaceId&&(e.workspaceId=this.workspaceId),e},e.Events.FinishedLoading.prototype.fromJson=function(e){this.workspaceId=e.workspaceId,this.group=e.group},e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=t.getId(),this.workspaceId=t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){t&&(e.Events.VarCreate.superClass_.constructor.call(this,t),this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){t&&(e.Events.VarDelete.superClass_.constructor.call(this,t),this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){t&&(e.Events.VarRename.superClass_.constructor.call(this,t),this.oldName=t.name,this.newName=n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)},e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.Node={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.createSvgElement=function(t,n,i){for(var o in t=document.createElementNS(e.utils.dom.SVG_NS,t),n)t.setAttribute(o,n[o]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),i&&i.appendChild(t),t},e.utils.dom.addClass=function(e,t){var n=e.getAttribute("class")||"";return-1==(" "+n+" ").indexOf(" "+t+" ")&&(n&&(n+=" "),e.setAttribute("class",n+t),!0)},e.utils.dom.removeClass=function(e,t){var n=e.getAttribute("class");if(-1==(" "+n+" ").indexOf(" "+t+" "))return!1;n=n.split(/\s+/);for(var i=0;i<n.length;i++)n[i]&&n[i]!=t||(n.splice(i,1),i--);return n.length?e.setAttribute("class",n.join(" ")):e.removeAttribute("class"),!0},e.utils.dom.hasClass=function(e,t){return-1!=(" "+e.getAttribute("class")+" ").indexOf(" "+t+" ")},e.utils.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},e.utils.dom.insertAfter=function(e,t){var n=t.nextSibling,i=t.parentNode;if(!i)throw Error("Reference node has no parent.");n?i.insertBefore(e,n):i.appendChild(e)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.Node.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_={})},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var n,i=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(n=e.utils.dom.cacheWidths_[i]))return n;try{n=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(e){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[i]=n),n},e.Xml={},e.Xml.workspaceToDom=function(t,n){var i=e.utils.xml.createElement("xml"),o=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));o.hasChildNodes()&&i.appendChild(o);var r,s=t.getTopComments(!0);for(o=0;r=s[o];o++)i.appendChild(r.toXmlWithXY(n));for(s=t.getTopBlocks(!0),o=0;r=s[o];o++)i.appendChild(e.Xml.blockToDomWithXY(r,n));return i},e.Xml.variablesToDom=function(t){for(var n,i=e.utils.xml.createElement("variables"),o=0;n=t[o];o++){var r=e.utils.xml.createElement("variable");r.appendChild(e.utils.xml.createTextNode(n.name)),n.type&&r.setAttribute("type",n.type),r.id=n.getId(),i.appendChild(r)}return i},e.Xml.blockToDomWithXY=function(t,n){var i;t.workspace.RTL&&(i=t.workspace.getWidth());var o=e.Xml.blockToDom(t,n),r=t.getRelativeToSurfaceXY();return o.setAttribute("x",Math.round(t.workspace.RTL?i-r.x:r.x)),o.setAttribute("y",Math.round(r.y)),o},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var i,o=0;i=t.inputList[o];o++)for(var r,s=0;r=i.fieldRow[s];s++)(r=e.Xml.fieldToDom_(r))&&n.appendChild(r)},e.Xml.blockToDom=function(t,n){var i=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(i.setAttribute("type",t.type),n||(i.id=t.id),t.mutationToDom){var o=t.mutationToDom();o&&(o.hasChildNodes()||o.hasAttributes())&&i.appendChild(o)}if(e.Xml.allFieldsToDom_(t,i),o=t.getCommentText()){var r=t.commentModel.size,s=t.commentModel.pinned,a=e.utils.xml.createElement("comment");a.appendChild(e.utils.xml.createTextNode(o)),a.setAttribute("pinned",s),a.setAttribute("h",r.height),a.setAttribute("w",r.width),i.appendChild(a)}for(t.data&&((o=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),i.appendChild(o)),r=0;s=t.inputList[r];r++){var l;if(a=!0,s.type!=e.DUMMY_INPUT){var c=s.connection.targetBlock();s.type==e.INPUT_VALUE?l=e.utils.xml.createElement("value"):s.type==e.NEXT_STATEMENT&&(l=e.utils.xml.createElement("statement")),!(o=s.connection.getShadowDom())||c&&c.isShadow()||l.appendChild(e.Xml.cloneShadow_(o,n)),c&&(l.appendChild(e.Xml.blockToDom(c,n)),a=!1),l.setAttribute("name",s.name),a||i.appendChild(l)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&i.setAttribute("inline",t.inputsInline),t.isCollapsed()&&i.setAttribute("collapsed",!0),t.isEnabled()||i.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||i.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||i.setAttribute("movable",!1),t.isEditable()||i.setAttribute("editable",!1),(r=t.getNextBlock())&&((l=e.utils.xml.createElement("next")).appendChild(e.Xml.blockToDom(r,n)),i.appendChild(l)),!(o=t.nextConnection&&t.nextConnection.getShadowDom())||r&&r.isShadow()||l.appendChild(e.Xml.cloneShadow_(o,n)),i},e.Xml.cloneShadow_=function(t,n){for(var i,o=t=t.cloneNode(!0);o;)if(n&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)i=o,o=o.parentNode,i.nodeType==e.utils.dom.Node.TEXT_NODE&&""==i.data.trim()&&o.firstChild!=i&&e.utils.dom.removeNode(i);o&&(i=o,o=o.nextSibling,i.nodeType==e.utils.dom.Node.TEXT_NODE&&""==i.data.trim()&&e.utils.dom.removeNode(i))}return t},e.Xml.domToText=function(t){t=e.utils.xml.domToText(t);var n=/(<[^/](?:[^>]*[^/])?>[^<]*)\n([^<]*<\/)/;do{var i=t;t=t.replace(n,"$1&#10;$2")}while(t!=i);return t},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",i=1;i<t.length;i++){var o=t[i];"/"==o[0]&&(n=n.substring(2)),t[i]=n+"<"+o,"/"!=o[0]&&"/>"!=o.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){n.setResizesEnabled(!1),n.clear();var i=e.Xml.domToWorkspace(t,n);return n.setResizesEnabled(!0),i},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var i=t;t=n,n=i,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var o;n.RTL&&(o=n.getWidth()),i=[],e.utils.dom.startTextWidthCache();var r=t.childNodes.length,s=e.Events.getGroup();s||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var a=!0;try{for(var l=0;l<r;l++){var c=t.childNodes[l],u=c.nodeName.toLowerCase();if("block"==u||"shadow"==u&&!e.Events.recordUndo){var h=e.Xml.domToBlock(c,n);i.push(h.id);var d=c.hasAttribute("x")?parseInt(c.getAttribute("x"),10):10,p=c.hasAttribute("y")?parseInt(c.getAttribute("y"),10):10;isNaN(d)||isNaN(p)||h.moveBy(n.RTL?o-d:d,p),a=!1}else{if("shadow"==u)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==u)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(c,n,o):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(c,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==u){if(!a)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(c,n),a=!1}}}}finally{s||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new e.Events.FinishedLoading(n)),i},e.Xml.appendDomToWorkspace=function(t,n){if(n.hasOwnProperty("scale")){var i=e.BlockSvg.TAB_WIDTH;try{e.BlockSvg.TAB_WIDTH=0;var o=n.getBlocksBoundingBox()}finally{e.BlockSvg.TAB_WIDTH=i}}if(i=e.Xml.domToWorkspace(t,n),o&&o.top!=o.bottom){var r,s=o.bottom,a=o.left,l=1/0,c=1/0;for(o=0;o<i.length;o++){var u=n.getBlockById(i[o]).getRelativeToSurfaceXY();u.y<c&&(c=u.y),u.x<l&&(l=u.x)}for(s=s-c+e.BlockSvg.SEP_SPACE_Y,a-=l,n.RTL&&(r=n.getWidth()),o=0;o<i.length;o++)n.getBlockById(i[o]).moveBy(n.RTL?r-a:a,s)}return i},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var i=t;t=n,n=i,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),i=n.getAllVariables();try{var o=e.Xml.domToBlockHeadless_(t,n),r=o.getDescendants(!1);if(n.rendered){o.setConnectionsHidden(!0);for(var s=r.length-1;0<=s;s--)r[s].initSvg();for(s=r.length-1;0<=s;s--)r[s].render(!1);setTimeout((function(){o.workspace&&o.setConnectionsHidden(!1)}),1),o.updateDisabled(),n.resizeContents()}else for(s=r.length-1;0<=s;s--)r[s].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(r=e.Variables.getAddedVariables(n,i),s=0;s<r.length;s++)e.Events.fire(new e.Events.VarCreate(r[s]));e.Events.fire(new e.Events.BlockCreate(o))}return o},e.Xml.domToVariables=function(t,n){for(var i,o=0;i=t.childNodes[o];o++)if(i.nodeType==e.utils.dom.Node.ELEMENT_NODE){var r=i.getAttribute("type"),s=i.getAttribute("id");n.createVariable(i.textContent,r,s)}},e.Xml.domToBlockHeadless_=function(t,n){var i=null,o=t.getAttribute("type");if(!o)throw TypeError("Block type unspecified: "+t.outerHTML);var r=t.getAttribute("id");i=n.newBlock(o,r);var s,a=null;for(r=0;s=t.childNodes[r];r++)if(s.nodeType!=e.utils.dom.Node.TEXT_NODE){for(var l,c=a=null,u=0;l=s.childNodes[u];u++)l.nodeType==e.utils.dom.Node.ELEMENT_NODE&&("block"==l.nodeName.toLowerCase()?a=l:"shadow"==l.nodeName.toLowerCase()&&(c=l));switch(!a&&c&&(a=c),u=s.getAttribute("name"),s.nodeName.toLowerCase()){case"mutation":i.domToMutation&&(i.domToMutation(s),i.initSvg&&i.initSvg());break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}a=s.textContent,c="true"==s.getAttribute("pinned"),u=parseInt(s.getAttribute("w"),10),s=parseInt(s.getAttribute("h"),10),i.setCommentText(a),i.commentModel.pinned=c,isNaN(u)||isNaN(s)||(i.commentModel.size=new e.utils.Size(u,s)),c&&i.getCommentIcon&&!i.isInFlyout&&setTimeout((function(){i.getCommentIcon().setVisible(!0)}),1);break;case"data":i.data=s.textContent;break;case"title":case"field":e.Xml.domToField_(i,u,s);break;case"value":case"statement":if(!(s=i.getInput(u))){console.warn("Ignoring non-existent input "+u+" in block "+o);break}if(c&&s.connection.setShadowDom(c),a)if((a=e.Xml.domToBlockHeadless_(a,n)).outputConnection)s.connection.connect(a.outputConnection);else{if(!a.previousConnection)throw TypeError("Child block does not have output or previous statement.");s.connection.connect(a.previousConnection)}break;case"next":if(c&&i.nextConnection&&i.nextConnection.setShadowDom(c),a){if(!i.nextConnection)throw TypeError("Next statement does not exist.");if(i.nextConnection.isConnected())throw TypeError("Next statement is already connected.");if(!(a=e.Xml.domToBlockHeadless_(a,n)).previousConnection)throw TypeError("Next block does not have previous statement.");i.nextConnection.connect(a.previousConnection)}break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}}if((r=t.getAttribute("inline"))&&i.setInputsInline("true"==r),(r=t.getAttribute("disabled"))&&i.setEnabled("true"!=r&&"disabled"!=r),(r=t.getAttribute("deletable"))&&i.setDeletable("true"==r),(r=t.getAttribute("movable"))&&i.setMovable("true"==r),(r=t.getAttribute("editable"))&&i.setEditable("true"==r),(r=t.getAttribute("collapsed"))&&i.setCollapsed("true"==r),"shadow"==t.nodeName.toLowerCase()){for(o=i.getChildren(!1),r=0;s=o[r];r++)if(!s.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(i.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");i.setShadow(!0)}return i},e.Xml.domToField_=function(e,t,n){var i=e.getField(t);i?i.fromXml(n):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},e.Xml.deleteNext=function(e){for(var t,n=0;t=e.childNodes[n];n++)if("next"==t.nodeName.toLowerCase()){e.removeChild(t);break}},e.Connection=function(e,t){this.sourceBlock_=e,this.type=t},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x_=0,e.Connection.prototype.y_=0,e.Connection.prototype.connect_=function(t){var n,i=this,o=i.getSourceBlock(),r=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),i.isConnected()){var s=i.targetBlock(),a=i.getShadowDom();if(i.setShadowDom(null),s.isShadow())a=e.Xml.blockToDom(s),s.dispose(),s=null;else if(i.type==e.INPUT_VALUE){if(!s.outputConnection)throw Error("Orphan block does not have an output connection.");var l=e.Connection.lastConnectionInRow_(r,s);l&&(s.outputConnection.connect(l),s=null)}else if(i.type==e.NEXT_STATEMENT){if(!s.previousConnection)throw Error("Orphan block does not have a previous connection.");for(l=r;l.nextConnection;){var c=l.getNextBlock();if(!c||c.isShadow()){s.previousConnection.checkType_(l.nextConnection)&&(l.nextConnection.connect(s.previousConnection),s=null);break}l=c}}if(s&&(i.disconnect(),e.Events.recordUndo)){var u=e.Events.getGroup();setTimeout((function(){s.workspace&&!s.getParent()&&(e.Events.setGroup(u),s.outputConnection?s.outputConnection.onFailedConnect(i):s.previousConnection&&s.previousConnection.onFailedConnect(i),e.Events.setGroup(!1))}),e.BUMP_DELAY)}i.setShadowDom(a)}e.Events.isEnabled()&&(n=new e.Events.BlockMove(r)),e.Connection.connectReciprocally_(i,t),r.setParent(o),n&&(n.recordNew(),e.Events.fire(n))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var e=this.targetBlock();e.isShadow()?e.dispose():e.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.INPUT_VALUE||this.type==e.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason_=function(t){if(!t)return e.Connection.REASON_TARGET_NULL;if(this.isSuperior())var n=this.sourceBlock_,i=t.getSourceBlock();else i=this.sourceBlock_,n=t.getSourceBlock();return n&&n==i?e.Connection.REASON_SELF_CONNECTION:t.type!=e.OPPOSITE_TYPE[this.type]?e.Connection.REASON_WRONG_TYPE:n&&i&&n.workspace!==i.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:this.checkType_(t)?n.isShadow()&&!i.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.Connection.prototype.checkConnection_=function(t){switch(this.canConnectWithReason_(t)){case e.Connection.CAN_CONNECT:break;case e.Connection.REASON_SELF_CONNECTION:throw Error("Attempted to connect a block to itself.");case e.Connection.REASON_DIFFERENT_WORKSPACES:throw Error("Blocks not on same workspace.");case e.Connection.REASON_WRONG_TYPE:throw Error("Attempt to connect incompatible types.");case e.Connection.REASON_TARGET_NULL:throw Error("Target connection is null.");case e.Connection.REASON_CHECKS_FAILED:throw Error("Connection checks failed. "+this+" expected "+this.check_+", found "+t.check_);case e.Connection.REASON_SHADOW_PARENT:throw Error("Connecting non-shadow to shadow block.");default:throw Error("Unknown connection failure: this should never happen!")}},e.Connection.prototype.canConnectToPrevious_=function(t){return!(this.targetConnection||-1!=e.draggingConnections_.indexOf(t)||t.targetConnection&&(!(t=t.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.Connection.prototype.isConnectionAllowed=function(t){if(t.sourceBlock_.isInsertionMarker()||this.canConnectWithReason_(t)!=e.Connection.CAN_CONNECT)return!1;switch(t.type){case e.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t);case e.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||this.isConnected())return!1;break;case e.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case e.NEXT_STATEMENT:if(t.isConnected()&&!this.sourceBlock_.nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection)return!1;break;default:throw Error("Unknown connection type in isConnectionAllowed")}return-1==e.draggingConnections_.indexOf(t)},e.Connection.prototype.onFailedConnect=function(e){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t){this.checkConnection_(t);var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},e.Connection.singleConnection_=function(t,n){for(var i=!1,o=0;o<t.inputList.length;o++){var r=t.inputList[o].connection;if(r&&r.type==e.INPUT_VALUE&&n.outputConnection.checkType_(r)){if(i)return null;i=r}}return i},e.Connection.lastConnectionInRow_=function(t,n){for(var i,o=t;i=e.Connection.singleConnection_(o,n);)if(!(o=i.targetBlock())||o.isShadow())return i;return null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,i=t.getSourceBlock();t=this}else n=t.getSourceBlock(),i=this.sourceBlock_;var o=e.Events.getGroup();o||e.Events.setGroup(!0),this.disconnectInternal_(n,i),t.respawnShadow_(),o||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var i;e.Events.isEnabled()&&(i=new e.Events.BlockMove(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),i&&(i.recordNew(),e.Events.fire(i))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n&&e.Events.recordUndo)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType_=function(e){if(!this.check_||!e.check_)return!0;for(var t=0;t<this.check_.length;t++)if(-1!=e.check_.indexOf(this.check_[t]))return!0;return!1},e.Connection.prototype.onCheckChanged_=function(){this.isConnected()&&!this.checkType_(this.targetConnection)&&(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(e){return e?(Array.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(e){this.shadowDom_=e},e.Connection.prototype.getShadowDom=function(){return this.shadowDom_},e.Connection.prototype.neighbours_=function(e){return[]},e.Connection.prototype.getParentInput=function(){for(var e=null,t=this.sourceBlock_,n=t.inputList,i=0;i<t.inputList.length;i++)if(n[i].connection===this){e=n[i];break}return e},e.Connection.prototype.toString=function(){var e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection==this)var t="Output Connection of ";else if(e.previousConnection==this)t="Previous Connection of ";else if(e.nextConnection==this)t="Next Connection of ";else{t=null;for(var n,i=0;n=e.inputList[i];i++)if(n.connection==this){t=n;break}if(!t)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";t='Input "'+t.name+'" connection on '}return t+e.toDevString()},e.Extensions={},e.Extensions.ALL_={},e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,(function(){this.mixin(n)}))},e.Extensions.registerMutator=function(t,n,i,o){var r='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(r,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(r,n.mutationToDom,"mutationToDom");var s=e.Extensions.checkMutatorDialog_(n,r);if(i&&"function"!=typeof i)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,(function(){if(s){if(!e.Mutator)throw Error(r+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(o))}this.mixin(n),i&&i.apply(this)}))},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,i){var o=e.Extensions.ALL_[t];if("function"!=typeof o)throw Error('Error: Extension "'+t+'" not found.');if(i)e.Extensions.checkNoMutatorProperties_(t,n);else var r=e.Extensions.getMutatorProperties_(n);if(o.apply(n),i)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(r,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(e,t,n){if(!t)throw Error(e+'missing required property "'+n+'"');if("function"!=typeof t)throw Error(e+'" required property "'+n+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(e,t){var n=void 0!==e.compose,i=void 0!==e.decompose;if(n&&i){if("function"!=typeof e.compose)throw Error(t+"compose must be a function.");if("function"!=typeof e.decompose)throw Error(t+"decompose must be a function.");return!0}if(n||i)throw Error(t+'Must have both or neither of "compose" and "decompose"');return!1},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(e){var t=[];return void 0!==e.domToMutation&&t.push(e.domToMutation),void 0!==e.mutationToDom&&t.push(e.mutationToDom),void 0!==e.compose&&t.push(e.compose),void 0!==e.decompose&&t.push(e.decompose),t},e.Extensions.mutatorPropertiesMatch_=function(t,n){var i=e.Extensions.getMutatorProperties_(n);if(i.length!=t.length)return!1;for(var o=0;o<i.length;o++)if(t[o]!=i[o])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var i=[];return"object"==typeof document&&e.utils.runAfterPageLoad((function(){for(var t in n)e.utils.checkMessageReferences(n[t])})),function(){this.type&&-1==i.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),i.push(this.type)),this.setTooltip(function(){var o=this.getFieldValue(t),r=n[o];return null==r?-1==i.indexOf(this.type)&&(o="No tooltip mapping for value "+o+" of field "+t,null!=this.type&&(o+=" of block type "+this.type),console.warn(o+".")):r=e.utils.replaceMessageReferences(r),r}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(e,t,n){var i=e.getField(t);if(!i.isOptionListDynamic()){i=i.getOptions();for(var o=0;o<i.length;++o){var r=i[o][1];null==n[r]&&console.warn("No tooltip mapping for value "+r+" of field "+t+" of block type "+e.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad((function(){e.utils.checkMessageReferences(t)})),function(){this.setTooltip(function(){var i=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",i?i.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var e=this.getParent();return e&&e.getInputsInline()&&e.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,i=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(i),(i=i.cloneNode(!0)).translateX_=t.x,i.translateY_=t.y,i.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(i),i.bBox_=i.getBBox(),e.blockAnimations.disposeUiStep_(i,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,i,o){var r=(new Date-i)/150;1<r?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*o/2*r)+","+(t.translateY_+t.bBox_.height*o*r)+") scale("+(1-r)*o+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,i,o))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,i=n.scale;if(n.getAudioManager().play("click"),!(1>i)){var o=n.getSvgXY(t.getSvgRoot());t.outputConnection?(o.x+=(t.RTL?3:-3)*i,o.y+=13*i):t.previousConnection&&(o.x+=(t.RTL?-23:23)*i,o.y+=3*i),t=e.utils.dom.createSvgElement("circle",{cx:o.x,cy:o.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,i)}},e.blockAnimations.connectionUiStep_=function(t,n,i){var o=(new Date-n)/150;1<o?e.utils.dom.removeNode(t):(t.setAttribute("r",25*o*i),t.style.opacity=1-o,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,i))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,i){var o=(new Date-i)/200;1<o?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(o*Math.PI*3)*(1-o)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,i)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.markerConnection_=null,this.highlightingBlock_=!1,this.highlightedBlock_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.dispose=function(){this.workspace_=this.topBlock_=null,this.availableConnections_.length=0,this.localConnection_=this.closestConnection_=null,e.Events.disable();try{this.firstMarker_&&(this.firstMarker_.dispose(),this.firstMarker_=null),this.lastMarker_&&(this.lastMarker_.dispose(),this.lastMarker_=null)}finally{e.Events.enable()}this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var i=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(i,n))||this.shouldUpdatePreviews_(i,t))&&(e.Events.disable(),this.maybeHidePreview_(i),this.maybeShowPreview_(i),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var i=this.workspace_.newBlock(n);if(i.setInsertionMarker(!0,t.width),i.setCollapsed(t.isCollapsed()),t.mutationToDom){var o=t.mutationToDom();o&&i.domToMutation(o)}for(n=0;n<t.inputList.length;n++){var r=t.inputList[n],s=i.inputList[n];for(o=0;o<r.fieldRow.length;o++)s.fieldRow[o].setValue(r.fieldRow[o].getValue())}i.initSvg(),i.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return i},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),t=this.topBlock_.lastConnectionInStack();return t&&t!=this.topBlock_.nextConnection&&(e.push(t),this.lastOnStack_=t,this.lastMarker_=this.createMarkerBlock_(t.sourceBlock_)),e},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var i=t.local,o=t.closest,r=t.radius;if(!i||!o)return!(!this.localConnection_||!this.closestConnection_);if(this.localConnection_&&this.closestConnection_){if(this.closestConnection_==o&&this.localConnection_==i)return!1;i=this.localConnection_.x_+n.x-this.closestConnection_.x_;var s=this.localConnection_.y_+n.y-this.closestConnection_.y_;return i=Math.sqrt(i*i+s*s),!(o&&r>i-e.CURRENT_CONNECTION_PREFERENCE)}return!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0)},e.InsertionMarkerManager.prototype.getCandidate_=function(e){for(var t=this.getStartRadius_(),n=null,i=null,o=0;o<this.availableConnections_.length;o++){var r=this.availableConnections_[o],s=r.closest(t,e);s.connection&&(n=s.connection,i=r,t=s.radius)}return{closest:n,local:i,radius:t}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldReplace_=function(){var t=this.closestConnection_,n=this.localConnection_;return n.type==e.OUTPUT_VALUE?!(!t.isConnected()||e.Connection.lastConnectionInRow_(this.topBlock_,t.targetConnection.getSourceBlock())):n!=n.sourceBlock_.getFirstStatementConnection()&&!(this.topBlock_.nextConnection||n.type!=e.PREVIOUS_STATEMENT||!t.isConnected())},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){var i=t&&!!t.closest&&n!=e.DELETE_AREA_TOOLBOX;return!!n&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!i},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(e){if(!this.wouldDeleteBlock_){var t=e.closest;e=e.local,t&&(t==this.closestConnection_||t.sourceBlock_.isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=t,this.localConnection_=e,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){this.shouldReplace_()?this.highlightBlock_():this.connectMarker_(),this.closestConnection_&&this.closestConnection_.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(e){if(e.closest){var t=this.closestConnection_!=e.closest;e=this.localConnection_!=e.local,this.closestConnection_&&this.localConnection_&&(t||e||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.unhighlight(),this.highlightingBlock_?this.unhighlightBlock_():this.markerConnection_&&this.disconnectMarker_()},e.InsertionMarkerManager.prototype.highlightBlock_=function(){var t=this.closestConnection_,n=this.localConnection_;t.targetBlock()?(this.highlightedBlock_=t.targetBlock(),t.targetBlock().highlightForReplacement(!0)):n.type==e.OUTPUT_VALUE&&(this.highlightedBlock_=t.sourceBlock_,t.sourceBlock_.highlightShapeForInput(t,!0)),this.highlightingBlock_=!0},e.InsertionMarkerManager.prototype.unhighlightBlock_=function(){var t=this.closestConnection_;t.type!=e.INPUT_VALUE||t.isConnected()?this.highlightedBlock_.highlightForReplacement(!1):this.highlightedBlock_.highlightShapeForInput(t,!1),this.highlightedBlock_=null,this.highlightingBlock_=!1},e.InsertionMarkerManager.prototype.disconnectMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.sourceBlock_,i=n.nextConnection,o=n.previousConnection,r=n.outputConnection;if(r=t.type==e.INPUT_VALUE&&!(r&&r.targetConnection),!(t!=i||o&&o.targetConnection)||r?t.targetBlock().unplug(!1):t.type==e.NEXT_STATEMENT&&t!=i?((i=t.targetConnection).sourceBlock_.unplug(!1),o=o?o.targetConnection:null,n.unplug(!0),o&&o.connect(i)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,n.getSvgRoot().setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.connectMarker_=function(){var e=this.localConnection_,t=this.closestConnection_,n=this.lastOnStack_&&e==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((e=n.getMatchingConnection(e.sourceBlock_,e))==this.markerConnection_)throw Error("Made it to connectMarker_ even though the marker isn't changing");n.render(),n.rendered=!0,n.getSvgRoot().setAttribute("visibility","visible"),n.positionNewBlock(n,e,t),e.connect(t),this.markerConnection_=e},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var e=[];return this.firstMarker_&&e.push(this.firstMarker_),this.lastMarker_&&e.push(this.lastMarker_),e},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.deleteArea_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.startWorkspace_=this.workspace_=this.draggingBlock_=null,this.dragIconData_.length=0,this.draggedConnectionManager_&&(this.draggedConnectionManager_.dispose(),this.draggedConnectionManager_=null)},e.BlockDragger.initIconData_=function(e){var t=[];e=e.getDescendants(!1);for(var n,i=0;n=e[i];i++){n=n.getIcons();for(var o=0;o<n.length;o++){var r={location:n[o].getIconLocation(),icon:n[o]};t.push(r)}}return t},e.BlockDragger.prototype.startBlockDrag=function(t,n){if(e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.draggingBlock_.getParent()||n&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock()){this.draggingBlock_.unplug(n);var i=this.pixelsToWorkspaceUnits_(t);i=e.utils.Coordinate.sum(this.startXY_,i),this.draggingBlock_.translate(i.x,i.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_)}if(this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface_(),i=this.workspace_.getToolbox()){var o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";i.addStyle(o)}},e.BlockDragger.prototype.dragBlock=function(t,n){var i=this.pixelsToWorkspaceUnits_(n),o=e.utils.Coordinate.sum(this.startXY_,i);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(i),this.deleteArea_=this.workspace_.isDeleteArea(t),this.draggedConnectionManager_.update(i,this.deleteArea_),this.updateCursorDuringBlockDrag_()},e.BlockDragger.prototype.endBlockDrag=function(t,n){this.dragBlock(t,n),this.dragIconData_=[],e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop();var i=this.pixelsToWorkspaceUnits_(n),o=e.utils.Coordinate.sum(this.startXY_,i);this.draggingBlock_.moveOffDragSurface_(o),this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections_(i.x,i.y),this.draggingBlock_.setDragging(!1),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()),this.workspace_.setResizesEnabled(!0),(i=this.workspace_.getToolbox())&&(o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",i.removeStyle(o)),e.Events.setGroup(!1)},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new e.Events.BlockMove(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.maybeDeleteBlock_=function(){var e=this.workspace_.trashcan;return this.wouldDeleteBlock_?(e&&setTimeout(e.close.bind(e),100),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0)):e&&e.close(),this.wouldDeleteBlock_},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var t=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==e.DELETE_AREA_TRASH&&t&&t.setOpen_(!0)):(this.draggingBlock_.setDeleteStyle(!1),t&&t.setOpen_(!1))},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var i=this.dragIconData_[n];i.icon.setIconLocation(e.utils.Coordinate.sum(i.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart_=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout((function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)}),e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(e){return null!=e.pointerId?e.pointerId:e.changedTouches&&e.changedTouches[0]&&void 0!==e.changedTouches[0].identifier&&null!==e.changedTouches[0].identifier?e.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return void 0!==e.Touch.touchIdentifier_&&null!==e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(e){var t=[];if(e.changedTouches)for(var n=0;n<e.changedTouches.length;n++)t[n]={type:e.type,changedTouches:[e.changedTouches[n]],target:e.target,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}};else t.push(e);return t},e.ScrollbarPair=function(t){this.workspace_=t,this.hScroll=new e.Scrollbar(t,!0,!0,"blocklyMainWorkspaceScrollbar"),this.vScroll=new e.Scrollbar(t,!1,!0,"blocklyMainWorkspaceScrollbar"),this.corner_=e.utils.dom.createSvgElement("rect",{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())},e.ScrollbarPair.prototype.oldHostMetrics_=null,e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll.dispose(),this.hScroll=null,this.vScroll.dispose(),this.vScroll=null},e.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var t=!1,n=!1;this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.contentWidth==e.contentWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.contentLeft==e.contentLeft||(t=!0),this.oldHostMetrics_&&this.oldHostMetrics_.contentHeight==e.contentHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.contentTop==e.contentTop||(n=!0)):n=t=!0,t&&this.hScroll.resize(e),n&&this.vScroll.resize(e),this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position_.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position_.y),this.oldHostMetrics_=e}},e.ScrollbarPair.prototype.set=function(e,t){var n={},i=e*this.hScroll.ratio_,o=t*this.vScroll.ratio_,r=this.vScroll.scrollViewSize_;n.x=this.getRatio_(i,this.hScroll.scrollViewSize_),n.y=this.getRatio_(o,r),this.workspace_.setMetrics(n),this.hScroll.setHandlePosition(i),this.vScroll.setHandlePosition(o)},e.ScrollbarPair.prototype.getRatio_=function(e,t){var n=e/t;return isNaN(n)?0:n},e.Scrollbar=function(t,n,i,o){this.workspace_=t,this.pair_=i||!1,this.horizontal_=n,this.oldHostMetrics_=null,this.createDom_(o),this.position_=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.bindEventWithChecks_(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollViewSize_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.metricsAreEquivalent_=function(e,t){return!(!e||!t||e.viewWidth!=t.viewWidth||e.viewHeight!=t.viewHeight||e.viewLeft!=t.viewLeft||e.viewTop!=t.viewTop||e.absoluteTop!=t.absoluteTop||e.absoluteLeft!=t.absoluteLeft||e.contentWidth!=t.contentWidth||e.contentHeight!=t.contentHeight||e.contentLeft!=t.contentLeft||e.contentTop!=t.contentTop)},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.unbindEvent_(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.unbindEvent_(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.setHandleLength_=function(e){this.handleLength_=e,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(e){this.handlePosition_=e,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollViewSize_=function(e){this.scrollViewSize_=e,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollViewSize_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollViewSize_)},e.ScrollbarPair.prototype.setContainerVisible=function(e){this.hScroll.setContainerVisible(e),this.vScroll.setContainerVisible(e)},e.Scrollbar.prototype.setPosition_=function(t,n){this.position_.x=t,this.position_.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position_.x+this.origin_.x)+"px,"+(this.position_.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){(t||(t=this.workspace_.getMetrics()))&&(e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.oldHostMetrics_=t,this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.onScroll_()))},e.Scrollbar.prototype.resizeHorizontal_=function(e){this.resizeViewHorizontal(e)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-1;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,n)),n=t.absoluteLeft+.5,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition_(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-.5),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(e){this.pair_||this.setVisible(this.scrollViewSize_<e.contentWidth),this.ratio_=this.scrollViewSize_/e.contentWidth,(-1/0==this.ratio_||1/0==this.ratio_||isNaN(this.ratio_))&&(this.ratio_=0),this.setHandleLength_(Math.max(0,e.viewWidth*this.ratio_)),this.setHandlePosition(this.constrainHandle_((e.viewLeft-e.contentLeft)*this.ratio_))},e.Scrollbar.prototype.resizeVertical_=function(e){this.resizeViewVertical(e)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-1;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,n)),n=t.absoluteLeft+.5,this.workspace_.RTL||(n+=t.viewWidth-e.Scrollbar.scrollbarThickness-1),this.setPosition_(n,t.absoluteTop+.5),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(e){this.pair_||this.setVisible(this.scrollViewSize_<e.contentHeight),this.ratio_=this.scrollViewSize_/e.contentHeight,(-1/0==this.ratio_||1/0==this.ratio_||isNaN(this.ratio_))&&(this.ratio_=0),this.setHandleLength_(Math.max(0,e.viewHeight*this.ratio_)),this.setHandlePosition(this.constrainHandle_((e.viewTop-e.contentTop)*this.ratio_))},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement("svg",{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement("g",{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement("rect",{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement("rect",{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbar","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(e){var t=e!=this.containerVisible_;this.containerVisible_=e,t&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(e){var t=e!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=e,t&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var i=e.utils.getInjectionDivXY_(this.svgHandle_);i=this.horizontal_?i.x:i.y;var o=this.handlePosition_,r=.95*this.handleLength_;n<=i?o-=r:n>=i+this.handleLength_&&(o+=r),this.setHandlePosition(this.constrainHandle_(o)),this.onScroll_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.bindEventWithChecks_(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.bindEventWithChecks_(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(e){this.setHandlePosition(this.constrainHandle_(this.startDragHandle+((this.horizontal_?e.clientX:e.clientY)-this.startDragMouse_))),this.onScroll_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.unbindEvent_(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.unbindEvent_(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.constrainHandle_=function(e){return 0>=e||isNaN(e)||this.scrollViewSize_<this.handleLength_?0:Math.min(e,this.scrollViewSize_-this.handleLength_)},e.Scrollbar.prototype.onScroll_=function(){var e=this.handlePosition_/this.scrollViewSize_;isNaN(e)&&(e=0);var t={};this.horizontal_?t.x=e:t.y=e,this.workspace_.setMetrics(t)},e.Scrollbar.prototype.set=function(e){this.setHandlePosition(this.constrainHandle_(e*this.ratio_)),this.onScroll_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.utils.math={},e.utils.math.toRadians=function(e){return e*Math.PI/180},e.utils.math.toDegrees=function(e){return 180*e/Math.PI},e.utils.math.clamp=function(e,t,n){if(n<e){var i=n;n=e,e=i}return Math.max(e,Math.min(t,n))},e.Cursor=function(){this.drawer_=this.curNode_=null},e.Cursor.prototype.setDrawer=function(e){this.drawer_=e},e.Cursor.prototype.getDrawer=function(){return this.drawer_},e.Cursor.prototype.getCurNode=function(){return this.curNode_},e.Cursor.prototype.setCurNode=function(e){this.curNode_=e,this.drawer_&&this.drawer_.draw(this.getCurNode())},e.Cursor.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?(t.getType()!=e.ASTNode.types.PREVIOUS&&t.getType()!=e.ASTNode.types.OUTPUT||(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.MarkerCursor=function(){e.MarkerCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.MarkerCursor,e.Cursor),e.MarkerCursor.prototype.next=function(){return null},e.MarkerCursor.prototype.in=function(){return null},e.MarkerCursor.prototype.prev=function(){return null},e.MarkerCursor.prototype.out=function(){return null},e.Theme=function(e,t,n){this.blockStyles_=e,this.categoryStyles_=t,this.componentStyles_=n||Object.create(null)},e.Theme.prototype.setAllBlockStyles=function(e){for(var t in e)this.setBlockStyle(t,e[t])},e.Theme.prototype.getAllBlockStyles=function(){return this.blockStyles_},e.Theme.prototype.getBlockStyle=function(e){return this.blockStyles_[e]},e.Theme.prototype.setBlockStyle=function(e,t){this.blockStyles_[e]=t},e.Theme.prototype.getCategoryStyle=function(e){return this.categoryStyles_[e]},e.Theme.prototype.setCategoryStyle=function(e,t){this.categoryStyles_[e]=t},e.Theme.prototype.getComponentStyle=function(e){return(e=this.componentStyles_[e])&&"string"==typeof propertyValue&&this.getComponentStyle(e)?this.getComponentStyle(e):e?String(e):null},e.Theme.prototype.setComponentStyle=function(e,t){this.componentStyles_[e]=t},e.ThemeManager=function(e){this.theme_=e,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(e){if(this.theme_!==e){this.theme_=e,e=0;for(var t;t=this.subscribedWorkspaces_[e];e++)t.refreshTheme();e=0,t=Object.keys(this.componentDB_);for(var n;n=t[e];e++)for(var i,o=0;i=this.componentDB_[n][o];o++){var r=i.element;i=i.propertyName;var s=this.theme_&&this.theme_.getComponentStyle(n);r.style[i]=s||""}}},e.ThemeManager.prototype.subscribeWorkspace=function(e){this.subscribedWorkspaces_.push(e)},e.ThemeManager.prototype.unsubscribeWorkspace=function(e){if(0>(e=this.subscribedWorkspaces_.indexOf(e)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(e,1)},e.ThemeManager.prototype.subscribe=function(e,t,n){this.componentDB_[t]||(this.componentDB_[t]=[]),this.componentDB_[t].push({element:e,propertyName:n}),t=this.theme_&&this.theme_.getComponentStyle(t),e.style[n]=t||""},e.ThemeManager.prototype.unsubscribe=function(e){if(e)for(var t,n=Object.keys(this.componentDB_),i=0;t=n[i];i++){for(var o=this.componentDB_[t],r=o.length-1;0<=r;r--)o[r].element===e&&o.splice(r,1);this.componentDB_[t].length||delete this.componentDB_[t]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme(e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.VariableMap=function(e){this.variableMap_=Object.create(null),this.workspace=e},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var i=this.getVariable(n,t.type),o=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{i&&i.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,i,o):this.renameVariableAndUses_(t,n,o)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(e,t){var n=this.getVariableById(e);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(n,t)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,i){for(e.Events.fire(new e.Events.VarRename(t,n)),t.name=n,n=0;n<i.length;n++)i[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,i,o){var r=t.type;for(n!=i.name&&this.renameVariableAndUses_(i,n,o),n=0;n<o.length;n++)o[n].renameVarById(t.getId(),i.getId());e.Events.fire(new e.Events.VarDelete(t)),t=this.getVariablesOfType(r).indexOf(t),this.variableMap_[r].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,i){var o=this.getVariable(t,n);if(o){if(i&&o.getId()!=i)throw Error('Variable "'+t+'" is already in use and its id is "'+o.getId()+'" which conflicts with the passed in id, "'+i+'".');return o}if(i&&this.getVariableById(i))throw Error('Variable id, "'+i+'", is already in use.');return o=i||e.utils.genUid(),n=n||"",o=new e.VariableModel(this.workspace,t,n,o),(t=this.variableMap_[n]||[]).push(o),delete this.variableMap_[n],this.variableMap_[n]=t,o},e.VariableMap.prototype.deleteVariable=function(t){for(var n,i=this.variableMap_[t.type],o=0;n=i[o];o++)if(n.getId()==t.getId()){i.splice(o,1),e.Events.fire(new e.Events.VarDelete(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var i,o=n.name,r=this.getVariableUsesById(t);for(t=0;i=r[t];t++)if("procedures_defnoreturn"==i.type||"procedures_defreturn"==i.type)return t=i.getFieldValue("NAME"),o=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",t),void e.alert(o);var s=this;1<r.length?(o=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",o),e.confirm(o,(function(e){e&&s.deleteVariableInternal_(n,r)}))):s.deleteVariableInternal_(n,r)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal_=function(t,n){var i=e.Events.getGroup();i||e.Events.setGroup(!0);try{for(var o=0;o<n.length;o++)n[o].dispose(!0,!1);this.deleteVariable(t)}finally{i||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){var i=this.variableMap_[n||""];if(i)for(var o,r=0;o=i[r];r++)if(e.Names.equals(o.name,t))return o;return null},e.VariableMap.prototype.getVariableById=function(e){for(var t=Object.keys(this.variableMap_),n=0;n<t.length;n++)for(var i,o=t[n],r=0;i=this.variableMap_[o][r];r++)if(i.getId()==e)return i;return null},e.VariableMap.prototype.getVariablesOfType=function(e){return(e=this.variableMap_[e||""])?e.slice():[]},e.VariableMap.prototype.getVariableTypes=function(e){var t=[];e&&e.getPotentialVariableMap()&&(t=Object.keys(e.getPotentialVariableMap().variableMap_)),e=Object.keys(this.variableMap_).concat(t),t=!1;for(var n=0;n<e.length;n++)""==e[n]&&(t=!0);return t||e.push(""),e},e.VariableMap.prototype.getAllVariables=function(){var e,t=[];for(e in this.variableMap_)t=t.concat(this.variableMap_[e]);return t},e.VariableMap.prototype.getVariableUsesById=function(e){for(var t=[],n=this.workspace.getAllBlocks(!1),i=0;i<n.length;i++){var o=n[i].getVarModels();if(o)for(var r=0;r<o.length;r++)o[r].getId()==e&&t.push(n[i])}return t},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||{},this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null,this.cursor_=new e.Cursor,this.marker_=new e.MarkerCursor,this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this)},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.setCursor=function(e){this.cursor_=e},e.Workspace.prototype.setMarker=function(e){this.marker_=e},e.Workspace.prototype.getCursor=function(){return this.cursor_},e.Workspace.prototype.getMarker=function(){return this.marker_},e.Workspace.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.Workspace.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.Workspace.prototype.refreshTheme=function(){this.updateBlockStyles_(this.getAllBlocks().filter((function(e){return void 0!==e.getStyleName()})));var t=new e.Events.Ui(null,"theme",null,null);t.workspaceId=this.id,e.Events.fire(t)},e.Workspace.prototype.updateBlockStyles_=function(e){for(var t,n=0;t=e[n];n++){var i=t.getStyleName();t.setStyle(i),t.mutator&&t.mutator.updateBlockStyle(i)}},e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id],this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null))},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){var i=t.getRelativeToSurfaceXY(),o=n.getRelativeToSurfaceXY();return i.y+e.Workspace.prototype.sortObjects_.offset*i.x-(o.y+e.Workspace.prototype.sortObjects_.offset*o.x)},e.Workspace.prototype.addTopBlock=function(e){this.topBlocks_.push(e)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(e){this.typedBlocksDB_[e.type]||(this.typedBlocksDB_[e.type]=[]),this.typedBlocksDB_[e.type].push(e)},e.Workspace.prototype.removeTypedBlock=function(e){this.typedBlocksDB_[e.type].splice(this.typedBlocksDB_[e.type].indexOf(e),1),this.typedBlocksDB_[e.type].length||delete this.typedBlocksDB_[e.type]},e.Workspace.prototype.getBlocksByType=function(t,n){if(!this.typedBlocksDB_[t])return[];var i=this.typedBlocksDB_[t].slice(0);return n&&1<i.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),i.sort(this.sortObjects_)),i},e.Workspace.prototype.addTopComment=function(e){this.topComments_.push(e),this.commentDB_[e.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB_[e.id]=e},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(e){if(e){e=this.getTopBlocks(!0);for(var t=[],n=0;n<e.length;n++)t.push.apply(t,e[n].getDescendants(!0))}else for(t=this.getTopBlocks(!1),n=0;n<t.length;n++)t.push.apply(t,t[n].getChildren(!1));return t.filter((function(e){return!e.isInsertionMarker()}))},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose();for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose();t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(e,t){this.variableMap_.renameVariableById(e,t)},e.Workspace.prototype.createVariable=function(e,t,n){return this.variableMap_.createVariable(e,t,n)},e.Workspace.prototype.getVariableUsesById=function(e){return this.variableMap_.getVariableUsesById(e)},e.Workspace.prototype.deleteVariableById=function(e){this.variableMap_.deleteVariableById(e)},e.Workspace.prototype.deleteVariableInternal_=function(e,t){this.variableMap_.deleteVariableInternal_(e,t)},e.Workspace.prototype.variableIndexOf=function(e){return console.warn("Deprecated call to Blockly.Workspace.prototype.variableIndexOf"),-1},e.Workspace.prototype.getVariable=function(e,t){return this.variableMap_.getVariable(e,t)},e.Workspace.prototype.getVariableById=function(e){return this.variableMap_.getVariableById(e)},e.Workspace.prototype.getVariablesOfType=function(e){return this.variableMap_.getVariablesOfType(e)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks().length},e.Workspace.prototype.remainingCapacityOfType=function(e){return this.options.maxInstances?(this.options.maxInstances[e]||1/0)-this.getBlocksByType(e).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(e){if(!this.hasBlockLimits())return!0;var t,n=0;for(t in e){if(e[t]>this.remainingCapacityOfType(t))return!1;n+=e[t]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return 1/0!=this.options.maxBlocks||!!this.options.maxInstances},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,i=t?this.undoStack_:this.redoStack_,o=n.pop();if(o){for(var r=[o];n.length&&o.group&&o.group==n[n.length-1].group;)r.push(n.pop());for(n=0;o=r[n];n++)i.push(o);r=e.Events.filter(r,t),e.Events.recordUndo=!1;try{for(n=0;o=r[n];n++)o.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(e){return this.listeners_.push(e),e},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var t,n=0;t=this.listeners_[n];n++)t(e)},e.Workspace.prototype.getBlockById=function(e){return this.blockDB_[e]||null},e.Workspace.prototype.getCommentById=function(e){return this.commentDB_[e]||null},e.Workspace.prototype.allInputsFilled=function(e){for(var t,n=this.getTopBlocks(!1),i=0;t=n[i];i++)if(!t.allInputsFilled(e))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var t,n=[];for(t in e.Workspace.WorkspaceDB_)n.push(e.Workspace.WorkspaceDB_[t]);return n},e.Workspace.prototype.getThemeManager=function(){return this.themeManager_},e.Bubble=function(t,n,i,o,r,s){this.workspace_=t,this.content_=n,this.shape_=i,i=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(i=-i),this.arrow_radians_=e.utils.math.toRadians(i),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!r||!s))),this.setAnchorLocation(o),r&&s||(r=(n=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,s=n.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(r,s),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0,t.options.readOnly||(e.bindEventWithChecks_(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&e.bindEventWithChecks_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.prototype.resizeCallback_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.unbindEvent_(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.unbindEvent_(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement("g",{},null);var i={filter:"url(#"+this.workspace_.options.embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(i={}),i=e.utils.dom.createSvgElement("g",i,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement("path",{},i),this.bubbleBack_=e.utils.dom.createSvgElement("rect",{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},i),n?(this.resizeGroup_=e.utils.dom.createSvgElement("g",{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),i=2*e.Bubble.BORDER_WIDTH,e.utils.dom.createSvgElement("polygon",{points:"0,x x,x x,0".replace(/x/g,i.toString())},this.resizeGroup_),e.utils.dom.createSvgElement("line",{class:"blocklyResizeLine",x1:i/3,y1:i-1,x2:i-1,y2:i/3},this.resizeGroup_),e.utils.dom.createSvgElement("line",{class:"blocklyResizeLine",x1:2*i/3,y1:i-1,x2:i-1,y2:2*i/3},this.resizeGroup_)):this.resizeGroup_=null,this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(e){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=e)},e.Bubble.prototype.bubbleMouseDown_=function(e){var t=this.workspace_.getGesture(e);t&&t.handleBubbleStart(e,this)},e.Bubble.prototype.showContextMenu_=function(e){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote_(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.bindEventWithChecks_(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1,e=this.workspace_.moveDrag(e),this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(e){this.resizeCallback_=e},e.Bubble.prototype.promote_=function(){var e=this.bubbleGroup_.parentNode;return e.lastChild!==this.bubbleGroup_&&(e.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(e){this.anchorXY_=e,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetrics();t.viewLeft/=this.workspace_.scale,t.viewWidth/=this.workspace_.scale,t.viewTop/=this.workspace_.scale,t.viewHeight/=this.workspace_.scale;var n=this.getOptimalRelativeLeft_(t),i=this.getOptimalRelativeTop_(t),o=this.shape_.getBBox(),r={x:n,y:-this.height_-e.BlockSvg.MIN_BLOCK_Y},s={x:-this.width_-30,y:i};i={x:o.width,y:i};var a={x:n,y:o.height};n=o.width<o.height?i:a,o=o.width<o.height?a:i,i=this.getOverlap_(r,t),a=this.getOverlap_(s,t);var l=this.getOverlap_(n,t);t=this.getOverlap_(o,t),i==(t=Math.max(i,a,l,t))?(this.relativeLeft_=r.x,this.relativeTop_=r.y):a==t?(this.relativeLeft_=s.x,this.relativeTop_=s.y):l==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=o.x,this.relativeTop_=o.y)},e.Bubble.prototype.getOverlap_=function(e,t){var n=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x+this.anchorXY_.x,i=e.y+this.anchorXY_.y;return Math.max(0,Math.min(1,(Math.min(n+this.width_,t.viewLeft+t.viewWidth)-Math.max(n,t.viewLeft))*(Math.min(i+this.height_,t.viewTop+t.viewHeight)-Math.max(i,t.viewTop))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.viewWidth)return n;if(this.workspace_.RTL)var i=this.anchorXY_.x-n,o=i-this.width_,r=t.viewLeft+t.viewWidth,s=t.viewLeft+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else i=(o=n+this.anchorXY_.x)+this.width_,s=t.viewLeft,r=t.viewLeft+t.viewWidth-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?o<s?n=-(s-this.anchorXY_.x+this.width_):i>r&&(n=-(r-this.anchorXY_.x)):o<s?n=s-this.anchorXY_.x:i>r&&(n=r-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.viewHeight)return n;var i=this.anchorXY_.y+n,o=i+this.height_,r=t.viewTop;t=t.viewTop+t.viewHeight-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var s=this.anchorXY_.y;return i<r?n=r-s:o>t&&(n=t-s-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var e=this.anchorXY_.x;e=this.workspace_.RTL?e-(this.relativeLeft_+this.width_):e+this.relativeLeft_,this.moveTo(e,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(e,t){this.bubbleGroup_.setAttribute("transform","translate("+e+","+t+")")},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var i=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,i+45),n=Math.max(n,i+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*e.Bubble.BORDER_WIDTH+","+(n-i)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(t-i)+","+(n-i)+")")),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,i=this.height_/2,o=-this.relativeLeft_,r=-this.relativeTop_;if(n==o&&i==r)t.push("M "+n+","+i);else{r-=i,o-=n,this.workspace_.RTL&&(o*=-1);var s=Math.sqrt(r*r+o*o),a=Math.acos(o/s);0>r&&(a=2*Math.PI-a);var l=a+Math.PI/2;l>2*Math.PI&&(l-=2*Math.PI);var c=Math.sin(l),u=Math.cos(l),h=this.getBubbleSize();l=(h.width+h.height)/e.Bubble.ARROW_THICKNESS,l=Math.min(l,h.width,h.height)/4,o=n+(h=1-e.Bubble.ANCHOR_RADIUS/s)*o,r=i+h*r,h=n+l*u;var d=i+l*c;n-=l*u,i-=l*c,(c=a+this.arrow_radians_)>2*Math.PI&&(c-=2*Math.PI),a=Math.sin(c)*s/e.Bubble.ARROW_BEND,s=Math.cos(c)*s/e.Bubble.ARROW_BEND,t.push("M"+h+","+d),t.push("C"+(h+s)+","+(d+a)+" "+o+","+r+" "+o+","+r),t.push("C"+o+","+r+" "+(n+s)+","+(i+a)+" "+n+","+i)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(e){this.bubbleBack_.setAttribute("fill",e),this.bubbleArrow_.setAttribute("fill",e)},e.Bubble.prototype.dispose=function(){e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.shape_=this.content_=this.workspace_=this.resizeGroup_=this.bubbleBack_=this.bubbleArrow_=this.bubbleGroup_=null},e.Bubble.prototype.moveDuringDrag=function(e,t){e?e.translateSurface(t.x,t.y):this.moveTo(t.x,t.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x-this.anchorXY_.x,this.relativeTop_=t.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(e){this.autoLayout_=e},e.Events.CommentBase=function(t){this.commentId=t.id,this.workspaceId=t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,i){t&&(e.Events.CommentChange.superClass_.constructor.call(this,t),this.oldContents_=n,this.newContents_=i)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.newContents_=t.newValue},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(e){var t=this.getEventWorkspace_().getCommentById(this.commentId);t?t.setContent(e?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){t&&(e.Events.CommentCreate.superClass_.constructor.call(this,t),this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var i=t.getEventWorkspace_();if(n){var o=e.utils.xml.createElement("xml");o.appendChild(t.xml),e.Xml.domToWorkspace(o,i)}else(i=i.getCommentById(t.commentId))?i.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){t&&(e.Events.CommentDelete.superClass_.constructor.call(this,t),this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){t&&(e.Events.CommentMove.superClass_.constructor.call(this,t),this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(e){this.oldCoordinate_=e},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){e.Events.CommentMove.superClass_.fromJson.call(this,t),t.newCoordinate&&(t=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(t[0]),Number(t[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(e){var t=this.getEventWorkspace_().getCommentById(this.commentId);if(t){e=e?this.newCoordinate_:this.oldCoordinate_;var n=t.getXY();t.moveBy(e.x-n.x,e.y-n.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.deleteArea_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0);var t=this.workspace_.getToolbox();if(t){var n=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t.addStyle(n)}},e.BubbleDragger.prototype.dragBubble=function(t,n){var i=this.pixelsToWorkspaceUnits_(n);i=e.utils.Coordinate.sum(this.startXY_,i),this.draggingBubble_.moveDuringDrag(this.dragSurface_,i),this.draggingBubble_.isDeletable()&&(this.deleteArea_=this.workspace_.isDeleteArea(t),this.updateCursorDuringBubbleDrag_())},e.BubbleDragger.prototype.maybeDeleteBubble_=function(){var e=this.workspace_.trashcan;return this.wouldDeleteBubble_?(e&&setTimeout(e.close.bind(e),100),this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):e&&e.close(),this.wouldDeleteBubble_},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.wouldDeleteBubble_=this.deleteArea_!=e.DELETE_AREA_NONE;var t=this.workspace_.trashcan;this.wouldDeleteBubble_?(this.draggingBubble_.setDeleteStyle(!0),this.deleteArea_==e.DELETE_AREA_TRASH&&t&&t.setOpen_(!0)):(this.draggingBubble_.setDeleteStyle(!1),t&&t.setOpen_(!1))},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n);var i=this.pixelsToWorkspaceUnits_(n);i=e.utils.Coordinate.sum(this.startXY_,i),this.draggingBubble_.moveTo(i.x,i.y),this.maybeDeleteBubble_()||(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),this.workspace_.toolbox_&&(i=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",this.workspace_.toolbox_.removeStyle(i)),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new e.Events.CommentMove(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.constants={},e.LINE_MODE_MULTIPLIER=40,e.PAGE_MODE_MULTIPLIER=125,e.DRAG_RADIUS=5,e.FLYOUT_DRAG_RADIUS=10,e.SNAP_RADIUS=28,e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.INSERTION_MARKER_COLOUR="#000000",e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.INPUT_VALUE=1,e.OUTPUT_VALUE=2,e.NEXT_STATEMENT=3,e.PREVIOUS_STATEMENT=4,e.DUMMY_INPUT=5,e.ALIGN_LEFT=-1,e.ALIGN_CENTRE=0,e.ALIGN_RIGHT=1,e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.INPUT_VALUE]=e.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.OUTPUT_VALUE]=e.INPUT_VALUE,e.OPPOSITE_TYPE[e.NEXT_STATEMENT]=e.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.PREVIOUS_STATEMENT]=e.NEXT_STATEMENT,e.TOOLBOX_AT_TOP=0,e.TOOLBOX_AT_BOTTOM=1,e.TOOLBOX_AT_LEFT=2,e.TOOLBOX_AT_RIGHT=3,e.DELETE_AREA_NONE=null,e.DELETE_AREA_TRASH=1,e.DELETE_AREA_TOOLBOX=2,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.Events.Ui=function(t,n,i,o){e.Events.Ui.superClass_.constructor.call(this),this.blockId=t?t.id:null,this.workspaceId=t?t.workspace.id:void 0,this.element=n,this.oldValue=i,this.newValue=o,this.recordUndo=!1},e.utils.object.inherits(e.Events.Ui,e.Events.Abstract),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.WorkspaceDragger=function(t){this.workspace_=t,this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(e){this.drag(e),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.workspace_.scroll(t.x,t.y)},e.FlyoutDragger=function(t){e.FlyoutDragger.superClass_.constructor.call(this,t.getWorkspace()),this.scrollbar_=t.scrollbar_,this.horizontalLayout_=t.horizontalLayout_},e.utils.object.inherits(e.FlyoutDragger,e.WorkspaceDragger),e.FlyoutDragger.prototype.drag=function(t){t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalLayout_?this.scrollbar_.set(-t.x):this.scrollbar_.set(-t.y)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",document.body.appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){e.bindEvent_(t,"mouseover",null,e.Tooltip.onMouseOver_),e.bindEvent_(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.onMouseOver_=function(t){if(!e.Tooltip.blocked_){for(t=t.currentTarget;"string"!=typeof t.tooltip&&"function"!=typeof t.tooltip;)t=t.tooltip;e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_)}},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout((function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()}),1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.innerHTML="";for(var t=e.Tooltip.element_.tooltip;"function"==typeof t;)t=t();t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var i=document.createElement("div");i.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(i)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,i=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var o=e.Tooltip.lastX_;o=t?o-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):o+e.Tooltip.OFFSET_X;var r=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;r+e.Tooltip.DIV.offsetHeight>i+window.scrollY&&(r-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?o=Math.max(e.Tooltip.MARGINS-window.scrollX,o):o+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(o=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=r+"px",e.Tooltip.DIV.style.left=o+"px"}},e.Gesture=function(t,n){this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=this.currentDragDeltaXY_=this.mouseDownXY_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.unbindEvent_(this.onMoveWrapper_),this.onUpWrapper_&&e.unbindEvent_(this.onUpWrapper_),this.flyout_=this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=null,this.blockDragger_&&(this.blockDragger_.dispose(),this.blockDragger_=null),this.workspaceDragger_&&(this.workspaceDragger_.dispose(),this.workspaceDragger_=null),this.bubbleDragger_&&(this.bubbleDragger_.dispose(),this.bubbleDragger_=null)},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace_,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=this.flyout_?new e.FlyoutDragger(this.flyout_):new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new e.BlockDragger(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.hideChaff(!!this.flyout_),e.Tooltip.block(),this.targetBlock_&&(!this.targetBlock_.isInFlyout&&t.shiftKey?(e.navigation.enableKeyboardAccessibility(),this.creatorWorkspace_.getCursor().setCurNode(e.navigation.getTopNode(this.targetBlock_))):this.targetBlock_.select()),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart_(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(e){this.updateFromEvent_(e),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),e.preventDefault(),e.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(this.flyout_),this.targetBlock_.showContextMenu_(t)):this.startBubble_?this.startBubble_.showContextMenu_(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu_(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t),e.keyboardAccessibilityMode&&e.navigation.setState(e.navigation.STATE_WS)},e.Gesture.prototype.handleFlyoutStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(t),this.handleWsStart(e,t.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent_=e},e.Gesture.prototype.handleBubbleStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent_=e},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor_(),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){this.flyout_&&this.flyout_.autoClose?this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump()):e.Events.fire(new e.Events.Ui(this.startBlock_,"click",void 0,void 0)),this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){var n=this.creatorWorkspace_;t.shiftKey?(e.navigation.enableKeyboardAccessibility(),t=new e.utils.Coordinate(t.clientX,t.clientY),t=e.utils.screenToWsCoordinates(n,t),t=e.ASTNode.createWorkspaceNode(n,t),n.getCursor().setCurNode(t)):e.selected&&e.selected.unselect()},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(e){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=e)},e.Gesture.prototype.setStartBubble=function(e){this.startBubble_||(this.startBubble_=e)},e.Gesture.prototype.setStartBlock=function(e){this.startBlock_||this.startBubble_||(this.startBlock_=e,e.isInFlyout&&e!=e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))},e.Gesture.prototype.setTargetBlock_=function(e){e.isShadow()?this.setTargetBlock_(e.getParent()):this.targetBlock_=e},e.Gesture.prototype.setStartWorkspace_=function(e){this.startWorkspace_||(this.startWorkspace_=e)},e.Gesture.prototype.setStartFlyout_=function(e){this.flyout_||(this.flyout_=e)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.inProgress=function(){for(var t,n=e.Workspace.getAll(),i=0;t=n[i];i++)if(t.currentGesture_)return!0;return!1},e.Field=function(t,n,i){this.tooltip_=this.validator_=this.value_=null,this.size_=new e.utils.Size(0,0),this.markerSvg_=this.cursorSvg_=null,i&&this.configure_(i),this.setValue(t),n&&this.setValidator(n)},e.Field.BORDER_RECT_DEFAULT_HEIGHT=16,e.Field.TEXT_DEFAULT_HEIGHT=12.5,e.Field.X_PADDING=10,e.Field.Y_PADDING=10,e.Field.DEFAULT_TEXT_OFFSET=e.Field.X_PADDING/2,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP=" ",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(e){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=e},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement("g",{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.size_.height=Math.max(this.size_.height,e.Field.BORDER_RECT_DEFAULT_HEIGHT),this.size_.width=Math.max(this.size_.width,e.Field.X_PADDING),this.borderRect_=e.utils.dom.createSvgElement("rect",{rx:4,ry:4,x:0,y:0,height:this.size_.height,width:this.size_.width},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement("text",{class:"blocklyText",y:e.Field.TEXT_DEFAULT_HEIGHT,x:this.borderRect_?e.Field.DEFAULT_TEXT_OFFSET:0},this.fieldGroup_),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(e){this.setValue(e.textContent)},e.Field.prototype.toXml=function(e){return e.textContent=this.getValue(),e},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),this.mouseDownWrapper_&&e.unbindEvent_(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.getClickTarget_();this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(e){if(this.visible_!=e){this.visible_=e;var t=this.getSvgRoot();t&&(t.style.display=e?"block":"none")}},e.Field.prototype.setValidator=function(e){this.validator_=e},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.classValidator=function(e){return e},e.Field.prototype.callValidator=function(e){var t=this.classValidator(e);if(null===t)return null;if(void 0!==t&&(e=t),t=this.getValidator()){if(null===(t=t.call(this,e)))return null;void 0!==t&&(e=t)}return e},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.updateColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_(),this.updateSize_())},e.Field.prototype.updateWidth=function(){console.warn("Deprecated call to updateWidth, call Blockly.Field.updateSize_ to force an update to the size of the field, or Blockly.utils.dom.getTextWidth() to check the size of the field."),this.updateSize_()},e.Field.prototype.updateSize_=function(){var t=e.utils.dom.getTextWidth(this.textElement_);this.borderRect_&&(t+=e.Field.X_PADDING,this.borderRect_.setAttribute("width",t)),this.size_.width=t},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox_=function(){var e=this.borderRect_.getBBox(),t=e.height*this.sourceBlock_.workspace.scale;e=e.width*this.sourceBlock_.workspace.scale;var n=this.getAbsoluteXY_();return{top:n.y,bottom:n.y+t,left:n.x,right:n.x+e}},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"…"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="‏"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var e=this.getText_.call(this);if(null!==e)return String(e)}return String(this.getValue())},e.Field.prototype.setText=function(e){throw Error("setText method is deprecated")},e.Field.prototype.markDirty=function(){this.isDirty_=!0},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;(n=this.getValue())!==t&&(this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new e.Events.BlockChange(this.sourceBlock_,"field",this.name||null,n,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}},e.Field.prototype.processValidation_=function(e,t){return null===t?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):(void 0!==t&&(e=t),e)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(e){return null==e?null:e=this.classValidator(e)},e.Field.prototype.doValueUpdate_=function(e){this.value_=e,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(e){},e.Field.prototype.onMouseDown_=function(e){this.sourceBlock_&&this.sourceBlock_.workspace&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)},e.Field.prototype.setTooltip=function(e){var t=this.getClickTarget_();t?t.tooltip=e||""===e?e:this.sourceBlock_:this.tooltip_=e},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.borderRect_)},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var e=null,t=this.sourceBlock_,n=t.inputList,i=0;i<t.inputList.length;i++)for(var o=n[i],r=o.fieldRow,s=0;s<r.length;s++)if(r[s]===this){e=o;break}return e},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onBlocklyAction=function(e){return!1},e.Field.prototype.setCursorSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null},e.fieldRegistry={},e.fieldRegistry.typeMap_={},e.fieldRegistry.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Invalid field type "'+t+'". The type must be a non-empty string.');if(e.fieldRegistry.typeMap_[t])throw Error('Error: Field "'+t+'" is already registered.');if(!n||"function"!=typeof n.fromJson)throw Error('Field "'+n+'" must have a fromJson function');t=t.toLowerCase(),e.fieldRegistry.typeMap_[t]=n},e.fieldRegistry.unregister=function(t){e.fieldRegistry.typeMap_[t]?delete e.fieldRegistry.typeMap_[t]:console.warn('No field mapping for type "'+t+'" found to unregister')},e.fieldRegistry.fromJson=function(t){var n=t.type.toLowerCase();return(n=e.fieldRegistry.typeMap_[n])?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.FieldLabel=function(t,n,i){this.class_=null,null==t&&(t=""),e.FieldLabel.superClass_.constructor.call(this,t,null,i),i||(this.class_=n||null),this.size_=new e.utils.Size(0,e.Field.TEXT_DEFAULT_HEIGHT)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.textElement_.setAttribute("y",this.size_.height),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(e){return null==e?null:String(e)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,i,o){if(t!=e.DUMMY_INPUT&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=i,this.connection=o,this.fieldRow=[]},e.Input.prototype.align=e.ALIGN_LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this},e.Input.prototype.insertFieldAt=function(t,n,i){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return n||""==n&&i?("string"==typeof n&&(n=new e.FieldLabel(n)),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&n.init(),n.name=i,n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),t):t},e.Input.prototype.removeField=function(e){for(var t,n=0;t=this.fieldRow[n];n++)if(t.name===e)return t.dispose(),this.fieldRow.splice(n,1),void(this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()));throw Error('Field "%s" not found.',e)},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(e){var t=[];if(this.visible_==e)return t;for(var n,i=(this.visible_=e)?"block":"none",o=0;n=this.fieldRow[o];o++)n.setVisible(e);return this.connection&&(e?t=this.connection.unhideAll():this.connection.hideAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=i,e||(o.rendered=!1)),t},e.Input.prototype.markDirty=function(){for(var e,t=0;e=this.fieldRow[t];t++)e.markDirty()},e.Input.prototype.setCheck=function(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this},e.Input.prototype.setAlign=function(e){return this.align=e,this.sourceBlock_.rendered&&this.sourceBlock_.render(),this},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init()},e.Input.prototype.dispose=function(){for(var e,t=0;e=this.fieldRow[t];t++)e.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n)return n;if(n="#"==t[0]?t:"#"+t,/^#[0-9a-f]{6}$/.test(n))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var i=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return i&&(t=Number(i[1]),n=Number(i[2]),i=Number(i[3]),0<=t&&256>t&&0<=n&&256>n&&0<=i&&256>i)?e.utils.colour.rgbToHex(t,n,i):null},e.utils.colour.rgbToHex=function(e,t,n){return t=e<<16|t<<8|n,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},e.utils.colour.hexToRgb=function(e){return[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]},e.utils.colour.hsvToHex=function(t,n,i){var o=0,r=0,s=0;if(0==n)s=r=o=i;else{var a=Math.floor(t/60),l=t/60-a;t=i*(1-n);var c=i*(1-n*l);switch(n=i*(1-n*(1-l)),a){case 1:o=c,r=i,s=t;break;case 2:o=t,r=i,s=n;break;case 3:o=t,r=c,s=i;break;case 4:o=n,r=t,s=i;break;case 5:o=i,r=t,s=c;break;case 6:case 0:o=i,r=n,s=t}}return e.utils.colour.rgbToHex(Math.floor(o),Math.floor(r),Math.floor(s))},e.utils.colour.blend=function(t,n,i){return t=e.utils.colour.hexToRgb(e.utils.colour.parse(t)),n=e.utils.colour.hexToRgb(e.utils.colour.parse(n)),e.utils.colour.rgbToHex(Math.round(n[0]+i*(t[0]-n[0])),Math.round(n[1]+i*(t[1]-n[1])),Math.round(n[2]+i*(t[2]-n[2])))},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.Block=function(t,n,i){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=i&&!t.getBlockById(i)?i:e.utils.genUid(),t.blockDB_[this.id]=this,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,n){if(this.type=n,!(i=e.Blocks[n])||"object"!=typeof i)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,i)}if(t.addTopBlock(this),t.addTypedBlock(this),"function"==typeof this.init&&this.init(),this.inputsInlineDefault=this.inputsInline,e.Events.isEnabled()){(t=e.Events.getGroup())||e.Events.setGroup(!0);try{e.Events.fire(new e.Events.BlockCreate(this))}finally{t||e.Events.setGroup(!1)}}"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.colourSecondary_=null,e.Block.prototype.colourTertiary_=null,e.Block.prototype.styleName_=null,e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),e.keyboardAccessibilityMode&&e.navigation.moveCursorOnBlockDelete(this),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new e.Events.BlockDelete(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),delete this.workspace.blockDB_[this.id],this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var i;i=this.inputList[n];n++)i.dispose();this.inputList.length=0;var o,r=this.getConnections_(!0);for(n=0;o=r[n];n++)o.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var e,t=0;e=this.inputList[t];t++)for(var n,i=0;n=e.fieldRow[i];i++)n.initModel&&n.initModel()},e.Block.prototype.unplug=function(e){this.outputConnection?this.unplugFromRow_(e):this.previousConnection&&this.unplugFromStack_(e)},e.Block.prototype.unplugFromRow_=function(e){var t=null;this.outputConnection.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&((e=e.targetConnection).disconnect(),e.checkType_(t)?t.connect(e):e.onFailedConnect(t))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var i=this.inputList[n].connection;if(i&&i.type==e.INPUT_VALUE&&i.targetConnection){if(t)return null;t=i}}return t},e.Block.prototype.unplugFromStack_=function(e){var t=null;this.previousConnection.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect());var n=this.getNextBlock();e&&n&&!n.isShadow()&&((e=this.nextConnection.targetConnection).disconnect(),t&&t.checkType_(e)&&t.connect(e))},e.Block.prototype.getConnections_=function(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(var t,n=0;t=this.inputList[n];n++)t.connection&&e.push(t.connection);return e},e.Block.prototype.lastConnectionInStack=function(){for(var e=this.nextConnection;e;){var t=e.targetBlock();if(!t)return e;e=t.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){console.warn("Not expected to reach Block.bumpNeighbours function. BlockSvg.bumpNeighbours was expected to be called instead.")},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&t.connection.targetBlock()==e)return t;return null},e.Block.prototype.getSurroundParent=function(){var e=this;do{var t=e;if(!(e=e.getParent()))return null}while(e.getNextBlock()==t);return e},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&t.connection.type==e.NEXT_STATEMENT)return t.connection;return null},e.Block.prototype.getRootBlock=function(){var e=this;do{var t=e;e=t.parentBlock_}while(e);return t},e.Block.prototype.getTopStackBlock=function(){var e=this;do{var t=e.getPreviousBlock()}while(t&&t.getNextBlock()==e&&(e=t));return e},e.Block.prototype.getChildren=function(e){if(!e)return this.childBlocks_;e=[];for(var t,n=0;t=this.inputList[n];n++)t.connection&&(t=t.connection.targetBlock())&&e.push(t);return(n=this.getNextBlock())&&e.push(n),e},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(e){for(var t,n=[this],i=this.getChildren(e),o=0;t=i[o];o++)n.push.apply(n,t.getDescendants(e));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(e){this.deletable_=e},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(e){this.movable_=e},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(e){this.isShadow_=e},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(e){this.isInsertionMarker_=e},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(e){this.editable_=e,e=0;for(var t;t=this.inputList[e];e++)for(var n,i=0;n=t.fieldRow[i];i++)n.updateEditable()},e.Block.prototype.getMatchingConnection=function(e,t){var n=this.getConnections_(!0),i=e.getConnections_(!0);if(n.length!=i.length)throw Error("Connection lists did not match in length.");for(var o=0;o<i.length;o++)if(i[o]==t)return n[o];return null},e.Block.prototype.setHelpUrl=function(e){this.helpUrl=e},e.Block.prototype.setTooltip=function(e){this.tooltip=e},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getColourSecondary=function(){return this.colourSecondary_},e.Block.prototype.getColourTertiary=function(){return this.colourTertiary_},e.Block.prototype.getColourShadow=function(){var t=this.getColourSecondary();return t||e.utils.colour.blend("#fff",this.getColour(),.6)},e.Block.prototype.getColourBorder=function(){var t=this.getColourTertiary();return t?{colourBorder:t,colourLight:null,colourDark:null}:(t=this.getColour(),{colourBorder:null,colourLight:e.utils.colour.blend("#fff",t,.3),colourDark:e.utils.colour.blend("#000",t,.2)})},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,i=Number(n);if(!isNaN(i)&&0<=i&&360>=i)this.hue_=i,this.colour_=e.hueToHex(i);else{if(!(i=e.utils.colour.parse(n)))throw i='Invalid colour: "'+n+'"',t!=n&&(i+=' (from "'+t+'")'),Error(i);this.colour_=i,this.hue_=null}},e.Block.prototype.setStyle=function(e){var t=this.workspace.getTheme().getBlockStyle(e);if(this.styleName_=e,!t)throw Error("Invalid style name: "+e);this.colourSecondary_=t.colourSecondary,this.colourTertiary_=t.colourTertiary,this.hat=t.hat,this.setColour(t.colourPrimary)},e.Block.prototype.setOnChange=function(e){if(e&&"function"!=typeof e)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=e)&&(this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(e){for(var t,n=0;t=this.inputList[n];n++)for(var i,o=0;i=t.fieldRow[o];o++)if(i.name==e)return i;return null},e.Block.prototype.getVars=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)for(var i,o=0;i=e.fieldRow[o];o++)i.referencesVariables()&&t.push(i.getValue());return t},e.Block.prototype.getVarModels=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)for(var i,o=0;i=e.fieldRow[o];o++)i.referencesVariables()&&(i=this.workspace.getVariableById(i.getValue()))&&t.push(i);return t},e.Block.prototype.updateVarName=function(e){for(var t,n=0;t=this.inputList[n];n++)for(var i,o=0;i=t.fieldRow[o];o++)i.referencesVariables()&&e.getId()==i.getValue()&&i.refreshVariableName()},e.Block.prototype.renameVarById=function(e,t){for(var n,i=0;n=this.inputList[i];i++)for(var o,r=0;o=n.fieldRow[r];r++)o.referencesVariables()&&e==o.getValue()&&o.setValue(t)},e.Block.prototype.getFieldValue=function(e){return(e=this.getField(e))?e.getValue():null},e.Block.prototype.setFieldValue=function(e,t){var n=this.getField(t);if(!n)throw Error('Field "'+t+'" not found.');n.setValue(e)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new e.Events.BlockChange(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.DUMMY_INPUT&&this.inputList[t].type==e.DUMMY_INPUT)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.INPUT_VALUE&&this.inputList[t].type==e.DUMMY_INPUT)return!0;return!1},e.Block.prototype.setDisabled=function(e){console.warn("Deprecated call to Blockly.Block.prototype.setDisabled, use Blockly.Block.prototype.setEnabled instead."),this.setEnabled(!e)},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new e.Events.BlockChange(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var e=this.getSurroundParent();e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new e.Events.BlockChange(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(e,t){var n=[],i=t||"?";if(this.collapsed_)n.push(this.getInput("_TEMP_COLLAPSED_INPUT").fieldRow[0].getText());else for(var o,r=0;o=this.inputList[r];r++){for(var s,a=0;s=o.fieldRow[a];a++)n.push(s.getText());o.connection&&((o=o.connection.targetBlock())?n.push(o.toString(void 0,t)):n.push(i))}return n=n.join(" ").trim()||"???",e&&n.length>e&&(n=n.substring(0,e-3)+"..."),n},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.INPUT_VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.NEXT_STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.DUMMY_INPUT,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var i=0;void 0!==t["message"+i];)this.interpolate_(t["message"+i],t["args"+i]||[],t["lastDummyAlign"+i]),i++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(i=t.tooltip,i=e.utils.replaceMessageReferences(i),this.setTooltip(i)),void 0!==t.enableContextMenu&&(i=t.enableContextMenu,this.contextMenu=!!i),void 0!==t.helpUrl&&(i=t.helpUrl,i=e.utils.replaceMessageReferences(i),this.setHelpUrl(i)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),Array.isArray(t.extensions))for(t=t.extensions,n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(e,t){if("colour"in e)if(void 0===e.colour)console.warn(t+"Undefined colour value.");else{var n=e.colour;try{this.setColour(n)}catch(e){console.warn(t+"Illegal colour value: ",n)}}},e.Block.prototype.jsonInitStyle_=function(e,t){var n=e.style;try{this.setStyle(n)}catch(e){console.warn(t+"Style does not exist: ",n)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){var i,o=[];for(i in t)void 0!==this[i]&&o.push(i);if(o.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(o))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,i){var o=e.utils.tokenizeInterpolation(t),r=[],s=0;t=[];for(var a=0;a<o.length;a++){var l=o[a];if("number"==typeof l){if(0>=l||l>n.length)throw Error('Block "'+this.type+'": Message index %'+l+" out of range.");if(r[l])throw Error('Block "'+this.type+'": Message index %'+l+" duplicated.");r[l]=!0,s++,t.push(n[l-1])}else(l=l.trim())&&t.push(l)}if(s!=n.length)throw Error('Block "'+this.type+'": Message does not reference all '+n.length+" arg(s).");for(t.length&&("string"==typeof t[t.length-1]||e.utils.string.startsWith(t[t.length-1].type,"field_"))&&(a={type:"input_dummy"},i&&(a.align=i),t.push(a)),i={LEFT:e.ALIGN_LEFT,RIGHT:e.ALIGN_RIGHT,CENTRE:e.ALIGN_CENTRE},n=[],a=0;a<t.length;a++)if("string"==typeof(r=t[a]))n.push([r,void 0]);else{o=s=null;do{if(l=!1,"string"==typeof r)s=new e.FieldLabel(r);else switch(r.type){case"input_value":o=this.appendValueInput(r.name);break;case"input_statement":o=this.appendStatementInput(r.name);break;case"input_dummy":o=this.appendDummyInput(r.name);break;default:!(s=e.fieldRegistry.fromJson(r))&&r.alt&&(r=r.alt,l=!0)}}while(l);if(s)n.push([s,r.name]);else if(o){for(r.check&&o.setCheck(r.check),r.align&&o.setAlign(i[r.align]),r=0;r<n.length;r++)o.appendField(n[r][0],n[r][1]);n.length=0}}},e.Block.prototype.appendInput_=function(t,n){var i=null;return t!=e.INPUT_VALUE&&t!=e.NEXT_STATEMENT||(i=this.makeConnection_(t)),i=new e.Input(t,n,this,i),this.inputList.push(i),i},e.Block.prototype.moveInputBefore=function(e,t){if(e!=t){for(var n,i=-1,o=t?-1:this.inputList.length,r=0;n=this.inputList[r];r++)if(n.name==e){if(i=r,-1!=o)break}else if(t&&n.name==t&&(o=r,-1!=i))break;if(-1==i)throw Error('Named input "'+e+'" not found.');if(-1==o)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(i,o)}},e.Block.prototype.moveNumberedInputBefore=function(e,t){if(e==t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");var n=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,n)},e.Block.prototype.removeInput=function(e,t){for(var n,i=0;n=this.inputList[i];i++)if(n.name==e)return n.dispose(),void this.inputList.splice(i,1);if(!t)throw Error("Input not found: "+e)},e.Block.prototype.getInput=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.name==e)return t;return null},e.Block.prototype.getInputTargetBlock=function(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new e.Events.BlockChange(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(e,t){},e.Block.prototype.setMutator=function(e){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var i=new e.Events.BlockMove(this);this.xy_.translate(t,n),i.recordNew(),e.Events.fire(i)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(e){if(void 0===e&&(e=!0),!e&&this.isShadow())return!1;for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&(!(t=t.connection.targetBlock())||!t.allInputsFilled(e)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(e)},e.Block.prototype.toDevString=function(){var e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e},e.BlockDragSurfaceSvg=function(e){this.container_=e,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement("svg",{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement("g",{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(e,t,n){this.scale_=n,e=e.toFixed(0),t=t.toFixed(0),this.dragGroup_.setAttribute("transform","translate("+e+","+t+") scale("+n+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(e){if(e?e.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.blockRendering={},e.blockRendering.IPathObject=function(e){},e.blockRendering.PathObject=function(t){this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement("path",{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement("path",{class:"blocklyPathLight"},this.svgRoot),this.svgPathDark=e.utils.dom.createSvgElement("path",{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot)},e.blockRendering.PathObject.prototype.setPaths=function(e){this.svgPath.setAttribute("d",e),this.svgPathLight.style.display="none",this.svgPathDark.style.display="none"},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly:"+(e.utils.IdGenerator.nextId_++).toString(36)},e.Component=function(){this.rightToLeft_=e.Component.defaultRightToLeft,this.id_=null,this.inDocument_=!1,this.parent_=this.element_=null,this.children_=[],this.childIndex_={}},e.Component.defaultRightToLeft=!1,e.Component.Error={ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds"},e.Component.prototype.getId=function(){return this.id_||(this.id_=e.utils.IdGenerator.getNextUniqueId())},e.Component.prototype.getElement=function(){return this.element_},e.Component.prototype.setElementInternal=function(e){this.element_=e},e.Component.prototype.setParent=function(t){if(this==t)throw Error(e.Component.Error.PARENT_UNABLE_TO_BE_SET);if(t&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=t)throw Error(e.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=t},e.Component.prototype.getParent=function(){return this.parent_},e.Component.prototype.isInDocument=function(){return this.inDocument_},e.Component.prototype.createDom=function(){this.element_=document.createElement("div")},e.Component.prototype.render=function(e){this.render_(e)},e.Component.prototype.renderBefore=function(e){this.render_(e.parentNode,e)},e.Component.prototype.render_=function(t,n){if(this.inDocument_)throw Error(e.Component.Error.ALREADY_RENDERED);this.element_||this.createDom(),t?t.insertBefore(this.element_,n||null):document.body.appendChild(this.element_),this.parent_&&!this.parent_.isInDocument()||this.enterDocument()},e.Component.prototype.enterDocument=function(){this.inDocument_=!0,this.forEachChild((function(e){!e.isInDocument()&&e.getElement()&&e.enterDocument()}))},e.Component.prototype.exitDocument=function(){this.forEachChild((function(e){e.isInDocument()&&e.exitDocument()})),this.inDocument_=!1},e.Component.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},e.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument(),this.forEachChild((function(e){e.dispose()})),this.element_&&e.utils.dom.removeNode(this.element_),this.parent_=this.element_=this.childIndex_=this.children_=null},e.Component.prototype.addChild=function(e,t){this.addChildAt(e,this.getChildCount(),t)},e.Component.prototype.addChildAt=function(t,n,i){if(t.inDocument_&&(i||!this.inDocument_))throw Error(e.Component.Error.ALREADY_RENDERED);if(0>n||n>this.getChildCount())throw Error(e.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);if(this.childIndex_[t.getId()]=t,t.getParent()==this){var o=this.children_.indexOf(t);-1<o&&this.children_.splice(o,1)}t.setParent(this),this.children_.splice(n,0,t),t.inDocument_&&this.inDocument_&&t.getParent()==this?(n=(i=this.getContentElement()).childNodes[n]||null)!=t.getElement()&&i.insertBefore(t.getElement(),n):i?(this.element_||this.createDom(),n=this.getChildAt(n+1),t.render_(this.getContentElement(),n?n.element_:null)):this.inDocument_&&!t.inDocument_&&t.element_&&t.element_.parentNode&&t.element_.parentNode.nodeType==e.utils.dom.Node.ELEMENT_NODE&&t.enterDocument()},e.Component.prototype.getContentElement=function(){return this.element_},e.Component.prototype.isRightToLeft=function(){return this.rightToLeft_},e.Component.prototype.setRightToLeft=function(t){if(this.inDocument_)throw Error(e.Component.Error.ALREADY_RENDERED);this.rightToLeft_=t},e.Component.prototype.hasChildren=function(){return 0!=this.children_.length},e.Component.prototype.getChildCount=function(){return this.children_.length},e.Component.prototype.getChild=function(e){return e&&this.childIndex_[e]||null},e.Component.prototype.getChildAt=function(e){return this.children_[e]||null},e.Component.prototype.forEachChild=function(e,t){for(var n=0;n<this.children_.length;n++)e.call(t,this.children_[n],n)},e.Component.prototype.indexOfChild=function(e){return this.children_.indexOf(e)},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",MENUITEMRADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",TABLE:"table",TABLIST:"tablist",TABPANEL:"tabpanel",TEXTBOX:"textbox",TEXTINFO:"textinfo",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",COLINDEX:"colindex",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",ROWINDEX:"rowindex",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"},e.utils.aria.setRole=function(t,n){n?t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n):e.utils.aria.removeRole(t)},e.utils.aria.getRole=function(t){return t.getAttribute(e.utils.aria.ROLE_ATTRIBUTE_)||null},e.utils.aria.removeRole=function(t){t.removeAttribute(e.utils.aria.ROLE_ATTRIBUTE_)},e.utils.aria.setState=function(t,n,i){Array.isArray(i)&&(i=i.join(" ")),n=e.utils.aria.getAriaAttributeName_(n),t.setAttribute(n,i)},e.utils.aria.getAriaAttributeName_=function(t){return e.utils.aria.ARIA_PREFIX_+t},e.Menu=function(){e.Component.call(this),this.highlightedIndex_=-1},e.utils.object.inherits(e.Menu,e.Component),e.Menu.prototype.createDom=function(){var t=document.createElement("div");t.id=this.getId(),this.setElementInternal(t),t.className="goog-menu goog-menu-vertical blocklyNonSelectable",t.tabIndex=0,e.utils.aria.setRole(t,this.roleName_||e.utils.aria.Role.MENU)},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus(),e.utils.dom.addClass(t,"focused"))},e.Menu.prototype.blur=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"focused"))},e.Menu.prototype.setRole=function(e){this.roleName_=e},e.Menu.prototype.enterDocument=function(){e.Menu.superClass_.enterDocument.call(this),this.forEachChild((function(e){e.isInDocument()&&this.registerChildId_(e)}),this),this.attachEvents_()},e.Menu.prototype.exitDocument=function(){this.setHighlightedIndex(-1),e.Menu.superClass_.exitDocument.call(this)},e.Menu.prototype.disposeInternal=function(){e.Menu.superClass_.disposeInternal.call(this),this.detachEvents_()},e.Menu.prototype.attachEvents_=function(){var t=this.getElement();this.mouseOverHandler_=e.bindEventWithChecks_(t,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.bindEventWithChecks_(t,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.bindEventWithChecks_(t,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.bindEventWithChecks_(t,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownWrapper_=e.bindEventWithChecks_(t,"keydown",this,this.handleKeyEvent)},e.Menu.prototype.detachEvents_=function(){e.unbindEvent_(this.mouseOverHandler_),e.unbindEvent_(this.clickHandler_),e.unbindEvent_(this.mouseEnterHandler_),e.unbindEvent_(this.mouseLeaveHandler_),e.unbindEvent_(this.onKeyDownWrapper_)},e.Menu.prototype.childElementIdMap_=null,e.Menu.prototype.registerChildId_=function(e){var t=e.getElement();t=t.id||(t.id=e.getId()),this.childElementIdMap_||(this.childElementIdMap_={}),this.childElementIdMap_[t]=e},e.Menu.prototype.getMenuItem=function(e){if(this.childElementIdMap_)for(var t=this.getElement();e&&e!==t;){var n=e.id;if(n in this.childElementIdMap_)return this.childElementIdMap_[n];e=e.parentNode}return null},e.Menu.prototype.unhighlightCurrent=function(){var e=this.getHighlighted();e&&e.setHighlighted(!1)},e.Menu.prototype.clearHighlighted=function(){this.unhighlightCurrent(),this.setHighlightedIndex(-1)},e.Menu.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)},e.Menu.prototype.setHighlightedIndex=function(t){var n=this.getChildAt(t);n?(n.setHighlighted(!0),this.highlightedIndex_=t):-1<this.highlightedIndex_&&(this.getHighlighted().setHighlighted(!1),this.highlightedIndex_=-1),n&&e.utils.style.scrollIntoContainerView(n.getElement(),this.getElement())},e.Menu.prototype.setHighlighted=function(e){this.setHighlightedIndex(this.indexOfChild(e))},e.Menu.prototype.highlightNext=function(){this.unhighlightCurrent(),this.highlightHelper((function(e,t){return(e+1)%t}),this.highlightedIndex_)},e.Menu.prototype.highlightPrevious=function(){this.unhighlightCurrent(),this.highlightHelper((function(e,t){return 0>--e?t-1:e}),this.highlightedIndex_)},e.Menu.prototype.highlightHelper=function(e,t){var n=0>t?-1:t,i=this.getChildCount();n=e.call(this,n,i);for(var o=0;o<=i;){var r=this.getChildAt(n);if(r&&this.canHighlightItem(r))return this.setHighlightedIndex(n),!0;o++,n=e.call(this,n,i)}return!1},e.Menu.prototype.canHighlightItem=function(e){return e.isEnabled()},e.Menu.prototype.handleMouseOver_=function(e){(e=this.getMenuItem(e.target))&&e.isEnabled()&&this.getHighlighted()!==e&&(this.unhighlightCurrent(),this.setHighlighted(e))},e.Menu.prototype.handleClick_=function(e){var t=this.getMenuItem(e.target);t&&t.handleClick(e)&&e.preventDefault()},e.Menu.prototype.handleMouseEnter_=function(e){this.focus()},e.Menu.prototype.handleMouseLeave_=function(e){this.getElement()&&(this.blur(),this.clearHighlighted())},e.Menu.prototype.handleKeyEvent=function(e){return!(0==this.getChildCount()||!this.handleKeyEventInternal(e)||(e.preventDefault(),e.stopPropagation(),0))},e.Menu.prototype.handleKeyEventInternal=function(t){var n=this.getHighlighted();if(n&&"function"==typeof n.handleKeyEvent&&n.handleKeyEvent(t))return!0;if(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)return!1;switch(t.keyCode){case e.utils.KeyCodes.ENTER:n&&n.performActionInternal(t);break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;default:return!1}return!0},e.MenuItem=function(t,n){e.Component.call(this),this.setContentInternal(t),this.setValue(n),this.enabled_=!0},e.utils.object.inherits(e.MenuItem,e.Component),e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=this.getId(),this.setElementInternal(t),t.className="goog-menuitem goog-option "+(this.enabled_?"":"goog-menuitem-disabled ")+(this.checked_?"goog-option-selected ":"")+(this.isRightToLeft()?"goog-menuitem-rtl ":"");var n=this.getContentWrapperDom();t.appendChild(n);var i=this.getCheckboxDom();i&&n.appendChild(i),n.appendChild(this.getContentDom()),e.utils.aria.setRole(t,this.roleName_||(this.checkable_?e.utils.aria.Role.MENUITEMCHECKBOX:e.utils.aria.Role.MENUITEM)),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1)},e.MenuItem.prototype.getCheckboxDom=function(){if(!this.checkable_)return null;var e=document.createElement("div");return e.className="goog-menuitem-checkbox",e},e.MenuItem.prototype.getContentDom=function(){var e=this.content_;return"string"==typeof e&&(e=document.createTextNode(e)),e},e.MenuItem.prototype.getContentWrapperDom=function(){var e=document.createElement("div");return e.className="goog-menuitem-content",e},e.MenuItem.prototype.setContentInternal=function(e){this.content_=e},e.MenuItem.prototype.setValue=function(e){this.value_=e},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRole=function(e){this.roleName_=e},e.MenuItem.prototype.setCheckable=function(e){this.checkable_=e},e.MenuItem.prototype.setChecked=function(t){if(this.checkable_){this.checked_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"goog-option-selected"),e.utils.aria.setState(n,e.utils.aria.State.SELECTED,!0)):(e.utils.dom.removeClass(n,"goog-option-selected"),e.utils.aria.setState(n,e.utils.aria.State.SELECTED,!1)))}},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?e.utils.dom.addClass(n,"goog-menuitem-highlight"):e.utils.dom.removeClass(n,"goog-menuitem-highlight"))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t,(t=this.getElement())&&(this.enabled_?e.utils.dom.removeClass(t,"goog-menuitem-disabled"):e.utils.dom.addClass(t,"goog-menuitem-disabled"))},e.MenuItem.prototype.handleClick=function(e){this.isEnabled()&&(this.setHighlighted(!0),this.performActionInternal())},e.MenuItem.prototype.performActionInternal=function(){this.checkable_&&this.setChecked(!this.checked_),this.actionHandler_&&this.actionHandler_.call(this.actionHandlerObj_,this)},e.MenuItem.prototype.onAction=function(e,t){this.actionHandler_=e,this.actionHandlerObj_=t},e.utils.uiMenu={},e.utils.uiMenu.getSize=function(t){t=t.getElement();var n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.utils.uiMenu.adjustBBoxesForRTL=function(e,t,n){t.left+=n.width,t.right+=n.width,e.left+=n.width,e.right+=n.width},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.eventWrapper_=null,e.ContextMenu.show=function(t,n,i){if(e.WidgetDiv.show(e.ContextMenu,i,null),n.length){var o=e.ContextMenu.populate_(n,i);e.ContextMenu.position_(o,t,i),setTimeout((function(){o.getElement().focus()}),1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var i=new e.Menu;i.setRightToLeft(n);for(var o,r=0;o=t[r];r++){var s=new e.MenuItem(o.text);s.setRightToLeft(n),i.addChild(s,!0),s.setEnabled(o.enabled),o.enabled&&s.onAction((function(){e.ContextMenu.hide(),this.callback()}),o)}return i},e.ContextMenu.position_=function(t,n,i){var o=e.utils.getViewportBBox();n={top:n.clientY+o.top,bottom:n.clientY+o.top,left:n.clientX+o.left,right:n.clientX+o.left},e.ContextMenu.createWidget_(t);var r=e.utils.uiMenu.getSize(t);i&&e.utils.uiMenu.adjustBBoxesForRTL(o,n,r),e.WidgetDiv.positionWithAnchor(o,n,r,i),t.getElement().focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.bindEventWithChecks_(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null,e.ContextMenu.eventWrapper_&&e.unbindEvent_(e.ContextMenu.eventWrapper_)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var i=e.Xml.domToBlock(n,t.workspace),o=t.getRelativeToSurfaceXY();o.x=t.RTL?o.x-e.SNAP_RADIUS:o.x+e.SNAP_RADIUS,o.y+=2*e.SNAP_RADIUS,i.moveBy(o.x,o.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!i.isShadow()&&e.Events.fire(new e.Events.BlockCreate(i)),i.select()}},e.ContextMenu.blockDeleteOption=function(t){var n=t.getDescendants(!1).length,i=t.getNextBlock();return i&&(n-=i.getDescendants(!1).length),{text:1==n?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(n)),enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.blockHelpOption=function(t){return{enabled:!("function"==typeof t.helpUrl?!t.helpUrl():!t.helpUrl),text:e.Msg.HELP,callback:function(){t.showHelp_()}}},e.ContextMenu.blockDuplicateOption=function(t){var n=t.isDuplicatable();return{text:e.Msg.DUPLICATE_BLOCK,enabled:n,callback:function(){e.duplicate_(t)}}},e.ContextMenu.blockCommentOption=function(t){var n={enabled:!e.utils.userAgent.IE};return t.comment?(n.text=e.Msg.REMOVE_COMMENT,n.callback=function(){t.setCommentText(null)}):(n.text=e.Msg.ADD_COMMENT,n.callback=function(){t.setCommentText("")}),n},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate_(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var i={enabled:!e.utils.userAgent.IE};return i.text=e.Msg.ADD_COMMENT,i.callback=function(){var i=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),o=t.getInjectionDiv().getBoundingClientRect();o=new e.utils.Coordinate(n.clientX-o.left,n.clientY-o.top);var r=t.getOriginOffsetInPixels();(o=e.utils.Coordinate.difference(o,r)).scale(1/t.scale),i.moveBy(o.x,o.y),t.rendered&&(i.initSvg(),i.render(),i.select())},i},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.inDB_=!1,this.hidden_=!this.db_},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.inDB_&&this.db_.removeConnection_(this)},e.RenderedConnection.prototype.distanceFrom=function(e){var t=this.x_-e.x_;return e=this.y_-e.y_,Math.sqrt(t*t+e*e)},e.RenderedConnection.prototype.bumpAwayFrom_=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var i=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,i=!0}var o=e.selected==n;o||n.addSelect();var r=t.x_+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x_,s=t.y_+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y_;i&&(s=-s),n.RTL&&(r=t.x_-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x_),n.moveBy(r,s),o||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(e,t){this.inDB_&&this.db_.removeConnection_(this),this.x_=e,this.y_=t,this.hidden_||this.db_.addConnection(this)},e.RenderedConnection.prototype.moveBy=function(e,t){this.moveTo(this.x_+e,this.y_+t)},e.RenderedConnection.prototype.moveToOffset=function(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(e,t){this.offsetInBlock_.x=e,this.offsetInBlock_.y=t},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten_=function(){var t=this.targetConnection.x_-this.x_,n=this.targetConnection.y_-this.y_;if(0!=t||0!=n){var i=this.targetBlock(),o=i.getSvgRoot();if(!o)throw Error("block is not rendered.");o=e.utils.getRelativeXY(o),i.getSvgRoot().setAttribute("transform","translate("+(o.x-t)+","+(o.y-n)+")"),i.moveConnections_(-t,-n)}},e.RenderedConnection.prototype.closest=function(e,t){return this.dbOpposite_.searchForClosest(this,e,t)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants();t=this.type==e.INPUT_VALUE||this.type==e.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-5)+e.utils.svgPaths.lineOnAxis("v",5)+t.PUZZLE_TAB.pathDown+e.utils.svgPaths.lineOnAxis("v",5):e.utils.svgPaths.moveBy(-5,0)+e.utils.svgPaths.lineOnAxis("h",5)+t.NOTCH.pathLeft+e.utils.svgPaths.lineOnAxis("h",5);var n=this.sourceBlock_.getRelativeToSurfaceXY();e.Connection.highlightedPath_=e.utils.dom.createSvgElement("path",{class:"blocklyHighlightedConnectionPath",d:t,transform:"translate("+(this.x_-n.x)+","+(this.y_-n.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhideAll=function(){this.setHidden(!1);var t=[];if(this.type!=e.INPUT_VALUE&&this.type!=e.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var i=[];n.outputConnection&&i.push(n.outputConnection),n.nextConnection&&i.push(n.nextConnection),n.previousConnection&&i.push(n.previousConnection)}else i=n.getConnections_(!0);for(var o=0;o<i.length;o++)t.push.apply(t,i[o].unhideAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setHidden=function(e){(this.hidden_=e)&&this.inDB_?this.db_.removeConnection_(this):e||this.inDB_||this.db_.addConnection(this)},e.RenderedConnection.prototype.hideAll=function(){if(this.setHidden(!0),this.targetConnection)for(var e=this.targetBlock().getDescendants(!1),t=0;t<e.length;t++){for(var n=e[t],i=n.getConnections_(!0),o=0;o<i.length;o++)i[o].setHidden(!0);for(n=n.getIcons(),o=0;o<n.length;o++)n[o].setVisible(!1)}},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(e){this.bumpAwayFrom_(e)},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render())},e.RenderedConnection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n&&e.Events.recordUndo){if(e.RenderedConnection.superClass_.respawnShadow_.call(this),!(n=this.targetBlock()))throw Error("Couldn't respawn the shadow block that should exist here.");n.initSvg(),n.render(!1),t.rendered&&t.render()}},e.RenderedConnection.prototype.neighbours_=function(e){return this.dbOpposite_.getNeighbours(this,e)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock(),n.rendered&&n.updateDisabled(),t.rendered&&t.updateDisabled(),n.rendered&&t.rendered&&(this.type==e.NEXT_STATEMENT||this.type==e.PREVIOUS_STATEMENT?t.render():n.render())},e.RenderedConnection.prototype.onCheckChanged_=function(){this.isConnected()&&!this.checkType_(this.targetConnection)&&((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.utils.Rect=function(e,t,n,i){this.top=e,this.bottom=t,this.left=n,this.right=i},e.utils.Rect.prototype.contains=function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom},e.Icon=function(e){this.block_=e},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement("g",{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.bindEventWithChecks_(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.updateColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.getColour())},e.Icon.prototype.setIconLocation=function(e){this.iconXY_=e,this.isVisible()&&this.bubble_.setAnchorLocation(e)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_={}},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement("path",{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement("path",{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.textToDom_=function(t){var n=e.utils.dom.createSvgElement("text",{class:"blocklyText blocklyBubbleText",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var i=0;i<t.length;i++){var o=e.utils.dom.createSvgElement("tspan",{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),r=document.createTextNode(t[i]);o.appendChild(r)}return n},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new e.Events.Ui(this.block_,"warningOpen",!t,t)),t?this.createBubble():this.disposeBubble())},e.Warning.prototype.createBubble=function(){if(this.paragraphElement_=e.Warning.textToDom_(this.getText()),this.bubble_=new e.Bubble(this.block_.workspace,this.paragraphElement_,this.block_.svgPath_,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.block_.RTL)for(var t,n=this.paragraphElement_.getBBox().width,i=0;t=this.paragraphElement_.childNodes[i];i++)t.setAttribute("text-anchor","end"),t.setAttribute("x",n+e.Bubble.BORDER_WIDTH);this.updateColour()},e.Warning.prototype.disposeBubble=function(){this.bubble_.dispose(),this.paragraphElement_=this.body_=this.bubble_=null},e.Warning.prototype.bodyFocus_=function(e){this.bubble_.promote_()},e.Warning.prototype.setText=function(e,t){this.text_[t]!=e&&(e?this.text_[t]=e:delete this.text_[t],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var e,t=[];for(e in this.text_)t.push(this.text_[e]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.BlockSvg=function(t,n,i){this.svgGroup_=e.utils.dom.createSvgElement("g",{},null),this.svgGroup_.translate_="",this.pathObject=t.getRenderer().makePathObject(this.svgGroup_),this.svgPathDark_=this.pathObject.svgPathDark||null,this.svgPath_=this.pathObject.svgPath||null,this.svgPathLight_=this.pathObject.svgPathLight||null,this.svgPath_.tooltip=this,this.rendered=!1,this.useDragSurface_=e.utils.is3dSupported()&&!!t.blockDragSurface_,e.Tooltip.bindMouseEvents(this.svgPath_),e.BlockSvg.superClass_.constructor.call(this,t,n,i),this.svgGroup_.dataset&&(this.svgGroup_.dataset.id=this.id),this.markerSvg_=this.cursorSvg_=null},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.dragStartXY_=null,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.SEP_SPACE_Y=10,e.BlockSvg.MIN_BLOCK_Y=25,e.BlockSvg.TAB_WIDTH=8,e.BlockSvg.START_HAT=!1,e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var t,n=0;t=this.inputList[n];n++)t.init();for(t=this.getIcons(),n=0;n<t.length;n++)t[n].createIcon();this.updateColour(),this.updateMovable(),this.workspace.options.readOnly||this.eventsInit_||e.bindEventWithChecks_(this.getSvgRoot(),"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,this.getSvgRoot().parentNode||this.workspace.getCanvas().appendChild(this.getSvgRoot())},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}(t=new e.Events.Ui(null,"selected",t,this.id)).workspaceId=this.workspace.id,e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new e.Events.Ui(null,"selected",this.id,null);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var e=[];return this.mutator&&e.push(this.mutator),this.commentIcon_&&e.push(this.commentIcon_),this.warning&&e.push(this.warning),e},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var i=this.getSvgRoot();if(!this.workspace.isClearing&&i){var o=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(i),t=this.getRelativeToSurfaceXY(),this.moveConnections_(t.x-o.x,t.y-o.y)):n&&(this.workspace.getCanvas().appendChild(i),this.translate(o.x,o.y))}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,i=this.useDragSurface_?this.workspace.blockDragSurface_.getGroup():null,o=this.getSvgRoot();if(o)do{var r=e.utils.getRelativeXY(o);t+=r.x,n+=r.y,this.useDragSurface_&&this.workspace.blockDragSurface_.getCurrentBlock()==o&&(t+=(r=this.workspace.blockDragSurface_.getSurfaceTranslation()).x,n+=r.y),o=o.parentNode}while(o&&o!=this.workspace.getCanvas()&&o!=i);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var i=e.Events.isEnabled();if(i)var o=new e.Events.BlockMove(this);var r=this.getRelativeToSurfaceXY();this.translate(r.x+t,r.y+n),this.moveConnections_(t,n),i&&(o.recordNew(),e.Events.fire(o)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(e,t){this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")},e.BlockSvg.prototype.moveToDragSurface_=function(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.blockDragSurface_.translateSurface(e.x,e.y),this.workspace.blockDragSurface_.setBlocksAndShow(this.getSvgRoot())}},e.BlockSvg.prototype.moveTo=function(e){var t=this.getRelativeToSurfaceXY();this.moveBy(e.x-t.x,e.y-t.y)},e.BlockSvg.prototype.moveOffDragSurface_=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.blockDragSurface_.clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(e){this.useDragSurface_?this.workspace.blockDragSurface_.translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var t=e.getSpacing(),n=t/2,i=this.getRelativeToSurfaceXY();e=Math.round((i.x-n)/t)*t+n-i.x,t=Math.round((i.y-n)/t)*t+n-i.y,e=Math.round(e),t=Math.round(t),0==e&&0==t||this.moveBy(e,t)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(this),n=this.outputConnection?e.BlockSvg.TAB_WIDTH:0,i=this.getHeightWidth(),o=t.y,r=t.y+i.height;if(this.RTL){var s=t.x-(i.width-n);t=t.x+n}else s=t.x-n,t=t.x+i.width-n;return new e.utils.Rect(o,r,s,t)},e.BlockSvg.prototype.markDirty=function(){for(var e,t=0;e=this.inputList[t];t++)e.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){if(this.collapsed_!=t){for(var n,i=[],o=0;n=this.inputList[o];o++)i.push.apply(i,n.setVisible(!t));if(t){for(n=this.getIcons(),o=0;o<n.length;o++)n[o].setVisible(!1);o=this.toString(e.COLLAPSE_CHARS),this.appendDummyInput("_TEMP_COLLAPSED_INPUT").appendField(o).init(),n=this.getDescendants(!0),(o=this.getNextBlock())&&(o=n.indexOf(o),n.splice(o,n.length-o)),o=1;for(var r;r=n[o];o++)if(r.warning){this.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID);break}}else this.removeInput("_TEMP_COLLAPSED_INPUT"),this.warning&&(this.warning.setText("",e.BlockSvg.COLLAPSED_WARNING_ID),Object.keys(this.warning.text_).length||this.setWarningText(null));if(e.BlockSvg.superClass_.setCollapsed.call(this,t),i.length||(i[0]=this),this.rendered)for(o=0;r=i[o];o++)r.render()}},e.BlockSvg.prototype.tab=function(t,n){var i=this.createTabList_(),o=i.indexOf(t);-1==o&&(o=n?-1:i.length),(i=i[n?o+1:o-1])?i instanceof e.Field?i.showEditor_():i.tab(null,n):(i=this.getParent())&&i.tab(this,n)},e.BlockSvg.prototype.createTabList_=function(){for(var e,t=[],n=0;e=this.inputList[n];n++){for(var i,o=0;i=e.fieldRow[o];o++)i.isTabNavigable()&&i.isVisible()&&t.push(i);e.connection&&(e=e.connection.targetBlock())&&t.push(e)}return t},e.BlockSvg.prototype.onMouseDown_=function(e){var t=this.workspace&&this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)},e.BlockSvg.prototype.showHelp_=function(){var e="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;e&&window.open(e)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=this,n=[];if(!this.isInFlyout){if(this.isDeletable()&&this.isMovable()&&n.push(e.ContextMenu.blockDuplicateOption(t)),this.workspace.options.comments&&!this.collapsed_&&this.isEditable()&&n.push(e.ContextMenu.blockCommentOption(t)),this.isMovable())if(this.collapsed_)this.workspace.options.collapse&&((i={enabled:!0}).text=e.Msg.EXPAND_BLOCK,i.callback=function(){t.setCollapsed(!1)},n.push(i));else{for(var i=1;i<this.inputList.length;i++)if(this.inputList[i-1].type!=e.NEXT_STATEMENT&&this.inputList[i].type!=e.NEXT_STATEMENT){i={enabled:!0};var o=this.getInputsInline();i.text=o?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS,i.callback=function(){t.setInputsInline(!o)},n.push(i);break}this.workspace.options.collapse&&((i={enabled:!0}).text=e.Msg.COLLAPSE_BLOCK,i.callback=function(){t.setCollapsed(!0)},n.push(i))}this.workspace.options.disable&&this.isEditable()&&(i={text:this.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK,enabled:!this.getInheritedDisabled(),callback:function(){var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)}},n.push(i)),this.isDeletable()&&n.push(e.ContextMenu.blockDeleteOption(t))}return n.push(e.ContextMenu.blockHelpOption(t)),this.customContextMenu&&this.customContextMenu(n),n},e.BlockSvg.prototype.showContextMenu_=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections_=function(e,t){if(this.rendered){for(var n=this.getConnections_(!1),i=0;i<n.length;i++)n[i].moveBy(e,t);for(n=this.getIcons(),i=0;i<n.length;i++)n[i].computeIconLocation();for(i=0;i<this.childBlocks_.length;i++)this.childBlocks_[i].moveConnections_(e,t)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections_=e.draggingConnections_.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections_=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.updateMovable=function(){this.isMovable()?e.utils.dom.addClass(this.svgGroup_,"blocklyDraggable"):e.utils.dom.removeClass(this.svgGroup_,"blocklyDraggable")},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.updateMovable()},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.updateColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(e.INSERTION_MARKER_COLOUR),e.utils.dom.addClass(this.svgGroup_,"blocklyInsertionMarker"))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.hide(),e.utils.dom.startTextWidthCache();var i=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),e.keyboardAccessibilityMode&&e.navigation.moveCursorOnBlockDelete(this),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]);this.warningTextDb_=null}o=this.getIcons();for(var r=0;r<o.length;r++)o[r].dispose();e.BlockSvg.superClass_.dispose.call(this,t),e.utils.dom.removeNode(this.svgGroup_),i.resizeContents(),this.svgPathDark_=this.svgPathLight_=this.svgPath_=this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.updateColour=function(){if(this.isEnabled()){this.isShadow()?this.setShadowColour_():(this.setBorderColour_(),this.svgPath_.setAttribute("fill",this.getColour()));for(var e=this.getIcons(),t=0;t<e.length;t++)e[t].updateColour();for(e=0;t=this.inputList[e];e++)for(var n,i=0;n=t.fieldRow[i];i++)n.updateColour()}},e.BlockSvg.prototype.setBorderColour_=function(){var e=this.getColourBorder();e.colourBorder?(this.svgPathLight_.style.display="none",this.svgPathDark_.style.display="none",this.svgPath_.setAttribute("stroke",e.colourBorder)):(this.svgPathLight_.style.display="",this.svgPathDark_.style.display="",this.svgPath_.setAttribute("stroke","none"),this.svgPathLight_.setAttribute("stroke",e.colourLight),this.svgPathDark_.setAttribute("fill",e.colourDark))},e.BlockSvg.prototype.setShadowColour_=function(){var e=this.getColourShadow();return this.svgPathLight_.style.display="none",this.svgPathDark_.setAttribute("fill",e),this.svgPath_.setAttribute("stroke","none"),this.svgPath_.setAttribute("fill",e),e},e.BlockSvg.prototype.updateDisabled=function(){!this.isEnabled()||this.getInheritedDisabled()?e.utils.dom.addClass(this.svgGroup_,"blocklyDisabled")&&this.svgPath_.setAttribute("fill","url(#"+this.workspace.options.disabledPatternId+")"):e.utils.dom.removeClass(this.svgGroup_,"blocklyDisabled")&&this.updateColour();for(var t,n=this.getChildren(!1),i=0;t=n[i];i++)t.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),t=null!=t,!!this.commentIcon_==t?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){this.warningTextDb_||(this.warningTextDb_=Object.create(null));var i=n||"";if(i)this.warningTextDb_[i]&&(clearTimeout(this.warningTextDb_[i]),delete this.warningTextDb_[i]);else for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o];if(this.workspace.isDragging()){var r=this;this.warningTextDb_[i]=setTimeout((function(){r.workspace&&(delete r.warningTextDb_[i],r.setWarningText(t,i))}),100)}else{this.isInFlyout&&(t=null),o=this.getSurroundParent();for(var s=null;o;)o.isCollapsed()&&(s=o),o=o.getSurroundParent();s&&s.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),o=!1,"string"==typeof t?(this.warning||(this.warning=new e.Warning(this),o=!0),this.warning.setText(t,i)):this.warning&&!i?(this.warning.dispose(),o=!0):this.warning&&(o=this.warning.getText(),this.warning.setText("",i),(s=this.warning.getText())||this.warning.dispose(),o=o!=s),o&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(e){this.mutator&&this.mutator!==e&&this.mutator.dispose(),e&&(e.block_=this,this.mutator=e,e.createIcon())},e.BlockSvg.prototype.setDisabled=function(e){console.warn("Deprecated call to Blockly.BlockSvg.prototype.setDisabled, use Blockly.BlockSvg.prototype.setEnabled instead."),this.setEnabled(!e)},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(e){this.rendered&&(e?(this.svgPath_.setAttribute("filter","url(#"+this.workspace.options.embossFilterId+")"),this.svgPathLight_.style.display="none"):(this.svgPath_.setAttribute("filter","none"),this.svgPathLight_.style.display="inline"))},e.BlockSvg.prototype.addSelect=function(){e.utils.dom.addClass(this.svgGroup_,"blocklySelected")},e.BlockSvg.prototype.removeSelect=function(){e.utils.dom.removeClass(this.svgGroup_,"blocklySelected")},e.BlockSvg.prototype.setDeleteStyle=function(t){t?e.utils.dom.addClass(this.svgGroup_,"blocklyDraggingDelete"):e.utils.dom.removeClass(this.svgGroup_,"blocklyDraggingDelete")},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),this.rendered&&this.updateColour()},e.BlockSvg.prototype.bringToFront=function(){var e=this;do{var t=e.getSvgRoot();t.parentNode.appendChild(t),e=e.getParent()}while(e)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){var i=e.BlockSvg.superClass_.appendInput_.call(this,t,n);return this.rendered&&(this.render(),this.bumpNeighbours()),i},e.BlockSvg.prototype.setConnectionsHidden=function(e){if(!e&&this.isCollapsed()){if(this.outputConnection&&this.outputConnection.setHidden(e),this.previousConnection&&this.previousConnection.setHidden(e),this.nextConnection){this.nextConnection.setHidden(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionsHidden(e)}}else for(var n=this.getConnections_(!0),i=0;t=n[i];i++)t.setHidden(e),t.isSuperior()&&(t=t.targetBlock())&&t.setConnectionsHidden(e)},e.BlockSvg.prototype.getConnections_=function(e){var t=[];if((e||this.rendered)&&(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)){e=0;for(var n;n=this.inputList[e];e++)n.connection&&t.push(n.connection)}return t},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var n,i=this.getConnections_(!1),o=0;n=i[o];o++){n.isConnected()&&n.isSuperior()&&n.targetBlock().bumpNeighbours();for(var r,s=n.neighbours_(e.SNAP_RADIUS),a=0;r=s[a];a++)n.isConnected()&&r.isConnected()||r.getSourceBlock().getRootBlock()!=t&&(n.isSuperior()?r.bumpAwayFrom_(n):n.bumpAwayFrom_(r))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout((function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)}),e.BUMP_DELAY/2),setTimeout((function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)}),e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.NEXT_STATEMENT&&t.type!=e.INPUT_VALUE||this.moveBy(n.x_-t.x_,n.y_-t.y_)},e.BlockSvg.prototype.render=function(t){e.utils.dom.startTextWidthCache(),this.rendered=!0,this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t&&((t=this.getParent())?t.render(!0):this.workspace.resizeContents()),e.utils.dom.stopTextWidthCache()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(var t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.moveToOffset(e),n.isConnected()&&n.tighten_())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten_())},e.BlockSvg.prototype.setCursorSvg=function(e){e?(this.svgGroup_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},e.BlockSvg.prototype.setMarkerSvg=function(e){e?(this.cursorSvg_?this.svgGroup_.insertBefore(e,this.cursorSvg_):this.svgGroup_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null},e.BlockSvg.prototype.getHeightWidth=function(){var e=this.height,t=this.width,n=this.getNextBlock();return n&&(e+=(n=n.getHeightWidth()).height-4,t=Math.max(t,n.width)),{height:e,width:t}},e.BlockSvg.prototype.positionNewBlock=function(t,n,i){n.type!=e.NEXT_STATEMENT&&n.type!=e.INPUT_VALUE||t.moveBy(i.x_-n.x_,i.y_-n.y_)},e.BlockSvg.prototype.highlightForReplacement=function(t){t?e.utils.dom.addClass(this.svgGroup_,"blocklyReplaceable"):e.utils.dom.removeClass(this.svgGroup_,"blocklyReplaceable")},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var i=e.Css.CONTENT.join("\n");if(e.Css.CONTENT.length=0,t){var o=n.replace(/[\\/]$/,"");i=i.replace(/<<<PATH>>>/g,o),o=document.createElement("style"),i=document.createTextNode(i),o.appendChild(i),document.head.insertBefore(o,document.head.firstChild)}}},e.Css.setCursor=function(e){console.warn("Deprecated call to Blockly.Css.setCursor. See https://github.com/google/blockly/issues/981 for context")},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font-family: sans-serif;","font-size: 9pt;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: fixed;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-radius: 2px;","padding: 4px;","box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.focused {","box-shadow: 0px 0px 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".arrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".arrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none","}",".blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",".blocklyReplaceable .blocklyPathLight,",".blocklyReplaceable .blocklyPathDark {","display: none;","}",".blocklyText {","cursor: default;","fill: #fff;","font-family: sans-serif;","font-size: 11pt;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyNonEditableText>rect,",".blocklyEditableText>rect {","fill: #fff;","fill-opacity: .6;","}",".blocklyNonEditableText>text,",".blocklyEditableText>text {","fill: #000;","}",".blocklyEditableText:hover>rect {","stroke: #fff;","stroke-width: 2;","}",".blocklyBubbleText {","fill: #000;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklySvg text, .blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyCommentForeignObject {","position: relative;","z-index: 0;","}",".blocklyCommentRect {","fill: #E7DE8E;","stroke: #bcA903;","stroke-width: 1px","}",".blocklyCommentTarget {","fill: transparent;","stroke: #bcA903;","}",".blocklyCommentTargetFocused {","fill: none;","}",".blocklyCommentHandleTarget {","fill: none;","}",".blocklyCommentHandleTargetFocused {","fill: transparent;","}",".blocklyFocused>.blocklyCommentRect {","fill: #B9B272;","stroke: #B9B272;","}",".blocklySelected>.blocklyCommentTarget {","stroke: #fc3;","stroke-width: 3px;","}",".blocklyCommentTextarea {","background-color: #fef49c;","border: 0;","outline: 0;","margin: 0;","padding: 3px;","resize: none;","display: block;","overflow: hidden;","}",".blocklyCommentDeleteIcon {","cursor: pointer;","fill: #000;","display: none","}",".blocklySelected > .blocklyCommentDeleteIcon {","display: block","}",".blocklyDeleteIconShape {","fill: #000;","stroke: #000;","stroke-width: 1px;","}",".blocklyDeleteIconShape.blocklyDeleteIconHighlighted {","stroke: #fc3;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","font-family: sans-serif;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal, .blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyWidgetDiv .blocklyDropdownMenu .goog-menuitem,",".blocklyDropDownDiv .blocklyDropdownMenu .goog-menuitem {","padding-left: 28px;","}",".blocklyWidgetDiv .blocklyDropdownMenu .goog-menuitem.goog-menuitem-rtl,",".blocklyDropDownDiv .blocklyDropdownMenu .goog-menuitem.goog-menuitem-rtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyVerticalCursor {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","}",".blocklyWidgetDiv .goog-menu {","background: #fff;","border-color: transparent;","border-style: solid;","border-width: 1px;","cursor: default;","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);","}",".blocklyWidgetDiv .goog-menu.focused {","box-shadow: 0px 0px 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","}",".blocklyWidgetDiv .goog-menuitem,",".blocklyDropDownDiv .goog-menuitem {","color: #000;","font: normal 13px Arial, sans-serif;","list-style: none;","margin: 0;","min-width: 7em;","border: none;","padding: 6px 15px;","white-space: nowrap;","cursor: pointer;","}",".blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyWidgetDiv .goog-menu-noicon .goog-menuitem,",".blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyDropDownDiv .goog-menu-noicon .goog-menuitem {","padding-left: 12px;","}",".blocklyWidgetDiv .goog-menuitem-content,",".blocklyDropDownDiv .goog-menuitem-content {","font: normal 13px Arial, sans-serif;","}",".blocklyWidgetDiv .goog-menuitem-content {","color: #000;","}",".blocklyDropDownDiv .goog-menuitem-content {","color: #000;","}",".blocklyWidgetDiv .goog-menuitem-disabled,",".blocklyDropDownDiv .goog-menuitem-disabled {","cursor: inherit;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {","color: #ccc !important;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {","opacity: .3;","filter: alpha(opacity=30);","}",".blocklyWidgetDiv .goog-menuitem-highlight ,",".blocklyDropDownDiv .goog-menuitem-highlight {","background-color: rgba(0,0,0,.1);","}",".blocklyWidgetDiv .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-icon {","background-repeat: no-repeat;","height: 16px;","left: 6px;","position: absolute;","right: auto;","vertical-align: middle;","width: 16px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","left: auto;","right: 6px;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","position: static;","float: left;","margin-left: -24px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","float: right;","margin-right: -24px;","}"],e.DropDownDiv=function(){},e.DropDownDiv.DIV_=null,e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.DEFAULT_DROPDOWN_BORDER_COLOR="#dadce0",e.DropDownDiv.DEFAULT_DROPDOWN_COLOR="#fff",e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",t.style.backgroundColor=e.DropDownDiv.DEFAULT_DROPDOWN_COLOR,t.style.borderColor=e.DropDownDiv.DEFAULT_DROPDOWN_BORDER_COLOR,document.body.appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",(function(){e.utils.dom.addClass(t,"focused")})),t.addEventListener("focusout",(function(){e.utils.dom.removeClass(t,"focused")}))}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.innerHTML="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.setCategory=function(t){e.DropDownDiv.DIV_.setAttribute("data-category",t)},e.DropDownDiv.showPositionedByBlock=function(t,n,i,o){var r=n.workspace.scale,s=n.width,a=n.height;return s*=r,a*=r,s=(r=n.getSvgRoot().getBoundingClientRect()).left+s/2,a=r.top+a,r=r.top,o&&(r+=o),e.DropDownDiv.setBoundsElement(n.workspace.getParentSvg().parentNode),e.DropDownDiv.show(t,n.RTL,s,a,s,r,i)},e.DropDownDiv.showPositionedByField=function(t,n,i){var o=t.getSvgRoot().getBoundingClientRect(),r=o.left+o.width/2,s=o.bottom;return o=o.top,i&&(o+=i),i=t.getSourceBlock(),e.DropDownDiv.positionToField_=!0,e.DropDownDiv.setBoundsElement(i.workspace.getParentSvg().parentNode),e.DropDownDiv.show(t,i.RTL,r,s,r,o,n)},e.DropDownDiv.show=function(t,n,i,o,r,s,a){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=a||null,(t=e.DropDownDiv.getPositionMetrics(i,o,r,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow arrowTop":"blocklyDropDownArrow arrowBottom")):e.DropDownDiv.arrow_.style.display="none",e.DropDownDiv.DIV_.style.direction=n?"rtl":"ltr",e.DropDownDiv.positionInternal_(t.initialX,t.initialY,t.finalX,t.finalY),t.arrowAtTop},e.DropDownDiv.getBoundsInfo_=function(){var t=e.DropDownDiv.boundsElement_.getBoundingClientRect(),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.left,right:t.left+n.width,top:t.top,bottom:t.top+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics=function(t,n,i,o){var r=e.DropDownDiv.getBoundsInfo_(),s=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+s.height<r.bottom?e.DropDownDiv.getPositionBelowMetrics(t,n,r,s):o-s.height>r.top?e.DropDownDiv.getPositionAboveMetrics(i,o,r,s):n+s.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics(t,n,r,s):o-s.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics(i,o,r,s):e.DropDownDiv.getPositionTopOfPageMetrics(t,r,s)},e.DropDownDiv.getPositionBelowMetrics=function(t,n,i,o){return{initialX:(t=e.DropDownDiv.getPositionX(t,i.left,i.right,o.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics=function(t,n,i,o){return{initialX:(t=e.DropDownDiv.getPositionX(t,i.left,i.right,o.width)).divX,initialY:n-o.height,finalX:t.divX,finalY:n-o.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:o.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics=function(t,n,i){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,i.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,i,o){var r=t;return t=e.utils.math.clamp(n,t-o/2,i-o),r-=e.DropDownDiv.ARROW_SIZE/2,n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,{arrowX:o=e.utils.math.clamp(n,r-t,o-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout((function(){e.DropDownDiv.hideWithoutAnimation()}),1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor=e.DropDownDiv.DEFAULT_DROPDOWN_COLOR,t.style.borderColor=e.DropDownDiv.DEFAULT_DROPDOWN_BORDER_COLOR,e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null}},e.DropDownDiv.positionInternal_=function(t,n,i,o){t=Math.floor(t),n=Math.floor(n),i=Math.floor(i),o=Math.floor(o);var r=e.DropDownDiv.DIV_;r.style.left=t+"px",r.style.top=n+"px",r.style.display="block",r.style.opacity=1,r.style.transform="translate("+(i-t)+"px,"+(o-n)+"px)"},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_.getSourceBlock(),n=t.workspace.scale,i=e.DropDownDiv.positionToField_?e.DropDownDiv.owner_.size_.width:t.width,o=e.DropDownDiv.positionToField_?e.DropDownDiv.owner_.size_.height:t.height;i*=n,o*=n,i=(t=e.DropDownDiv.positionToField_?e.DropDownDiv.owner_.fieldGroup_.getBoundingClientRect():t.getSvgRoot().getBoundingClientRect()).left+i/2,o=e.DropDownDiv.getPositionMetrics(i,t.top+o,i,t.top),e.DropDownDiv.positionInternal_(o.initialX,o.initialY,o.finalX,o.finalY)}else e.DropDownDiv.hide()},e.Grid=function(e,t){this.gridPattern_=e,this.spacing_=t.spacing,this.length_=t.length,this.line2_=(this.line1_=e.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=t.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(e){this.scale_=e;var t=this.spacing_*e||100;this.gridPattern_.setAttribute("width",t),this.gridPattern_.setAttribute("height",t);var n=(t=Math.floor(this.spacing_/2)+.5)-this.length_/2,i=t+this.length_/2;t*=e,n*=e,i*=e,this.setLineAttributes_(this.line1_,e,n,i,t,t),this.setLineAttributes_(this.line2_,e,t,t,n,i)},e.Grid.prototype.setLineAttributes_=function(e,t,n,i,o,r){e&&(e.setAttribute("stroke-width",t),e.setAttribute("x1",n),e.setAttribute("y1",o),e.setAttribute("x2",i),e.setAttribute("y2",r))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,i){return t=e.utils.dom.createSvgElement("pattern",{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},i),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement("line",{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement("line",{stroke:n.colour},t)):e.utils.dom.createSvgElement("line",{},t),t},e.Options=function(t){var n=!!t.readOnly;if(n)var i=null,o=!1,r=!1,s=!1,a=!1,l=!1,c=!1;else{o=!(!(i=e.Options.parseToolboxTree(t.toolbox||null))||!i.getElementsByTagName("category").length),void 0===(r=t.trashcan)&&(r=o);var u=t.maxTrashcanContents;r?void 0===u&&(u=32):u=0,void 0===(s=t.collapse)&&(s=o),void 0===(a=t.comments)&&(a=o),void 0===(l=t.disable)&&(l=o),void 0===(c=t.sounds)&&(c=!0)}var h=!!t.rtl,d=t.horizontalLayout;void 0===d&&(d=!1);var p=t.toolboxPosition;p="end"!==p,p=d?p?e.TOOLBOX_AT_TOP:e.TOOLBOX_AT_BOTTOM:p==h?e.TOOLBOX_AT_RIGHT:e.TOOLBOX_AT_LEFT;var f=t.css;void 0===f&&(f=!0);var g="https://blockly-demo.appspot.com/static/media/";t.media?g=t.media:t.path&&(g=t.path+"media/");var m=void 0===t.oneBasedIndex||!!t.oneBasedIndex,v=t.theme,_=t.keyMap||e.user.keyMap.createDefaultKeyMap(),y=t.renderer||"geras";this.RTL=h,this.oneBasedIndex=m,this.collapse=s,this.comments=a,this.disable=l,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=g,this.hasCategories=o,this.moveOptions=e.Options.parseMoveOptions(t,o),this.hasScrollbars=this.moveOptions.scrollbars,this.hasTrashcan=r,this.maxTrashcanContents=u,this.hasSounds=c,this.hasCss=f,this.horizontalLayout=d,this.languageTree=i,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=p,this.theme=v,this.keyMap=_,this.renderer=y},e.Options.prototype.parentWorkspace=null,e.Options.prototype.setMetrics=null,e.Options.prototype.getMetrics=null,e.Options.parseMoveOptions=function(e,t){var n=e.move||{},i={};return i.scrollbars=void 0===n.scrollbars&&void 0===e.scrollbars?t:!!n.scrollbars||!!e.scrollbars,i.wheel=!(!i.scrollbars||void 0===n.wheel||!n.wheel),i.drag=!(!i.scrollbars||void 0!==n.drag&&!n.drag),i},e.Options.parseZoomOptions_=function(e){e=e.zoom||{};var t={};return t.controls=void 0!==e.controls&&!!e.controls,t.wheel=void 0!==e.wheel&&!!e.wheel,t.startScale=void 0===e.startScale?1:Number(e.startScale),t.maxScale=void 0===e.maxScale?3:Number(e.maxScale),t.minScale=void 0===e.minScale?.3:Number(e.minScale),t.scaleSpeed=void 0===e.scaleSpeed?1.2:Number(e.scaleSpeed),t},e.Options.parseGridOptions_=function(e){e=e.grid||{};var t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=Number(e.length)||1,t.snap=0<t.spacing&&!!e.snap,t},e.Options.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.WorkspaceDragSurfaceSvg=function(e){this.container_=e,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.dragGroup_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement("svg",{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){var i=t.toFixed(0),o=n.toFixed(0);this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+i+"px, "+o+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],i=this.SVG_.childNodes[1];if(!(n&&i&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(i,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(i,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(e,t,n,i,o,r){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=n,e.setAttribute("transform","translate(0, 0) scale("+r+")"),t.setAttribute("transform","translate(0, 0) scale("+r+")"),this.SVG_.setAttribute("width",i),this.SVG_.setAttribute("height",o),this.SVG_.appendChild(e),this.SVG_.appendChild(t),this.SVG_.style.display="block"},e.blockRendering.rendererMap_={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){if(e.blockRendering.rendererMap_[t])throw Error("Renderer has already been registered.");e.blockRendering.rendererMap_[t]=n},e.blockRendering.unregister=function(t){e.blockRendering.rendererMap_[t]?delete e.blockRendering.rendererMap_[t]:console.warn('No renderer mapping for name "'+t+'" found to unregister')},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t){if(!e.blockRendering.rendererMap_[t])throw Error("Renderer not registered: ",t);var n=function(){n.superClass_.constructor.call(this)};return e.utils.object.inherits(n,e.blockRendering.rendererMap_[t]),(t=new n).init(),t},e.ConnectionDB=function(){this.connections_=[]},e.ConnectionDB.prototype.addConnection=function(e){if(e.inDB_)throw Error("Connection already in database.");if(!e.getSourceBlock().isInFlyout){var t=this.findPositionForConnection_(e);this.connections_.splice(t,0,e),e.inDB_=!0}},e.ConnectionDB.prototype.findConnection=function(e){if(!this.connections_.length)return-1;var t=this.findPositionForConnection_(e);if(t>=this.connections_.length)return-1;for(var n=e.y_,i=t;0<=i&&this.connections_[i].y_==n;){if(this.connections_[i]==e)return i;i--}for(;t<this.connections_.length&&this.connections_[t].y_==n;){if(this.connections_[t]==e)return t;t++}return-1},e.ConnectionDB.prototype.findPositionForConnection_=function(e){if(!this.connections_.length)return 0;for(var t=0,n=this.connections_.length;t<n;){var i=Math.floor((t+n)/2);if(this.connections_[i].y_<e.y_)t=i+1;else{if(!(this.connections_[i].y_>e.y_)){t=i;break}n=i}}return t},e.ConnectionDB.prototype.removeConnection_=function(e){if(!e.inDB_)throw Error("Connection not in database.");var t=this.findConnection(e);if(-1==t)throw Error("Unable to find connection in connectionDB.");e.inDB_=!1,this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(e,t){function n(e){var n=o-i[e].x_,s=r-i[e].y_;return Math.sqrt(n*n+s*s)<=t&&c.push(i[e]),s<t}for(var i=this.connections_,o=e.x_,r=e.y_,s=0,a=i.length-2,l=a;s<l;)i[l].y_<r?s=l:a=l,l=Math.floor((s+a)/2);var c=[];if(a=s=l,i.length){for(;0<=s&&n(s);)s--;do{a++}while(a<i.length&&n(a))}return c},e.ConnectionDB.prototype.isInYRange_=function(e,t,n){return Math.abs(this.connections_[e].y_-t)<=n},e.ConnectionDB.prototype.searchForClosest=function(e,t,n){if(!this.connections_.length)return{connection:null,radius:t};var i=e.y_,o=e.x_;e.x_=o+n.x,e.y_=i+n.y;var r=this.findPositionForConnection_(e);n=null;for(var s,a=t,l=r-1;0<=l&&this.isInYRange_(l,e.y_,t);)s=this.connections_[l],e.isConnectionAllowed(s,a)&&(n=s,a=s.distanceFrom(e)),l--;for(;r<this.connections_.length&&this.isInYRange_(r,e.y_,t);)s=this.connections_[r],e.isConnectionAllowed(s,a)&&(n=s,a=s.distanceFrom(e)),r++;return e.x_=o,e.y_=i,{connection:n,radius:a}},e.ConnectionDB.init=function(){var t=[];return t[e.INPUT_VALUE]=new e.ConnectionDB,t[e.OUTPUT_VALUE]=new e.ConnectionDB,t[e.NEXT_STATEMENT]=new e.ConnectionDB,t[e.PREVIOUS_STATEMENT]=new e.ConnectionDB,t},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_={},this.startDistance_=this.previousScale_=0,this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.bindEventWithChecks_(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.unbindEvent_(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);if(this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length){if(n=this.touchScale_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var i=n-this.previousScale_;i=0<i?i*e.TouchGesture.ZOOM_IN_MULTIPLIER:i*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var o=this.startWorkspace_,r=e.utils.mouseToSvg(t,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(r.x,r.y,i)}this.previousScale_=n,t.preventDefault()}},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_={},this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(e){this.parentWorkspace_=e,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var i=new e.utils.global.Audio}catch(e){return}for(var o,r=0;r<t.length;r++){var s=t[r],a=s.match(/\.(\w+)$/);if(a&&i.canPlayType("audio/"+a[1])){o=new e.utils.global.Audio(s);break}}o&&o.play&&(this.SOUNDS_[n]=o)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var i=n.play();if(void 0!==i?i.then(n.pause).catch((function(){})):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var i=this.SOUNDS_[t];if(i){var o=new Date;null!=this.lastSound_&&o-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=o,(i=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?i:i.cloneNode()).volume=void 0===n?1:n,i.play())}else this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,i){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.getMetrics=t.getMetrics||e.WorkspaceSvg.getTopLevelWorkspaceMetrics_,this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.connectionDBList=e.ConnectionDB.init(),n&&(this.blockDragSurface_=n),i&&(this.workspaceDragSurface_=i),this.useWorkspaceDragSurface_=this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(t.gridPattern,t.gridOptions):null,this.markerSvg_=this.cursorSvg_=null,e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.renderer_=e.blockRendering.init(this.options.renderer||"geras")},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.flyoutButtonCallbacks_={},e.WorkspaceSvg.prototype.toolboxCategoryCallbacks_={},e.WorkspaceSvg.prototype.configureContextMenu=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.setCursor=function(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(this.cursor_.setDrawer(this.getRenderer().makeCursorDrawer(this,!1)),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.WorkspaceSvg.prototype.setMarker=function(e){this.marker_&&this.marker_.getDrawer()&&this.marker_.getDrawer().dispose(),(this.marker_=e)&&(this.marker_.setDrawer(this.getRenderer().makeCursorDrawer(this,!0)),this.setMarkerSvg(this.marker_.getDrawer().createDom()))},e.WorkspaceSvg.prototype.setCursorSvg=function(e){e?this.svgBlockCanvas_&&(this.svgBlockCanvas_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},e.WorkspaceSvg.prototype.setMarkerSvg=function(e){e?this.svgBlockCanvas_&&(this.cursorSvg_?this.svgBlockCanvas_.insertBefore(e,this.cursorSvg_):this.svgBlockCanvas_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM_=e.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,i=0,o=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(o=this.scale);do{var r=e.utils.getRelativeXY(t);t!=this.getCanvas()&&t!=this.getBubbleCanvas()||(o=1),n+=r.x*o,i+=r.y*o,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,i)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var e=this.svgGroup_;e;){if(-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=e;break}e=e.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(e){this.resizeHandlerWrapper_=e},e.WorkspaceSvg.prototype.createDom=function(t){if(this.svgGroup_=e.utils.dom.createSvgElement("g",{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement("rect",{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspace","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement("g",{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement("g",{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.bindEventWithChecks_(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories){if(!e.Toolbox)throw Error("Missing require for Blockly.Toolbox");this.toolbox_=new e.Toolbox(this)}return this.grid_&&this.grid_.update(this.scale),this.recordDeleteAreas(),this.cursor_.setDrawer(this.getRenderer().makeCursorDrawer(this,!1)),t=this.cursor_.getDrawer().createDom(),this.svgGroup_.appendChild(t),this.marker_.setDrawer(this.getRenderer().makeCursorDrawer(this,!0)),t=this.marker_.getDrawer().createDom(),this.svgGroup_.appendChild(t),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.marker_&&this.marker_.getDrawer().dispose(),this.getCursor()&&this.getCursor().getDrawer().dispose(),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.themeManager_&&this.themeManager_.unsubscribe(this.svgBackground_),e.WorkspaceSvg.superClass_.dispose.call(this),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg().parentNode;t&&e.utils.dom.removeNode(t)}this.resizeHandlerWrapper_&&(e.unbindEvent_(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout_=function(t){var n={disabledPatternId:this.options.disabledPatternId,parentWorkspace:this,RTL:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,toolboxPosition:this.options.toolboxPosition,renderer:this.options.renderer};if(this.horizontalLayout){if(!e.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new e.HorizontalFlyout(n)}else{if(!e.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new e.VerticalFlyout(n)}return this.flyout_.autoClose=!1,this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(){return this.flyout_?this.flyout_:this.toolbox_?this.toolbox_.flyout_:null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDeleteAreas()},e.WorkspaceSvg.prototype.resizeContents=function(){if(this.resizesEnabled_&&this.rendered){if(this.scrollbar){var e=this.getMetrics();this.scrollbar.hScroll.resizeContentHorizontal(e),this.scrollbar.vScroll.resizeContentVertical(e)}this.updateInverseScreenCTM()}},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position(),this.trashcan&&this.trashcan.position(),this.zoomControls_&&this.zoomControls_.position(),this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(this.cachedParentSvg_)return this.cachedParentSvg_;for(var e=this.svgGroup_;e;){if("svg"==e.tagName)return this.cachedParentSvg_=e;e=e.parentNode}return null},e.WorkspaceSvg.prototype.translate=function(e,t){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(e,t);else{var n="translate("+e+","+t+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",n),this.svgBubbleCanvas_.setAttribute("transform",n)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(e,t,this.scale),this.grid_&&this.grid_.moveTo(e,t)},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var e=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),e="translate("+e.x+","+e.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",e),this.svgBubbleCanvas_.setAttribute("transform",e)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),i=parseInt(this.getParentSvg().getAttribute("height"),10),o=e.utils.getRelativeXY(this.svgBlockCanvas_);this.workspaceDragSurface_.setContentsAndShow(this.svgBlockCanvas_,this.svgBubbleCanvas_,t,n,i,this.scale),this.workspaceDragSurface_.translateSurface(o.x,o.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var e=this.getMetrics();return e?e.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&(this.toolbox_.HtmlDiv.style.display=t?"block":"none"),t){for(var n=this.getAllBlocks(!1),i=n.length-1;0<=i;i--)n[i].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0);this.isVisible_=t},e.WorkspaceSvg.prototype.render=function(){for(var e=this.getAllBlocks(!1),t=e.length-1;0<=t;t--)e[t].render(!1);if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),t=0;t<e.length;t++)e[t].render(!1)},e.WorkspaceSvg.prototype.traceOn=function(){console.warn("Deprecated call to traceOn, delete this.")},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var i,o=0;i=this.highlightedBlocks_[o];o++)i.setHighlighted(!1);this.highlightedBlocks_.length=0}(i=t?this.getBlockById(t):null)&&((o=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(i)&&this.highlightedBlocks_.push(i):e.utils.arrayRemove(this.highlightedBlocks_,i),i.setHighlighted(o))},e.WorkspaceSvg.prototype.paste=function(e){!this.rendered||e.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),i=this.getMarker().getCurNode();if(e.keyboardAccessibilityMode&&i)return void e.navigation.insertBlock(n,i.getLocation());var o=parseInt(t.getAttribute("x"),10),r=parseInt(t.getAttribute("y"),10);if(!isNaN(o)&&!isNaN(r)){this.RTL&&(o=-o);do{t=!1;var s,a=this.getAllBlocks(!1);for(i=0;s=a[i];i++){var l=s.getRelativeToSurfaceXY();if(1>=Math.abs(o-l.x)&&1>=Math.abs(r-l.y)){t=!0;break}}if(!t){var c,u=n.getConnections_(!1);for(i=0;c=u[i];i++)if(c.closest(e.SNAP_RADIUS,new e.utils.Coordinate(o,r)).connection){t=!0;break}}t&&(o=this.RTL?o-e.SNAP_RADIUS:o+e.SNAP_RADIUS,r+=2*e.SNAP_RADIUS)}while(t);n.moveBy(o,r)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new e.Events.BlockCreate(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),i=parseInt(t.getAttribute("x"),10),o=parseInt(t.getAttribute("y"),10);isNaN(i)||isNaN(o)||(this.RTL&&(i=-i),n.moveBy(i+50,o+50))}finally{e.Events.enable()}e.Events.isEnabled(),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.flyout_&&e.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,i){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,i),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan&&this.svgGroup_.parentNode?this.trashcan.getClientRect():null,this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_?this.toolbox_.getClientRect():null},e.WorkspaceSvg.prototype.isDeleteArea=function(t){return this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(t.clientX,t.clientY)?e.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(t.clientX,t.clientY)?e.DELETE_AREA_TOOLBOX:e.DELETE_AREA_NONE},e.WorkspaceSvg.prototype.onMouseDown_=function(e){var t=this.getGesture(e);t&&t.handleWsStart(e,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){var i=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM());i.x/=this.scale,i.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,i)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isContentBounded=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.controls||this.options.zoomOptions&&this.options.zoomOptions.wheel},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,i=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||i){var o=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&i?(n=this.scrollX-o.x,i=this.scrollY-o.y,t.shiftKey&&!o.x&&(n=this.scrollX-o.y,i=this.scrollY),this.scroll(n,i)):(o=-o.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,o)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBlocks(!1),n=this.getTopComments(!1);if(!(t=t.concat(n)).length)return new e.utils.Rect(0,0,0,0);n=t[0].getBoundingRectangle();for(var i=1;i<t.length;i++){var o=t[i].getBoundingRectangle();o.top<n.top&&(n.top=o.top),o.bottom>n.bottom&&(n.bottom=o.bottom),o.left<n.left&&(n.left=o.left),o.right>n.right&&(n.right=o.right)}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var t,n=this.getTopBlocks(!0),i=0,o=0;t=n[o];o++)if(t.isMovable()){var r=t.getRelativeToSurfaceXY();t.moveBy(-r.x,i-r.y),t.snapToGrid(),i=t.getRelativeToSurfaceXY().y+t.getHeightWidth().height+e.BlockSvg.MIN_BLOCK_Y}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu_=function(t){function n(e){if(e.isDeletable())p=p.concat(e.getDescendants(!1));else{e=e.getChildren(!1);for(var t=0;t<e.length;t++)n(e[t])}}function i(){e.Events.setGroup(s);var t=p.shift();t&&(t.workspace?(t.dispose(!1,!0),setTimeout(i,10)):i()),e.Events.setGroup(!1)}if(!this.options.readOnly&&!this.isFlyout){var o=[],r=this.getTopBlocks(!0),s=e.utils.genUid(),a=this,l={};if(l.text=e.Msg.UNDO,l.enabled=0<this.undoStack_.length,l.callback=this.undo.bind(this,!1),o.push(l),(l={}).text=e.Msg.REDO,l.enabled=0<this.redoStack_.length,l.callback=this.undo.bind(this,!0),o.push(l),this.isMovable()&&((l={}).text=e.Msg.CLEAN_UP,l.enabled=1<r.length,l.callback=this.cleanUp.bind(this),o.push(l)),this.options.collapse){for(var c=l=!1,u=0;u<r.length;u++)for(var h=r[u];h;)h.isCollapsed()?l=!0:c=!0,h=h.getNextBlock();var d=function(e){for(var t=0,n=0;n<r.length;n++)for(var i=r[n];i;)setTimeout(i.setCollapsed.bind(i,e),t),i=i.getNextBlock(),t+=10};(c={enabled:c}).text=e.Msg.COLLAPSE_ALL,c.callback=function(){d(!0)},o.push(c),(l={enabled:l}).text=e.Msg.EXPAND_ALL,l.callback=function(){d(!1)},o.push(l)}var p=[];for(u=0;u<r.length;u++)n(r[u]);l={text:1==p.length?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(p.length)),enabled:0<p.length,callback:function(){a.currentGesture_&&a.currentGesture_.cancel(),2>p.length?i():e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",p.length),(function(e){e&&i()}))}},o.push(l),this.configureContextMenu&&this.configureContextMenu(o),e.ContextMenu.show(t,o,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.Options.parseToolboxTree(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(t.getElementsByTagName("category").length){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.renderTree(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t.childNodes)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur();try{this.getParentSvg().focus()}catch(e){try{this.getParentSvg().parentNode.setActive()}catch(e){this.getParentSvg().parentNode.focus()}}},e.WorkspaceSvg.prototype.zoom=function(e,t,n){if(!this.isFlyout&&!this.isMutator){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);var i=this.scale*n;if(this.scale!=i){i>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:i<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale);var o=this.getCanvas().getCTM(),r=this.getParentSvg().createSVGPoint();r.x=e,r.y=t,e=(r=r.matrixTransform(o.inverse())).x,t=r.y,o=o.translate(e*(1-n),t*(1-n)).scale(n),this.scrollX=o.e,this.scrollY=o.f,this.setScale(i)}}},e.WorkspaceSvg.prototype.zoomCenter=function(e){var t=this.getMetrics();if(this.flyout_){var n=t.svgWidth/2;t=t.svgHeight/2}else n=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop;this.zoom(n,t,e)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var n=this.getBlocksBoundingBox(),i=n.right-n.left;n=n.bottom-n.top,i&&(this.flyout_&&(this.horizontalLayout?(e+=this.flyout_.height_,n+=this.flyout_.height_/this.scale):(t+=this.flyout_.getWidth(),i+=this.flyout_.getWidth()/this.scale)),this.setScale(Math.min(t/i,e/n)),this.scrollCenter())}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var e=this.getMetrics(),t=(e.contentWidth-e.viewWidth)/2,n=(e.contentHeight-e.viewHeight)/2;t=-t-e.contentLeft,n=-n-e.contentTop,this.scroll(t,n)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=this.getBlockById(t)){var n=t.getRelativeToSurfaceXY(),i=t.getHeightWidth(),o=this.scale;t=(n.x+(this.RTL?-1:1)*i.width/2)*o,n=(n.y+i.height/2)*o,t=-(t-(i=this.getMetrics()).contentLeft-i.viewWidth/2)-i.contentLeft,n=-(n-i.contentTop-i.viewHeight/2)-i.contentTop,e.hideChaff(),this.scroll(t,n)}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDeleteAreas()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?(this.scrollbar.hScroll.resizeViewHorizontal(t),this.scrollbar.vScroll.resizeViewVertical(t)):(this.scrollbar.hScroll.resizeContentHorizontal(t),this.scrollbar.vScroll.resizeContentVertical(t)))},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var i=this.getMetrics(),o=i.contentWidth+i.contentLeft-i.viewWidth,r=i.contentHeight+i.contentTop-i.viewHeight;t=Math.min(t,-i.contentLeft),n=Math.min(n,-i.contentTop),t=Math.max(t,-o),n=Math.max(n,-r),this.scrollX=t,this.scrollY=n,this.scrollbar&&(this.scrollbar.hScroll.setHandlePosition(-(t+i.contentLeft)*this.scrollbar.hScroll.ratio_),this.scrollbar.vScroll.setHandlePosition(-(n+i.contentTop)*this.scrollbar.vScroll.ratio_)),t+=i.absoluteLeft,n+=i.absoluteTop,this.translate(t,n)},e.WorkspaceSvg.getDimensionsPx_=function(e){var t=0,n=0;return e&&(t=e.getWidth(),n=e.getHeight()),{width:t,height:n}},e.WorkspaceSvg.getContentDimensions_=function(t,n){return t.isContentBounded()?e.WorkspaceSvg.getContentDimensionsBounded_(t,n):e.WorkspaceSvg.getContentDimensionsExact_(t)},e.WorkspaceSvg.getContentDimensionsExact_=function(e){var t=e.getBlocksBoundingBox(),n=e.scale;e=t.top*n;var i=t.bottom*n,o=t.left*n;return{top:e,bottom:i,left:o,right:t=t.right*n,width:t-o,height:i-e}},e.WorkspaceSvg.getContentDimensionsBounded_=function(t,n){var i=e.WorkspaceSvg.getContentDimensionsExact_(t),o=n.width,r=n.height,s=o/2,a=r/2,l=Math.min(i.left-s,i.right-o),c=Math.min(i.top-a,i.bottom-r);return{left:l,top:c,height:Math.max(i.bottom+a,i.top+r)-c,width:Math.max(i.right+s,i.left+o)-l}},e.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var t=e.WorkspaceSvg.getDimensionsPx_(this.toolbox_),n=e.WorkspaceSvg.getDimensionsPx_(this.flyout_),i=e.svgSize(this.getParentSvg()),o={height:i.height,width:i.width};this.toolbox_?this.toolboxPosition==e.TOOLBOX_AT_TOP||this.toolboxPosition==e.TOOLBOX_AT_BOTTOM?o.height-=t.height:this.toolboxPosition!=e.TOOLBOX_AT_LEFT&&this.toolboxPosition!=e.TOOLBOX_AT_RIGHT||(o.width-=t.width):this.flyout_&&(this.toolboxPosition==e.TOOLBOX_AT_TOP||this.toolboxPosition==e.TOOLBOX_AT_BOTTOM?o.height-=n.height:this.toolboxPosition!=e.TOOLBOX_AT_LEFT&&this.toolboxPosition!=e.TOOLBOX_AT_RIGHT||(o.width-=n.width));var r=e.WorkspaceSvg.getContentDimensions_(this,o),s=0;this.toolbox_&&this.toolboxPosition==e.TOOLBOX_AT_LEFT?s=t.width:this.flyout_&&this.toolboxPosition==e.TOOLBOX_AT_LEFT&&(s=n.width);var a=0;return this.toolbox_&&this.toolboxPosition==e.TOOLBOX_AT_TOP?a=t.height:this.flyout_&&this.toolboxPosition==e.TOOLBOX_AT_TOP&&(a=n.height),{contentHeight:r.height,contentWidth:r.width,contentTop:r.top,contentLeft:r.left,viewHeight:o.height,viewWidth:o.width,viewTop:-this.scrollY,viewLeft:-this.scrollX,absoluteTop:a,absoluteLeft:s,svgHeight:i.height,svgWidth:i.width,toolboxWidth:t.width,toolboxHeight:t.height,flyoutWidth:n.width,flyoutHeight:n.height,toolboxPosition:this.toolboxPosition}},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(e){var t=this.getMetrics();"number"==typeof e.x&&(this.scrollX=-t.contentWidth*e.x-t.contentLeft),"number"==typeof e.y&&(this.scrollY=-t.contentHeight*e.y-t.contentTop),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)},e.WorkspaceSvg.prototype.setResizesEnabled=function(e){var t=!this.resizesEnabled_&&e;this.resizesEnabled_=e,t&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(e,t){if("function"!=typeof t)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[e]=t},e.WorkspaceSvg.prototype.getButtonCallback=function(e){return(e=this.flyoutButtonCallbacks_[e])?e:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(e){this.flyoutButtonCallbacks_[e]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(e,t){if("function"!=typeof t)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[e]=t},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(e){return this.toolboxCategoryCallbacks_[e]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(e){this.toolboxCategoryCallbacks_[e]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,i=this.currentGesture_;return i?n&&i.hasStarted()?(console.warn("Tried to start the same gesture twice."),i.cancel(),null):i:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.WorkspaceSvg.prototype.refreshTheme=function(){e.WorkspaceSvg.superClass_.refreshTheme.call(this),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.updateColourFromTheme()},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");var i=new e.Options(n||{}),o=document.createElement("div");o.className="injectionDiv",t.appendChild(o);var r=e.createDom_(o,i),s=new e.BlockDragSurfaceSvg(o);return o=new e.WorkspaceDragSurfaceSvg(o),r=e.createMainWorkspace_(r,i,s,o),e.user.keyMap.setKeyMap(i.keyMap),e.init_(r),e.mainWorkspace=r,e.svgResize(r),r},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Component.defaultRightToLeft=n.RTL,e.Css.inject(n.hasCss,n.pathToMedia);var i=e.utils.dom.createSvgElement("svg",{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg"},t),o=e.utils.dom.createSvgElement("defs",{},i),r=String(Math.random()).substring(2),s=e.utils.dom.createSvgElement("filter",{id:"blocklyEmbossFilter"+r},o);e.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:1,result:"blur"},s);var a=e.utils.dom.createSvgElement("feSpecularLighting",{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},s);return e.utils.dom.createSvgElement("fePointLight",{x:-5e3,y:-1e4,z:2e4},a),e.utils.dom.createSvgElement("feComposite",{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},s),e.utils.dom.createSvgElement("feComposite",{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},s),n.embossFilterId=s.id,s=e.utils.dom.createSvgElement("pattern",{id:"blocklyDisabledPattern"+r,patternUnits:"userSpaceOnUse",width:10,height:10},o),e.utils.dom.createSvgElement("rect",{width:10,height:10,fill:"#aaa"},s),e.utils.dom.createSvgElement("path",{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},s),n.disabledPatternId=s.id,n.gridPattern=e.Grid.createDom(r,n.gridOptions,o),i},e.createMainWorkspace_=function(t,n,i,o){n.parentWorkspace=null;var r=new e.WorkspaceSvg(n,i,o);return r.scale=n.zoomOptions.startScale,t.appendChild(r.createDom("blocklyMainBackground")),!n.hasCategories&&n.languageTree&&(i=r.addFlyout_("svg"),e.utils.dom.insertAfter(i,t)),n.hasTrashcan&&r.addTrashcan(),n.zoomOptions&&n.zoomOptions.controls&&r.addZoomControls(),r.getThemeManager().subscribe(t,"workspace","background-color"),r.translate(0,0),e.mainWorkspace=r,n.readOnly||r.isMovable()||r.addChangeListener((function(t){if(!r.isDragging()&&!r.isMovable()&&-1!=e.Events.BUMP_EVENTS.indexOf(t.type)){var n=Object.create(null),i=r.getMetrics(),o=r.scale;if(n.RTL=r.RTL,n.viewLeft=i.viewLeft/o,n.viewTop=i.viewTop/o,n.viewRight=(i.viewLeft+i.viewWidth)/o,n.viewBottom=(i.viewTop+i.viewHeight)/o,r.isContentBounded()?(i=r.getBlocksBoundingBox(),n.contentLeft=i.left,n.contentTop=i.top,n.contentRight=i.right,n.contentBottom=i.bottom):(n.contentLeft=i.contentLeft/o,n.contentTop=i.contentTop/o,n.contentRight=(i.contentLeft+i.contentWidth)/o,n.contentBottom=(i.contentTop+i.contentHeight)/o),n.contentTop<n.viewTop||n.contentBottom>n.viewBottom||n.contentLeft<n.viewLeft||n.contentRight>n.viewRight){switch(i=null,t&&(i=e.Events.getGroup(),e.Events.setGroup(t.group)),t.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:var s=r.getBlockById(t.blockId);s=s.getRootBlock();break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:s=r.getCommentById(t.commentId)}if(s){(o=s.getBoundingRectangle()).height=o.bottom-o.top,o.width=o.right-o.left;var a=n.viewTop,l=n.viewBottom-o.height;l=Math.max(a,l),a=e.utils.math.clamp(a,o.top,l)-o.top,l=n.viewLeft;var c=n.viewRight-o.width;n.RTL?l=Math.min(c,l):c=Math.max(l,c),n=e.utils.math.clamp(l,o.left,c)-o.left,s.moveBy(n,a)}t&&(t.group||console.log("WARNING: Moved object in bounds but there was no event group. This may break undo."),null!==i&&e.Events.setGroup(i))}}})),e.svgResize(r),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),r},e.init_=function(t){var n=t.options,i=t.getParentSvg();e.bindEventWithChecks_(i.parentNode,"contextmenu",null,(function(t){e.utils.isTargetInput(t)||t.preventDefault()})),i=e.bindEventWithChecks_(window,"resize",null,(function(){e.hideChaff(!0),e.svgResize(t)})),t.setResizeHandlerWrapper(i),e.inject.bindDocumentEvents_(),n.languageTree&&(t.toolbox_?t.toolbox_.init(t):t.flyout_&&(t.flyout_.init(t),t.flyout_.show(n.languageTree.childNodes),t.flyout_.scrollToStart())),i=e.Scrollbar.scrollbarThickness,n.hasTrashcan&&(i=t.trashcan.init(i)),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(i),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.bindEventWithChecks_(document,"scroll",null,(function(){for(var t,n=e.Workspace.getAll(),i=0;t=n[i];i++)t.updateInverseScreenCTM&&t.updateInverseScreenCTM()})),e.bindEventWithChecks_(document,"keydown",null,e.onKeyDown_),e.bindEvent_(document,"touchend",null,e.longStop_),e.bindEvent_(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.bindEventWithChecks_(window,"orientationchange",document,(function(){e.svgResize(e.getMainWorkspace())}))),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var i=n.getAudioManager();i.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),i.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),i.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var o=[],r=function(){for(;o.length;)e.unbindEvent_(o.pop());i.preload()};o.push(e.bindEventWithChecks_(document,"mousemove",null,r,!0)),o.push(e.bindEventWithChecks_(document,"touchstart",null,r,!0))},e.Action=function(e,t){this.name=e,this.desc=t},e.ASTNode=function(t,n,i){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.processParams_(i||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return new e.ASTNode(e.ASTNode.types.FIELD,t)},e.ASTNode.createConnectionNode=function(t){return t?t.type==e.INPUT_VALUE||t.type==e.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):t.type==e.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):t.type==e.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):t.type==e.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null:null},e.ASTNode.createInputNode=function(t){return t?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return new e.ASTNode(e.ASTNode.types.BLOCK,t)},e.ASTNode.createStackNode=function(t){return new e.ASTNode(e.ASTNode.types.STACK,t)},e.ASTNode.createWorkspaceNode=function(t,n){return new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n})},e.ASTNode.prototype.processParams_=function(e){e&&e.wsCoordinate&&(this.wsCoordinate_=e.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findPreviousEditableField_=function(t,n,i){for(t=(n=n.fieldRow).indexOf(t),i=(i?n.length:t)-1;t=n[i];i--)if(t.EDITABLE)return n=t,e.ASTNode.createFieldNode(n);return null},e.ASTNode.prototype.findNextForInput_=function(){var t,n=this.location_.getParentInput(),i=n.getSourceBlock();for(n=i.inputList.indexOf(n)+1;t=i.inputList[n];n++){for(var o,r=t.fieldRow,s=0;o=r[s];s++)if(o.EDITABLE)return e.ASTNode.createFieldNode(o);if(t.connection)return e.ASTNode.createInputNode(t)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),i=t.getSourceBlock(),o=i.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=i.inputList[o];o++){for(var r=n.fieldRow;t<r.length;){if(r[t].EDITABLE)return e.ASTNode.createFieldNode(r[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var t,n=this.location_.getParentInput(),i=n.getSourceBlock(),o=i.inputList.indexOf(n);t=i.inputList[o];o--){if(t.connection&&t!==n)return e.ASTNode.createInputNode(t);for(var r,s=(t=t.fieldRow).length-1;r=t[s];s--)if(r.EDITABLE)return e.ASTNode.createFieldNode(r)}return null},e.ASTNode.prototype.findPrevForField_=function(){var t,n=this.location_,i=n.getParentInput(),o=n.getSourceBlock(),r=o.inputList.indexOf(i);for(n=i.fieldRow.indexOf(n)-1;t=o.inputList[r];r--){if(t.connection&&t!==i)return e.ASTNode.createInputNode(t);for(t=t.fieldRow;-1<n;){if(t[n].EDITABLE)return e.ASTNode.createFieldNode(t[n]);n--}0<=r-1&&(n=o.inputList[r-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var i=n.getRootBlock();n=i.workspace.getTopBlocks(!0);for(var o,r=0;o=n[r];r++)if(i.id==o.id)return-1==(t=r+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var n,i=0;n=t[i];i++){for(var o,r=n.fieldRow,s=0;o=r[s];s++)if(o.EDITABLE)return e.ASTNode.createFieldNode(o);if(n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:var t=this.location_.nextConnection;if(t)return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.NEXT:if(t=this.location_.targetConnection)return e.ASTNode.createConnectionNode(t)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case e.ASTNode.types.INPUT:if(t=this.location_.targetConnection)return e.ASTNode.createConnectionNode(t)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_.outputConnection;if(t=this.location_.previousConnection||t)return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.PREVIOUS:if((t=this.location_.targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode(this.location_.getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_.getRelativeToSurfaceXY();return t=new e.utils.Coordinate(t.x,t.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(this.location_.workspace,t);case e.ASTNode.types.OUTPUT:return(t=this.location_.targetConnection)?e.ASTNode.createConnectionNode(t):e.ASTNode.createStackNode(this.location_.getSourceBlock());case e.ASTNode.types.FIELD:case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.user={},e.user.keyMap={},e.user.keyMap.map_={},e.user.keyMap.modifierKeys={SHIFT:"Shift",CONTROL:"Control",ALT:"Alt",META:"Meta"},e.user.keyMap.setActionForKey=function(t,n){var i=e.user.keyMap.getKeyByAction(n);i&&delete e.user.keyMap.map_[i],e.user.keyMap.map_[t]=n},e.user.keyMap.setKeyMap=function(t){e.user.keyMap.map_=t},e.user.keyMap.getKeyMap=function(){var t={};return e.utils.object.mixin(t,e.user.keyMap.map_),t},e.user.keyMap.getActionByKeyCode=function(t){return e.user.keyMap.map_[t]},e.user.keyMap.getKeyByAction=function(t){for(var n,i=Object.keys(e.user.keyMap.map_),o=0;n=i[o];o++)if(e.user.keyMap.map_[n].name===t.name)return n;return null},e.user.keyMap.serializeKeyEvent=function(t){for(var n,i=e.utils.object.values(e.user.keyMap.modifierKeys),o="",r=0;n=i[r];r++)t.getModifierState(n)&&(o+=n);return o+t.keyCode},e.user.keyMap.createSerializedKey=function(t,n){for(var i,o="",r=e.utils.object.values(e.user.keyMap.modifierKeys),s=0;i=n[s];s++){if(!(-1<r.indexOf(i)))throw Error(i+" is not a valid modifier key.");o+=i}return o+t},e.user.keyMap.createDefaultKeyMap=function(){var t={},n=e.user.keyMap.createSerializedKey(e.utils.KeyCodes.K,[e.user.keyMap.modifierKeys.CONTROL]);return t[e.utils.KeyCodes.W]=e.navigation.ACTION_PREVIOUS,t[e.utils.KeyCodes.A]=e.navigation.ACTION_OUT,t[e.utils.KeyCodes.S]=e.navigation.ACTION_NEXT,t[e.utils.KeyCodes.D]=e.navigation.ACTION_IN,t[e.utils.KeyCodes.I]=e.navigation.ACTION_INSERT,t[e.utils.KeyCodes.ENTER]=e.navigation.ACTION_MARK,t[e.utils.KeyCodes.X]=e.navigation.ACTION_DISCONNECT,t[e.utils.KeyCodes.T]=e.navigation.ACTION_TOOLBOX,t[e.utils.KeyCodes.E]=e.navigation.ACTION_EXIT,t[e.utils.KeyCodes.ESC]=e.navigation.ACTION_EXIT,t[n]=e.navigation.ACTION_TOGGLE_KEYBOARD_NAV,t},e.navigation={},e.navigation.loggingCallback=null,e.navigation.STATE_FLYOUT=1,e.navigation.STATE_WS=2,e.navigation.STATE_TOOLBOX=3,e.navigation.currentState_=e.navigation.STATE_WS,e.navigation.actionNames={PREVIOUS:"previous",NEXT:"next",IN:"in",OUT:"out",INSERT:"insert",MARK:"mark",DISCONNECT:"disconnect",TOOLBOX:"toolbox",EXIT:"exit",TOGGLE_KEYBOARD_NAV:"toggle_keyboard_nav"},e.navigation.focusToolbox_=function(){var t=e.getMainWorkspace(),n=t.getToolbox();n&&(e.navigation.currentState_=e.navigation.STATE_TOOLBOX,e.navigation.resetFlyout_(!1),t.getMarker().getCurNode()||e.navigation.markAtCursor_(),n.selectFirstCategory())},e.navigation.focusFlyout_=function(){e.navigation.currentState_=e.navigation.STATE_FLYOUT;var t=e.getMainWorkspace(),n=t.getToolbox();n=n?n.flyout_:t.getFlyout(),t.getMarker().getCurNode()||e.navigation.markAtCursor_(),n&&n.getWorkspace()&&0<(t=n.getWorkspace().getTopBlocks(!0)).length&&(t=t[0],t=e.ASTNode.createStackNode(t),e.navigation.getFlyoutCursor_().setCurNode(t))},e.navigation.focusWorkspace_=function(){e.hideChaff();var t=e.getMainWorkspace(),n=t.getCursor(),i=!!t.getToolbox(),o=t.getTopBlocks(!0);e.navigation.resetFlyout_(i),e.navigation.currentState_=e.navigation.STATE_WS,0<o.length?n.setCurNode(e.navigation.getTopNode(o[0])):(i=new e.utils.Coordinate(100,100),t=e.ASTNode.createWorkspaceNode(t,i),n.setCurNode(t))},e.navigation.getFlyoutCursor_=function(){var t=e.getMainWorkspace(),n=null;return t.rendered&&(n=(t=(n=t.getToolbox())?n.flyout_:t.getFlyout())?t.workspace_.getCursor():null),n},e.navigation.insertFromFlyout=function(){var t=e.getMainWorkspace(),n=t.getFlyout();if(n&&n.isVisible()){var i=e.navigation.getFlyoutCursor_().getCurNode().getLocation();i.isEnabled()?((n=n.createBlock(i)).render(),n.setConnectionsHidden(!1),t.getCursor().setCurNode(e.ASTNode.createBlockNode(n)),e.navigation.modify_()||e.navigation.warn_("Something went wrong while inserting a block from the flyout."),e.navigation.focusWorkspace_(),t.getCursor().setCurNode(e.navigation.getTopNode(n)),e.navigation.removeMark_()):e.navigation.warn_("Can't insert a disabled block.")}else e.navigation.warn_("Trying to insert from the flyout when the flyout does not  exist or is not visible")},e.navigation.resetFlyout_=function(t){e.navigation.getFlyoutCursor_()&&(e.navigation.getFlyoutCursor_().hide(),t&&e.getMainWorkspace().getFlyout().hide())},e.navigation.modifyWarn_=function(){var t=e.getMainWorkspace().getMarker().getCurNode(),n=e.getMainWorkspace().getCursor().getCurNode();return t?n?(t=t.getType(),n=n.getType(),t==e.ASTNode.types.FIELD?(e.navigation.warn_("Should not have been able to mark a field."),!1):t==e.ASTNode.types.BLOCK?(e.navigation.warn_("Should not have been able to mark a block."),!1):t==e.ASTNode.types.STACK?(e.navigation.warn_("Should not have been able to mark a stack."),!1):n==e.ASTNode.types.FIELD?(e.navigation.warn_("Cannot attach a field to anything else."),!1):n!=e.ASTNode.types.WORKSPACE||(e.navigation.warn_("Cannot attach a workspace to anything else."),!1)):(e.navigation.warn_("Cannot insert with no cursor node."),!1):(e.navigation.warn_("Cannot insert with no marked node."),!1)},e.navigation.moveBlockToWorkspace_=function(t,n){return t.isShadow()?(e.navigation.warn_("Cannot move a shadow block to the workspace."),!1):(t.getParent()&&t.unplug(!1),t.moveTo(n.getWsCoordinate()),!0)},e.navigation.modify_=function(){var t=e.getMainWorkspace().getMarker().getCurNode(),n=e.getMainWorkspace().getCursor().getCurNode();if(!e.navigation.modifyWarn_())return!1;var i=t.getType(),o=n.getType(),r=n.getLocation(),s=t.getLocation();return t.isConnection()&&n.isConnection()?e.navigation.connect_(r,s):!t.isConnection()||o!=e.ASTNode.types.BLOCK&&o!=e.ASTNode.types.STACK?i==e.ASTNode.types.WORKSPACE?(n=e.navigation.getSourceBlock_(n),e.navigation.moveBlockToWorkspace_(n,t)):(e.navigation.warn_("Unexpected state in Blockly.navigation.modify_."),!1):e.navigation.insertBlock(r,s)},e.navigation.disconnectChild_=function(t,n){var i=t.getSourceBlock(),o=n.getSourceBlock();i.getRootBlock()==o.getRootBlock()&&(-1<i.getDescendants(!1).indexOf(o)?e.navigation.getInferiorConnection_(n).disconnect():e.navigation.getInferiorConnection_(t).disconnect())},e.navigation.moveAndConnect_=function(t,n){if(!t||!n)return!1;var i=t.getSourceBlock();return n.canConnectWithReason_(t)==e.Connection.CAN_CONNECT&&(e.navigation.disconnectChild_(t,n),n.isSuperior()||i.getRootBlock().positionNearConnection(t,n),n.connect(t),!0)},e.navigation.getInferiorConnection_=function(e){var t=e.getSourceBlock();return e.isSuperior()?t.previousConnection?t.previousConnection:t.outputConnection?t.outputConnection:null:e},e.navigation.getSuperiorConnection_=function(e){return e.isSuperior()?e:e.targetConnection?e.targetConnection:null},e.navigation.connect_=function(t,n){if(!t||!n)return!1;var i=e.navigation.getInferiorConnection_(t),o=e.navigation.getSuperiorConnection_(n),r=e.navigation.getSuperiorConnection_(t),s=e.navigation.getInferiorConnection_(n);if(i&&o&&e.navigation.moveAndConnect_(i,o)||r&&s&&e.navigation.moveAndConnect_(r,s)||e.navigation.moveAndConnect_(t,n))return!0;try{n.checkConnection_(t)}catch(t){e.navigation.warn_("Connection failed with error: "+t)}return!1},e.navigation.insertBlock=function(t,n){switch(n.type){case e.PREVIOUS_STATEMENT:if(e.navigation.connect_(t.nextConnection,n))return!0;break;case e.NEXT_STATEMENT:if(e.navigation.connect_(t.previousConnection,n))return!0;break;case e.INPUT_VALUE:if(e.navigation.connect_(t.outputConnection,n))return!0;break;case e.OUTPUT_VALUE:for(var i=0;i<t.inputList.length;i++){var o=t.inputList[i].connection;if(o&&o.type===e.INPUT_VALUE&&e.navigation.connect_(o,n))return!0}if(t.outputConnection&&e.navigation.connect_(t.outputConnection,n))return!0}return e.navigation.warn_("This block can not be inserted at the marked location."),!1},e.navigation.disconnectBlocks_=function(){var t=e.getMainWorkspace(),n=t.getCursor().getCurNode();if(n.isConnection()){var i=n.getLocation();i.isConnected()?(n=i.isSuperior()?i:i.targetConnection,(i=i.isSuperior()?i.targetConnection:i).getSourceBlock().isShadow()?e.navigation.log_("Cannot disconnect a shadow block"):(n.disconnect(),i.bumpAwayFrom_(n),n.getSourceBlock().getRootBlock().bringToFront(),n=e.ASTNode.createConnectionNode(n),t.getCursor().setCurNode(n))):e.navigation.log_("Cannot disconnect unconnected connection")}else e.navigation.log_("Cannot disconnect blocks when the cursor is not on a connection")},e.navigation.markAtCursor_=function(){var t=e.getMainWorkspace();t.getMarker().setCurNode(t.getCursor().getCurNode())},e.navigation.removeMark_=function(){var t=e.getMainWorkspace();t.getMarker().setCurNode(null),t.getMarker().hide()},e.navigation.setState=function(t){e.navigation.currentState_=t},e.navigation.getSourceBlock_=function(t){return t?t.getType()===e.ASTNode.types.BLOCK?t.getLocation():t.getType()===e.ASTNode.types.STACK?t.getLocation():t.getType()===e.ASTNode.types.WORKSPACE?null:t.getLocation().getSourceBlock():null},e.navigation.getTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.navigation.moveCursorOnBlockDelete=function(t){var n=e.getMainWorkspace();if(n&&(n=n.getCursor())){var i=n.getCurNode();(i=e.navigation.getSourceBlock_(i))===t?i.getParent()?(t=i.previousConnection||i.outputConnection)&&n.setCurNode(e.ASTNode.createConnectionNode(t.targetConnection)):n.setCurNode(e.ASTNode.createWorkspaceNode(i.workspace,i.getRelativeToSurfaceXY())):-1<t.getChildren(!1).indexOf(i)&&n.setCurNode(e.ASTNode.createWorkspaceNode(i.workspace,i.getRelativeToSurfaceXY()))}},e.navigation.moveCursorOnBlockMutation=function(t){var n=e.getMainWorkspace().getCursor();if(n){var i=n.getCurNode();(i=e.navigation.getSourceBlock_(i))===t&&n.setCurNode(e.ASTNode.createBlockNode(i))}},e.navigation.enableKeyboardAccessibility=function(){e.keyboardAccessibilityMode||(e.keyboardAccessibilityMode=!0,e.navigation.focusWorkspace_())},e.navigation.disableKeyboardAccessibility=function(){if(e.keyboardAccessibilityMode){var t=e.getMainWorkspace();e.keyboardAccessibilityMode=!1,t.getCursor().hide(),t.getMarker().hide(),e.navigation.getFlyoutCursor_()&&e.navigation.getFlyoutCursor_().hide()}},e.navigation.log_=function(t){e.navigation.loggingCallback?e.navigation.loggingCallback("log",t):console.log(t)},e.navigation.warn_=function(t){e.navigation.loggingCallback?e.navigation.loggingCallback("warn",t):console.warn(t)},e.navigation.error_=function(t){e.navigation.loggingCallback?e.navigation.loggingCallback("error",t):console.error(t)},e.navigation.onKeyPress=function(t){return t=e.user.keyMap.serializeKeyEvent(t),!!(t=e.user.keyMap.getActionByKeyCode(t))&&e.navigation.onBlocklyAction(t)},e.navigation.onBlocklyAction=function(t){var n=e.getMainWorkspace().options.readOnly,i=!1;return e.keyboardAccessibilityMode?n?-1<e.navigation.READONLY_ACTION_LIST.indexOf(t)&&(i=e.navigation.handleActions_(t)):i=e.navigation.handleActions_(t):t.name===e.navigation.actionNames.TOGGLE_KEYBOARD_NAV&&(e.navigation.enableKeyboardAccessibility(),i=!0),i},e.navigation.handleActions_=function(t){var n=e.getMainWorkspace();if(t.name===e.navigation.actionNames.TOGGLE_KEYBOARD_NAV)return e.navigation.disableKeyboardAccessibility(),!0;if(t.name===e.navigation.actionNames.TOOLBOX)return n.getToolbox()?e.navigation.focusToolbox_():e.navigation.focusFlyout_(),!0;if(e.navigation.currentState_===e.navigation.STATE_WS){var i=!1;return(n=n.getCursor().getCurNode())&&n.getType()===e.ASTNode.types.FIELD&&(i=n.getLocation().onBlocklyAction(t)),i||(i=e.navigation.workspaceOnAction_(t)),i}return e.navigation.currentState_===e.navigation.STATE_FLYOUT?e.navigation.flyoutOnAction_(t):e.navigation.currentState_===e.navigation.STATE_TOOLBOX&&e.navigation.toolboxOnAction_(t)},e.navigation.workspaceOnAction_=function(t){var n=e.getMainWorkspace();switch(t.name){case e.navigation.actionNames.PREVIOUS:return n.getCursor().prev(),!0;case e.navigation.actionNames.OUT:return n.getCursor().out(),!0;case e.navigation.actionNames.NEXT:return n.getCursor().next(),!0;case e.navigation.actionNames.IN:return n.getCursor().in(),!0;case e.navigation.actionNames.INSERT:return e.navigation.modify_(),!0;case e.navigation.actionNames.MARK:return e.navigation.handleEnterForWS_(),!0;case e.navigation.actionNames.DISCONNECT:return e.navigation.disconnectBlocks_(),!0;default:return!1}},e.navigation.flyoutOnAction_=function(t){switch(t.name){case e.navigation.actionNames.PREVIOUS:return e.navigation.getFlyoutCursor_().prev(),!0;case e.navigation.actionNames.OUT:return e.navigation.focusToolbox_(),!0;case e.navigation.actionNames.NEXT:return e.navigation.getFlyoutCursor_().next(),!0;case e.navigation.actionNames.MARK:return e.navigation.insertFromFlyout(),!0;case e.navigation.actionNames.EXIT:return e.navigation.focusWorkspace_(),!0;default:return!1}},e.navigation.toolboxOnAction_=function(t){if(t.name===e.navigation.actionNames.EXIT)return e.navigation.focusWorkspace_(),!0;var n=e.getMainWorkspace().getToolbox().onBlocklyAction(t);return n||t.name!==e.navigation.actionNames.IN?n:(e.navigation.focusFlyout_(),!0)},e.navigation.handleEnterForWS_=function(){var t=e.getMainWorkspace().getCursor().getCurNode(),n=t.getType();n==e.ASTNode.types.FIELD?t.getLocation().showEditor_():t.isConnection()||n==e.ASTNode.types.WORKSPACE?e.navigation.markAtCursor_():n==e.ASTNode.types.BLOCK?e.navigation.warn_("Cannot mark a block."):n==e.ASTNode.types.STACK&&e.navigation.warn_("Cannot mark a stack.")},e.navigation.ACTION_PREVIOUS=new e.Action(e.navigation.actionNames.PREVIOUS,"Go to the previous location."),e.navigation.ACTION_OUT=new e.Action(e.navigation.actionNames.OUT,"Go to the parent of the current location."),e.navigation.ACTION_NEXT=new e.Action(e.navigation.actionNames.NEXT,"Go to the next location."),e.navigation.ACTION_IN=new e.Action(e.navigation.actionNames.IN,"Go to the first child of the current location."),e.navigation.ACTION_INSERT=new e.Action(e.navigation.actionNames.INSERT,"Connect the current location to the marked location."),e.navigation.ACTION_MARK=new e.Action(e.navigation.actionNames.MARK,"Mark the current location."),e.navigation.ACTION_DISCONNECT=new e.Action(e.navigation.actionNames.DISCONNECT,"Dicsonnect the block at thecurrent location from its parent."),e.navigation.ACTION_TOOLBOX=new e.Action(e.navigation.actionNames.TOOLBOX,"Open the toolbox."),e.navigation.ACTION_EXIT=new e.Action(e.navigation.actionNames.EXIT,"Close the current modal, such as a toolbox or field editor."),e.navigation.ACTION_TOGGLE_KEYBOARD_NAV=new e.Action(e.navigation.actionNames.TOGGLE_KEYBOARD_NAV,"Turns on and off keyboard navigation."),e.navigation.READONLY_ACTION_LIST=[e.navigation.ACTION_PREVIOUS,e.navigation.ACTION_OUT,e.navigation.ACTION_IN,e.navigation.ACTION_NEXT,e.navigation.ACTION_TOGGLE_KEYBOARD_NAV],e.Names=function(e,t){if(this.variablePrefix_=t||"",this.reservedDict_=Object.create(null),e)for(var n=e.split(","),i=0;i<n.length;i++)this.reservedDict_[n[i]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(e){this.variableMap_=e},e.Names.prototype.getNameForUserVariable_=function(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.log("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the folowing code in your generator's init() function:\nBlockly.YourGeneratorName.variableDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.getName=function(t,n){if(n==e.Variables.NAME_TYPE){var i=this.getNameForUserVariable_(t);i&&(t=i)}i=t.toLowerCase()+"_"+n;var o=n==e.Variables.NAME_TYPE||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";if(i in this.db_)return o+this.db_[i];var r=this.getDistinctName(t,n);return this.db_[i]=r.substr(o.length),r},e.Names.prototype.getDistinctName=function(t,n){for(var i=this.safeName_(t),o="";this.dbReverse_[i+o]||i+o in this.reservedDict_;)o=o?o+1:2;return i+=o,this.dbReverse_[i]=!0,(n==e.Variables.NAME_TYPE||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+i},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(e,t){return e.toLowerCase()==t.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.allProcedures=function(t){t=t.getAllBlocks(!1);for(var n=[],i=[],o=0;o<t.length;o++)if(t[o].getProcedureDef){var r=t[o].getProcedureDef();r&&(r[2]?n.push(r):i.push(r))}return i.sort(e.Procedures.procTupleComparator_),n.sort(e.Procedures.procTupleComparator_),[i,n]},e.Procedures.procTupleComparator_=function(e,t){return e[0].toLowerCase().localeCompare(t[0].toLowerCase())},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var i=t.match(/^(.*?)(\d+)$/);t=i?i[1]+(parseInt(i[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,i){return!e.Procedures.isNameUsed(t,n,i)},e.Procedures.isNameUsed=function(t,n,i){n=n.getAllBlocks(!1);for(var o=0;o<n.length;o++)if(n[o]!=i&&n[o].getProcedureDef){var r=n[o].getProcedureDef();if(e.Names.equals(r[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),i=this.getValue();if(i!=t&&i!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var o=0;o<t.length;o++)t[o].renameProcedure&&t[o].renameProcedure(i,n)}return n},e.Procedures.flyoutCategory=function(t){function n(t,n){for(var o=0;o<t.length;o++){var r=t[o][0],s=t[o][1],a=e.utils.xml.createElement("block");a.setAttribute("type",n),a.setAttribute("gap",16);var l=e.utils.xml.createElement("mutation");for(l.setAttribute("name",r),a.appendChild(l),r=0;r<s.length;r++){var c=e.utils.xml.createElement("arg");c.setAttribute("name",s[r]),l.appendChild(c)}i.push(a)}}var i=[];if(e.Blocks.procedures_defnoreturn){var o=e.utils.xml.createElement("block");o.setAttribute("type","procedures_defnoreturn"),o.setAttribute("gap",16);var r=e.utils.xml.createElement("field");r.setAttribute("name","NAME"),r.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),o.appendChild(r),i.push(o)}return e.Blocks.procedures_defreturn&&((o=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),o.setAttribute("gap",16),(r=e.utils.xml.createElement("field")).setAttribute("name","NAME"),r.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),o.appendChild(r),i.push(o)),e.Blocks.procedures_ifreturn&&((o=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),o.setAttribute("gap",16),i.push(o)),i.length&&i[i.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),i},e.Procedures.getCallers=function(t,n){for(var i=[],o=n.getAllBlocks(!1),r=0;r<o.length;r++)if(o[r].getProcedureCall){var s=o[r].getProcedureCall();s&&e.Names.equals(s,t)&&i.push(o[r])}return i},e.Procedures.mutateCallers=function(t){var n,i=e.Events.recordUndo,o=t.getProcedureDef()[0],r=t.mutationToDom(!0);for(t=e.Procedures.getCallers(o,t.workspace),o=0;n=t[o];o++){var s=n.mutationToDom();s=s&&e.Xml.domToText(s),n.domToMutation(r);var a=n.mutationToDom();s!=(a=a&&e.Xml.domToText(a))&&(e.Events.recordUndo=!1,e.Events.fire(new e.Events.BlockChange(n,"mutation",null,s,a)),e.Events.recordUndo=i)}},e.Procedures.getDefinition=function(t,n){for(var i=n.getTopBlocks(!1),o=0;o<i.length;o++)if(i[o].getProcedureDef){var r=i[o].getProcedureDef();if(r&&e.Names.equals(r[0],t))return i[o]}return null},e.VariableModel=function(t,n,i,o){this.workspace=t,this.name=n,this.type=i||"",this.id_=o||e.utils.genUid(),e.Events.fire(new e.Events.VarCreate(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(e,t){var n=e.name.toLowerCase(),i=t.name.toLowerCase();return n<i?-1:n==i?0:1},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(e){var t=e.getAllBlocks(!1);e=Object.create(null);for(var n=0;n<t.length;n++){var i=t[n].getVarModels();if(i)for(var o=0;o<i.length;o++){var r=i[o],s=r.getId();s&&(e[s]=r)}}for(s in t=[],e)t.push(e[s]);return t},e.Variables.allUsedVariables=function(){console.warn("Deprecated call to Blockly.Variables.allUsedVariables. Use Blockly.Variables.allUsedVarModels instead.\nIf this is a major issue please file a bug on GitHub.")},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var n,i=Object.create(null),o=0;n=t[o];o++){var r=n.getDeveloperVariables;if(!r&&n.getDeveloperVars&&(r=n.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[n.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+n.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[n.type]=!0)),r)for(n=r(),r=0;r<n.length;r++)i[n[r]]=!0}return Object.keys(i)},e.Variables.flyoutCategory=function(t){var n=[],i=document.createElement("button");return i.setAttribute("text","%{BKY_NEW_VARIABLE}"),i.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",(function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace())})),n.push(i),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var i=t[t.length-1];if(e.Blocks.variables_set){var o=e.utils.xml.createElement("block");o.setAttribute("type","variables_set"),o.setAttribute("gap",e.Blocks.math_change?8:24),o.appendChild(e.Variables.generateVariableFieldDom(i)),n.push(o)}if(e.Blocks.math_change&&((o=e.utils.xml.createElement("block")).setAttribute("type","math_change"),o.setAttribute("gap",e.Blocks.variables_get?20:8),o.appendChild(e.Variables.generateVariableFieldDom(i)),i=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),o.appendChild(i),n.push(o)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),i=0;for(var r;r=t[i];i++)(o=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),o.setAttribute("gap",8),o.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(o)}}return n},e.Variables.generateUniqueName=function(e){var t="";if((e=e.getAllVariables()).length)for(var n=1,i=0,o="ijkmnopqrstuvwxyzabcdefgh".charAt(i);!t;){for(var r=!1,s=0;s<e.length;s++)if(e[s].name.toLowerCase()==o){r=!0;break}r?(25==++i&&(i=0,n++),o="ijkmnopqrstuvwxyzabcdefgh".charAt(i),1<n&&(o+=n)):t=o}else t="i";return t},e.Variables.createVariableButtonHandler=function(t,n,i){var o=i||"",r=function(i){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,i,(function(i){if(i){var s=e.Variables.nameUsedWithAnyType_(i,t);if(s){var a=i.toLowerCase();if(s.type==o)var l=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",a);else l=(l=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",a).replace("%2",s.type);e.alert(l,(function(){r(i)}))}else t.createVariable(i,o),n&&n(i)}else n&&n(null)}))};r("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,i){var o=function(r){var s=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(s,r,(function(r){if(r){var s=e.Variables.nameUsedWithOtherType_(r,n.type,t);s?(s=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",r.toLowerCase()).replace("%2",s.type),e.alert(s,(function(){o(r)}))):(t.renameVariableById(n.getId(),r),i&&i(r))}else i&&i(null)}))};o("")},e.Variables.promptName=function(t,n,i){e.prompt(t,n,(function(t){t&&((t=t.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||t==e.Msg.NEW_VARIABLE)&&(t=null),i(t)}))},e.Variables.nameUsedWithOtherType_=function(e,t,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var i,o=0;i=n[o];o++)if(i.name.toLowerCase()==e&&i.type!=t)return i;return null},e.Variables.nameUsedWithAnyType_=function(e,t){var n=t.getVariableMap().getAllVariables();e=e.toLowerCase();for(var i,o=0;i=n[o];o++)if(i.name.toLowerCase()==e)return i;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,i,o){var r=e.Variables.getVariable(t,n,i,o);return r||(r=e.Variables.createVariable_(t,n,i,o)),r},e.Variables.getVariable=function(e,t,n,i){var o=e.getPotentialVariableMap();if(t){var r=e.getVariableById(t);if(!r&&o&&(r=o.getVariableById(t)),r)return r}if(n){if(null==i)throw Error("Tried to look up a variable by name without a type");!(r=e.getVariable(n,i))&&o&&(r=o.getVariable(n,i))}return r},e.Variables.createVariable_=function(t,n,i,o){var r=t.getPotentialVariableMap();return i||(i=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),r?r.createVariable(i,o,n):t.createVariable(i,o,n)},e.Variables.getAddedVariables=function(e,t){var n=e.getAllVariables(),i=[];if(t.length!=n.length)for(var o=0;o<n.length;o++){var r=n[o];-1==t.indexOf(r)&&i.push(r)}return i},e.WidgetDiv={},e.WidgetDiv.DIV=null,e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",document.body.appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,i){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=i,t=e.utils.style.getViewportPageOffset(),e.WidgetDiv.DIV.style.top=t.y+"px",e.WidgetDiv.DIV.style.direction=n?"rtl":"ltr",e.WidgetDiv.DIV.style.display="block"},e.WidgetDiv.hide=function(){e.WidgetDiv.owner_&&(e.WidgetDiv.owner_=null,e.WidgetDiv.DIV.style.display="none",e.WidgetDiv.DIV.style.left="",e.WidgetDiv.DIV.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,e.WidgetDiv.DIV.innerHTML="")},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,i){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=i+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,i,o){var r=e.WidgetDiv.calculateY_(t,n,i);t=e.WidgetDiv.calculateX_(t,n,i,o),0>r?e.WidgetDiv.positionInternal_(t,0,i.height+r):e.WidgetDiv.positionInternal_(t,r,i.height)},e.WidgetDiv.calculateX_=function(e,t,n,i){return i?(t=Math.max(t.right-n.width,e.left),Math.min(t,e.right-n.width)):(t=Math.min(t.left,e.right-n.width),Math.max(t,e.left))},e.WidgetDiv.calculateY_=function(e,t,n){return t.bottom+n.height>=e.bottom?t.top-n.height:t.bottom},e.VERSION="3.20191014.4",e.mainWorkspace=null,e.selected=null,e.cursor=null,e.keyboardAccessibilityMode=!1,e.draggingConnections_=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.svgSize=function(e){return{width:e.cachedWidth_,height:e.cachedHeight_}},e.resizeSvgContents=function(e){e.resizeContents()},e.svgResize=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;var t=e.getParentSvg(),n=t.parentNode;if(n){var i=n.offsetWidth;n=n.offsetHeight,t.cachedWidth_!=i&&(t.setAttribute("width",i+"px"),t.cachedWidth_=i),t.cachedHeight_!=n&&(t.setAttribute("height",n+"px"),t.cachedHeight_=n),e.resize()}},e.onKeyDown_=function(t){var n=e.mainWorkspace;if(!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible()))if(n.options.readOnly)e.navigation.onKeyPress(t);else{var i=!1;if(t.keyCode==e.utils.KeyCodes.ESC)e.hideChaff(),e.navigation.onBlocklyAction(e.navigation.ACTION_EXIT);else{if(e.navigation.onKeyPress(t))return;if(t.keyCode==e.utils.KeyCodes.BACKSPACE||t.keyCode==e.utils.KeyCodes.DELETE){if(t.preventDefault(),e.Gesture.inProgress())return;e.selected&&e.selected.isDeletable()&&(i=!0)}else if(t.altKey||t.ctrlKey||t.metaKey){if(e.Gesture.inProgress())return;e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&(t.keyCode==e.utils.KeyCodes.C?(e.hideChaff(),e.copy_(e.selected)):t.keyCode!=e.utils.KeyCodes.X||e.selected.workspace.isFlyout||(e.copy_(e.selected),i=!0)),t.keyCode==e.utils.KeyCodes.V?e.clipboardXml_&&((t=e.clipboardSource_).isFlyout&&(t=t.targetWorkspace),e.clipboardTypeCounts_&&t.isCapacityAvailable(e.clipboardTypeCounts_)&&(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1))):t.keyCode==e.utils.KeyCodes.Z&&(e.hideChaff(),n.undo(t.shiftKey))}}i&&!e.selected.workspace.isFlyout&&(e.Events.setGroup(!0),e.hideChaff(),e.selected.dispose(!0,!0),e.Events.setGroup(!1))}},e.copy_=function(t){if(t.isComment)var n=t.toXmlWithXY();else{n=e.Xml.blockToDom(t,!0),e.Xml.deleteNext(n);var i=t.getRelativeToSurfaceXY();n.setAttribute("x",t.RTL?-i.x:i.x),n.setAttribute("y",i.y)}e.clipboardXml_=n,e.clipboardSource_=t.workspace,e.clipboardTypeCounts_=t.isComment?null:e.utils.getBlockTypeCounts(t,!0)},e.duplicate_=function(t){var n=e.clipboardXml_,i=e.clipboardSource_;e.copy_(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=i},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),t||((t=e.getMainWorkspace()).trashcan&&t.trashcan.flyout_&&t.trashcan.flyout_.hide(),t.toolbox_&&t.toolbox_.flyout_&&t.toolbox_.flyout_.autoClose&&t.toolbox_.clearSelection())},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(e,t){alert(e),t&&t()},e.confirm=function(e,t){t(confirm(e))},e.prompt=function(e,t,n){n(prompt(e,t))},e.jsonInitFactory_=function(e){return function(){this.jsonInit(e)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i){var o=i.type;null==o||""===o?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[o]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+o+'".'),e.Blocks[o]={init:e.jsonInitFactory_(i)})}else console.warn("Block definition #"+n+" in JSON array is "+i+". Skipping.")}},e.bindEventWithChecks_=function(t,n,i,o,r,s){var a=!1,l=function(t){var n=!r;t=e.Touch.splitEventByTouches(t);for(var s,l=0;s=t[l];l++)n&&!e.Touch.shouldHandleEvent(s)||(e.Touch.setClientFromTouch(s),i?o.call(i,s):o(s),a=!0)},c=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var u,h=0;u=e.Touch.TOUCH_MAP[n][h];h++)t.addEventListener(u,l,!1),c.push([t,u,l]);else if(t.addEventListener(n,l,!1),c.push([t,n,l]),n in e.Touch.TOUCH_MAP){var d=function(e){l(e),a&&!s&&e.preventDefault()};for(h=0;u=e.Touch.TOUCH_MAP[n][h];h++)t.addEventListener(u,d,!1),c.push([t,u,d])}return c},e.bindEvent_=function(t,n,i,o){var r=function(e){i?o.call(i,e):o(e)},s=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var a,l=0;a=e.Touch.TOUCH_MAP[n][l];l++)t.addEventListener(a,r,!1),s.push([t,a,r]);else if(t.addEventListener(n,r,!1),s.push([t,n,r]),n in e.Touch.TOUCH_MAP){var c=function(e){if(e.changedTouches&&1==e.changedTouches.length){var t=e.changedTouches[0];e.clientX=t.clientX,e.clientY=t.clientY}r(e),e.preventDefault()};for(l=0;a=e.Touch.TOUCH_MAP[n][l];l++)t.addEventListener(a,c,!1),s.push([t,a,c])}return s},e.unbindEvent_=function(e){for(;e.length;){var t=e.pop(),n=t[2];t[0].removeEventListener(t[1],n,!1)}return n},e.isNumber=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,i){for(var o="Blockly",r=e,s=0;s<n.length;++s)o+="."+n[s],r&&(r=r[n[s]]);r&&r!==i&&(t=(void 0===i?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",o).replace("%2",t),console.warn(t))},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement("circle",{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement("path",{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement("foreignObject",{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),e.bindEventWithChecks_(n,"mouseup",this,this.startEdit_,!0,!0),e.bindEventWithChecks_(n,"wheel",this,(function(e){e.stopPropagation()})),e.bindEventWithChecks_(n,"change",this,(function(t){this.cachedText_!=this.model_.text&&e.Events.fire(new e.Events.BlockChange(this.block_,"comment",null,this.cachedText_,this.model_.text))})),e.bindEventWithChecks_(n,"input",this,(function(e){this.model_.text=n.value})),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,i=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",i),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=i-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new e.Events.Ui(this.block_,"commentOpen",!t,t)),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.svgPath_,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.updateColour()},e.Comment.prototype.createNonEditableBubble_=function(){e.Warning.prototype.createBubble.call(this)},e.Comment.prototype.disposeBubble_=function(){this.paragraphElement_?e.Warning.prototype.disposeBubble.call(this):(this.bubble_.dispose(),this.foreignObject_=this.textarea_=this.bubble_=null)},e.Comment.prototype.startEdit_=function(e){this.bubble_.promote_()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(e,t){this.bubble_?this.bubble_.setBubbleSize(e,t):(this.model_.size.width=e,this.model_.size.height=t)},e.Comment.prototype.getText=function(){return this.model_.text||""},e.Comment.prototype.setText=function(e){this.model_.text!=e&&(this.model_.text=e,this.updateText())},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.tree={},e.tree.BaseNode=function(t,n){e.Component.call(this),this.config_=n,this.content_=t,this.expanded_=this.selected_=!1,this.toolTip_=null,this.isUserCollapsible_=!0,this.depth_=-1},e.utils.object.inherits(e.tree.BaseNode,e.Component),e.tree.BaseNode.allNodes={},e.tree.BaseNode.prototype.disposeInternal=function(){e.tree.BaseNode.superClass_.disposeInternal.call(this),this.tree&&(this.tree=null),this.setElementInternal(null)},e.tree.BaseNode.prototype.initAccessibility=function(){var t=this.getElement();if(t){var n=this.getLabelElement();if(n&&!n.id&&(n.id=this.getId()+".label"),e.utils.aria.setRole(t,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(t,e.utils.aria.State.LEVEL,this.getDepth()),n&&e.utils.aria.setState(t,e.utils.aria.State.LABELLEDBY,n.id),(n=this.getIconElement())&&e.utils.aria.setRole(n,e.utils.aria.Role.PRESENTATION),(n=this.getChildrenElement())&&(e.utils.aria.setRole(n,e.utils.aria.Role.GROUP),n.hasChildNodes()))for(e.utils.aria.setState(t,e.utils.aria.State.EXPANDED,!1),t=this.getChildCount(),n=1;n<=t;n++){var i=this.getChildAt(n-1).getElement();e.utils.aria.setState(i,e.utils.aria.State.SETSIZE,t),e.utils.aria.setState(i,e.utils.aria.State.POSINSET,n)}}},e.tree.BaseNode.prototype.createDom=function(){var e=document.createElement("div");e.appendChild(this.toDom()),this.setElementInternal(e)},e.tree.BaseNode.prototype.enterDocument=function(){e.tree.BaseNode.superClass_.enterDocument.call(this),e.tree.BaseNode.allNodes[this.getId()]=this,this.initAccessibility()},e.tree.BaseNode.prototype.exitDocument=function(){e.tree.BaseNode.superClass_.exitDocument.call(this),delete e.tree.BaseNode.allNodes[this.getId()]},e.tree.BaseNode.prototype.addChildAt=function(t,n){var i=this.getChildAt(n-1),o=this.getChildAt(n);e.tree.BaseNode.superClass_.addChildAt.call(this,t,n),t.previousSibling_=i,t.nextSibling_=o,i?i.nextSibling_=t:this.firstChild_=t,o?o.previousSibling_=t:this.lastChild_=t;var r=this.getTree();if(r&&t.setTreeInternal(r),t.setDepth_(this.getDepth()+1),(r=this.getElement())&&(this.updateExpandIcon(),e.utils.aria.setState(r,e.utils.aria.State.EXPANDED,this.getExpanded()),this.getExpanded())){r=this.getChildrenElement(),t.getElement()||t.createDom();var s=t.getElement(),a=o&&o.getElement();r.insertBefore(s,a),this.isInDocument()&&t.enterDocument(),o||(i?i.updateExpandIcon():(e.utils.style.setElementShown(r,!0),this.setExpanded(this.getExpanded())))}},e.tree.BaseNode.prototype.add=function(t){if(t.getParent())throw Error(e.Component.Error.PARENT_UNABLE_TO_BE_SET);this.addChildAt(t,this.getChildCount())},e.tree.BaseNode.prototype.getTree=function(){return null},e.tree.BaseNode.prototype.getDepth=function(){var e=this.depth_;return 0>e&&(e=this.computeDepth_(),this.setDepth_(e)),e},e.tree.BaseNode.prototype.computeDepth_=function(){var e=this.getParent();return e?e.getDepth()+1:0},e.tree.BaseNode.prototype.setDepth_=function(e){if(e!=this.depth_){this.depth_=e;var t=this.getRowElement();if(t){var n=this.getPixelIndent_()+"px";this.isRightToLeft()?t.style.paddingRight=n:t.style.paddingLeft=n}this.forEachChild((function(t){t.setDepth_(e+1)}))}},e.tree.BaseNode.prototype.contains=function(e){for(;e;){if(e==this)return!0;e=e.getParent()}return!1},e.tree.BaseNode.prototype.getChildren=function(){var e=[];return this.forEachChild((function(t){e.push(t)})),e},e.tree.BaseNode.prototype.getFirstChild=function(){return this.getChildAt(0)},e.tree.BaseNode.prototype.getLastChild=function(){return this.getChildAt(this.getChildCount()-1)},e.tree.BaseNode.prototype.getPreviousSibling=function(){return this.previousSibling_},e.tree.BaseNode.prototype.getNextSibling=function(){return this.nextSibling_},e.tree.BaseNode.prototype.isLastSibling=function(){return!this.nextSibling_},e.tree.BaseNode.prototype.isSelected=function(){return this.selected_},e.tree.BaseNode.prototype.select=function(){var e=this.getTree();e&&e.setSelectedItem(this)},e.tree.BaseNode.prototype.selectFirst=function(){var e=this.getTree();e&&this.firstChild_&&e.setSelectedItem(this.firstChild_)},e.tree.BaseNode.prototype.setSelectedInternal=function(t){if(this.selected_!=t){this.selected_=t,this.updateRow();var n=this.getElement();n&&(e.utils.aria.setState(n,e.utils.aria.State.SELECTED,t),t&&(t=this.getTree().getElement(),e.utils.aria.setState(t,e.utils.aria.State.ACTIVEDESCENDANT,this.getId())))}},e.tree.BaseNode.prototype.getExpanded=function(){return this.expanded_},e.tree.BaseNode.prototype.setExpandedInternal=function(e){this.expanded_=e},e.tree.BaseNode.prototype.setExpanded=function(t){var n,i=t!=this.expanded_;this.expanded_=t;var o=this.getTree(),r=this.getElement();this.hasChildren()?(!t&&o&&this.contains(o.getSelectedItem())&&this.select(),r&&((n=this.getChildrenElement())&&(e.utils.style.setElementShown(n,t),e.utils.aria.setState(r,e.utils.aria.State.EXPANDED,t),t&&this.isInDocument()&&!n.hasChildNodes()&&(this.forEachChild((function(e){n.appendChild(e.toDom())})),this.forEachChild((function(e){e.enterDocument()})))),this.updateExpandIcon())):(n=this.getChildrenElement())&&e.utils.style.setElementShown(n,!1),r&&this.updateIcon_(),i&&(t?this.doNodeExpanded():this.doNodeCollapsed())},e.tree.BaseNode.prototype.doNodeExpanded=function(){},e.tree.BaseNode.prototype.doNodeCollapsed=function(){},e.tree.BaseNode.prototype.toggle=function(){this.setExpanded(!this.getExpanded())},e.tree.BaseNode.prototype.isUserCollapsible=function(){return this.isUserCollapsible_},e.tree.BaseNode.prototype.toDom=function(){var e=this.getExpanded()&&this.hasChildren(),t=document.createElement("div");return t.style.backgroundPosition=this.getBackgroundPosition(),e||(t.style.display="none"),e&&this.forEachChild((function(e){t.appendChild(e.toDom())})),(e=document.createElement("div")).id=this.getId(),e.appendChild(this.getRowDom()),e.appendChild(t),e},e.tree.BaseNode.prototype.getPixelIndent_=function(){return Math.max(0,(this.getDepth()-1)*this.config_.indentWidth)},e.tree.BaseNode.prototype.getRowDom=function(){var e=document.createElement("div");return e.className=this.getRowClassName(),e.style["padding-"+(this.isRightToLeft()?"right":"left")]=this.getPixelIndent_()+"px",e.appendChild(this.getIconDom()),e.appendChild(this.getLabelDom()),e},e.tree.BaseNode.prototype.getRowClassName=function(){var e="";return this.isSelected()&&(e=" "+(this.config_.cssSelectedRow||"")),this.config_.cssTreeRow+e},e.tree.BaseNode.prototype.getLabelDom=function(){var e=document.createElement("span");return e.className=this.config_.cssItemLabel||"",e.textContent=this.getText(),e},e.tree.BaseNode.prototype.getIconDom=function(){var e=document.createElement("span");return e.style.display="inline-block",e.className=this.getCalculatedIconClass(),e},e.tree.BaseNode.prototype.getCalculatedIconClass=function(){throw Error("unimplemented abstract method")},e.tree.BaseNode.prototype.getBackgroundPosition=function(){return(this.isLastSibling()?"-100":(this.getDepth()-1)*this.config_.indentWidth)+"px 0"},e.tree.BaseNode.prototype.getElement=function(){var t=e.tree.BaseNode.superClass_.getElement.call(this);return t||(t=document.getElementById(this.getId()),this.setElementInternal(t)),t},e.tree.BaseNode.prototype.getRowElement=function(){var e=this.getElement();return e?e.firstChild:null},e.tree.BaseNode.prototype.getIconElement=function(){var e=this.getRowElement();return e?e.firstChild:null},e.tree.BaseNode.prototype.getLabelElement=function(){var e=this.getRowElement();return e&&e.lastChild?e.lastChild.previousSibling:null},e.tree.BaseNode.prototype.getChildrenElement=function(){var e=this.getElement();return e?e.lastChild:null},e.tree.BaseNode.prototype.getIconClass=function(){return this.iconClass_},e.tree.BaseNode.prototype.getExpandedIconClass=function(){return this.expandedIconClass_},e.tree.BaseNode.prototype.setText=function(e){this.content_=e},e.tree.BaseNode.prototype.getText=function(){return this.content_},e.tree.BaseNode.prototype.updateRow=function(){var e=this.getRowElement();e&&(e.className=this.getRowClassName())},e.tree.BaseNode.prototype.updateExpandIcon=function(){var e=this.getChildrenElement();e&&(e.style.backgroundPosition=this.getBackgroundPosition())},e.tree.BaseNode.prototype.updateIcon_=function(){this.getIconElement().className=this.getCalculatedIconClass()},e.tree.BaseNode.prototype.onMouseDown=function(e){"expand"==e.target.getAttribute("type")&&this.hasChildren()?this.isUserCollapsible_&&this.toggle():(this.select(),this.updateRow())},e.tree.BaseNode.prototype.onClick_=function(e){e.preventDefault()},e.tree.BaseNode.prototype.onKeyDown=function(t){var n=!0;switch(t.keyCode){case e.utils.KeyCodes.RIGHT:if(t.altKey)break;n=this.selectChild();break;case e.utils.KeyCodes.LEFT:if(t.altKey)break;n=this.selectParent();break;case e.utils.KeyCodes.DOWN:n=this.selectNext();break;case e.utils.KeyCodes.UP:n=this.selectPrevious();break;default:n=!1}return n&&t.preventDefault(),n},e.tree.BaseNode.prototype.selectNext=function(){var e=this.getNextShownNode();return e&&e.select(),!0},e.tree.BaseNode.prototype.selectPrevious=function(){var e=this.getPreviousShownNode();return e&&e.select(),!0},e.tree.BaseNode.prototype.selectParent=function(){if(this.hasChildren()&&this.getExpanded()&&this.isUserCollapsible_)this.setExpanded(!1);else{var e=this.getParent(),t=this.getTree();e&&e!=t&&e.select()}return!0},e.tree.BaseNode.prototype.selectChild=function(){return!!this.hasChildren()&&(this.getExpanded()?this.getFirstChild().select():this.setExpanded(!0),!0)},e.tree.BaseNode.prototype.getLastShownDescendant=function(){return this.getExpanded()&&this.hasChildren()?this.getLastChild().getLastShownDescendant():this},e.tree.BaseNode.prototype.getNextShownNode=function(){if(this.hasChildren()&&this.getExpanded())return this.getFirstChild();for(var e,t=this;t!=this.getTree();){if(null!=(e=t.getNextSibling()))return e;t=t.getParent()}return null},e.tree.BaseNode.prototype.getPreviousShownNode=function(){var e=this.getPreviousSibling();if(null!=e)return e.getLastShownDescendant();e=this.getParent();var t=this.getTree();return e==t||this==t?null:e},e.tree.BaseNode.prototype.getConfig=function(){return this.config_},e.tree.BaseNode.prototype.setTreeInternal=function(e){this.tree!=e&&(this.tree=e,this.forEachChild((function(t){t.setTreeInternal(e)})))},e.tree.TreeNode=function(t,n,i){this.toolbox_=t,e.tree.BaseNode.call(this,n,i)},e.utils.object.inherits(e.tree.TreeNode,e.tree.BaseNode),e.tree.TreeNode.prototype.getTree=function(){if(this.tree)return this.tree;var e=this.getParent();return e&&(e=e.getTree())?(this.setTreeInternal(e),e):null},e.tree.TreeNode.prototype.getCalculatedIconClass=function(){var e=this.getExpanded(),t=this.getExpandedIconClass();if(e&&t)return t;if(t=this.getIconClass(),!e&&t)return t;if(t=this.getConfig(),this.hasChildren()){if(e&&t.cssExpandedFolderIcon)return t.cssTreeIcon+" "+t.cssExpandedFolderIcon;if(!e&&t.cssCollapsedFolderIcon)return t.cssTreeIcon+" "+t.cssCollapsedFolderIcon}else if(t.cssFileIcon)return t.cssTreeIcon+" "+t.cssFileIcon;return""},e.tree.TreeNode.prototype.onClick_=function(e){this.hasChildren()&&this.isUserCollapsible()?(this.toggle(),this.select()):this.isSelected()?this.getTree().setSelectedItem(null):this.select(),this.updateRow()},e.tree.TreeNode.prototype.onMouseDown=function(e){},e.tree.TreeNode.prototype.onKeyDown=function(t){if(this.tree.toolbox_.horizontalLayout_){var n={},i=e.utils.KeyCodes.DOWN,o=e.utils.KeyCodes.UP;n[e.utils.KeyCodes.RIGHT]=this.isRightToLeft()?o:i,n[e.utils.KeyCodes.LEFT]=this.isRightToLeft()?i:o,n[e.utils.KeyCodes.UP]=e.utils.KeyCodes.LEFT,n[e.utils.KeyCodes.DOWN]=e.utils.KeyCodes.RIGHT,Object.defineProperties(t,{keyCode:{value:n[t.keyCode]||t.keyCode}})}return e.tree.TreeNode.superClass_.onKeyDown.call(this,t)},e.tree.TreeNode.prototype.onSizeChanged=function(e){this.onSizeChanged_=e},e.tree.TreeNode.prototype.resizeToolbox_=function(){this.onSizeChanged_&&this.onSizeChanged_.call(this.toolbox_)},e.tree.TreeNode.prototype.doNodeExpanded=e.tree.TreeNode.prototype.resizeToolbox_,e.tree.TreeNode.prototype.doNodeCollapsed=e.tree.TreeNode.prototype.resizeToolbox_,e.tree.TreeControl=function(t,n){this.toolbox_=t,e.tree.BaseNode.call(this,"",n),this.setExpandedInternal(!0),this.setSelectedInternal(!0),this.selectedItem_=this},e.utils.object.inherits(e.tree.TreeControl,e.tree.BaseNode),e.tree.TreeControl.prototype.getTree=function(){return this},e.tree.TreeControl.prototype.getToolbox=function(){return this.toolbox_},e.tree.TreeControl.prototype.getDepth=function(){return 0},e.tree.TreeControl.prototype.handleFocus_=function(t){this.focused_=!0,t=this.getElement(),e.utils.dom.addClass(t,"focused"),this.selectedItem_&&this.selectedItem_.select()},e.tree.TreeControl.prototype.handleBlur_=function(t){this.focused_=!1,t=this.getElement(),e.utils.dom.removeClass(t,"focused")},e.tree.TreeControl.prototype.hasFocus=function(){return this.focused_},e.tree.TreeControl.prototype.getExpanded=function(){return!0},e.tree.TreeControl.prototype.setExpanded=function(e){this.setExpandedInternal(e)},e.tree.TreeControl.prototype.getIconElement=function(){var e=this.getRowElement();return e?e.firstChild:null},e.tree.TreeControl.prototype.updateExpandIcon=function(){},e.tree.TreeControl.prototype.getRowClassName=function(){return e.tree.TreeControl.superClass_.getRowClassName.call(this)+" "+this.getConfig().cssHideRoot},e.tree.TreeControl.prototype.getCalculatedIconClass=function(){var e=this.getExpanded(),t=this.getExpandedIconClass();return e&&t?t:(t=this.getIconClass(),!e&&t?t:(t=this.getConfig(),e&&t.cssExpandedRootIcon?t.cssTreeIcon+" "+t.cssExpandedRootIcon:""))},e.tree.TreeControl.prototype.setSelectedItem=function(e){if(e!=this.selectedItem_&&(!this.onBeforeSelected_||this.onBeforeSelected_.call(this.toolbox_,e))){var t=this.getSelectedItem();this.selectedItem_&&this.selectedItem_.setSelectedInternal(!1),(this.selectedItem_=e)&&e.setSelectedInternal(!0),this.onAfterSelected_&&this.onAfterSelected_.call(this.toolbox_,t,e)}},e.tree.TreeControl.prototype.onBeforeSelected=function(e){this.onBeforeSelected_=e},e.tree.TreeControl.prototype.onAfterSelected=function(e){this.onAfterSelected_=e},e.tree.TreeControl.prototype.getSelectedItem=function(){return this.selectedItem_},e.tree.TreeControl.prototype.initAccessibility=function(){e.tree.TreeControl.superClass_.initAccessibility.call(this);var t=this.getElement();e.utils.aria.setRole(t,e.utils.aria.Role.TREE),e.utils.aria.setState(t,e.utils.aria.State.LABELLEDBY,this.getLabelElement().id)},e.tree.TreeControl.prototype.enterDocument=function(){e.tree.TreeControl.superClass_.enterDocument.call(this);var t=this.getElement();t.className=this.getConfig().cssRoot,t.setAttribute("hideFocus","true"),this.attachEvents_(),this.initAccessibility()},e.tree.TreeControl.prototype.exitDocument=function(){e.tree.TreeControl.superClass_.exitDocument.call(this),this.detachEvents_()},e.tree.TreeControl.prototype.attachEvents_=function(){var t=this.getElement();t.tabIndex=0,this.onFocusWrapper_=e.bindEvent_(t,"focus",this,this.handleFocus_),this.onBlurWrapper_=e.bindEvent_(t,"blur",this,this.handleBlur_),this.onClickWrapper_=e.bindEventWithChecks_(t,"click",this,this.handleMouseEvent_),this.onKeydownWrapper_=e.bindEvent_(t,"keydown",this,this.handleKeyEvent_)},e.tree.TreeControl.prototype.detachEvents_=function(){e.unbindEvent_(this.onFocusWrapper_),e.unbindEvent_(this.onBlurWrapper_),e.unbindEvent_(this.onClickWrapper_),e.unbindEvent_(this.onKeydownWrapper_)},e.tree.TreeControl.prototype.handleMouseEvent_=function(e){var t=this.getNodeFromEvent_(e);if(t)switch(e.type){case"mousedown":t.onMouseDown(e);break;case"click":t.onClick_(e)}},e.tree.TreeControl.prototype.handleKeyEvent_=function(t){var n=!1;return(n=this.selectedItem_&&this.selectedItem_.onKeyDown(t)||n)&&(e.utils.style.scrollIntoContainerView(this.selectedItem_.getElement(),this.getElement().parentNode),t.preventDefault()),n},e.tree.TreeControl.prototype.getNodeFromEvent_=function(t){for(var n=t.target;null!=n;){if(t=e.tree.BaseNode.allNodes[n.id])return t;if(n==this.getElement())break;n=n.parentNode}return null},e.tree.TreeControl.prototype.createNode=function(t){return new e.tree.TreeNode(this.toolbox_,t||"",this.getConfig())},e.FieldTextInput=function(t,n,i){this.spellcheck_=!0,null==t&&(t=""),e.FieldTextInput.superClass_.constructor.call(this,t,n,i)},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.FONTSIZE=11,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.doClassValidation_=function(e){return null==e?null:String(e)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new e.Events.BlockChange(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(e){this.isTextValid_=!0,this.value_=e,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.render_=function(){e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.isTextValid_?(e.utils.dom.removeClass(this.htmlInput_,"blocklyInvalidInput"),e.utils.aria.setState(this.htmlInput_,"invalid",!1)):(e.utils.dom.addClass(this.htmlInput_,"blocklyInvalidInput"),e.utils.aria.setState(this.htmlInput_,"invalid",!0)))},e.FieldTextInput.prototype.setSpellcheck=function(e){e!=this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t){this.workspace_=this.sourceBlock_.workspace,!(t=t||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){var t=this;e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),(function(e){t.setValue(e)}))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus(),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var i=e.FieldTextInput.FONTSIZE*this.workspace_.scale+"pt";return t.style.fontSize=i,n.style.fontSize=i,n.style.borderRadius=e.FieldTextInput.BORDERRADIUS*this.workspace_.scale+"px",t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize=""},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.bindEventWithChecks_(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.bindEventWithChecks_(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){e.unbindEvent_(this.onKeyDownWrapper_),e.unbindEvent_(this.onKeyInputWrapper_)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.htmlInput_.value=this.htmlInput_.defaultValue,e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(e){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox_();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",(n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top)).y+=1,e.utils.userAgent.GECKO&&e.WidgetDiv.DIV.style.top&&(--n.x,--n.y),e.utils.userAgent.WEBKIT&&(n.y-=3),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.numberValidator=function(e){return console.warn("Blockly.FieldTextInput.numberValidator is deprecated. Use Blockly.FieldNumber instead."),null===e?null:(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,""),e=Number(e||0),isNaN(e)?null:String(e))},e.FieldTextInput.nonnegativeIntegerValidator=function(t){return(t=e.FieldTextInput.numberValidator(t))&&(t=String(Math.max(0,Math.floor(t)))),t},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(e){return String(e)},e.FieldTextInput.prototype.getValueFromEditorText_=function(e){return e},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,i){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t||0,n,i)},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement("tspan",{},null),this.symbol_.appendChild(document.createTextNode("°")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(){e.FieldAngle.superClass_.showEditor_.call(this,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD);var t=this.dropdownCreate_();e.DropDownDiv.getContentDiv().appendChild(t),t=(t=this.sourceBlock_.getColourBorder()).colourBorder||t.colourLight,e.DropDownDiv.setColour(this.sourceBlock_.getColour(),t),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement("svg",{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement("circle",{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement("path",{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement("line",{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var i=0;360>i;i+=15)e.utils.dom.createSvgElement("line",{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(0==i%45?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+i+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);return this.clickWrapper_=e.bindEventWithChecks_(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.bindEventWithChecks_(n,"click",this,this.onMouseMove,!0,!0),this.moveSurfaceWrapper_=e.bindEventWithChecks_(n,"mousemove",this,this.onMouseMove,!0,!0),t},e.FieldAngle.prototype.dropdownDispose_=function(){e.unbindEvent_(this.clickWrapper_),e.unbindEvent_(this.clickSurfaceWrapper_),e.unbindEvent_(this.moveSurfaceWrapper_)},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),i=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/i),isNaN(n)||(n=e.utils.math.toDegrees(n),0>i?n+=180:0<t&&(n+=360),n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n),this.displayMouseOrKeyboardValue_(n))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(e){this.round_&&(e=Math.round(e/this.round_)*this.round_),(e=this.wrapValue_(e))!=this.value_&&this.setEditorValue_(e)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var i=e.FieldAngle.HALF,o=e.FieldAngle.HALF;if(!isNaN(n)){var r=Number(this.clockwise_),s=e.utils.math.toRadians(this.offset_),a=Math.cos(s)*e.FieldAngle.RADIUS,l=Math.sin(s)*-e.FieldAngle.RADIUS;r&&(n=2*s-n),i+=Math.cos(n)*e.FieldAngle.RADIUS,o-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-s)/Math.PI)%2),r&&(n=1-n),t.push(" l ",a,",",l," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",r," ",i,",",o," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",i),this.line_.setAttribute("y2",o)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var i=this.getValue();this.displayMouseOrKeyboardValue_(i+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue_(e)},e.FieldAngle.prototype.wrapValue_=function(e){return 0>(e%=360)&&(e+=360),e>this.wrap_&&(e-=360),e},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,i){this.checkChar_=null,null==t&&(t="FALSE"),e.FieldCheckbox.superClass_.constructor.call(this,t,n,i),this.size_.width=e.FieldCheckbox.WIDTH},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.WIDTH=15,e.FieldCheckbox.CHECK_CHAR="✓",e.FieldCheckbox.CHECK_X_OFFSET=e.Field.DEFAULT_TEXT_OFFSET-3,e.FieldCheckbox.CHECK_Y_OFFSET=14,e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.isDirty_=!1,e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),this.textElement_.setAttribute("x",e.FieldCheckbox.CHECK_X_OFFSET),this.textElement_.setAttribute("y",e.FieldCheckbox.CHECK_Y_OFFSET),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textContent_.nodeValue=this.checkChar_||e.FieldCheckbox.CHECK_CHAR,this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.textContent_&&(this.textContent_.nodeValue=t||e.FieldCheckbox.CHECK_CHAR)},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(e){return!0===e||"TRUE"===e?"TRUE":!1===e||"FALSE"===e?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(e){return"string"==typeof e?"TRUE"==e:!!e},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,i){e.FieldColour.superClass_.constructor.call(this,t||e.FieldColour.COLOURS[0],n,i),this.size_=new e.utils.Size(e.FieldColour.DEFAULT_WIDTH,e.FieldColour.DEFAULT_HEIGHT)},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.DEFAULT_WIDTH=26,e.FieldColour.DEFAULT_HEIGHT=e.Field.BORDER_RECT_DEFAULT_HEIGHT,e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.createBorderRect_(),this.borderRect_.style.fillOpacity=1,this.borderRect_.style.fill=this.value_},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(e){this.value_=e,this.borderRect_&&(this.borderRect_.style.fill=e)},e.FieldColour.prototype.getText=function(){var e=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]),e},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(e,t){return this.colours_=e,t&&(this.titles_=t),this},e.FieldColour.prototype.setColumns=function(e){return this.columns_=e,this},e.FieldColour.prototype.showEditor_=function(){this.picker_=this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus()},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.onBlocklyAction=function(t){if(this.picker_){if(t===e.navigation.ACTION_PREVIOUS)return this.moveHighlightBy_(0,-1),!0;if(t===e.navigation.ACTION_NEXT)return this.moveHighlightBy_(0,1),!0;if(t===e.navigation.ACTION_OUT)return this.moveHighlightBy_(-1,0),!0;if(t===e.navigation.ACTION_IN)return this.moveHighlightBy_(1,0),!0}return e.FieldColour.superClass_.onBlocklyAction.call(this,t)},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var i=this.colours_||e.FieldColour.COLOURS,o=this.columns_||e.FieldColour.COLUMNS,r=this.highlightedIndex_%o,s=Math.floor(this.highlightedIndex_/o);r+=t,s+=n,0>t?0>r&&0<s?(r=o-1,s--):0>r&&(r=0):0<t?r>o-1&&s<Math.floor(i.length/o)-1?(r=0,s++):r>o-1&&r--:0>n?0>s&&(s=0):0<n&&s>Math.floor(i.length/o)-1&&(s=Math.floor(i.length/o)-1),this.setHighlightedCell_(this.picker_.childNodes[s].childNodes[r],s*o+r)},e.FieldColour.prototype.onMouseMove_=function(e){var t=(e=e.target)&&e.getAttribute("data-index");null!==t&&t!==this.highlightedIndex_&&this.setHighlightedCell_(e,Number(t))},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus()},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var i=this.getHighlighted_();i&&e.utils.dom.removeClass(i,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,i=this.titles_||e.FieldColour.TITLES,o=this.getValue(),r=document.createElement("table");r.className="blocklyColourTable",r.tabIndex=0,r.dir="ltr",e.utils.aria.setRole(r,e.utils.aria.Role.GRID),e.utils.aria.setState(r,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(r,"rowcount",Math.floor(n.length/t)),e.utils.aria.setState(r,"colcount",t);for(var s,a=0;a<n.length;a++){0==a%t&&(s=document.createElement("tr"),e.utils.aria.setRole(s,e.utils.aria.Role.ROW),r.appendChild(s));var l=document.createElement("td");s.appendChild(l),l.label=n[a],l.title=i[a]||n[a],l.id=e.utils.IdGenerator.getNextUniqueId(),l.setAttribute("data-index",a),e.utils.aria.setRole(l,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(l,e.utils.aria.State.LABEL,n[a]),e.utils.aria.setState(l,e.utils.aria.State.SELECTED,n[a]==o),l.style.backgroundColor=n[a],n[a]==o&&(l.className="blocklyColourSelected",this.highlightedIndex_=a)}return this.onClickWrapper_=e.bindEventWithChecks_(r,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.bindEventWithChecks_(r,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.bindEventWithChecks_(r,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.bindEventWithChecks_(r,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.bindEventWithChecks_(r,"keydown",this,this.onKeyDown_),r},e.FieldColour.prototype.dropdownDispose_=function(){e.unbindEvent_(this.onClickWrapper_),e.unbindEvent_(this.onMouseMoveWrapper_),e.unbindEvent_(this.onMouseEnterWrapper_),e.unbindEvent_(this.onMouseLeaveWrapper_),e.unbindEvent_(this.onKeyDownWrapper_),this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,i){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.generatedOptions_=null,this.selectedIndex_=0,this.trimOptions_(),t=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,t[1],n,i),this.selectedMenuItem_=this.imageElement_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"▼":"▾",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){e.FieldDropdown.superClass_.initView.call(this),this.imageElement_=e.utils.dom.createSvgElement("image",{y:e.FieldDropdown.IMAGE_Y_OFFSET},this.fieldGroup_),this.arrow_=e.utils.dom.createSvgElement("tspan",{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.showEditor_=function(){this.menu_=this.dropdownCreate_(),this.menu_.render(e.DropDownDiv.getContentDiv()),e.utils.dom.addClass(this.menu_.getElement(),"blocklyDropdownMenu"),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&e.utils.style.scrollIntoContainerView(this.selectedMenuItem_.getElement(),this.menu_.getElement())},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRightToLeft(this.sourceBlock_.RTL),t.setRole("listbox");var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var i=0;i<n.length;i++){var o=n[i][0],r=n[i][1];if("object"==typeof o){var s=new Image(o.width,o.height);s.src=o.src,s.alt=o.alt||"",o=s}(o=new e.MenuItem(o)).setRole("option"),o.setRightToLeft(this.sourceBlock_.RTL),o.setValue(r),o.setCheckable(!0),t.addChild(o,!0),o.setChecked(r==this.value_),r==this.value_&&(this.selectedMenuItem_=o),o.onAction(this.handleMenuActionEvent_,this)}return e.utils.aria.setState(t.getElement(),e.utils.aria.State.ACTIVEDESCENDANT,this.selectedMenuItem_?this.selectedMenuItem_.getId():""),t},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_.dispose(),this.menu_=null},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected=function(e,t){this.setValue(t.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){this.suffixField=this.prefixField=null;var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,i=0;i<t.length;i++){var o=t[i][0];"string"==typeof o?t[i][0]=e.utils.replaceMessageReferences(o):(null!=o.alt&&(t[i][0].alt=e.utils.replaceMessageReferences(o.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],i=0;i<t.length;i++)n.push(t[i][0]);i=e.utils.string.shortestStringLength(n),o=e.utils.string.commonWordPrefix(n,i);var r=e.utils.string.commonWordSuffix(n,i);!o&&!r||i<=o+r||(o&&(this.prefixField=n[0].substring(0,o-1)),r&&(this.suffixField=n[0].substr(1-r)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,o,r))}}},e.FieldDropdown.applyTrim_=function(e,t,n){for(var i=[],o=0;o<e.length;o++){var r=e[o][0],s=e[o][1];r=r.substring(t,r.length-n),i[o]=[r,s]}return i},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(e){for(var t,n=!1,i=this.getOptions(!0),o=0;t=i[o];o++)if(t[1]==e){n=!0;break}return n?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var n,i=0;n=t[i];i++)n[1]==this.value_&&(this.selectedIndex_=i)},e.FieldDropdown.prototype.updateColour=function(){this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.getColourShadow():this.arrow_.style.fill=this.sourceBlock_.getColour())},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var e=this.getOptions(!0);(e=0<=this.selectedIndex_&&e[this.selectedIndex_][0])&&"object"==typeof e?this.renderSelectedImage_(e):this.renderSelectedText_(),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("width",this.size_.width)},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=e.utils.dom.getTextWidth(this.arrow_),i=Number(t.width);this.size_.height=Number(t.height)+e.FieldDropdown.IMAGE_Y_PADDING,this.size_.width=i+n+e.Field.X_PADDING,this.sourceBlock_.RTL?(t=e.Field.DEFAULT_TEXT_OFFSET-1,this.imageElement_.setAttribute("x",e.Field.DEFAULT_TEXT_OFFSET+n),this.textElement_.setAttribute("x",t)):(t=i+n+e.Field.DEFAULT_TEXT_OFFSET+1,this.textElement_.setAttribute("text-anchor","end"),this.textElement_.setAttribute("x",t),this.imageElement_.setAttribute("x",e.Field.DEFAULT_TEXT_OFFSET))},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),this.textElement_.setAttribute("text-anchor","start"),this.textElement_.setAttribute("x",e.Field.DEFAULT_TEXT_OFFSET),this.size_.height=e.Field.BORDER_RECT_DEFAULT_HEIGHT,this.size_.width=e.utils.dom.getTextWidth(this.textElement_)+e.Field.X_PADDING},e.FieldDropdown.prototype.getText_=function(){if(0>this.selectedIndex_)return null;var e=this.getOptions(!0)[this.selectedIndex_][0];return"object"==typeof e?e.alt:e},e.FieldDropdown.validateOptions_=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var t=!1,n=0;n<e.length;++n){var i=e[n];Array.isArray(i)?"string"!=typeof i[1]?(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option id must be a string. Found "+i[1]+" in: ",i)):i[0]&&"string"!=typeof i[0]&&"string"!=typeof i[0].src&&(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must have a string label or image description. Found"+i[0]+" in: ",i)):(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must be an array. Found: ",i))}if(t)throw TypeError("Found invalid FieldDropdown options.")},e.FieldDropdown.prototype.onBlocklyAction=function(t){if(this.menu_){if(t===e.navigation.ACTION_PREVIOUS)return this.menu_.highlightPrevious(),!0;if(t===e.navigation.ACTION_NEXT)return this.menu_.highlightNext(),!0}return e.FieldDropdown.superClass_.onBlocklyAction.call(this,t)},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldImage=function(t,n,i,o,r,s,a){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),i=Number(e.utils.replaceMessageReferences(i)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(i)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=i||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t||"",null,a),a||(this.flipRtl_=!!s,this.altText_=e.utils.replaceMessageReferences(o)||""),this.size_=new e.utils.Size(n,i+e.FieldImage.Y_PADDING),this.imageHeight_=i,this.clickHandler_=null,"function"==typeof r&&(this.clickHandler_=r)},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement("image",{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_)},e.FieldImage.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:e},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_||"")},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(e){e!=this.altText_&&(this.altText_=e||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(e){this.clickHandler_=e},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldLabelSerializable=function(t,n,i){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,i)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldMultilineInput=function(t,n,i){null==t&&(t=""),e.FieldMultilineInput.superClass_.constructor.call(this,t,n,i)},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.LINE_HEIGHT=20,e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement("g",{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.value_;if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var i=0;i<n.length;i++){var o=n[i];o.length>this.maxDisplayLength&&(o=o.substring(0,this.maxDisplayLength-4)+"..."),t+=o=o.replace(/\s/g,e.Field.NBSP),i!==n.length-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="‏"),t},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=e.Field.Y_PADDING/2,i=0,o=0;o<t.length;o++)e.utils.dom.createSvgElement("text",{class:"blocklyText blocklyMultilineText",x:e.Field.DEFAULT_TEXT_OFFSET,y:i+n,dy:e.FieldMultilineInput.LINE_HEIGHT/2},this.textGroup_).appendChild(document.createTextNode(t[o])),i+=e.FieldMultilineInput.LINE_HEIGHT;this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.isTextValid_?(e.utils.dom.removeClass(this.htmlInput_,"blocklyInvalidInput"),e.utils.aria.setState(this.htmlInput_,"invalid",!1)):(e.utils.dom.addClass(this.htmlInput_,"blocklyInvalidInput"),e.utils.aria.setState(this.htmlInput_,"invalid",!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,i=0,o=0;o<t.length;o++){var r=e.utils.dom.getTextWidth(t[o]);r>n&&(n=r),i+=e.FieldMultilineInput.LINE_HEIGHT}this.borderRect_&&(n+=e.Field.X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",i)),this.size_.width=n,this.size_.height=i},e.FieldMultilineInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox_();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.scale,i=document.createElement("textarea");i.className="blocklyHtmlInput blocklyHtmlTextAreaInput",i.setAttribute("spellcheck",this.spellcheck_);var o=e.FieldTextInput.FONTSIZE*n+"pt";return t.style.fontSize=o,i.style.fontSize=o,i.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",o=e.Field.DEFAULT_TEXT_OFFSET*n,i.style.paddingLeft=o+"px",i.style.width="calc(100% - "+o+"px)",i.style.lineHeight=e.FieldMultilineInput.LINE_HEIGHT*n+"px",t.appendChild(i),i.value=i.defaultValue=this.getEditorText_(this.value_),i.untypedDefaultValue_=this.value_,i.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(i),i},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,i,o,r,s){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t||0,r,s),s||this.setConstraints(n,i,o)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(e,t,n){this.setMinInternal_(e),this.setMaxInternal_(t),this.setPrecisionInternal_(n),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(e){this.setMinInternal_(e),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(e){null==e?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(e){this.setMaxInternal_(e),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(e){null==e?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(e){this.setPrecisionInternal_(e),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(e){null==e?this.precision_=0:(e=Number(e),isNaN(e)||(this.precision_=e));var t=this.precision_.toString(),n=t.indexOf(".");this.decimalPlaces_=-1==n?e?0:null:t.length-n-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(e){return null===e?null:(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,""),e=Number(e||0),isNaN(e)?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(e=Number(e.toFixed(this.decimalPlaces_))),e))},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,i,o,r){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName=t||"",this.size_=new e.utils.Size(0,e.BlockSvg.MIN_BLOCK_Y),r&&this.configure_(r),n&&this.setValidator(n),r||this.setTypes_(i,o)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.workspace_=null,e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);e.Events.disable(),this.setValue(t.getId()),e.Events.enable()}},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),i=t.textContent,o=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,i,o),null!=o&&o!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?(n=n.type,this.typeIsAllowed_(n)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(e){var t=this.getVariableTypes_();if(!t)return!0;for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e},e.FieldVariable.prototype.setTypes_=function(e,t){var n=t||"";if(null==e||null==e)var i=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");i=e;for(var o=!1,r=0;r<i.length;r++)i[r]==n&&(o=!0);if(!o)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=i},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var i=this.getVariableTypes_(),o=0;o<i.length;o++){var r=this.sourceBlock_.workspace.getVariablesOfType(i[o]);n=n.concat(r)}for(n.sort(e.VariableModel.compareByName),i=[],o=0;o<n.length;o++)i[o]=[n[o].name,n[o].getId()];return i.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&i.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),i},e.FieldVariable.prototype.onItemSelected=function(t,n){var i=n.getValue();if(this.sourceBlock_&&this.sourceBlock_.workspace){if(i==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(i==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(i)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.FlyoutCursor=function(){e.FlyoutCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.FlyoutCursor,e.Cursor),e.FlyoutCursor.prototype.next=function(){var e=this.getCurNode();return e?((e=e.next())&&this.setCurNode(e),e):null},e.FlyoutCursor.prototype.in=function(){return null},e.FlyoutCursor.prototype.prev=function(){var e=this.getCurNode();return e?((e=e.prev())&&this.setCurNode(e),e):null},e.FlyoutCursor.prototype.out=function(){return null},e.Flyout=function(t){t.getMetrics=this.getMetrics_.bind(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.isFlyout=!0,this.workspace_.setCursor(new e.FlyoutCursor),this.workspace_.setMarker(new e.MarkerCursor),this.RTL=!!t.RTL,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH},e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_PADDING=2,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement("path",{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyout","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace_=t,this.workspace_.targetWorkspace=t,this.scrollbar_=new e.Scrollbar(this.workspace_,this.horizontalLayout_,!1,"blocklyFlyoutScrollbar"),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace_.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace_.getGesture.bind(this.targetWorkspace_),this.workspace_.variableMap_=this.targetWorkspace_.getVariableMap(),this.workspace_.createPotentialVariableMap()},e.Flyout.prototype.dispose=function(){this.hide(),e.unbindEvent_(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace_.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.scrollbar_&&(this.scrollbar_.dispose(),this.scrollbar_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace_=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(e){var t=e!=this.isVisible();this.isVisible_=e,t&&this.updateDisplay_()},e.Flyout.prototype.setContainerVisible=function(e){var t=e!=this.containerVisible_;this.containerVisible_=e,t&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var e=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=e?"block":"none",this.scrollbar_.setContainerVisible(e)},e.Flyout.prototype.positionAt_=function(t,n,i,o){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+i+"px,"+o+"px)"):this.svgGroup_.setAttribute("transform","translate("+i+","+o+")"),this.scrollbar_&&(this.scrollbar_.setOrigin(i,o),this.scrollbar_.resize(),this.scrollbar_.setPosition_(this.scrollbar_.position_.x,this.scrollbar_.position_.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var t,n=0;t=this.listeners_[n];n++)e.unbindEvent_(t);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){if(this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw TypeError("Result of toolbox category callback must be an array.")}this.setVisible(!0);var n=[],i=[];this.permanentlyDisabled_.length=0;for(var o,r=this.horizontalLayout_?this.GAP_X:this.GAP_Y,s=0;o=t[s];s++)if(o.tagName)switch(o.tagName.toUpperCase()){case"BLOCK":var a=e.Xml.domToBlock(o,this.workspace_);a.isEnabled()||this.permanentlyDisabled_.push(a),n.push({type:"block",block:a}),o=parseInt(o.getAttribute("gap"),10),i.push(isNaN(o)?r:o);break;case"SEP":o=parseInt(o.getAttribute("gap"),10),!isNaN(o)&&0<i.length?i[i.length-1]=o:i.push(r);break;case"LABEL":case"BUTTON":if(a="LABEL"==o.tagName.toUpperCase(),!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");o=new e.FlyoutButton(this.workspace_,this.targetWorkspace_,o,a),n.push({type:"button",button:o}),i.push(r)}this.layout_(n,i),this.listeners_.push(e.bindEventWithChecks_(this.svgBackground_,"mouseover",this,(function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)e.removeSelect()}))),this.horizontalLayout_?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.clearOldBlocks_=function(){for(var t,n=this.workspace_.getTopBlocks(!1),i=0;t=n[i];i++)t.workspace==this.workspace_&&t.dispose(!1,!1);for(i=0;i<this.mats_.length;i++)(n=this.mats_[i])&&e.utils.dom.removeNode(n);for(i=this.mats_.length=0;n=this.buttons_[i];i++)n.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,i){this.listeners_.push(e.bindEventWithChecks_(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.bindEventWithChecks_(i,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.bindEvent_(t,"mouseover",n,n.addSelect)),this.listeners_.push(e.bindEvent_(t,"mouseout",n,n.removeSelect)),this.listeners_.push(e.bindEvent_(i,"mouseover",n,n.addSelect)),this.listeners_.push(e.bindEvent_(i,"mouseout",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(e){var t=this;return function(n){var i=t.targetWorkspace_.getGesture(n);i&&(i.setStartBlock(e),i.handleFlyoutStart(n,t))}},e.Flyout.prototype.onMouseDown_=function(e){var t=this.targetWorkspace_.getGesture(e);t&&t.handleFlyoutStart(e,this)},e.Flyout.prototype.isBlockCreatable_=function(e){return e.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var i=this.targetWorkspace_.getAllVariables();this.targetWorkspace_.setResizesEnabled(!1);try{n=this.placeNewBlock_(t),e.hideChaff()}finally{e.Events.enable()}if(t=e.Variables.getAddedVariables(this.targetWorkspace_,i),e.Events.isEnabled())for(e.Events.setGroup(!0),e.Events.fire(new e.Events.Create(n)),i=0;i<t.length;i++)e.Events.fire(new e.Events.VarCreate(t[i]));return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,i){var o=t.createDom();t.moveTo(n,i),t.show(),this.listeners_.push(e.bindEventWithChecks_(o,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,i,o,r){return(n=e.utils.dom.createSvgElement("rect",{"fill-opacity":0,x:n,y:i,height:o.height,width:o.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[r]=n},e.Flyout.prototype.moveRectToBlock_=function(e,t){var n=t.getHeightWidth();e.setAttribute("width",n.width),e.setAttribute("height",n.height);var i=t.getRelativeToSurfaceXY();e.setAttribute("y",i.y),e.setAttribute("x",this.RTL?i.x-n.width:i.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var t,n=this.workspace_.getTopBlocks(!1),i=0;t=n[i];i++)if(-1==this.permanentlyDisabled_.indexOf(t))for(var o=this.targetWorkspace_.isCapacityAvailable(e.utils.getBlockTypeCounts(t));t;)t.setEnabled(o),t=t.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.scrollbar_&&this.scrollbar_.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace_;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var i=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(i=e.Xml.domToBlock(i,n)).getSvgRoot())throw Error("block is not rendered.");var o=n.getOriginOffsetInPixels(),r=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(r,t),(o=e.utils.Coordinate.difference(t,o)).scale(1/n.scale),i.moveBy(o.x,o.y),i},e.FlyoutButton=function(t,n,i,o){this.workspace_=t,this.targetWorkspace_=n,this.text_=i.getAttribute("text"),this.position_=new e.utils.Coordinate(0,0),this.isLabel_=o,this.callbackKey_=i.getAttribute("callbackKey")||i.getAttribute("callbackkey"),this.cssClass_=i.getAttribute("web-class")||null},e.FlyoutButton.MARGIN=5,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.onMouseUpWrapper_=null,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement("g",{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement("rect",{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement("rect",{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var i=e.utils.dom.createSvgElement("text",{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);return i.textContent=e.utils.replaceMessageReferences(this.text_),this.isLabel_&&(this.svgText_=i,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutText","fill")),this.width=e.utils.dom.getTextWidth(i),this.height=20,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),i.setAttribute("x",this.width/2),i.setAttribute("y",this.height-e.FlyoutButton.MARGIN),this.updateTransform_(),this.onMouseUpWrapper_=e.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(e,t){this.position_.x=e,this.position_.y=t,this.updateTransform_()},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.unbindEvent_(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(e){(e=this.targetWorkspace_.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,},.blocklyFlyoutLabelText {,fill: #000;,}".split(",")),e.HorizontalFlyout=function(t){t.getMetrics=this.getMetrics_.bind(this),t.setMetrics=this.setMetrics_.bind(this),e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout_=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}var n=this.SCROLLBAR_PADDING,i=this.SCROLLBAR_PADDING;this.toolboxPosition_==e.TOOLBOX_AT_BOTTOM&&(n=0);var o=this.height_;return this.toolboxPosition_==e.TOOLBOX_AT_TOP&&(o-=this.SCROLLBAR_PADDING),{viewHeight:o,viewWidth:this.width_-2*this.SCROLLBAR_PADDING,contentHeight:(t.height+2*this.MARGIN)*this.workspace_.scale,contentWidth:(t.width+2*this.MARGIN)*this.workspace_.scale,viewTop:-this.workspace_.scrollY,viewLeft:-this.workspace_.scrollX,contentTop:0,contentLeft:0,absoluteTop:n,absoluteLeft:i}},e.HorizontalFlyout.prototype.setMetrics_=function(e){var t=this.getMetrics_();t&&("number"==typeof e.x&&(this.workspace_.scrollX=-t.contentWidth*e.x),this.workspace_.translate(this.workspace_.scrollX+t.absoluteLeft,this.workspace_.scrollY+t.absoluteTop))},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()){var t=this.targetWorkspace_.getMetrics();t&&(this.width_=t.viewWidth,this.setBackgroundPath_(t.viewWidth-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,0,this.targetWorkspace_.toolboxPosition==this.toolboxPosition_?t.toolboxHeight?this.toolboxPosition_==e.TOOLBOX_AT_TOP?t.toolboxHeight:t.viewHeight-this.height_:this.toolboxPosition_==e.TOOLBOX_AT_TOP?0:t.viewHeight:this.toolboxPosition_==e.TOOLBOX_AT_TOP?0:t.viewHeight+t.absoluteTop-this.height_))}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var i=this.toolboxPosition_==e.TOOLBOX_AT_TOP,o=["M 0,"+(i?0:this.CORNER_RADIUS)];i?(o.push("h",t+2*this.CORNER_RADIUS),o.push("v",n),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-1*t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",n),o.push("h",-t-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.scrollbar_.set(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t),i=n.x||n.y;i&&(i=(n=this.getMetrics_()).viewLeft+i,i=Math.min(i,n.contentWidth-n.viewWidth),i=Math.max(i,0),this.scrollbar_.set(i),e.WidgetDiv.hide()),t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(e,t){this.workspace_.scale=this.targetWorkspace_.scale;var n=this.MARGIN,i=n+this.tabWidth_;this.RTL&&(e=e.reverse());for(var o,r=0;o=e[r];r++)if("block"==o.type){for(var s,a=(o=o.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;o.render(),a=o.getSvgRoot(),l=o.getHeightWidth(),s=o.outputConnection?this.tabWidth_:0,s=this.RTL?i+l.width:i-s,o.moveBy(s,n),s=this.createRect_(o,s,n,l,r),i+=l.width+t[r],this.addBlockListeners_(a,o,s)}else"button"==o.type&&(this.initFlyoutButton_(o.button,i,n),i+=o.button.width+t[r])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.TOOLBOX_AT_TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,-1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace_.scale;for(var t,n=0,i=this.workspace_.getTopBlocks(!1),o=0;t=i[o];o++)n=Math.max(n,t.getHeightWidth().height);if(n+=1.5*this.MARGIN,n*=this.workspace_.scale,n+=e.Scrollbar.scrollbarThickness,this.height_!=n){for(o=0;t=i[o];o++)t.flyoutRect_&&this.moveRectToBlock_(t.flyoutRect_,t);this.height_=n,this.position()}},e.VerticalFlyout=function(t){t.getMetrics=this.getMetrics_.bind(this),t.setMetrics=this.setMetrics_.bind(this),e.VerticalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout_=!1},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var e=this.workspace_.getCanvas().getBBox()}catch(t){e={height:0,y:0,width:0,x:0}}var t=this.SCROLLBAR_PADDING,n=this.height_-2*this.SCROLLBAR_PADDING,i=this.width_;return this.RTL||(i-=this.SCROLLBAR_PADDING),{viewHeight:n,viewWidth:i,contentHeight:e.height*this.workspace_.scale+2*this.MARGIN,contentWidth:e.width*this.workspace_.scale+2*this.MARGIN,viewTop:-this.workspace_.scrollY+e.y,viewLeft:-this.workspace_.scrollX,contentTop:e.y,contentLeft:e.x,absoluteTop:t,absoluteLeft:0}},e.VerticalFlyout.prototype.setMetrics_=function(e){var t=this.getMetrics_();t&&("number"==typeof e.y&&(this.workspace_.scrollY=-t.contentHeight*e.y),this.workspace_.translate(this.workspace_.scrollX+t.absoluteLeft,this.workspace_.scrollY+t.absoluteTop))},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()){var t=this.targetWorkspace_.getMetrics();t&&(this.height_=t.viewHeight,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.viewHeight-2*this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,this.targetWorkspace_.toolboxPosition==this.toolboxPosition_?t.toolboxWidth?this.toolboxPosition_==e.TOOLBOX_AT_LEFT?t.toolboxWidth:t.viewWidth-this.width_:this.toolboxPosition_==e.TOOLBOX_AT_LEFT?0:t.viewWidth:this.toolboxPosition_==e.TOOLBOX_AT_LEFT?0:t.viewWidth+t.absoluteLeft-this.width_,0))}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var i=this.toolboxPosition_==e.TOOLBOX_AT_RIGHT,o=t+this.CORNER_RADIUS;(o=["M "+(i?o:0)+",0"]).push("h",i?-t:t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,i?0:1,i?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,n)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,i?0:1,i?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",i?t:-t),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.scrollbar_.set(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var i=this.getMetrics_();n=i.viewTop-i.contentTop+n.y,n=Math.min(n,i.contentHeight-i.viewHeight),n=Math.max(n,0),this.scrollbar_.set(n),e.WidgetDiv.hide()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(e,t){this.workspace_.scale=this.targetWorkspace_.scale;for(var n,i=this.MARGIN,o=this.RTL?i:i+this.tabWidth_,r=0;n=e[r];r++)if("block"==n.type){for(var s,a=(n=n.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;n.render(),a=n.getSvgRoot(),l=n.getHeightWidth(),s=n.outputConnection?o-this.tabWidth_:o,n.moveBy(s,i),s=this.createRect_(n,this.RTL?s-l.width:s,i,l,r),this.addBlockListeners_(a,n,s),i+=l.height+t[r]}else"button"==n.type&&(this.initFlyoutButton_(n.button,o,i),i+=n.button.height+t[r])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.TOOLBOX_AT_LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):(e.utils.userAgent.GECKO&&this.targetWorkspace_&&this.targetWorkspace_.isMutator&&(t=this.targetWorkspace_.svgGroup_.getBoundingClientRect().x,10>Math.abs(t-n)&&(n+=this.leftEdge_*this.targetWorkspace_.options.parentWorkspace.scale)),new e.utils.Rect(-1e9,1e9,n,1e9))},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace_.scale;for(var t,n=0,i=this.workspace_.getTopBlocks(!1),o=0;t=i[o];o++){var r=t.getHeightWidth().width;t.outputConnection&&(r-=this.tabWidth_),n=Math.max(n,r)}for(o=0;t=this.buttons_[o];o++)n=Math.max(n,t.width);if(n+=1.5*this.MARGIN+this.tabWidth_,n*=this.workspace_.scale,n+=e.Scrollbar.scrollbarThickness,this.width_!=n){for(o=0;t=i[o];o++){if(this.RTL){r=t.getRelativeToSurfaceXY().x;var s=n/this.workspace_.scale-this.MARGIN;t.outputConnection||(s-=this.tabWidth_),t.moveBy(s-r,0)}t.flyoutRect_&&this.moveRectToBlock_(t.flyoutRect_,t)}if(this.RTL)for(o=0;t=this.buttons_[o];o++)i=t.getPosition().y,t.moveTo(n/this.workspace_.scale-t.width-this.MARGIN-this.tabWidth_,i);this.width_=n,this.position()}},e.Generator=function(e){this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.NAME_TYPE="generated_function",e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var i,o=0;i=t[o];o++){var r=this.blockToCode(i);Array.isArray(r)&&(r=r[0]),r&&(i.outputConnection&&(r=this.scrubNakedValue(r),this.STATEMENT_PREFIX&&!i.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,i)+r),this.STATEMENT_SUFFIX&&!i.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,i))),n.push(r))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(e,t){return t+e.replace(/(?!\n$)\n/g,"\n"+t)},e.Generator.prototype.allNestedComments=function(e){var t=[];e=e.getDescendants(!0);for(var n=0;n<e.length;n++){var i=e[n].getCommentText();i&&t.push(i)}return t.length&&t.push(""),t.join("\n")},e.Generator.prototype.blockToCode=function(e,t){if(!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());var n=this[e.type];if("function"!=typeof n)throw Error('Language "'+this.name_+'" does not know how to generate  code for block type "'+e.type+'".');if(n=n.call(e,e),Array.isArray(n)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,n[0],t),n[1]]}if("string"==typeof n)return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,e)+n),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,n,t);if(null===n)return"";throw SyntaxError("Invalid code generated: "+n)},e.Generator.prototype.valueToCode=function(e,t,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+e.type);var i=e.getInputTargetBlock(t);if(!i)return"";if(""===(t=this.blockToCode(i)))return"";if(!Array.isArray(t))throw TypeError("Expecting tuple from value block: "+i.type);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+i.type);if(!e)return"";i=!1;var o=Math.floor(n),r=Math.floor(t);if(o<=r&&(o!=r||0!=o&&99!=o))for(i=!0,o=0;o<this.ORDER_OVERRIDES.length;o++)if(this.ORDER_OVERRIDES[o][0]==n&&this.ORDER_OVERRIDES[o][1]==t){i=!1;break}return i&&(e="("+e+")"),e},e.Generator.prototype.statementToCode=function(e,t){var n=e.getInputTargetBlock(t),i=this.blockToCode(n);if("string"!=typeof i)throw TypeError("Expecting code from statement block: "+(n&&n.type));return i&&(i=this.prefixLines(i,this.INDENT)),i},e.Generator.prototype.addLoopTrap=function(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e},e.Generator.prototype.injectId=function(e,t){var n=t.id.replace(/\$/g,"$$$$");return e.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(e){this.RESERVED_WORDS_+=e+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var i,o=this.variableDB_.getDistinctName(t,e.Procedures.NAME_TYPE);for(this.functionNames_[t]=o,o=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);i!=o;)i=o,o=o.replace(/^(( {2})*) {2}/gm,"$1\0");o=o.replace(/\0/g,this.INDENT),this.definitions_[t]=o}return this.functionNames_[t]},e.Generator.prototype.init=function(e){},e.Generator.prototype.scrub_=function(e,t){return t},e.Generator.prototype.finish=function(e){return e},e.Generator.prototype.scrubNakedValue=function(e){return e},e.CursorSvg=function(e,t){this.workspace_=e,this.isMarker_=t,this.parent_=null,this.constants_=e.getRenderer().getConstants()},e.CursorSvg.CURSOR_HEIGHT=5,e.CursorSvg.CURSOR_WIDTH=100,e.CursorSvg.NOTCH_START_LENGTH=24,e.CursorSvg.VERTICAL_PADDING=5,e.CursorSvg.STACK_PADDING=10,e.CursorSvg.BLOCK_PADDING=2,e.CursorSvg.HEIGHT_MULTIPLIER=.75,e.CursorSvg.CURSOR_COLOR="#cc0a0a",e.CursorSvg.MARKER_COLOR="#4286f4",e.CursorSvg.CURSOR_CLASS="blocklyCursor",e.CursorSvg.MARKER_CLASS="blocklyMarker",e.CursorSvg.prototype.currentCursorSvg=null,e.CursorSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.CursorSvg.prototype.createDom=function(){return this.svgGroup_=e.utils.dom.createSvgElement("g",{class:this.isMarker_?e.CursorSvg.MARKER_CLASS:e.CursorSvg.CURSOR_CLASS},null),this.createCursorSvg_(),this.svgGroup_},e.CursorSvg.prototype.setParent_=function(e){this.isMarker_?(this.parent_&&this.parent_.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())),this.parent_=e},e.CursorSvg.prototype.showWithBlockPrevOutput_=function(t){if(t){var n=t.width,i=t.height,o=i*e.CursorSvg.HEIGHT_MULTIPLIER,r=e.CursorSvg.BLOCK_PADDING;t.previousConnection?this.positionPrevious_(n,r,o):t.outputConnection?this.positionOutput_(n,i):this.positionBlock_(n,r,o),this.setParent_(t),this.showCurrent_()}},e.CursorSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,n=n.y,this.workspace_.RTL&&(t-=e.CursorSvg.CURSOR_WIDTH),this.positionLine_(t,n,e.CursorSvg.CURSOR_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.CursorSvg.prototype.showWithField_=function(e){var t=(e=e.getLocation()).getSize().width,n=e.getSize().height;this.positionRect_(0,0,t,n),this.setParent_(e),this.showCurrent_()},e.CursorSvg.prototype.showWithInput_=function(e){var t=(e=e.getLocation()).getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()},e.CursorSvg.prototype.showWithNext_=function(e){var t=e.getLocation();e=t.getSourceBlock();var n=0;t=t.getOffsetInBlock().y;var i=e.getHeightWidth().width;this.workspace_.RTL&&(n=-i),this.positionLine_(n,t,i),this.setParent_(e),this.showCurrent_()},e.CursorSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),i=n.width+e.CursorSvg.STACK_PADDING;n=n.height+e.CursorSvg.STACK_PADDING;var o=-1*e.CursorSvg.STACK_PADDING/2,r=-1*e.CursorSvg.STACK_PADDING/2,s=o;this.workspace_.RTL&&(s=-(i+o)),this.positionRect_(s,r,i,n),this.setParent_(t),this.showCurrent_()},e.CursorSvg.prototype.showCurrent_=function(){this.hide(),this.currentCursorSvg.style.display=""},e.CursorSvg.prototype.positionBlock_=function(t,n,i){t=e.utils.svgPaths.moveBy(-1*n,i)+e.utils.svgPaths.lineOnAxis("V",-1*n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",i),this.cursorBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.cursorBlock_),this.currentCursorSvg=this.cursorBlock_},e.CursorSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x;t=t.getOffsetInBlock().y;var i=e.utils.svgPaths.moveTo(0,0)+this.constants_.PUZZLE_TAB.pathDown;this.cursorInput_.setAttribute("d",i),this.cursorInput_.setAttribute("transform","translate("+n+","+t+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentCursorSvg=this.cursorInput_},e.CursorSvg.prototype.positionLine_=function(e,t,n){this.cursorSvgLine_.setAttribute("x",e),this.cursorSvgLine_.setAttribute("y",t),this.cursorSvgLine_.setAttribute("width",n),this.currentCursorSvg=this.cursorSvgLine_},e.CursorSvg.prototype.positionOutput_=function(t,n){var i=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-1*(t-this.constants_.PUZZLE_TAB.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+this.constants_.PUZZLE_TAB.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t);this.cursorBlock_.setAttribute("d",i),this.workspace_.RTL&&this.flipRtl_(this.cursorBlock_),this.currentCursorSvg=this.cursorBlock_},e.CursorSvg.prototype.positionPrevious_=function(t,n,i){t=e.utils.svgPaths.moveBy(-1*n,i)+e.utils.svgPaths.lineOnAxis("V",-1*n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+this.constants_.NOTCH.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",i),this.cursorBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.cursorBlock_),this.currentCursorSvg=this.cursorBlock_},e.CursorSvg.prototype.positionRect_=function(e,t,n,i){this.cursorSvgRect_.setAttribute("x",e),this.cursorSvgRect_.setAttribute("y",t),this.cursorSvgRect_.setAttribute("width",n),this.cursorSvgRect_.setAttribute("height",i),this.currentCursorSvg=this.cursorSvgRect_},e.CursorSvg.prototype.flipRtl_=function(e){e.setAttribute("transform","scale(-1 1)")},e.CursorSvg.prototype.hide=function(){this.cursorSvgLine_.style.display="none",this.cursorSvgRect_.style.display="none",this.cursorInput_.style.display="none",this.cursorBlock_.style.display="none"},e.CursorSvg.prototype.draw=function(t){t?t.getType()===e.ASTNode.types.BLOCK?(t=t.getLocation(),this.showWithBlockPrevOutput_(t)):t.getType()===e.ASTNode.types.OUTPUT?(t=t.getLocation().getSourceBlock(),this.showWithBlockPrevOutput_(t)):t.getLocation().type===e.INPUT_VALUE?this.showWithInput_(t):t.getLocation().type===e.NEXT_STATEMENT?this.showWithNext_(t):t.getType()===e.ASTNode.types.PREVIOUS?(t=t.getLocation().getSourceBlock(),this.showWithBlockPrevOutput_(t)):t.getType()===e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()===e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()===e.ASTNode.types.STACK&&this.showWithStack_(t):this.hide()},e.CursorSvg.prototype.createCursorSvg_=function(){var t=this.isMarker_?e.CursorSvg.MARKER_COLOR:e.CursorSvg.CURSOR_COLOR;return this.cursorSvg_=e.utils.dom.createSvgElement("g",{width:e.CursorSvg.CURSOR_WIDTH,height:e.CursorSvg.CURSOR_HEIGHT},this.svgGroup_),this.cursorSvgLine_=e.utils.dom.createSvgElement("rect",{x:"0",y:"0",fill:t,width:e.CursorSvg.CURSOR_WIDTH,height:e.CursorSvg.CURSOR_HEIGHT,style:"display: none;"},this.cursorSvg_),this.cursorSvgRect_=e.utils.dom.createSvgElement("rect",{class:"blocklyVerticalCursor",x:"0",y:"0",rx:"10",ry:"10",style:"display: none;",stroke:t},this.cursorSvg_),this.cursorInput_=e.utils.dom.createSvgElement("path",{width:e.CursorSvg.CURSOR_WIDTH,height:e.CursorSvg.CURSOR_HEIGHT,transform:"",style:"display: none;",fill:t},this.cursorSvg_),this.cursorBlock_=e.utils.dom.createSvgElement("path",{width:e.CursorSvg.CURSOR_WIDTH,height:e.CursorSvg.CURSOR_HEIGHT,transform:"",style:"display: none;",fill:"none",stroke:t,"stroke-width":"4"},this.cursorSvg_),this.isMarker_||(e.utils.dom.createSvgElement("animate",{attributeType:"XML",attributeName:"fill",dur:"1s",values:e.CursorSvg.CURSOR_COLOR+";transparent;transparent;",repeatCount:"indefinite"},this.cursorSvgLine_),e.utils.dom.createSvgElement("animate",{attributeType:"XML",attributeName:"fill",dur:"1s",values:e.CursorSvg.CURSOR_COLOR+";transparent;transparent;",repeatCount:"indefinite"},this.cursorInput_),e.utils.dom.createSvgElement("animate",{attributeType:"XML",attributeName:"stroke",dur:"1s",values:e.CursorSvg.CURSOR_COLOR+";transparent;transparent;",repeatCount:"indefinite"},this.cursorBlock_)),this.cursorSvg_},e.CursorSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement("rect",{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement("path",{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement("circle",{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement("svg",{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var t,n=e.utils.xml.createElement("xml"),i=0;t=this.quarkNames_[i];i++){var o=e.utils.xml.createElement("block");o.setAttribute("type",t),n.appendChild(o)}else n=null;return n={disable:!1,disabledPatternId:this.block_.workspace.options.disabledPatternId,languageTree:n,parentWorkspace:this.block_.workspace,pathToMedia:this.block_.workspace.options.pathToMedia,RTL:this.block_.RTL,toolboxPosition:this.block_.RTL?e.TOOLBOX_AT_RIGHT:e.TOOLBOX_AT_LEFT,horizontalLayout:!1,getMetrics:this.getFlyoutMetrics_.bind(this),setMetrics:null,renderer:this.block_.workspace.options.renderer},this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),n=this.workspace_.addFlyout_("g"),(i=this.workspace_.createDom("blocklyMutatorBackground")).insertBefore(n,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(i),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),i=this.block_.RTL?-n.x:n.width+n.x;if(n=n.height+3*t,this.workspace_.flyout_){var o=this.workspace_.flyout_.getMetrics_();n=Math.max(n,o.contentHeight+20)}i+=3*t,(Math.abs(this.workspaceWidth_-i)>t||Math.abs(this.workspaceHeight_-n)>t)&&(this.workspaceWidth_=i,this.workspaceHeight_=n,this.bubble_.setBubbleSize(i+t,n+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new e.Events.Ui(this.block_,"mutatorOpen",!t,t)),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.svgPath_,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),(t=this.workspace_.options.languageTree)&&(this.workspace_.flyout_.init(this.workspace_),this.workspace_.flyout_.show(t.childNodes)),this.rootBlock_=this.block_.decompose(this.workspace_),t=this.rootBlock_.getDescendants(!1);for(var n,i=0;n=t[i];i++)n.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),this.workspace_.flyout_?(t=2*this.workspace_.flyout_.CORNER_RADIUS,i=this.workspace_.getFlyout().getWidth()+t):i=t=16,this.block_.RTL&&(i=-i),this.rootBlock_.moveBy(i,t),this.block_.saveConnections){var o=this;this.block_.saveConnections(this.rootBlock_),this.sourceListener_=function(){o.block_.saveConnections(o.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.updateColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(t.type!=e.Events.UI&&(t.type!=e.Events.CHANGE||"disabled"!=t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var n,i=0;n=t[i];i++){var o=n.getRelativeToSurfaceXY(),r=n.getHeightWidth();20>o.y+r.height&&n.moveBy(0,20-r.height-o.y)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(n=this.block_).mutationToDom())&&e.Xml.domToText(t),i=n.rendered,n.rendered=!1,n.compose(this.rootBlock_),n.rendered=i,n.initSvg(),t!=(i=(i=n.mutationToDom())&&e.Xml.domToText(i))){e.Events.fire(new e.Events.BlockChange(n,"mutation",null,t,i));var s=e.Events.getGroup();setTimeout((function(){e.Events.setGroup(s),n.bumpNeighbours(),e.Events.setGroup(!1)}),e.BUMP_DELAY)}n.rendered&&n.render(),t!=i&&e.keyboardAccessibilityMode&&e.navigation.moveCursorOnBlockMutation(n),this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.getFlyoutMetrics_=function(){return{viewHeight:this.workspaceHeight_,viewWidth:this.workspaceWidth_-this.workspace_.getFlyout().getWidth(),absoluteTop:0,absoluteLeft:this.workspace_.RTL?0:this.workspace_.getFlyout().getWidth()}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var e=this.workspace_;if(e&&e.getAllBlocks()){for(var t=e.getAllBlocks(),n=0;n<t.length;n++){var i=t[n];i.setStyle(i.getStyleName())}for(e=e.flyout_.workspace_.getAllBlocks(),n=0;n<e.length;n++)(i=e[n]).setStyle(i.getStyleName())}},e.Mutator.reconnect=function(e,t,n){if(!e||!e.getSourceBlock().workspace)return!1;n=t.getInput(n).connection;var i=e.targetBlock();return!(i&&i!=t||n.targetConnection==e||(n.isConnected()&&n.disconnect(),n.connect(e),0))},e.Mutator.findParentWs=function(e){var t=null;if(e&&e.options){var n=e.options.parentWorkspace;e.isFlyout?n&&n.options&&(t=n.options.parentWorkspace):n&&(t=n)}return t},e.utils.svgPaths={},e.utils.svgPaths.point=function(e,t){return" "+e+","+t+" "},e.utils.svgPaths.curve=function(e,t){return" "+e+t.join("")},e.utils.svgPaths.moveTo=function(e,t){return" M "+e+","+t+" "},e.utils.svgPaths.moveBy=function(e,t){return" m "+e+","+t+" "},e.utils.svgPaths.lineTo=function(e,t){return" l "+e+","+t+" "},e.utils.svgPaths.line=function(e){return" l"+e.join("")},e.utils.svgPaths.lineOnAxis=function(e,t){return" "+e+" "+t+" "},e.utils.svgPaths.arc=function(e,t,n,i){return e+" "+n+" "+n+" "+t+i},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.MAX_BOTTOM_WIDTH=66.5,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){return{height:this.JAGGED_TEETH_HEIGHT,width:this.JAGGED_TEETH_WIDTH,path:e.utils.svgPaths.line([e.utils.svgPaths.point(6,3),e.utils.svgPaths.point(-12,6),e.utils.svgPaths.point(6,3)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(t){var o=-(t=t?-1:1),r=i/2,s=r+2.5,a=r+.5,l=e.utils.svgPaths.point(-n,t*r);return r=e.utils.svgPaths.point(n,t*r),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,t*s),e.utils.svgPaths.point(-n,o*a),l])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*o),r])}var n=this.TAB_WIDTH,i=this.TAB_HEIGHT,o=t(!0),r=t(!1);return{width:n,height:i,pathDown:r,pathUp:o}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(t){return e.utils.svgPaths.line([e.utils.svgPaths.point(t*o,i),e.utils.svgPaths.point(3*t,0),e.utils.svgPaths.point(t*o,-i)])}var n=this.NOTCH_WIDTH,i=this.NOTCH_HEIGHT,o=(n-3)/2,r=t(1),s=t(-1);return{width:n,height:i,pathLeft:r,pathRight:s}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS;return{topLeft:e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),bottomLeft:t=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t))}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.INPUT_VALUE:case e.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.PREVIOUS_STATEMENT:case e.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return e.blockRendering.Types.hasOwnProperty(t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.startX=this.width},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.OutputConnection.prototype.isDynamic=function(){return this.shape.isDynamic},e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){if(e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null){var i=this.connectedBlock.getHeightWidth();this.connectedBlockWidth=i.width,this.connectedBlockHeight=i.height}else this.connectedBlockHeight=this.connectedBlockWidth=0;this.connection=n.connection,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.shape.width+this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.NOTCH_OFFSET_LEFT+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-2*this.constants_.TAB_OFFSET_FROM_TOP:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON;var i=n.getCorrectedSize();this.height=i.height,this.width=i.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,i){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.isCurrentlyEditable(),this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=i},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var t,n=this.elements.length-1;t=this.elements[n];n--)if(e.blockRendering.Types.isInput(t))return t;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var t,n=0;t=this.elements[n];n++)if(e.blockRendering.Types.isSpacer(t))return t;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var t,n=this.elements.length-1;t=this.elements[n];n--)if(e.blockRendering.Types.isSpacer(t))return t;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:e.BlockSvg.START_HAT)&&!t.outputConnection&&!t.previousConnection,i=t.getPreviousBlock();return!!t.outputConnection||n||!!i&&i.getNextBlock()==t},e.blockRendering.TopRow.prototype.measure=function(){for(var t,n=0,i=0,o=0,r=0;t=this.elements[r];r++)i+=t.width,e.blockRendering.Types.isSpacer(t)||(e.blockRendering.Types.isHat(t)?o=Math.max(o,t.ascenderHeight):n=Math.max(n,t.height));this.width=Math.max(this.minWidth,i),this.height=Math.max(this.minHeight,n)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection||!!e.getNextBlock()},e.blockRendering.BottomRow.prototype.measure=function(){for(var t,n=0,i=0,o=0,r=0;t=this.elements[r];r++)i+=t.width,e.blockRendering.Types.isSpacer(t)||(e.blockRendering.Types.isNextConnection(t)?o=Math.max(o,t.height):n=Math.max(n,t.height));this.width=Math.max(this.minWidth,i),this.height=Math.max(this.minHeight,n)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,i){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=i,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,i)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var t,n=0,i=0;t=this.elements[i];i++)this.width+=t.width,e.blockRendering.Types.isInput(t)&&(e.blockRendering.Types.isStatementInput(t)?n+=t.connectedBlockWidth:e.blockRendering.Types.isExternalInput(t)&&0!=t.connectedBlockWidth&&(n+=t.connectedBlockWidth-t.connectionWidth)),e.blockRendering.Types.isSpacer(t)||(this.height=Math.max(this.height,t.height));this.connectedBlockWidths=n,this.widthWithConnectedBlocks=this.width+n},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.addRowSpacing_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_),n=this.block_.getIcons();if(n.length)for(var i,o=0;i=n[o];o++){var r=new e.blockRendering.Icon(this.constants_,i);this.isCollapsed&&i.collapseHidden?this.hiddenIcons.push(r):t.elements.push(r)}for(i=null,o=0;n=this.block_.inputList[o];o++)if(n.isVisible()){for(this.shouldStartNewRow_(n,i)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_)),i=0;r=n.fieldRow[i];i++)t.elements.push(new e.blockRendering.Field(this.constants_,r,n));this.addInput_(n,t),i=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:e.BlockSvg.START_HAT)&&!this.outputConnection&&!t;this.topRow.hasLeftSquareCorner(this.block_)?this.topRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.topRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type==e.NEXT_STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.LARGE_PADDING:this.topRow.minHeight=this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.NEXT_STATEMENT?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING-1,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.INPUT_VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.NEXT_STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.INPUT_VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.DUMMY_INPUT&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),n.align=t.align},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.NEXT_STATEMENT&&n.type!=e.NEXT_STATEMENT&&(t.type!=e.INPUT_VALUE&&t.type!=e.DUMMY_INPUT||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var t,n=0;t=this.rows[n];n++){var i=t.elements;t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,i[0])));for(var o=0;o<i.length-1;o++){t.elements.push(i[o]);var r=this.getInRowSpacing_(i[o],i[o+1]);t.elements.push(new e.blockRendering.InRowSpacer(this.constants_,r))}t.elements.push(i[i.length-1]),t.endsWithElemSpacer()&&t.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(i[i.length-1],null)))}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var e,t=0,n=0,i=0,o=0;e=this.rows[o];o++){if(e.measure(),n=Math.max(n,e.width),e.hasStatement){var r=e.getLastInput();t=Math.max(t,e.width-r.width)}i=Math.max(i,e.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,o=0;e=this.rows[o];o++)e.hasStatement&&(e.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,i),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var e,t=0;e=this.rows[t];t++)if(e.hasStatement)this.alignStatementRow_(e);else{var n=this.width-this.startX-e.width;n&&this.addAlignmentPadding_(e,n)}},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,t){var n=e.getLastSpacer();n&&(n.width+=t,e.width+=t)},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(e){var t=e.getLastInput(),n=e.width-t.width,i=this.statementEdge;(n=i-n)&&this.addAlignmentPadding_(e,n),n=e.width,i=this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0),t.width+=i-n,e.width+=i-n,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var e=this.rows;this.rows=[];for(var t=0;t<e.length;t++)this.rows.push(e[t]),t!=e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var i=this.getSpacerRowHeight_(t,n),o=this.getSpacerRowWidth_(t,n);return i=new e.blockRendering.SpacerRow(this.constants_,i,o),t.hasStatement&&(i.followsStatement=!0),i},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(e,t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(e,t){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t)){var i=t.yPos+t.height-t.descenderHeight;return e.blockRendering.Types.isNextConnection(n)?i+n.height/2:i-n.height/2}return e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var n,i=t.xPos,o=0;n=t.elements[o];o++)e.blockRendering.Types.isSpacer(n)&&(n.height=t.height),n.xPos=i,n.centerline=this.getElemCenterline_(t,n),i+=n.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var e,t=0,n=0,i=0;e=this.rows[i];i++)e.yPos=n,e.xPos=this.startX,n+=e.height,t=Math.max(t,e.widthWithConnectedBlocks),this.recordElemPositions_(e);this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Drawer=function(e,t){this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=t.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPaths(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var e,t=0;e=this.info_.hiddenIcons[t];t++)e.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var e=1;e<this.info_.rows.length-1;e++){var t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var i,o=0;i=n[o];o++)e.blockRendering.Types.isLeftRoundedCorner(i)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isPreviousConnection(i)?this.outlinePath_+=i.shape.pathLeft:e.blockRendering.Types.isHat(i)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(i)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",i.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var i="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+i+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),i=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var o=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",i)+n+e.utils.svgPaths.lineOnAxis("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline);for(var i,o=n.length-1;i=n[o];o--)e.blockRendering.Types.isNextConnection(i)?this.outlinePath_+=i.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(i)?this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(i)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isSpacer(i)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-1*i.width))},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var t,n=0;t=this.info_.rows[n];n++)for(var i,o=0;i=t.elements[o];o++)e.blockRendering.Types.isInlineInput(i)?this.drawInlineInput_(i):(e.blockRendering.Types.isIcon(i)||e.blockRendering.Types.isField(i))&&this.layoutField_(i)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var i=t.centerline-t.height/2,o=t.xPos,r="";this.info_.RTL&&(o=-(o+t.width),t.flipRtl&&(o+=t.width,r="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+o+","+i+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+o+","+i+")"+r),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,i=t.height,o=t.connectionOffsetY,r=t.connectionHeight+o;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-i/2)+e.utils.svgPaths.lineOnAxis("v",o)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",i-r)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-i)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(e){var t=e.centerline-e.height/2;if(e.connection){var n=e.xPos+e.connectionWidth;this.info_.RTL&&(n*=-1),e.connection.setOffsetInBlock(n,t+e.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(e){var t=e.getLastInput();if(t.connection){var n=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(n*=-1),t.connection.setOffsetInBlock(n,e.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(e){var t=e.getLastInput();if(t.connection){var n=e.xPos+e.width;this.info_.RTL&&(n*=-1),t.connection.setOffsetInBlock(n,e.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var e=this.info_.topRow;if(e.connection){var t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var t=(e=e.connection).xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,e.centerline-e.height/2)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var e=this.info_.startX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}},e.blockRendering.Renderer=function(){this.constants_=null},e.blockRendering.Renderer.prototype.init=function(){this.constants_=this.makeConstants_(),this.constants_.init()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug},e.blockRendering.Renderer.prototype.makeCursorDrawer=function(t,n){return new e.CursorSvg(t,n)},e.blockRendering.Renderer.prototype.makePathObject=function(t){return new e.blockRendering.PathObject(t)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.DARK_PATH_OFFSET=1},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.Highlighter=function(e){this.info_=e,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var n,i=0;n=t.elements[i];i++)e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(n)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(n)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(n)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(n)&&0!=n.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.width-this.highlightOffset_),this.steps_+=this.jaggedTeethPaths_.pathLeft,this.steps_+=e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var i=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",i)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var i=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",i)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(t=this.info_.topRow,e.blockRendering.Types.isLeftRoundedCorner(t.elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,i=t.xPos+t.connectionWidth,o=t.centerline-t.height/2,r=t.width-t.connectionWidth,s=o+n;this.RTL_?(o=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(i-n,s)+e.utils.svgPaths.lineOnAxis("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",r)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,s)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-r)+e.utils.svgPaths.moveTo(i,o+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.PathObject=function(t){this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement("path",{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement("path",{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement("path",{class:"blocklyPathLight"},this.svgRoot)},e.geras.PathObject.prototype.setPaths=function(e,t){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e),this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.INPUT_VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.NEXT_STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.INPUT_VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.DUMMY_INPUT&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),n.align=t.align},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var t,n=!1,i=0;t=this.rows[i];i++)t.hasExternalInput&&(n=!0);for(i=0;t=this.rows[i];i++){var o=t.elements;t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0])));for(var r=0;r<o.length-1;r++){t.elements.push(o[r]);var s=this.getInRowSpacing_(o[r],o[r+1]);t.elements.push(new e.blockRendering.InRowSpacer(this.constants_,s))}t.elements.push(o[o.length-1]),t.endsWithElemSpacer()&&(s=this.getInRowSpacing_(o[o.length-1],null),n&&t.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),t.elements.push(new e.blockRendering.InRowSpacer(this.constants_,s)))}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&!e.blockRendering.Types.isInput(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n)){var i=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2;return n.notchOffset+i}}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return i=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,n.notchOffset-this.constants_.CORNER_RADIUS+i}return!e.blockRendering.Types.isInput(t)&&n&&!e.blockRendering.Types.isInput(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var i=t.getFirstSpacer(),o=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.ALIGN_LEFT?o.width+=n:t.align==e.ALIGN_CENTRE?(i.width+=n/2,o.width+=n/2):t.align==e.ALIGN_RIGHT?i.width+=n:o.width+=n,t.width+=n},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t)){var i=t.yPos+t.height-t.descenderHeight;return e.blockRendering.Types.isNextConnection(n)?i+n.height/2:i-n.height/2}return e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:(i=t.yPos,e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(i+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(i+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):i=e.blockRendering.Types.isInlineInput(n)?i+n.height/2:i+t.height/2,i)},e.geras.RenderInfo.prototype.finalize_=function(){for(var e,t=0,n=0,i=0;e=this.rows[i];i++){e.yPos=n,e.xPos=this.startX,n+=e.height,t=Math.max(t,e.widthWithConnectedBlocks);var o=n-this.topRow.ascenderHeight;e==this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,n+=o),this.recordElemPositions_(e)}this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPaths(this.outlinePath_+"\n"+this.inlinePath_,this.highlighter_.getPath()),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),e.geras.Drawer.superClass_.drawRightSideRow_.call(this,t)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(e){var t=e.centerline-e.height/2;if(e.connection){var n=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),e.connection.setOffsetInBlock(n,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(e){var t=e.getLastInput();if(t.connection){var n=e.xPos+e.statementEdge+t.notchOffset;n=this.info_.RTL?-1*n:n+this.constants_.DARK_PATH_OFFSET,t.connection.setOffsetInBlock(n,e.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(e){var t=e.getLastInput();if(t.connection){var n=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),t.connection.setOffsetInBlock(n,e.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var t=(e=e.connection).xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-t:t)+this.constants_.DARK_PATH_OFFSET/2,e.centerline-e.height/2+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET),this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,i=(1-Math.SQRT1_2)*(t+n)-n,o=e.utils.svgPaths.moveBy(i,i)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-i-n,t-i)),r=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),s=e.utils.svgPaths.moveBy(i,-i)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-i,i+n));return{width:t+n,height:t,pathTop:function(e){return e?o:""},pathBottom:function(e){return e?r:s}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,i=(1-Math.SQRT1_2)*(t-n)+n,o=e.utils.svgPaths.moveBy(i,i)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-i,-i+n)),r=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),s=-i,a=e.utils.svgPaths.moveBy(i,s)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-i+n,-s-t));return{height:t,topLeft:function(e){return e?o:r},bottomLeft:function(){return a}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,i=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),o=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),r=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),s=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(e){return e?i:r},pathDown:function(e){return e?o:s}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6)}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),i=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(e){return e?n:i}}},e.geras.Renderer=function(){e.geras.Renderer.superClass_.constructor.call(this),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(){e.geras.Renderer.superClass_.init.call(this),this.highlightConstants_=this.makeHighlightConstants_()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t){return new e.geras.PathObject(t)},e.blockRendering.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.Toolbox=function(e){this.workspace_=e,this.RTL=e.options.RTL,this.horizontalLayout_=e.options.horizontalLayout,this.toolboxPosition=e.options.toolboxPosition,this.config_={indentWidth:19,cssRoot:"blocklyTreeRoot",cssHideRoot:"blocklyHidden",cssTreeRow:"blocklyTreeRow",cssItemLabel:"blocklyTreeLabel",cssTreeIcon:"blocklyTreeIcon",cssExpandedFolderIcon:"blocklyTreeIconOpen",cssFileIcon:"blocklyTreeIconNone",cssSelectedRow:"blocklyTreeSelected"},this.treeSeparatorConfig_={cssTreeRow:"blocklyTreeSeparator"},this.horizontalLayout_&&(this.config_.cssTreeRow+=e.RTL?" blocklyHorizontalTreeRtl":" blocklyHorizontalTree",this.treeSeparatorConfig_.cssTreeRow="blocklyTreeSeparatorHorizontal "+(e.RTL?"blocklyHorizontalTreeRtl":"blocklyHorizontalTree"),this.config_.cssTreeIcon="")},e.Toolbox.prototype.width=0,e.Toolbox.prototype.height=0,e.Toolbox.prototype.selectedOption_=null,e.Toolbox.prototype.lastCategory_=null,e.Toolbox.prototype.init=function(){var t=this.workspace_,n=this.workspace_.getParentSvg();if(this.HtmlDiv=document.createElement("div"),this.HtmlDiv.className="blocklyToolboxDiv blocklyNonSelectable",this.HtmlDiv.setAttribute("dir",t.RTL?"RTL":"LTR"),n.parentNode.insertBefore(this.HtmlDiv,n),(n=t.getThemeManager()).subscribe(this.HtmlDiv,"toolbox","background-color"),n.subscribe(this.HtmlDiv,"toolboxText","color"),e.bindEventWithChecks_(this.HtmlDiv,"mousedown",this,(function(t){e.utils.isRightButton(t)||t.target==this.HtmlDiv?e.hideChaff(!1):e.hideChaff(!0),e.Touch.clearTouchIdentifier()}),!1,!0),n={disabledPatternId:t.options.disabledPatternId,parentWorkspace:t,RTL:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,toolboxPosition:t.options.toolboxPosition,renderer:t.options.renderer},this.flyout_=null,t.horizontalLayout){if(!e.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new e.HorizontalFlyout(n)}else{if(!e.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new e.VerticalFlyout(n)}e.utils.dom.insertAfter(this.flyout_.createDom("svg"),this.workspace_.getParentSvg()),this.flyout_.init(t),this.config_.cleardotPath=t.options.pathToMedia+"1x1.gif",this.config_.cssCollapsedFolderIcon="blocklyTreeIconClosed"+(t.RTL?"Rtl":"Ltr"),this.renderTree(t.options.languageTree)},e.Toolbox.prototype.renderTree=function(t){this.tree_&&(this.tree_.dispose(),this.lastCategory_=null);var n=new e.tree.TreeControl(this,this.config_);this.tree_=n,n.setSelectedItem(null),n.onBeforeSelected(this.handleBeforeTreeSelected_),n.onAfterSelected(this.handleAfterTreeSelected_);var i=null;if(t){if(this.tree_.blocks=[],this.hasColours_=!1,i=this.syncTrees_(t,this.tree_,this.workspace_.options.pathToMedia),this.tree_.blocks.length)throw Error("Toolbox cannot have both blocks and categories in the root level.");this.workspace_.resizeContents()}n.render(this.HtmlDiv),i&&n.setSelectedItem(i),this.addColour_(),this.position(),this.horizontalLayout_&&e.utils.aria.setState(this.tree_.getElement(),e.utils.aria.State.ORIENTATION,"horizontal")},e.Toolbox.prototype.handleBeforeTreeSelected_=function(e){if(e==this.tree_)return!1;if(this.lastCategory_&&(this.lastCategory_.getRowElement().style.backgroundColor=""),e){var t=e.hexColour||"#57e";e.getRowElement().style.backgroundColor=t,this.addColour_(e)}return!0},e.Toolbox.prototype.handleAfterTreeSelected_=function(t,n){if(n&&n.blocks&&n.blocks.length?(this.flyout_.show(n.blocks),this.lastCategory_!=n&&this.flyout_.scrollToStart(),e.keyboardAccessibilityMode&&e.navigation.setState(e.navigation.STATE_TOOLBOX)):(this.flyout_.hide(),!e.keyboardAccessibilityMode||n instanceof e.Toolbox.TreeSeparator||e.navigation.setState(e.navigation.STATE_WS)),t!=n&&t!=this){var i=new e.Events.Ui(null,"category",t&&t.getText(),n&&n.getText());i.workspaceId=this.workspace_.id,e.Events.fire(i)}n&&(this.lastCategory_=n)},e.Toolbox.prototype.handleNodeSizeChanged_=function(){e.svgResize(this.workspace_)},e.Toolbox.prototype.onBlocklyAction=function(t){var n=this.tree_.getSelectedItem();if(!n)return!1;switch(t.name){case e.navigation.actionNames.PREVIOUS:return n.selectPrevious();case e.navigation.actionNames.OUT:return n.selectParent();case e.navigation.actionNames.NEXT:return n.selectNext();case e.navigation.actionNames.IN:return n.selectChild();default:return!1}},e.Toolbox.prototype.dispose=function(){this.flyout_.dispose(),this.tree_.dispose(),this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv),this.lastCategory_=this.workspace_=null},e.Toolbox.prototype.getWidth=function(){return this.width},e.Toolbox.prototype.getHeight=function(){return this.height},e.Toolbox.prototype.position=function(){var t=this.HtmlDiv;if(t){var n=this.workspace_.getParentSvg();n=e.svgSize(n),this.horizontalLayout_?(t.style.left="0",t.style.height="auto",t.style.width=n.width+"px",this.height=t.offsetHeight,this.toolboxPosition==e.TOOLBOX_AT_TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition==e.TOOLBOX_AT_RIGHT?t.style.right="0":t.style.left="0",t.style.height=n.height+"px",this.width=t.offsetWidth),this.flyout_.position()}},e.Toolbox.prototype.syncTrees_=function(t,n,i){for(var o,r=null,s=null,a=0;o=t.childNodes[a];a++)if(o.tagName)switch(o.tagName.toUpperCase()){case"CATEGORY":s=e.utils.replaceMessageReferences(o.getAttribute("name"));var l=this.tree_.createNode(s);l.onSizeChanged(this.handleNodeSizeChanged_),l.blocks=[],n.add(l);var c=o.getAttribute("custom");c?l.blocks=c:(c=this.syncTrees_(o,l,i))&&(r=c),c=o.getAttribute("categorystyle");var u=o.getAttribute("colour");u&&c?(l.hexColour="",console.warn('Toolbox category "'+s+'" can not have both a style and a colour')):c?this.setColourFromStyle_(c,l,s):this.setColour_(u,l,s),"true"==o.getAttribute("expanded")?(l.blocks.length&&(r=l),l.setExpanded(!0)):l.setExpanded(!1),s=o;break;case"SEP":if(s&&"CATEGORY"==s.tagName.toUpperCase()){n.add(new e.Toolbox.TreeSeparator(this.treeSeparatorConfig_));break}case"BLOCK":case"SHADOW":case"LABEL":case"BUTTON":n.blocks.push(o),s=o}return r},e.Toolbox.prototype.setColour_=function(t,n,i){if(null===(t=e.utils.replaceMessageReferences(t))||""===t)n.hexColour="";else{var o=Number(t);isNaN(o)?(o=e.utils.colour.parse(t))?(n.hexColour=o,this.hasColours_=!0):(n.hexColour="",console.warn('Toolbox category "'+i+'" has unrecognized colour attribute: '+t)):(n.hexColour=e.hueToHex(o),this.hasColours_=!0)}},e.Toolbox.prototype.setColourFromStyle_=function(e,t,n){t.styleName=e;var i=this.workspace_.getTheme();e&&i&&((i=i.getCategoryStyle(e))&&i.colour?this.setColour_(i.colour,t,n):console.warn('Style "'+e+'" must exist and contain a colour value'))},e.Toolbox.prototype.updateColourFromTheme_=function(e){if(e=e||this.tree_){e=e.getChildren(!1);for(var t,n=0;t=e[n];n++)t.styleName&&(this.setColourFromStyle_(t.styleName,t,""),this.addColour_()),this.updateColourFromTheme_(t)}},e.Toolbox.prototype.updateColourFromTheme=function(){var e=this.tree_;e&&(this.updateColourFromTheme_(e),this.updateSelectedItemColour_(e))},e.Toolbox.prototype.updateSelectedItemColour_=function(e){if(e=e.getSelectedItem()){var t=e.hexColour||"#57e";e.getRowElement().style.backgroundColor=t,this.addColour_(e)}},e.Toolbox.prototype.addColour_=function(e){e=(e||this.tree_).getChildren(!1);for(var t,n=0;t=e[n];n++){var i=t.getRowElement();if(i){var o=this.hasColours_?"8px solid "+(t.hexColour||"#ddd"):"none";this.workspace_.RTL?i.style.borderRight=o:i.style.borderLeft=o}this.addColour_(t)}},e.Toolbox.prototype.clearSelection=function(){this.tree_.setSelectedItem(null)},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,i=n+t.height,o=t.left;return t=o+t.width,this.toolboxPosition==e.TOOLBOX_AT_TOP?new e.utils.Rect(-1e7,i,-1e7,1e7):this.toolboxPosition==e.TOOLBOX_AT_BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.TOOLBOX_AT_LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,o,1e7)},e.Toolbox.prototype.refreshSelection=function(){var e=this.tree_.getSelectedItem();e&&e.blocks&&this.flyout_.show(e.blocks)},e.Toolbox.prototype.selectFirstCategory=function(){this.tree_.getSelectedItem()||this.tree_.selectFirst()},e.Toolbox.TreeSeparator=function(t){e.tree.TreeNode.call(this,null,"",t)},e.utils.object.inherits(e.Toolbox.TreeSeparator,e.tree.TreeNode),e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyTreeRoot {","padding: 4px 0;","}",".blocklyTreeRoot:focus {","outline: none;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",".blocklyHorizontalTree {","float: left;","margin: 1px 5px 8px 0;","}",".blocklyHorizontalTreeRtl {","float: right;","margin: 1px 0 8px 5px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","}",".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: #e4e4e4;","}",".blocklyTreeSeparator {","border-bottom: solid #e5e5e5 1px;","height: 0;","margin: 5px 0;","}",".blocklyTreeSeparatorHorizontal {","border-right: solid #e5e5e5 1px;","width: 0;","padding: 5px 0;","margin: 0 5px;","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","width: 16px;","}",".blocklyTreeIconClosedLtr {","background-position: -32px -1px;","}",".blocklyTreeIconClosedRtl {","background-position: 0 -1px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedLtr {","background-position: -32px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedRtl {","background-position: 0 -17px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeIconNone,",".blocklyTreeSelected>.blocklyTreeIconNone {","background-position: -48px -1px;","}",".blocklyTreeLabel {","cursor: default;","font-family: sans-serif;","font-size: 16px;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.Trashcan=function(t){if(this.workspace_=t,this.contents_=[],!(0>=this.workspace_.options.maxTrashcanContents)){if(t={scrollbars:!0,disabledPatternId:this.workspace_.options.disabledPatternId,parentWorkspace:this.workspace_,RTL:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer},this.workspace_.horizontalLayout){if(t.toolboxPosition=this.workspace_.toolboxPosition==e.TOOLBOX_AT_TOP?e.TOOLBOX_AT_BOTTOM:e.TOOLBOX_AT_TOP,!e.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new e.HorizontalFlyout(t)}else{if(t.toolboxPosition=this.workspace_.toolboxPosition==e.TOOLBOX_AT_RIGHT?e.TOOLBOX_AT_LEFT:e.TOOLBOX_AT_RIGHT,!e.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new e.VerticalFlyout(t)}this.workspace_.addChangeListener(this.onDelete_.bind(this))}},e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_BOTTOM_=20,e.Trashcan.prototype.MARGIN_SIDE_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE=.1,e.Trashcan.prototype.isOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement("g",{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement("clipPath",{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement("rect",{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var i=e.utils.dom.createSvgElement("image",{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return i.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement("clipPath",{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement("rect",{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement("image",{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.click),e.bindEvent_(i,"mouseover",this,this.mouseOver_),e.bindEvent_(i,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(t){return 0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout_.createDom("svg"),this.workspace_.getParentSvg()),this.flyout_.init(this.workspace_),this.flyout_.isBlockCreatable_=function(){return!0}),this.verticalSpacing_=this.MARGIN_BOTTOM_+t,this.setOpen_(!1),this.verticalSpacing_+this.BODY_HEIGHT_+this.LID_HEIGHT_},e.Trashcan.prototype.dispose=function(){this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.position=function(){if(this.verticalSpacing_){var t=this.workspace_.getMetrics();t&&(this.left_=t.toolboxPosition==e.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?t.viewWidth+t.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-e.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+e.Scrollbar.scrollbarThickness,this.top_=t.toolboxPosition==e.TOOLBOX_AT_BOTTOM?this.verticalSpacing_:t.viewHeight+t.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-this.verticalSpacing_,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))}},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.setOpen_=function(e){this.isOpen!=e&&(clearTimeout(this.lidTask_),this.isOpen=e,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){this.lidOpen_+=this.isOpen?.2:-.2,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(45*this.lidOpen_),this.svgGroup_.style.opacity=.4+.4*this.lidOpen_,this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),20))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.TOOLBOX_AT_RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.close=function(){this.setOpen_(!1)},e.Trashcan.prototype.click=function(){if(this.contents_.length){for(var t,n=[],i=0;t=this.contents_[i];i++)n[i]=e.Xml.textToDom(t);this.flyout_.show(n)}},e.Trashcan.prototype.mouseOver_=function(){this.contents_.length&&this.setOpen_(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setOpen_(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.minOpenness_=this.HAS_BLOCKS_LID_ANGLE,this.setLidAngle_(45*this.minOpenness_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"));var i=n.firstChild||n.nextSibling;if(!i)for(i=n.parentNode;i;){if(i.nextSibling){i=i.nextSibling;break}i=i.parentNode}n=i}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),null,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),null,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),null,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],i=document.createElement("button");return i.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(i),(i=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(i),(i=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(i),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var i=t[t.length-1],o=e.utils.xml.createElement("block");o.setAttribute("type","variables_set_dynamic"),o.setAttribute("gap",24),o.appendChild(e.Variables.generateVariableFieldDom(i)),n.push(o)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),i=0;for(var r;r=t[i];i++)(o=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),o.setAttribute("gap",8),o.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(o)}}return n},e.ZoomControls=function(e){this.workspace_=e},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=110,e.ZoomControls.prototype.MARGIN_BOTTOM_=20,e.ZoomControls.prototype.MARGIN_SIDE_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement("g",{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(e){return this.verticalSpacing_=this.MARGIN_BOTTOM_+e,this.verticalSpacing_+this.HEIGHT_},e.ZoomControls.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.ZoomControls.prototype.position=function(){if(this.verticalSpacing_){var t=this.workspace_.getMetrics();t&&(this.left_=t.toolboxPosition==e.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?t.viewWidth+t.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-e.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+e.Scrollbar.scrollbarThickness,t.toolboxPosition==e.TOOLBOX_AT_BOTTOM?(this.top_=this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 34)"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, 77)")):(this.top_=t.viewHeight+t.absoluteTop-this.HEIGHT_-this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 43)"),this.zoomOutGroup_.setAttribute("transform","translate(0, 77)")),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){var n=this.workspace_;this.zoomOutGroup_=e.utils.dom.createSvgElement("g",{class:"blocklyZoom"},this.svgGroup_);var i=e.utils.dom.createSvgElement("clipPath",{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement("rect",{width:32,height:32},i),(t=e.utils.dom.createSvgElement("image",{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_)).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",n.options.pathToMedia+e.SPRITE.url),e.bindEventWithChecks_(t,"mousedown",null,(function(t){n.markFocused(),n.zoomCenter(-1),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()}))},e.ZoomControls.prototype.createZoomInSvg_=function(t){var n=this.workspace_;this.zoomInGroup_=e.utils.dom.createSvgElement("g",{class:"blocklyZoom"},this.svgGroup_);var i=e.utils.dom.createSvgElement("clipPath",{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement("rect",{width:32,height:32},i),(t=e.utils.dom.createSvgElement("image",{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_)).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",n.options.pathToMedia+e.SPRITE.url),e.bindEventWithChecks_(t,"mousedown",null,(function(t){n.markFocused(),n.zoomCenter(1),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()}))},e.ZoomControls.prototype.createZoomResetSvg_=function(t){var n=this.workspace_;this.zoomResetGroup_=e.utils.dom.createSvgElement("g",{class:"blocklyZoom"},this.svgGroup_);var i=e.utils.dom.createSvgElement("clipPath",{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement("rect",{width:32,height:32},i),(t=e.utils.dom.createSvgElement("image",{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_)).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",n.options.pathToMedia+e.SPRITE.url),e.bindEventWithChecks_(t,"mousedown",null,(function(t){n.markFocused(),n.setScale(n.options.zoomOptions.startScale),n.beginCanvasTransition(),n.scrollCenter(),setTimeout(n.endCanvasTransition.bind(n),500),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()}))},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.Themes.Dark={},e.Themes.Dark.defaultBlockStyles={colour_blocks:{colourPrimary:"#a5745b",colourSecondary:"#dbc7bd",colourTertiary:"#845d49"},list_blocks:{colourPrimary:"#745ba5",colourSecondary:"#c7bddb",colourTertiary:"#5d4984"},logic_blocks:{colourPrimary:"#5b80a5",colourSecondary:"#bdccdb",colourTertiary:"#496684"},loop_blocks:{colourPrimary:"#5ba55b",colourSecondary:"#bddbbd",colourTertiary:"#498449"},math_blocks:{colourPrimary:"#5b67a5",colourSecondary:"#bdc2db",colourTertiary:"#495284"},procedure_blocks:{colourPrimary:"#995ba5",colourSecondary:"#d6bddb",colourTertiary:"#7a4984"},text_blocks:{colourPrimary:"#5ba58c",colourSecondary:"#bddbd1",colourTertiary:"#498470"},variable_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},variable_dynamic_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},hat_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a",hat:"cap"}},e.Themes.Dark.categoryStyles={colour_category:{colour:"#a5745b"},list_category:{colour:"#745ba5"},logic_category:{colour:"#5b80a5"},loop_category:{colour:"#5ba55b"},math_category:{colour:"#5b67a5"},procedure_category:{colour:"#995ba5"},text_category:{colour:"#5ba58c"},variable_category:{colour:"#a55b99"},variable_dynamic_category:{colour:"#a55b99"}},e.Themes.Dark=new e.Theme(e.Themes.Dark.defaultBlockStyles,e.Themes.Dark.categoryStyles),e.Themes.Dark.setComponentStyle("workspace","#1e1e1e"),e.Themes.Dark.setComponentStyle("toolbox","#333"),e.Themes.Dark.setComponentStyle("toolboxText","#fff"),e.Themes.Dark.setComponentStyle("flyout","#252526"),e.Themes.Dark.setComponentStyle("flyoutText","#ccc"),e.Themes.Dark.setComponentStyle("flyoutOpacity",1),e.Themes.Dark.setComponentStyle("scrollbar","#797979"),e.Themes.Dark.setComponentStyle("scrollbarOpacity",.4),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme(e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.Modern={},e.Themes.Modern.defaultBlockStyles={colour_blocks:{colourPrimary:"#a5745b",colourSecondary:"#dbc7bd",colourTertiary:"#845d49"},list_blocks:{colourPrimary:"#745ba5",colourSecondary:"#c7bddb",colourTertiary:"#5d4984"},logic_blocks:{colourPrimary:"#5b80a5",colourSecondary:"#bdccdb",colourTertiary:"#496684"},loop_blocks:{colourPrimary:"#5ba55b",colourSecondary:"#bddbbd",colourTertiary:"#498449"},math_blocks:{colourPrimary:"#5b67a5",colourSecondary:"#bdc2db",colourTertiary:"#495284"},procedure_blocks:{colourPrimary:"#995ba5",colourSecondary:"#d6bddb",colourTertiary:"#7a4984"},text_blocks:{colourPrimary:"#5ba58c",colourSecondary:"#bddbd1",colourTertiary:"#498470"},variable_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},variable_dynamic_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},hat_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a",hat:"cap"}},e.Themes.Modern.categoryStyles={colour_category:{colour:"#a5745b"},list_category:{colour:"#745ba5"},logic_category:{colour:"#5b80a5"},loop_category:{colour:"#5ba55b"},math_category:{colour:"#5b67a5"},procedure_category:{colour:"#995ba5"},text_category:{colour:"#5ba58c"},variable_category:{colour:"#a55b99"},variable_dynamic_category:{colour:"#a55b99"}},e.Themes.Modern=new e.Theme(e.Themes.Modern.defaultBlockStyles,e.Themes.Modern.categoryStyles),e.requires={},e})?i.apply(t,o):i)||(e.exports=r)}).call(this,n(8))},function(e,t,n){var i,o,r;o=[n(14)],void 0===(r="function"==typeof(i=function(e){return e.Blocks={},e.Blocks.colour={},e.Constants={},e.Constants.Colour={},e.Constants.Colour.HUE=20,e.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),e.Blocks.lists={},e.Constants.Lists={},e.Constants.Lists.HUE=260,e.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),e.Blocks.lists_create_with={init:function(){this.setHelpUrl(e.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new e.Mutator(["lists_create_with_item"])),this.setTooltip(e.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("items",this.itemCount_),t},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},decompose:function(e){var t=e.newBlock("lists_create_with_container");t.initSvg();for(var n=t.getInput("STACK").connection,i=0;i<this.itemCount_;i++){var o=e.newBlock("lists_create_with_item");o.initSvg(),n.connect(o.previousConnection),n=o.nextConnection}return t},compose:function(t){var n=t.getInputTargetBlock("STACK");for(t=[];n;)t.push(n.valueConnection_),n=n.nextConnection&&n.nextConnection.targetBlock();for(n=0;n<this.itemCount_;n++){var i=this.getInput("ADD"+n).connection.targetConnection;i&&-1==t.indexOf(i)&&i.disconnect()}for(this.itemCount_=t.length,this.updateShape_(),n=0;n<this.itemCount_;n++)e.Mutator.reconnect(t[n],this,"ADD"+n)},saveConnections:function(e){e=e.getInputTargetBlock("STACK");for(var t=0;e;){var n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection,t++,e=e.nextConnection&&e.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(e.Msg.LISTS_CREATE_EMPTY_TITLE);for(var t=0;t<this.itemCount_;t++)if(!this.getInput("ADD"+t)){var n=this.appendValueInput("ADD"+t);0==t&&n.appendField(e.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+t);)this.removeInput("ADD"+t),t++}},e.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},e.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},e.Blocks.lists_indexOf={init:function(){var t=[[e.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[e.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(e.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new e.FieldDropdown(t),"END"),this.setInputsInline(!0);var n=this;this.setTooltip((function(){return e.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")}))}},e.Blocks.lists_getIndex={init:function(){var t=[[e.Msg.LISTS_GET_INDEX_GET,"GET"],[e.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[e.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[e.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),t=new e.FieldDropdown(t,(function(e){e="REMOVE"==e,this.getSourceBlock().updateStatement_(e)})),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(t,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),e.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var n=this;this.setTooltip((function(){var t=n.getFieldValue("MODE"),i=n.getFieldValue("WHERE"),o="";switch(t+" "+i){case"GET FROM_START":case"GET FROM_END":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":o=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!=i&&"FROM_END"!=i||(o+="  "+("FROM_START"==i?e.Msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),o}))},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");t.setAttribute("statement",!this.outputConnection);var n=this.getInput("AT").type==e.INPUT_VALUE;return t.setAttribute("at",n),t},domToMutation:function(e){var t="true"==e.getAttribute("statement");this.updateStatement_(t),e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateStatement_:function(e){e!=!this.outputConnection&&(this.unplug(!0,!0),e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(t){this.removeInput("AT"),this.removeInput("ORDINAL",!0),t?(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var n=new e.FieldDropdown(this.WHERE_OPTIONS,(function(e){var n="FROM_START"==e||"FROM_END"==e;if(n!=t){var i=this.getSourceBlock();return i.updateAt_(n),i.setFieldValue(e,"WHERE"),null}}));this.getInput("AT").appendField(n,"WHERE"),e.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},e.Blocks.lists_setIndex={init:function(){var t=[[e.Msg.LISTS_SET_INDEX_SET,"SET"],[e.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[e.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new e.FieldDropdown(t),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(e.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var n=this;this.setTooltip((function(){var t=n.getFieldValue("MODE"),i=n.getFieldValue("WHERE"),o="";switch(t+" "+i){case"SET FROM_START":case"SET FROM_END":o=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":o=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":o=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":o=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":o=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":o=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":o=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":o=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!=i&&"FROM_END"!=i||(o+="  "+e.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),o}))},mutationToDom:function(){var t=e.utils.xml.createElement("mutation"),n=this.getInput("AT").type==e.INPUT_VALUE;return t.setAttribute("at",n),t},domToMutation:function(e){e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(t){this.removeInput("AT"),this.removeInput("ORDINAL",!0),t?(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var n=new e.FieldDropdown(this.WHERE_OPTIONS,(function(e){var n="FROM_START"==e||"FROM_END"==e;if(n!=t){var i=this.getSourceBlock();return i.updateAt_(n),i.setFieldValue(e,"WHERE"),null}}));this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(n,"WHERE")}},e.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[e.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(e.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var t=e.utils.xml.createElement("mutation"),n=this.getInput("AT1").type==e.INPUT_VALUE;return t.setAttribute("at1",n),n=this.getInput("AT2").type==e.INPUT_VALUE,t.setAttribute("at2",n),t},domToMutation:function(e){var t="true"==e.getAttribute("at1");e="true"==e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(t,n){this.removeInput("AT"+t),this.removeInput("ORDINAL"+t,!0),n?(this.appendValueInput("AT"+t).setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+t).appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+t);var i=new e.FieldDropdown(this["WHERE_OPTIONS_"+t],(function(e){var i="FROM_START"==e||"FROM_END"==e;if(i!=n){var o=this.getSourceBlock();return o.updateAt_(t,i),o.setFieldValue(e,"WHERE"+t),null}}));this.getInput("AT"+t).appendField(i,"WHERE"+t),1==t&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),e.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},e.Blocks.lists_sort={init:function(){this.jsonInit({message0:e.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[e.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[e.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[e.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[e.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[e.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:e.Msg.LISTS_SORT_TOOLTIP,helpUrl:e.Msg.LISTS_SORT_HELPURL})}},e.Blocks.lists_split={init:function(){var t=this,n=new e.FieldDropdown([[e.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[e.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],(function(e){t.updateType_(e)}));this.setHelpUrl(e.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(n,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(e.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip((function(){var n=t.getFieldValue("MODE");if("SPLIT"==n)return e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==n)return e.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+n)}))},updateType_:function(e){if(this.getFieldValue("MODE")!=e){var t=this.getInput("INPUT").connection;t.setShadowDom(null);var n=t.targetBlock();n&&(t.disconnect(),n.isShadow()?n.dispose():this.bumpNeighbours())}"SPLIT"==e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("mode",this.getFieldValue("MODE")),t},domToMutation:function(e){this.updateType_(e.getAttribute("mode"))}},e.Blocks.logic={},e.Constants.Logic={},e.Constants.Logic.HUE=210,e.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),e.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),e.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},e.Extensions.register("logic_op_tooltip",e.Extensions.buildTooltipForDropdown("OP",e.Constants.Logic.TOOLTIPS_BY_OP)),e.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var t=e.utils.xml.createElement("mutation");return this.elseifCount_&&t.setAttribute("elseif",this.elseifCount_),this.elseCount_&&t.setAttribute("else",1),t},domToMutation:function(e){this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(e){var t=e.newBlock("controls_if_if");t.initSvg();for(var n=t.nextConnection,i=1;i<=this.elseifCount_;i++){var o=e.newBlock("controls_if_elseif");o.initSvg(),n.connect(o.previousConnection),n=o.nextConnection}return this.elseCount_&&((e=e.newBlock("controls_if_else")).initSvg(),n.connect(e.previousConnection)),t},compose:function(e){e=e.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var t=[null],n=[null],i=null;e;){switch(e.type){case"controls_if_elseif":this.elseifCount_++,t.push(e.valueConnection_),n.push(e.statementConnection_);break;case"controls_if_else":this.elseCount_++,i=e.statementConnection_;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.nextConnection&&e.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(t,n,i)},saveConnections:function(e){e=e.nextConnection.targetBlock();for(var t=1;e;){switch(e.type){case"controls_if_elseif":var n=this.getInput("IF"+t),i=this.getInput("DO"+t);e.valueConnection_=n&&n.connection.targetConnection,e.statementConnection_=i&&i.connection.targetConnection,t++;break;case"controls_if_else":i=this.getInput("ELSE"),e.statementConnection_=i&&i.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.nextConnection&&e.nextConnection.targetBlock()}},rebuildShape_:function(){var e=[null],t=[null],n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(var i=1;this.getInput("IF"+i);){var o=this.getInput("IF"+i),r=this.getInput("DO"+i);e.push(o.connection.targetConnection),t.push(r.connection.targetConnection),i++}this.updateShape_(),this.reconnectChildBlocks_(e,t,n)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var t=1;this.getInput("IF"+t);)this.removeInput("IF"+t),this.removeInput("DO"+t),t++;for(t=1;t<=this.elseifCount_;t++)this.appendValueInput("IF"+t).setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+t).appendField(e.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(e.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(t,n,i){for(var o=1;o<=this.elseifCount_;o++)e.Mutator.reconnect(t[o],this,"IF"+o),e.Mutator.reconnect(n[o],this,"DO"+o);e.Mutator.reconnect(i,this,"ELSE")}},e.Extensions.registerMutator("controls_if_mutator",e.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_4:"":e.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},e.Extensions.register("controls_if_tooltip",e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),e.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(t){this.prevBlocks_||(this.prevBlocks_=[null,null]);var n=this.getInputTargetBlock("A"),i=this.getInputTargetBlock("B");n&&i&&!n.outputConnection.checkType_(i.outputConnection)&&(e.Events.setGroup(t.group),(t=this.prevBlocks_[0])!==n&&(n.unplug(),t&&!t.isShadow()&&this.getInput("A").connection.connect(t.outputConnection)),(n=this.prevBlocks_[1])!==i&&(i.unplug(),n&&!n.isShadow()&&this.getInput("B").connection.connect(n.outputConnection)),this.bumpNeighbours(),e.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},e.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(e.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},e.Extensions.register("logic_compare",e.Constants.Logic.LOGIC_COMPARE_EXTENSION),e.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(t){var n=this.getInputTargetBlock("THEN"),i=this.getInputTargetBlock("ELSE"),o=this.outputConnection.targetConnection;if((n||i)&&o)for(var r=0;2>r;r++){var s=1==r?n:i;s&&!s.outputConnection.checkType_(o)&&(e.Events.setGroup(t.group),o===this.prevParentConnection_?(this.unplug(),o.getSourceBlock().bumpNeighbours()):(s.unplug(),s.bumpNeighbours()),e.Events.setGroup(!1))}this.prevParentConnection_=o}},e.Extensions.registerMixin("logic_ternary",e.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),e.Blocks.loops={},e.Constants.Loops={},e.Constants.Loops.HUE=120,e.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),e.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},e.Extensions.register("controls_whileUntil_tooltip",e.Extensions.buildTooltipForDropdown("MODE",e.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),e.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},e.Extensions.register("controls_flow_tooltip",e.Extensions.buildTooltipForDropdown("FLOW",e.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),e.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(t){if(!this.isInFlyout){var n=this.getField("VAR").getVariable(),i=n.name;if(!this.isCollapsed()&&null!=i){var o={enabled:!0};o.text=e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",i),n=e.Variables.generateVariableFieldDom(n),(i=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),i.appendChild(n),o.callback=e.ContextMenu.callbackFactory(this,i),t.push(o)}}}},e.Extensions.registerMixin("contextMenu_newGetVariableBlock",e.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),e.Extensions.register("controls_for_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),e.Extensions.register("controls_forEach_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(t){do{if(-1!=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(t.type))return t;t=t.getSurroundParent()}while(t);return null},onchange:function(t){this.workspace.isDragging&&!this.workspace.isDragging()&&(e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this)?(this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1)))}},e.Extensions.registerMixin("controls_flow_in_loop_check",e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),e.Blocks.math={},e.Constants.Math={},e.Constants.Math.HUE=230,e.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),e.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},e.Extensions.register("math_op_tooltip",e.Extensions.buildTooltipForDropdown("OP",e.Constants.Math.TOOLTIPS_BY_OP)),e.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var t=e.utils.xml.createElement("mutation"),n="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return t.setAttribute("divisor_input",n),t},domToMutation:function(e){e="true"==e.getAttribute("divisor_input"),this.updateShape_(e)},updateShape_:function(e){var t=this.getInput("DIVISOR");e?t||this.appendValueInput("DIVISOR").setCheck("Number"):t&&this.removeInput("DIVISOR")}},e.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator((function(e){e="DIVISIBLE_BY"==e,this.getSourceBlock().updateShape_(e)}))},e.Extensions.registerMutator("math_is_divisibleby_mutator",e.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,e.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),e.Extensions.register("math_change_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),e.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(e){"MODE"==e?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("op",this.getFieldValue("OP")),t},domToMutation:function(e){this.updateType_(e.getAttribute("op"))}},e.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(e){this.updateType_(e)}.bind(this))},e.Extensions.registerMutator("math_modes_of_list_mutator",e.Constants.Math.LIST_MODES_MUTATOR_MIXIN,e.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),e.Blocks.procedures={},e.Blocks.procedures_defnoreturn={init:function(){var t=new e.FieldTextInput("",e.Procedures.rename);t.setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(t,"NAME").appendField("","PARAMS"),this.setMutator(new e.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(t){this.hasStatements_!==t&&(t?(this.appendStatementInput("STACK").appendField(e.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=t)},updateParams_:function(){var t="";this.arguments_.length&&(t=e.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),e.Events.disable();try{this.setFieldValue(t,"PARAMS")}finally{e.Events.enable()}},mutationToDom:function(t){var n=e.utils.xml.createElement("mutation");t&&n.setAttribute("name",this.getFieldValue("NAME"));for(var i=0;i<this.argumentVarModels_.length;i++){var o=e.utils.xml.createElement("arg"),r=this.argumentVarModels_[i];o.setAttribute("name",r.name),o.setAttribute("varid",r.getId()),t&&this.paramIds_&&o.setAttribute("paramId",this.paramIds_[i]),n.appendChild(o)}return this.hasStatements_||n.setAttribute("statements","false"),n},domToMutation:function(t){this.arguments_=[],this.argumentVarModels_=[];for(var n,i=0;n=t.childNodes[i];i++)if("arg"==n.nodeName.toLowerCase()){var o=n.getAttribute("name");n=n.getAttribute("varid")||n.getAttribute("varId"),this.arguments_.push(o),null!=(n=e.Variables.getOrCreateVariablePackage(this.workspace,n,o,""))?this.argumentVarModels_.push(n):console.log("Failed to create a variable with name "+o+", ignoring.")}this.updateParams_(),e.Procedures.mutateCallers(this),this.setStatements_("false"!==t.getAttribute("statements"))},decompose:function(t){var n=e.utils.xml.createElement("block");n.setAttribute("type","procedures_mutatorcontainer");var i=e.utils.xml.createElement("statement");i.setAttribute("name","STACK"),n.appendChild(i);for(var o=0;o<this.arguments_.length;o++){var r=e.utils.xml.createElement("block");r.setAttribute("type","procedures_mutatorarg");var s=e.utils.xml.createElement("field");s.setAttribute("name","NAME");var a=e.utils.xml.createTextNode(this.arguments_[o]);s.appendChild(a),r.appendChild(s),s=e.utils.xml.createElement("next"),r.appendChild(s),i.appendChild(r),i=s}return t=e.Xml.domToBlock(n,t),"procedures_defreturn"==this.type?t.setFieldValue(this.hasStatements_,"STATEMENTS"):t.removeInput("STATEMENT_INPUT"),e.Procedures.mutateCallers(this),t},compose:function(t){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var n=t.getInputTargetBlock("STACK");n;){var i=n.getFieldValue("NAME");this.arguments_.push(i),i=this.workspace.getVariable(i,""),this.argumentVarModels_.push(i),this.paramIds_.push(n.id),n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateParams_(),e.Procedures.mutateCallers(this),null!==(t=t.getFieldValue("STATEMENTS"))&&(t="TRUE"==t,this.hasStatements_!=t)&&(t?(this.setStatements_(!0),e.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(t=this.getInput("STACK").connection,(this.statementConnection_=t.targetConnection)&&((t=t.targetBlock()).unplug(),t.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(t,n){var i=this.workspace.getVariableById(t);if(""==i.type){i=i.name;for(var o=this.workspace.getVariableById(n),r=!1,s=0;s<this.argumentVarModels_.length;s++)this.argumentVarModels_[s].getId()==t&&(this.arguments_[s]=o.name,this.argumentVarModels_[s]=o,r=!0);r&&(this.displayRenamedVar_(i,o.name),e.Procedures.mutateCallers(this))}},updateVarName:function(t){for(var n=t.name,i=!1,o=0;o<this.argumentVarModels_.length;o++)if(this.argumentVarModels_[o].getId()==t.getId()){var r=this.arguments_[o];this.arguments_[o]=n,i=!0}i&&(this.displayRenamedVar_(r,n),e.Procedures.mutateCallers(this))},displayRenamedVar_:function(t,n){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var i,o=this.mutator.workspace_.getAllBlocks(!1),r=0;i=o[r];r++)"procedures_mutatorarg"==i.type&&e.Names.equals(t,i.getFieldValue("NAME"))&&i.setFieldValue(n,"NAME")},customContextMenu:function(t){if(!this.isInFlyout){var n={enabled:!0},i=this.getFieldValue("NAME");n.text=e.Msg.PROCEDURES_CREATE_DO.replace("%1",i);var o=e.utils.xml.createElement("mutation");for(o.setAttribute("name",i),i=0;i<this.arguments_.length;i++){var r=e.utils.xml.createElement("arg");r.setAttribute("name",this.arguments_[i]),o.appendChild(r)}if((i=e.utils.xml.createElement("block")).setAttribute("type",this.callType_),i.appendChild(o),n.callback=e.ContextMenu.callbackFactory(this,i),t.push(n),!this.isCollapsed())for(i=0;i<this.argumentVarModels_.length;i++)n={enabled:!0},o=this.argumentVarModels_[i],n.text=e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",o.name),o=e.Variables.generateVariableFieldDom(o),(r=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),r.appendChild(o),n.callback=e.ContextMenu.callbackFactory(this,r),t.push(n)}},callType_:"procedures_callnoreturn"},e.Blocks.procedures_defreturn={init:function(){var t=new e.FieldTextInput("",e.Procedures.rename);t.setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(t,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(e.ALIGN_RIGHT).appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new e.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:e.Blocks.procedures_defnoreturn.setStatements_,updateParams_:e.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:e.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:e.Blocks.procedures_defnoreturn.domToMutation,decompose:e.Blocks.procedures_defnoreturn.decompose,compose:e.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:e.Blocks.procedures_defnoreturn.getVars,getVarModels:e.Blocks.procedures_defnoreturn.getVarModels,renameVarById:e.Blocks.procedures_defnoreturn.renameVarById,updateVarName:e.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:e.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:e.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},e.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(e.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new e.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1},onchange:function(t){if(this.workspace&&!this.workspace.isFlyout&&(t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CREATE)){var n=this.workspace.getAllBlocks(),i=this.workspace.getAllVariables();if(t.type==e.Events.BLOCK_DELETE){t=[];for(var o=0;o<n.length;o+=1)n[o].getFieldValue("NAME")&&t.push(n[o].getFieldValue("NAME"));for(n=0;n<i.length;n+=1)-1==t.indexOf(i[n].name)&&this.workspace.deleteVariableById(i[n].getId())}else if(t.type==e.Events.BLOCK_CREATE&&(i=this.workspace.getBlockById(t.blockId)).getField("NAME")&&(o=i.getFieldValue("NAME"),(t=this.workspace.getVariable(o))||(t=this.workspace.createVariable(o)),!i.previousConnection.isConnected()&&!i.nextConnection.isConnected()))for(o=0;o<n.length;o+=1)if(i.id!=n[o].id&&n[o].getFieldValue("NAME")==t.name){o=e.Variables.generateUniqueName(this.workspace),t=this.workspace.createVariable(o),i.setFieldValue(t.name,"NAME");break}}}},e.Blocks.procedures_mutatorarg={init:function(){var t=new e.FieldTextInput("x",this.validator_);t.oldShowEditorFn_=t.showEditor_,t.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(e.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(t,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,t.onFinishEditing_=this.deleteIntermediateVars_,t.createdVariables_=[],t.onFinishEditing_("x")},validator_:function(t){var n=this.getSourceBlock(),i=e.Mutator.findParentWs(n.workspace);if(!(t=t.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;n=n.workspace.getAllBlocks();for(var o=0;o<n.length;o++)if(n[o].id!=this.getSourceBlock().id&&n[o].getFieldValue("NAME")==t)return null;return(n=i.getVariable(t,""))&&n.name!=t&&i.renameVariableById(n.getId(),t),n||(n=i.createVariable(t,""))&&this.createdVariables_&&this.createdVariables_.push(n),t},deleteIntermediateVars_:function(t){var n=e.Mutator.findParentWs(this.getSourceBlock().workspace);if(n)for(var i=0;i<this.createdVariables_.length;i++){var o=this.createdVariables_[i];o.name!=t&&n.deleteVariableById(o.getId())}}},e.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField(this.id,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(t,n){e.Names.equals(t,this.getProcedureCall())&&(this.setFieldValue(n,"NAME"),this.setTooltip((this.outputConnection?e.Msg.PROCEDURES_CALLRETURN_TOOLTIP:e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",n)))},setProcedureParameters_:function(t,n){var i=e.Procedures.getDefinition(this.getProcedureCall(),this.workspace),o=i&&i.mutator&&i.mutator.isVisible();if(o||(this.quarkConnections_={},this.quarkIds_=null),n)if(t.join("\n")==this.arguments_.join("\n"))this.quarkIds_=n;else{if(n.length!=t.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),i=this.rendered,this.rendered=!1;for(var r=0;r<this.arguments_.length;r++){var s=this.getInput("ARG"+r);s&&(s=s.connection.targetConnection,this.quarkConnections_[this.quarkIds_[r]]=s,o&&s&&-1==n.indexOf(this.quarkIds_[r])&&(s.disconnect(),s.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(t),this.argumentVarModels_=[],r=0;r<this.arguments_.length;r++)o=e.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[r],""),this.argumentVarModels_.push(o);if(this.updateShape_(),this.quarkIds_=n)for(r=0;r<this.arguments_.length;r++)(o=this.quarkIds_[r])in this.quarkConnections_&&(s=this.quarkConnections_[o],e.Mutator.reconnect(s,this,"ARG"+r)||delete this.quarkConnections_[o]);(this.rendered=i)&&this.render()}},updateShape_:function(){for(var t=0;t<this.arguments_.length;t++){var n=this.getField("ARGNAME"+t);if(n){e.Events.disable();try{n.setValue(this.arguments_[t])}finally{e.Events.enable()}}else n=new e.FieldLabel(this.arguments_[t]),this.appendValueInput("ARG"+t).setAlign(e.ALIGN_RIGHT).appendField(n,"ARGNAME"+t).init()}for(;this.getInput("ARG"+t);)this.removeInput("ARG"+t),t++;(t=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(t.appendField(e.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),t.init()):this.getField("WITH")&&t.removeField("WITH"))},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");t.setAttribute("name",this.getProcedureCall());for(var n=0;n<this.arguments_.length;n++){var i=e.utils.xml.createElement("arg");i.setAttribute("name",this.arguments_[n]),t.appendChild(i)}return t},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t),t=[];for(var n,i=[],o=0;n=e.childNodes[o];o++)"arg"==n.nodeName.toLowerCase()&&(t.push(n.getAttribute("name")),i.push(n.getAttribute("paramId")));this.setProcedureParameters_(t,i)},getVarModels:function(){return this.argumentVarModels_},onchange:function(t){if(this.workspace&&!this.workspace.isFlyout&&t.recordUndo)if(t.type==e.Events.BLOCK_CREATE&&-1!=t.ids.indexOf(this.id)){var n=this.getProcedureCall();if(!(n=e.Procedures.getDefinition(n,this.workspace))||n.type==this.defType_&&JSON.stringify(n.arguments_)==JSON.stringify(this.arguments_)||(n=null),!n){e.Events.setGroup(t.group),t=e.utils.xml.createElement("xml"),(n=e.utils.xml.createElement("block")).setAttribute("type",this.defType_);var i=this.getRelativeToSurfaceXY(),o=i.y+2*e.SNAP_RADIUS;n.setAttribute("x",i.x+e.SNAP_RADIUS*(this.RTL?-1:1)),n.setAttribute("y",o),i=this.mutationToDom(),n.appendChild(i),(i=e.utils.xml.createElement("field")).setAttribute("name","NAME"),i.appendChild(e.utils.xml.createTextNode(this.getProcedureCall())),n.appendChild(i),t.appendChild(n),e.Xml.domToWorkspace(t,this.workspace),e.Events.setGroup(!1)}}else t.type==e.Events.BLOCK_DELETE?(n=this.getProcedureCall(),(n=e.Procedures.getDefinition(n,this.workspace))||(e.Events.setGroup(t.group),this.dispose(!0,!1),e.Events.setGroup(!1))):t.type==e.Events.CHANGE&&"disabled"==t.element&&(n=this.getProcedureCall(),(n=e.Procedures.getDefinition(n,this.workspace))&&n.id==t.blockId&&((n=e.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),e.Events.setGroup(t.group),t.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),e.Events.setGroup(n)))},customContextMenu:function(t){if(this.workspace.isMovable()){var n={enabled:!0};n.text=e.Msg.PROCEDURES_HIGHLIGHT_DEF;var i=this.getProcedureCall(),o=this.workspace;n.callback=function(){var t=e.Procedures.getDefinition(i,o);t&&(o.centerOnBlock(t.id),t.select())},t.push(n)}},defType_:"procedures_defnoreturn"},e.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:e.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:e.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:e.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:e.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:e.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:e.Blocks.procedures_callnoreturn.domToMutation,getVarModels:e.Blocks.procedures_callnoreturn.getVarModels,onchange:e.Blocks.procedures_callnoreturn.onchange,customContextMenu:e.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},e.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("value",Number(this.hasReturnValue_)),t},domToMutation:function(t){this.hasReturnValue_=1==t.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(t){if(this.workspace.isDragging&&!this.workspace.isDragging()){t=!1;var n=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(n.type)){t=!0;break}n=n.getSurroundParent()}while(n);t?("procedures_defnoreturn"==n.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=n.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(e.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},e.Blocks.texts={},e.Constants.Text={},e.Constants.Text.HUE=160,e.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),e.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[e.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[e.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[e.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[e.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[e.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(e.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var t=e.utils.xml.createElement("mutation"),n=this.getInput("AT1").type==e.INPUT_VALUE;return t.setAttribute("at1",n),n=this.getInput("AT2").type==e.INPUT_VALUE,t.setAttribute("at2",n),t},domToMutation:function(e){var t="true"==e.getAttribute("at1");e="true"==e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(t,n){this.removeInput("AT"+t),this.removeInput("ORDINAL"+t,!0),n?(this.appendValueInput("AT"+t).setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+t).appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+t),2==t&&e.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_GET_SUBSTRING_TAIL));var i=new e.FieldDropdown(this["WHERE_OPTIONS_"+t],(function(e){var i="FROM_START"==e||"FROM_END"==e;if(i!=n){var o=this.getSourceBlock();return o.updateAt_(t,i),o.setFieldValue(e,"WHERE"+t),null}}));this.getInput("AT"+t).appendField(i,"WHERE"+t),1==t&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},e.Blocks.text_changeCase={init:function(){var t=[[e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(e.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new e.FieldDropdown(t),"CASE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg.TEXT_CHANGECASE_TOOLTIP)}},e.Blocks.text_trim={init:function(){var t=[[e.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[e.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[e.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(e.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new e.FieldDropdown(t),"MODE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg.TEXT_TRIM_TOOLTIP)}},e.Blocks.text_print={init:function(){this.jsonInit({message0:e.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:e.Msg.TEXT_PRINT_TOOLTIP,helpUrl:e.Msg.TEXT_PRINT_HELPURL})}},e.Blocks.text_prompt_ext={init:function(){var t=[[e.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(e.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var n=this;t=new e.FieldDropdown(t,(function(e){n.updateType_(e)})),this.appendValueInput("TEXT").appendField(t,"TYPE"),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"==n.getFieldValue("TYPE")?e.Msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER}))},updateType_:function(e){this.outputConnection.setCheck("NUMBER"==e?"Number":"String")},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("type",this.getFieldValue("TYPE")),t},domToMutation:function(e){this.updateType_(e.getAttribute("type"))}},e.Blocks.text_prompt={init:function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN);var t=[[e.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],n=this;this.setHelpUrl(e.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),t=new e.FieldDropdown(t,(function(e){n.updateType_(e)})),this.appendDummyInput().appendField(t,"TYPE").appendField(this.newQuote_(!0)).appendField(new e.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"==n.getFieldValue("TYPE")?e.Msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER}))},updateType_:e.Blocks.text_prompt_ext.updateType_,mutationToDom:e.Blocks.text_prompt_ext.mutationToDom,domToMutation:e.Blocks.text_prompt_ext.domToMutation},e.Blocks.text_count={init:function(){this.jsonInit({message0:e.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_COUNT_TOOLTIP,helpUrl:e.Msg.TEXT_COUNT_HELPURL})}},e.Blocks.text_replace={init:function(){this.jsonInit({message0:e.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:e.Msg.TEXT_REPLACE_HELPURL})}},e.Blocks.text_reverse={init:function(){this.jsonInit({message0:e.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:e.Msg.TEXT_REVERSE_HELPURL})}},e.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(e){for(var t,n=0;t=this.inputList[n];n++)for(var i,o=0;i=t.fieldRow[o];o++)if(e==i.name)return t.insertFieldAt(o,this.newQuote_(!0)),void t.insertFieldAt(o+2,this.newQuote_(!1));console.warn('field named "'+e+'" not found in '+this.toDevString())},newQuote_:function(t){return t=this.RTL?!t:t,new e.FieldImage(t?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,t?"“":"”")}},e.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},e.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("items",this.itemCount_),t},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},decompose:function(e){var t=e.newBlock("text_create_join_container");t.initSvg();for(var n=t.getInput("STACK").connection,i=0;i<this.itemCount_;i++){var o=e.newBlock("text_create_join_item");o.initSvg(),n.connect(o.previousConnection),n=o.nextConnection}return t},compose:function(t){var n=t.getInputTargetBlock("STACK");for(t=[];n;)t.push(n.valueConnection_),n=n.nextConnection&&n.nextConnection.targetBlock();for(n=0;n<this.itemCount_;n++){var i=this.getInput("ADD"+n).connection.targetConnection;i&&-1==t.indexOf(i)&&i.disconnect()}for(this.itemCount_=t.length,this.updateShape_(),n=0;n<this.itemCount_;n++)e.Mutator.reconnect(t[n],this,"ADD"+n)},saveConnections:function(e){e=e.getInputTargetBlock("STACK");for(var t=0;e;){var n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection,t++,e=e.nextConnection&&e.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var t=0;t<this.itemCount_;t++)if(!this.getInput("ADD"+t)){var n=this.appendValueInput("ADD"+t);0==t&&n.appendField(e.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+t);)this.removeInput("ADD"+t),t++}},e.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new e.Mutator(["text_create_join_item"]))},e.Extensions.register("text_append_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),e.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var t=this;this.setTooltip((function(){return e.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",t.workspace.options.oneBasedIndex?"0":"-1")}))},e.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("at",!!this.isAt_),t},domToMutation:function(e){e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(t){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),t&&(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)),e.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_CHARAT_TAIL)),this.isAt_=t}},e.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator((function(e){(e="FROM_START"==e||"FROM_END"==e)!=this.isAt_&&this.getSourceBlock().updateAt_(e)})),this.updateAt_(!0);var t=this;this.setTooltip((function(){var n=t.getFieldValue("WHERE"),i=e.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==n||"FROM_END"==n)&&(n="FROM_START"==n?e.Msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(i+="  "+n.replace("%1",t.workspace.options.oneBasedIndex?"#1":"#0")),i}))},e.Extensions.register("text_indexOf_tooltip",e.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),e.Extensions.register("text_quotes",e.Constants.Text.TEXT_QUOTES_EXTENSION),e.Extensions.registerMutator("text_join_mutator",e.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,e.Constants.Text.TEXT_JOIN_EXTENSION),e.Extensions.registerMutator("text_charAt_mutator",e.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,e.Constants.Text.TEXT_CHARAT_EXTENSION),e.Blocks.variables={},e.Constants.Variables={},e.Constants.Variables.HUE=330,e.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(t){if(this.isInFlyout)"variables_get"!=this.type&&"variables_get_reporter"!=this.type||(n={text:e.Msg.RENAME_VARIABLE,enabled:!0,callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},r=this.getField("VAR").getText(),o={text:e.Msg.DELETE_VARIABLE.replace("%1",r),enabled:!0,callback:e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},t.unshift(n),t.unshift(o));else{if("variables_get"==this.type)var n="variables_set",i=e.Msg.VARIABLES_GET_CREATE_SET;else n="variables_get",i=e.Msg.VARIABLES_SET_CREATE_GET;var o={enabled:0<this.workspace.remainingCapacity()},r=this.getField("VAR").getText();o.text=i.replace("%1",r),(i=e.utils.xml.createElement("field")).setAttribute("name","VAR"),i.appendChild(e.utils.xml.createTextNode(r)),(r=e.utils.xml.createElement("block")).setAttribute("type",n),r.appendChild(i),o.callback=e.ContextMenu.callbackFactory(this,r),t.push(o)}}},e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(t){return function(){var n=t.workspace,i=t.getField("VAR").getVariable();e.Variables.renameVariable(n,i)}},e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(e){return function(){var t=e.workspace,n=e.getField("VAR").getVariable();t.deleteVariableById(n.getId()),t.refreshToolboxSelection()}},e.Extensions.registerMixin("contextMenu_variableSetterGetter",e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),e.Constants.VariablesDynamic={},e.Constants.VariablesDynamic.HUE=310,e.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),e.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(t){if(this.isInFlyout)"variables_get_dynamic"!=this.type&&"variables_get_reporter_dynamic"!=this.type||(n={text:e.Msg.RENAME_VARIABLE,enabled:!0,callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},s=this.getField("VAR").getText(),r={text:e.Msg.DELETE_VARIABLE.replace("%1",s),enabled:!0,callback:e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},t.unshift(n),t.unshift(r));else{var n=this.getFieldValue("VAR"),i=this.workspace.getVariableById(n).type;if("variables_get_dynamic"==this.type){n="variables_set_dynamic";var o=e.Msg.VARIABLES_GET_CREATE_SET}else n="variables_get_dynamic",o=e.Msg.VARIABLES_SET_CREATE_GET;var r={enabled:0<this.workspace.remainingCapacity()},s=this.getField("VAR").getText();r.text=o.replace("%1",s),(o=e.utils.xml.createElement("field")).setAttribute("name","VAR"),o.setAttribute("variabletype",i),o.appendChild(e.utils.xml.createTextNode(s)),(s=e.utils.xml.createElement("block")).setAttribute("type",n),s.appendChild(o),r.callback=e.ContextMenu.callbackFactory(this,s),t.push(r)}},onchange:function(t){t=this.getFieldValue("VAR"),t=e.Variables.getVariable(this.workspace,t),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(t.type):this.getInput("VALUE").connection.setCheck(t.type)}},e.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(t){return function(){var n=t.workspace,i=t.getField("VAR").getVariable();e.Variables.renameVariable(n,i)}},e.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(e){return function(){var t=e.workspace,n=e.getField("VAR").getVariable();t.deleteVariableById(n.getId()),t.refreshToolboxSelection()}},e.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",e.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),e.Blocks})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(0),l=n(64),c=n(65),u=c.getAceInstance(),h=u.require("ace/range").Range,d=function(e){function t(t){var n=e.call(this,t)||this;return c.editorEvents.forEach((function(e){n[e]=n[e].bind(n)})),n.debounce=c.debounce,n}return o(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.className,i=t.onBeforeLoad,o=t.onValidate,r=t.mode,s=t.focus,a=t.theme,l=t.fontSize,h=t.value,d=t.defaultValue,p=t.cursorStart,f=t.showGutter,g=t.wrapEnabled,m=t.showPrintMargin,v=t.scrollMargin,_=void 0===v?[0,0,0,0]:v,y=t.keyboardHandler,b=t.onLoad,T=t.commands,E=t.annotations,w=t.markers,k=t.placeholder;this.editor=u.edit(this.refEditor),i&&i(u);for(var S=Object.keys(this.props.editorProps),C=0;C<S.length;C++)this.editor[S[C]]=this.props.editorProps[S[C]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(_[0],_[1],_[2],_[3]),this.editor.getSession().setMode("ace/mode/"+r),this.editor.setTheme("ace/theme/"+a),this.editor.setFontSize(l),this.editor.getSession().setValue(d||h,p),this.props.navigateToFileEnd&&this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(f),this.editor.getSession().setUseWrapMode(g),this.editor.setShowPrintMargin(m),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),k&&this.updatePlaceholder(),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),o&&this.editor.getSession().on("changeAnnotation",(function(){var t=e.editor.getSession().getAnnotations();e.props.onValidate(t)})),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(E||[]),w&&w.length>0&&this.handleMarkers(w);var x=this.editor.$options;c.editorOptions.forEach((function(t){x.hasOwnProperty(t)?e.editor.setOption(t,e.props[t]):e.props[t]&&console.warn("ReactAce: editor option "+t+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")})),this.handleOptions(this.props),Array.isArray(T)&&T.forEach((function(t){"string"==typeof t.exec?e.editor.commands.bindKey(t.bindKey,t.exec):e.editor.commands.addCommand(t)})),y&&this.editor.setKeyboardHandler("ace/keyboard/"+y),n&&(this.refEditor.className+=" "+n),b&&b(this.editor),this.editor.resize(),s&&this.editor.focus()},t.prototype.componentDidUpdate=function(e){for(var t=e,n=this.props,i=0;i<c.editorOptions.length;i++){var o=c.editorOptions[i];n[o]!==t[o]&&this.editor.setOption(o,n[o])}if(n.className!==t.className){var r=this.refEditor.className.trim().split(" ");t.className.trim().split(" ").forEach((function(e){var t=r.indexOf(e);r.splice(t,1)})),this.refEditor.className=" "+n.className+" "+r.join(" ")}if(this.editor&&this.editor.getValue()!==n.value){this.silent=!0;var s=this.editor.session.selection.toJSON();this.editor.setValue(n.value,n.cursorStart),this.editor.session.selection.fromJSON(s),this.silent=!1}n.placeholder!==t.placeholder&&this.updatePlaceholder(),n.mode!==t.mode&&this.editor.getSession().setMode("ace/mode/"+n.mode),n.theme!==t.theme&&this.editor.setTheme("ace/theme/"+n.theme),n.keyboardHandler!==t.keyboardHandler&&(n.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+n.keyboardHandler):this.editor.setKeyboardHandler(null)),n.fontSize!==t.fontSize&&this.editor.setFontSize(n.fontSize),n.wrapEnabled!==t.wrapEnabled&&this.editor.getSession().setUseWrapMode(n.wrapEnabled),n.showPrintMargin!==t.showPrintMargin&&this.editor.setShowPrintMargin(n.showPrintMargin),n.showGutter!==t.showGutter&&this.editor.renderer.setShowGutter(n.showGutter),l(n.setOptions,t.setOptions)||this.handleOptions(n),l(n.annotations,t.annotations)||this.editor.getSession().setAnnotations(n.annotations||[]),!l(n.markers,t.markers)&&Array.isArray(n.markers)&&this.handleMarkers(n.markers),l(n.scrollMargin,t.scrollMargin)||this.handleScrollMargins(n.scrollMargin),e.height===this.props.height&&e.width===this.props.width||this.editor.resize(),this.props.focus&&!e.focus&&this.editor.focus()},t.prototype.handleScrollMargins=function(e){void 0===e&&(e=[0,0,0,0]),this.editor.renderer.setScrollMargins(e[0],e[1],e[2],e[3])},t.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},t.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var t=this.editor.getValue();this.props.onChange(t,e)}},t.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var t=this.editor.getSelection();this.props.onSelectionChange(t,e)}},t.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var t=this.editor.getSelection();this.props.onCursorChange(t,e)}},t.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e),this.props.placeholder&&this.updatePlaceholder()},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e,this.editor)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e,this.editor)},t.prototype.onCopy=function(e){this.props.onCopy&&this.props.onCopy(e)},t.prototype.onPaste=function(e){this.props.onPaste&&this.props.onPaste(e)},t.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},t.prototype.handleOptions=function(e){for(var t=Object.keys(e.setOptions),n=0;n<t.length;n++)this.editor.setOption(t[n],e.setOptions[t[n]])},t.prototype.handleMarkers=function(e){var t=this,n=this.editor.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&this.editor.getSession().removeMarker(n[i].id);for(var i in n=this.editor.getSession().getMarkers(!1))n.hasOwnProperty(i)&&"ace_active-line"!==n[i].clazz&&"ace_selected-word"!==n[i].clazz&&this.editor.getSession().removeMarker(n[i].id);e.forEach((function(e){var n=e.startRow,i=e.startCol,o=e.endRow,r=e.endCol,s=e.className,a=e.type,l=e.inFront,c=void 0!==l&&l,u=new h(n,i,o,r);t.editor.getSession().addMarker(u,s,a,c)}))},t.prototype.updatePlaceholder=function(){var e=this.editor,t=this.props.placeholder,n=!e.session.getValue().length,i=e.renderer.placeholderNode;!n&&i?(e.renderer.scroller.removeChild(e.renderer.placeholderNode),e.renderer.placeholderNode=null):n&&!i?((i=e.renderer.placeholderNode=document.createElement("div")).textContent=t||"",i.className="ace_comment ace_placeholder",i.style.padding="0 9px",i.style.position="absolute",i.style.zIndex="3",e.renderer.scroller.appendChild(i)):n&&i&&(i.textContent=t)},t.prototype.updateRef=function(e){this.refEditor=e},t.prototype.render=function(){var e=this.props,t=e.name,n=e.width,i=e.height,o=e.style,s=r({width:n,height:i},o);return a.createElement("div",{ref:this.updateRef,id:t,style:s})},t.propTypes={mode:s.string,focus:s.bool,theme:s.string,name:s.string,className:s.string,height:s.string,width:s.string,fontSize:s.oneOfType([s.number,s.string]),showGutter:s.bool,onChange:s.func,onCopy:s.func,onPaste:s.func,onFocus:s.func,onInput:s.func,onBlur:s.func,onScroll:s.func,value:s.string,defaultValue:s.string,onLoad:s.func,onSelectionChange:s.func,onCursorChange:s.func,onBeforeLoad:s.func,onValidate:s.func,minLines:s.number,maxLines:s.number,readOnly:s.bool,highlightActiveLine:s.bool,tabSize:s.number,showPrintMargin:s.bool,cursorStart:s.number,debounceChangePeriod:s.number,editorProps:s.object,setOptions:s.object,style:s.object,scrollMargin:s.array,annotations:s.array,markers:s.array,keyboardHandler:s.string,wrapEnabled:s.bool,enableSnippets:s.bool,enableBasicAutocompletion:s.oneOfType([s.bool,s.array]),enableLiveAutocompletion:s.oneOfType([s.bool,s.array]),navigateToFileEnd:s.bool,commands:s.array,placeholder:s.string},t.defaultProps={name:"ace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",value:"",fontSize:12,enableSnippets:!1,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,placeholder:null,navigateToFileEnd:!0},t}(a.Component);t.default=d},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=n(0),a=n(68),l=n(211),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:n.props.value},n.onChange=n.onChange.bind(n),n.diff=n.diff.bind(n),n}return o(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.value;e!==this.state.value&&this.setState({value:e})},t.prototype.onChange=function(e){this.setState({value:e}),this.props.onChange&&this.props.onChange(e)},t.prototype.diff=function(){var e=new l,t=this.state.value[0],n=this.state.value[1];if(0===t.length&&0===n.length)return[];var i=e.diff_main(t,n);e.diff_cleanupSemantic(i);var o=this.generateDiffedLines(i);return this.setCodeMarkers(o)},t.prototype.generateDiffedLines=function(e){var t=0,n=-1,i=1,o={left:[],right:[]},r={left:1,right:1};return e.forEach((function(e){var s=e[0],a=e[1],l=a.split("\n").length-1;if(0!==a.length){var c=a[0],u=a[a.length-1],h=0;switch(s){case t:r.left+=l,r.right+=l;break;case n:"\n"===c&&(r.left++,l--),0===(h=l)&&o.right.push({startLine:r.right,endLine:r.right}),"\n"===u&&(h-=1),o.left.push({startLine:r.left,endLine:r.left+h}),r.left+=l;break;case i:"\n"===c&&(r.right++,l--),0===(h=l)&&o.left.push({startLine:r.left,endLine:r.left}),"\n"===u&&(h-=1),o.right.push({startLine:r.right,endLine:r.right+h}),r.right+=l;break;default:throw new Error("Diff type was not defined.")}}})),o},t.prototype.setCodeMarkers=function(e){void 0===e&&(e={left:[],right:[]});for(var t=[],n={left:[],right:[]},i=0;i<e.left.length;i++){var o={startRow:e.left[i].startLine-1,endRow:e.left[i].endLine,type:"text",className:"codeMarker"};n.left.push(o)}for(i=0;i<e.right.length;i++){o={startRow:e.right[i].startLine-1,endRow:e.right[i].endLine,type:"text",className:"codeMarker"};n.right.push(o)}return t[0]=n.left,t[1]=n.right,t},t.prototype.render=function(){var e=this.diff();return s.createElement(a.default,{name:this.props.name,className:this.props.className,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:e})},t.propTypes={cursorStart:r.number,editorProps:r.object,enableBasicAutocompletion:r.bool,enableLiveAutocompletion:r.bool,focus:r.bool,fontSize:r.number,height:r.string,highlightActiveLine:r.bool,maxLines:r.number,minLines:r.number,mode:r.string,name:r.string,className:r.string,onLoad:r.func,onPaste:r.func,onScroll:r.func,onChange:r.func,orientation:r.string,readOnly:r.bool,scrollMargin:r.array,setOptions:r.object,showGutter:r.bool,showPrintMargin:r.bool,splits:r.number,style:r.object,tabSize:r.number,theme:r.string,value:r.array,width:r.string,wrapEnabled:r.bool},t.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"ace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0},t}(s.Component);t.default=c},function(e,t,n){(function(e){ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],(function(e,t,n){"use strict";var i=e("./lib/oop"),o=(e("./lib/lang"),e("./lib/event_emitter").EventEmitter),r=e("./editor").Editor,s=e("./virtual_renderer").VirtualRenderer,a=e("./edit_session").EditSession,l=function(e,t,n){this.BELOW=1,this.BESIDE=0,this.$container=e,this.$theme=t,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(n||1),this.$cEditor=this.$editors[0],this.on("focus",function(e){this.$cEditor=e}.bind(this))};(function(){i.implement(this,o),this.$createEditor=function(){var e=document.createElement("div");e.className=this.$editorCSS,e.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(e);var t=new r(new s(e,this.$theme));return t.on("focus",function(){this._emit("focus",t)}.bind(this)),this.$editors.push(t),t.setFontSize(this.$fontSize),t},this.setSplits=function(e){var t;if(e<1)throw"The number of splits have to be > 0!";if(e!=this.$splits){if(e>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<e;)t=this.$editors[this.$splits],this.$container.appendChild(t.container),t.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<e;)this.$createEditor(),this.$splits++}else for(;this.$splits>e;)t=this.$editors[this.$splits-1],this.$container.removeChild(t.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(e){return this.$editors[e]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(e){this.$editors.forEach((function(t){t.setTheme(e)}))},this.setKeyboardHandler=function(e){this.$editors.forEach((function(t){t.setKeyboardHandler(e)}))},this.forEach=function(e,t){this.$editors.forEach(e,t)},this.$fontSize="",this.setFontSize=function(e){this.$fontSize=e,this.forEach((function(t){t.setFontSize(e)}))},this.$cloneSession=function(e){var t=new a(e.getDocument(),e.getMode()),n=e.getUndoManager();return t.setUndoManager(n),t.setTabSize(e.getTabSize()),t.setUseSoftTabs(e.getUseSoftTabs()),t.setOverwrite(e.getOverwrite()),t.setBreakpoints(e.getBreakpoints()),t.setUseWrapMode(e.getUseWrapMode()),t.setUseWorker(e.getUseWorker()),t.setWrapLimitRange(e.$wrapLimitRange.min,e.$wrapLimitRange.max),t.$foldData=e.$cloneFoldData(),t},this.setSession=function(e,t){var n;return n=null==t?this.$cEditor:this.$editors[t],this.$editors.some((function(t){return t.session===e}))&&(e=this.$cloneSession(e)),n.setSession(e),e},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(e){this.$orientation!=e&&(this.$orientation=e,this.resize())},this.resize=function(){var e,t=this.$container.clientWidth,n=this.$container.clientHeight;if(this.$orientation==this.BESIDE)for(var i=t/this.$splits,o=0;o<this.$splits;o++)(e=this.$editors[o]).container.style.width=i+"px",e.container.style.top="0px",e.container.style.left=o*i+"px",e.container.style.height=n+"px",e.resize();else{var r=n/this.$splits;for(o=0;o<this.$splits;o++)(e=this.$editors[o]).container.style.width=t+"px",e.container.style.top=o*r+"px",e.container.style.left="0px",e.container.style.height=r+"px",e.resize()}}}).call(l.prototype),t.Split=l})),ace.define("ace/ext/split",["require","exports","module","ace/split"],(function(e,t,n){"use strict";n.exports=e("../split")})),ace.require(["ace/ext/split"],(function(t){e&&(e.exports=t)}))}).call(this,n(23)(e))},function(e,t,n){(function(t){var n="Expected a function",i="__lodash_hash_undefined__",o=1/0,r="[object Function]",s="[object GeneratorFunction]",a="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,u=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,p=/^\[object .+?Constructor\]$/,f="object"==typeof t&&t&&t.Object===Object&&t,g="object"==typeof self&&self&&self.Object===Object&&self,m=f||g||Function("return this")();var v,_=Array.prototype,y=Function.prototype,b=Object.prototype,T=m["__core-js_shared__"],E=(v=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",w=y.toString,k=b.hasOwnProperty,S=b.toString,C=RegExp("^"+w.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=m.Symbol,A=_.splice,R=H(m,"Map"),I=H(Object,"create"),O=x?x.prototype:void 0,M=O?O.toString:void 0;function L(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function D(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function N(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function P(e,t){for(var n,i,o=e.length;o--;)if((n=e[o][0])===(i=t)||n!=n&&i!=i)return o;return-1}function B(e,t){for(var n,i=0,o=(t=function(e,t){if(G(e))return!1;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||X(e))return!0;return c.test(e)||!l.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:G(n=t)?n:U(n)).length;null!=e&&i<o;)e=e[$(t[i++])];return i&&i==o?e:void 0}function F(e){return!(!z(e)||(t=e,E&&E in t))&&(function(e){var t=z(e)?S.call(e):"";return t==r||t==s}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:p).test(function(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function W(e,t){var n,i,o=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function H(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return F(n)?n:void 0}L.prototype.clear=function(){this.__data__=I?I(null):{}},L.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},L.prototype.get=function(e){var t=this.__data__;if(I){var n=t[e];return n===i?void 0:n}return k.call(t,e)?t[e]:void 0},L.prototype.has=function(e){var t=this.__data__;return I?void 0!==t[e]:k.call(t,e)},L.prototype.set=function(e,t){return this.__data__[e]=I&&void 0===t?i:t,this},D.prototype.clear=function(){this.__data__=[]},D.prototype.delete=function(e){var t=this.__data__,n=P(t,e);return!(n<0)&&(n==t.length-1?t.pop():A.call(t,n,1),!0)},D.prototype.get=function(e){var t=this.__data__,n=P(t,e);return n<0?void 0:t[n][1]},D.prototype.has=function(e){return P(this.__data__,e)>-1},D.prototype.set=function(e,t){var n=this.__data__,i=P(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},N.prototype.clear=function(){this.__data__={hash:new L,map:new(R||D),string:new L}},N.prototype.delete=function(e){return W(this,e).delete(e)},N.prototype.get=function(e){return W(this,e).get(e)},N.prototype.has=function(e){return W(this,e).has(e)},N.prototype.set=function(e,t){return W(this,e).set(e,t),this};var U=V((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(X(e))return M?M.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(h,(function(e,t,i,o){n.push(i?o.replace(d,"$1"):t||e)})),n}));function $(e){if("string"==typeof e||X(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function V(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var i=function(){var n=arguments,o=t?t.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var s=e.apply(this,n);return i.cache=r.set(o,s),s};return i.cache=new(V.Cache||N),i}V.Cache=N;var G=Array.isArray;function z(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function X(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&S.call(e)==a}e.exports=function(e,t,n){var i=null==e?void 0:B(e,t);return void 0===i?n:i}}).call(this,n(8))},function(e,t){function n(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}n.Diff,n.prototype.diff_main=function(e,t,n,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[0,e]]:[];void 0===n&&(n=!0);var r=n,s=this.diff_commonPrefix(e,t),a=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var l=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var c=this.diff_compute_(e,t,r,o);return a&&c.unshift([0,a]),l&&c.push([0,l]),this.diff_cleanupMerge(c),c},n.prototype.diff_compute_=function(e,t,n,i){var o;if(!e)return[[1,t]];if(!t)return[[-1,e]];var r=e.length>t.length?e:t,s=e.length>t.length?t:e,a=r.indexOf(s);if(-1!=a)return o=[[1,r.substring(0,a)],[0,s],[1,r.substring(a+s.length)]],e.length>t.length&&(o[0][0]=o[2][0]=-1),o;if(1==s.length)return[[-1,e],[1,t]];var l=this.diff_halfMatch_(e,t);if(l){var c=l[0],u=l[1],h=l[2],d=l[3],p=l[4],f=this.diff_main(c,h,n,i),g=this.diff_main(u,d,n,i);return f.concat([[0,p]],g)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,i):this.diff_bisect_(e,t,i)},n.prototype.diff_lineMode_=function(e,t,n){e=(u=this.diff_linesToChars_(e,t)).chars1,t=u.chars2;var i=u.lineArray,o=this.diff_main(e,t,!1,n);this.diff_charsToLines_(o,i),this.diff_cleanupSemantic(o),o.push([0,""]);for(var r=0,s=0,a=0,l="",c="";r<o.length;){switch(o[r][0]){case 1:a++,c+=o[r][1];break;case-1:s++,l+=o[r][1];break;case 0:if(s>=1&&a>=1){o.splice(r-s-a,s+a),r=r-s-a;for(var u,h=(u=this.diff_main(l,c,!1,n)).length-1;h>=0;h--)o.splice(r,0,u[h]);r+=u.length}a=0,s=0,l="",c=""}r++}return o.pop(),o},n.prototype.diff_bisect_=function(e,t,n){for(var i=e.length,o=t.length,r=Math.ceil((i+o)/2),s=r,a=2*r,l=new Array(a),c=new Array(a),u=0;u<a;u++)l[u]=-1,c[u]=-1;l[s+1]=0,c[s+1]=0;for(var h=i-o,d=h%2!=0,p=0,f=0,g=0,m=0,v=0;v<r&&!((new Date).getTime()>n);v++){for(var _=-v+p;_<=v-f;_+=2){for(var y=s+_,b=(S=_==-v||_!=v&&l[y-1]<l[y+1]?l[y+1]:l[y-1]+1)-_;S<i&&b<o&&e.charAt(S)==t.charAt(b);)S++,b++;if(l[y]=S,S>i)f+=2;else if(b>o)p+=2;else if(d){if((w=s+h-_)>=0&&w<a&&-1!=c[w])if(S>=(E=i-c[w]))return this.diff_bisectSplit_(e,t,S,b,n)}}for(var T=-v+g;T<=v-m;T+=2){for(var E,w=s+T,k=(E=T==-v||T!=v&&c[w-1]<c[w+1]?c[w+1]:c[w-1]+1)-T;E<i&&k<o&&e.charAt(i-E-1)==t.charAt(o-k-1);)E++,k++;if(c[w]=E,E>i)m+=2;else if(k>o)g+=2;else if(!d){if((y=s+h-T)>=0&&y<a&&-1!=l[y]){var S;b=s+(S=l[y])-y;if(S>=(E=i-E))return this.diff_bisectSplit_(e,t,S,b,n)}}}}return[[-1,e],[1,t]]},n.prototype.diff_bisectSplit_=function(e,t,n,i,o){var r=e.substring(0,n),s=t.substring(0,i),a=e.substring(n),l=t.substring(i),c=this.diff_main(r,s,!1,o),u=this.diff_main(a,l,!1,o);return c.concat(u)},n.prototype.diff_linesToChars_=function(e,t){var n=[],i={};function o(e){for(var t="",o=0,r=-1,s=n.length;r<e.length-1;){-1==(r=e.indexOf("\n",o))&&(r=e.length-1);var a=e.substring(o,r+1);o=r+1,(i.hasOwnProperty?i.hasOwnProperty(a):void 0!==i[a])?t+=String.fromCharCode(i[a]):(t+=String.fromCharCode(s),i[a]=s,n[s++]=a)}return t}return n[0]="",{chars1:o(e),chars2:o(t),lineArray:n}},n.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],o=[],r=0;r<i.length;r++)o[r]=t[i.charCodeAt(r)];e[n][1]=o.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,r=0;n<o;)e.substring(r,o)==t.substring(r,o)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),o=i,r=0;n<o;)e.substring(e.length-o,e.length-r)==t.substring(t.length-o,t.length-r)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o},n.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var o=Math.min(n,i);if(e==t)return o;for(var r=0,s=1;;){var a=e.substring(o-s),l=t.indexOf(a);if(-1==l)return r;s+=l,0!=l&&e.substring(o-s)!=t.substring(0,s)||(r=s,s++)}},n.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var o=this;function r(e,t,n){for(var i,r,s,a,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var h=o.diff_commonPrefix(e.substring(n),t.substring(c)),d=o.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<d+h&&(u=t.substring(c-d,c)+t.substring(c,c+h),i=e.substring(0,n-d),r=e.substring(n+h),s=t.substring(0,c-d),a=t.substring(c+h))}return 2*u.length>=e.length?[i,r,s,a,u]:null}var s,a,l,c,u,h=r(n,i,Math.ceil(n.length/4)),d=r(n,i,Math.ceil(n.length/2));return h||d?(s=d?h&&h[4].length>d[4].length?h:d:h,e.length>t.length?(a=s[0],l=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],a=s[2],l=s[3]),[a,l,c,u,s[4]]):null},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],i=0,o=null,r=0,s=0,a=0,l=0,c=0;r<e.length;)0==e[r][0]?(n[i++]=r,s=l,a=c,l=0,c=0,o=e[r][1]):(1==e[r][0]?l+=e[r][1].length:c+=e[r][1].length,o&&o.length<=Math.max(s,a)&&o.length<=Math.max(l,c)&&(e.splice(n[i-1],0,[-1,o]),e[n[i-1]+1][0]=1,i--,r=--i>0?n[i-1]:-1,s=0,a=0,l=0,c=0,o=null,t=!0)),r++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),r=1;r<e.length;){if(-1==e[r-1][0]&&1==e[r][0]){var u=e[r-1][1],h=e[r][1],d=this.diff_commonOverlap_(u,h),p=this.diff_commonOverlap_(h,u);d>=p?(d>=u.length/2||d>=h.length/2)&&(e.splice(r,0,[0,h.substring(0,d)]),e[r-1][1]=u.substring(0,u.length-d),e[r+1][1]=h.substring(d),r++):(p>=u.length/2||p>=h.length/2)&&(e.splice(r,0,[0,u.substring(0,p)]),e[r-1][0]=1,e[r-1][1]=h.substring(0,h.length-p),e[r+1][0]=-1,e[r+1][1]=u.substring(p),r++),r++}r++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var i=e.charAt(e.length-1),o=t.charAt(0),r=i.match(n.nonAlphaNumericRegex_),s=o.match(n.nonAlphaNumericRegex_),a=r&&i.match(n.whitespaceRegex_),l=s&&o.match(n.whitespaceRegex_),c=a&&i.match(n.linebreakRegex_),u=l&&o.match(n.linebreakRegex_),h=c&&e.match(n.blanklineEndRegex_),d=u&&t.match(n.blanklineStartRegex_);return h||d?5:c||u?4:r&&!a&&l?3:a||l?2:r||s?1:0}for(var i=1;i<e.length-1;){if(0==e[i-1][0]&&0==e[i+1][0]){var o=e[i-1][1],r=e[i][1],s=e[i+1][1],a=this.diff_commonSuffix(o,r);if(a){var l=r.substring(r.length-a);o=o.substring(0,o.length-a),r=l+r.substring(0,r.length-a),s=l+s}for(var c=o,u=r,h=s,d=t(o,r)+t(r,s);r.charAt(0)===s.charAt(0);){o+=r.charAt(0),r=r.substring(1)+s.charAt(0),s=s.substring(1);var p=t(o,r)+t(r,s);p>=d&&(d=p,c=o,u=r,h=s)}e[i-1][1]!=c&&(c?e[i-1][1]=c:(e.splice(i-1,1),i--),e[i][1]=u,h?e[i+1][1]=h:(e.splice(i+1,1),i--))}i++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],i=0,o=null,r=0,s=!1,a=!1,l=!1,c=!1;r<e.length;)0==e[r][0]?(e[r][1].length<this.Diff_EditCost&&(l||c)?(n[i++]=r,s=l,a=c,o=e[r][1]):(i=0,o=null),l=c=!1):(-1==e[r][0]?c=!0:l=!0,o&&(s&&a&&l&&c||o.length<this.Diff_EditCost/2&&s+a+l+c==3)&&(e.splice(n[i-1],0,[-1,o]),e[n[i-1]+1][0]=1,i--,o=null,s&&a?(l=c=!0,i=0):(r=--i>0?n[i-1]:-1,l=c=!1),t=!0)),r++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push([0,""]);for(var t,n=0,i=0,o=0,r="",s="";n<e.length;)switch(e[n][0]){case 1:o++,s+=e[n][1],n++;break;case-1:i++,r+=e[n][1],n++;break;case 0:i+o>1?(0!==i&&0!==o&&(0!==(t=this.diff_commonPrefix(s,r))&&(n-i-o>0&&0==e[n-i-o-1][0]?e[n-i-o-1][1]+=s.substring(0,t):(e.splice(0,0,[0,s.substring(0,t)]),n++),s=s.substring(t),r=r.substring(t)),0!==(t=this.diff_commonSuffix(s,r))&&(e[n][1]=s.substring(s.length-t)+e[n][1],s=s.substring(0,s.length-t),r=r.substring(0,r.length-t))),0===i?e.splice(n-o,i+o,[1,s]):0===o?e.splice(n-i,i+o,[-1,r]):e.splice(n-i-o,i+o,[-1,r],[1,s]),n=n-i-o+(i?1:0)+(o?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,o=0,i=0,r="",s=""}""===e[e.length-1][1]&&e.pop();var a=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),a=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),a=!0)),n++;a&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var n,i=0,o=0,r=0,s=0;for(n=0;n<e.length&&(1!==e[n][0]&&(i+=e[n][1].length),-1!==e[n][0]&&(o+=e[n][1].length),!(i>t));n++)r=i,s=o;return e.length!=n&&-1===e[n][0]?s:s+(t-r)},n.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,o=/>/g,r=/\n/g,s=0;s<e.length;s++){var a=e[s][0],l=e[s][1].replace(n,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(r,"&para;<br>");switch(a){case 1:t[s]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case-1:t[s]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:t[s]="<span>"+l+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,n=0,i=0,o=0;o<e.length;o++){var r=e[o][0],s=e[o][1];switch(r){case 1:n+=s.length;break;case-1:i+=s.length;break;case 0:t+=Math.max(n,i),n=0,i=0}}return t+=Math.max(n,i)},n.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var n=[],i=0,o=0,r=t.split(/\t/g),s=0;s<r.length;s++){var a=r[s].substring(1);switch(r[s].charAt(0)){case"+":try{n[i++]=[1,decodeURI(a)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var l=parseInt(a,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+a);var c=e.substring(o,o+=l);"="==r[s].charAt(0)?n[i++]=[0,c]:n[i++]=[-1,c];break;default:if(r[s])throw new Error("Invalid diff operation in diff_fromDelta: "+r[s])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return n},n.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},n.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),o=this;function r(e,i){var r=e/t.length,s=Math.abs(n-i);return o.Match_Distance?r+s/o.Match_Distance:s?1:r}var s=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(s=Math.min(r(0,a),s),-1!=(a=e.lastIndexOf(t,n+t.length))&&(s=Math.min(r(0,a),s)));var l,c,u=1<<t.length-1;a=-1;for(var h,d=t.length+e.length,p=0;p<t.length;p++){for(l=0,c=d;l<c;)r(p,n+c)<=s?l=c:d=c,c=Math.floor((d-l)/2+l);d=c;var f=Math.max(1,n-c+1),g=Math.min(n+c,e.length)+t.length,m=Array(g+2);m[g+1]=(1<<p)-1;for(var v=g;v>=f;v--){var _=i[e.charAt(v-1)];if(m[v]=0===p?(m[v+1]<<1|1)&_:(m[v+1]<<1|1)&_|(h[v+1]|h[v])<<1|1|h[v+1],m[v]&u){var y=r(p,v-1);if(y<=s){if(s=y,!((a=v-1)>n))break;f=Math.max(1,2*n-a)}}}if(r(p+1,n)>s)break;h=m}return a},n.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var o=t.substring(e.start2-i,e.start2);o&&e.diffs.unshift([0,o]);var r=t.substring(e.start2+e.length1,e.start2+e.length1+i);r&&e.diffs.push([0,r]),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+r.length,e.length2+=o.length+r.length}},n.prototype.patch_make=function(e,t,i){var o,r;if("string"==typeof e&&"string"==typeof t&&void 0===i)o=e,(r=this.diff_main(o,t,!0)).length>2&&(this.diff_cleanupSemantic(r),this.diff_cleanupEfficiency(r));else if(e&&"object"==typeof e&&void 0===t&&void 0===i)r=e,o=this.diff_text1(r);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===i)o=e,r=t;else{if("string"!=typeof e||"string"!=typeof t||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");o=e,r=i}if(0===r.length)return[];for(var s=[],a=new n.patch_obj,l=0,c=0,u=0,h=o,d=o,p=0;p<r.length;p++){var f=r[p][0],g=r[p][1];switch(l||0===f||(a.start1=c,a.start2=u),f){case 1:a.diffs[l++]=r[p],a.length2+=g.length,d=d.substring(0,u)+g+d.substring(u);break;case-1:a.length1+=g.length,a.diffs[l++]=r[p],d=d.substring(0,u)+d.substring(u+g.length);break;case 0:g.length<=2*this.Patch_Margin&&l&&r.length!=p+1?(a.diffs[l++]=r[p],a.length1+=g.length,a.length2+=g.length):g.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(a,h),s.push(a),a=new n.patch_obj,l=0,h=d,c=u)}1!==f&&(c+=g.length),-1!==f&&(u+=g.length)}return l&&(this.patch_addContext_(a,h),s.push(a)),s},n.prototype.patch_deepCopy=function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i],r=new n.patch_obj;r.diffs=[];for(var s=0;s<o.diffs.length;s++)r.diffs[s]=o.diffs[s].slice();r.start1=o.start1,r.start2=o.start2,r.length1=o.length1,r.length2=o.length2,t[i]=r}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var i=0,o=[],r=0;r<e.length;r++){var s,a,l=e[r].start2+i,c=this.diff_text1(e[r].diffs),u=-1;if(c.length>this.Match_MaxBits?-1!=(s=this.match_main(t,c.substring(0,this.Match_MaxBits),l))&&(-1==(u=this.match_main(t,c.substring(c.length-this.Match_MaxBits),l+c.length-this.Match_MaxBits))||s>=u)&&(s=-1):s=this.match_main(t,c,l),-1==s)o[r]=!1,i-=e[r].length2-e[r].length1;else if(o[r]=!0,i=s-l,c==(a=-1==u?t.substring(s,s+c.length):t.substring(s,u+this.Match_MaxBits)))t=t.substring(0,s)+this.diff_text2(e[r].diffs)+t.substring(s+c.length);else{var h=this.diff_main(c,a,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(h)/c.length>this.Patch_DeleteThreshold)o[r]=!1;else{this.diff_cleanupSemanticLossless(h);for(var d,p=0,f=0;f<e[r].diffs.length;f++){var g=e[r].diffs[f];0!==g[0]&&(d=this.diff_xIndex(h,p)),1===g[0]?t=t.substring(0,s+d)+g[1]+t.substring(s+d):-1===g[0]&&(t=t.substring(0,s+d)+t.substring(s+this.diff_xIndex(h,p+g[1].length))),-1!==g[0]&&(p+=g[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),o]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",i=1;i<=t;i++)n+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var o=e[0],r=o.diffs;if(0==r.length||0!=r[0][0])r.unshift([0,n]),o.start1-=t,o.start2-=t,o.length1+=t,o.length2+=t;else if(t>r[0][1].length){var s=t-r[0][1].length;r[0][1]=n.substring(r[0][1].length)+r[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}if(0==(r=(o=e[e.length-1]).diffs).length||0!=r[r.length-1][0])r.push([0,n]),o.length1+=t,o.length2+=t;else if(t>r[r.length-1][1].length){s=t-r[r.length-1][1].length;r[r.length-1][1]+=n.substring(0,s),o.length1+=s,o.length2+=s}return n},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=t)){var o=e[i];e.splice(i--,1);for(var r=o.start1,s=o.start2,a="";0!==o.diffs.length;){var l=new n.patch_obj,c=!0;for(l.start1=r-a.length,l.start2=s-a.length,""!==a&&(l.length1=l.length2=a.length,l.diffs.push([0,a]));0!==o.diffs.length&&l.length1<t-this.Patch_Margin;){var u=o.diffs[0][0],h=o.diffs[0][1];1===u?(l.length2+=h.length,s+=h.length,l.diffs.push(o.diffs.shift()),c=!1):-1===u&&1==l.diffs.length&&0==l.diffs[0][0]&&h.length>2*t?(l.length1+=h.length,r+=h.length,c=!1,l.diffs.push([u,h]),o.diffs.shift()):(h=h.substring(0,t-l.length1-this.Patch_Margin),l.length1+=h.length,r+=h.length,0===u?(l.length2+=h.length,s+=h.length):c=!1,l.diffs.push([u,h]),h==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(h.length))}a=(a=this.diff_text2(l.diffs)).substring(a.length-this.Patch_Margin);var d=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==d&&(l.length1+=d.length,l.length2+=d.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=d:l.diffs.push([0,d])),c||e.splice(++i,0,l)}}},n.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var i=e.split("\n"),o=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<i.length;){var s=i[o].match(r);if(!s)throw new Error("Invalid patch string: "+i[o]);var a=new n.patch_obj;for(t.push(a),a.start1=parseInt(s[1],10),""===s[2]?(a.start1--,a.length1=1):"0"==s[2]?a.length1=0:(a.start1--,a.length1=parseInt(s[2],10)),a.start2=parseInt(s[3],10),""===s[4]?(a.start2--,a.length2=1):"0"==s[4]?a.length2=0:(a.start2--,a.length2=parseInt(s[4],10)),o++;o<i.length;){var l=i[o].charAt(0);try{var c=decodeURI(i[o].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==l)a.diffs.push([-1,c]);else if("+"==l)a.diffs.push([1,c]);else if(" "==l)a.diffs.push([0,c]);else{if("@"==l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+c)}o++}}return t},n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},n.patch_obj.prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case-1:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=n,e.exports.diff_match_patch=n,e.exports.DIFF_DELETE=-1,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},function(e,t,n){(function(e){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("./text_highlight_rules").TextHighlightRules,r=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},r.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};i.inherits(r,o),r.getTagRule=function(e){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},r.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},r.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=r})),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("./doc_comment_highlight_rules").DocCommentHighlightRules,r=e("./text_highlight_rules").TextHighlightRules,s="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*",a=function(e){var t=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),n="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[o.getStartRule("doc-start"),c("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+s+")(\\.)(prototype)(\\.)("+s+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+s+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"},{token:"keyword",regex:"(?:case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void)\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:t,regex:s},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:s},{regex:"",token:"empty",next:"no_regex"}],start:[o.getStartRule("doc-start"),c("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:s},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},e&&e.noES6||(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(e,t,n){if(this.next="{"==e?this.nextState:"","{"==e&&n.length)n.unshift("start",t);else if("}"==e&&n.length&&(n.shift(),this.next=n.shift(),-1!=this.next.indexOf("string")||-1!=this.next.indexOf("jsx")))return"paren.quasi.end";return"{"==e?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:n},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),e&&0==e.jsx||l.call(this)),this.embedRules(o,"doc-",[o.getEndRule("no_regex")]),this.normalizeRules()};function l(){var e=s.replace("\\d","\\d\\-"),t={onMatch:function(e,t,n){var i="/"==e.charAt(1)?2:1;return 1==i?(t!=this.nextState?n.unshift(this.next,this.nextState,0):n.unshift(this.next),n[2]++):2==i&&t==this.nextState&&(n[1]--,(!n[1]||n[1]<0)&&(n.shift(),n.shift())),[{type:"meta.tag.punctuation."+(1==i?"":"end-")+"tag-open.xml",value:e.slice(0,i)},{type:"meta.tag.tag-name.xml",value:e.substr(i)}]},regex:"</?"+e,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);var n={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[n,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(e,t,n){return t==n[0]&&n.shift(),2==e.length&&(n[0]==this.nextState&&n[1]--,(!n[1]||n[1]<0)&&n.splice(0,2)),this.next=n[0]||"start",[{type:this.token,value:e}]},nextState:"jsx"},n,c("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},t],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function c(e){return[{token:"comment",regex:/\/\*/,next:[o.getTagRule(),{token:"comment",regex:"\\*\\/",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[o.getTagRule(),{token:"comment",regex:"$|^",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}i.inherits(a,r),t.JavaScriptHighlightRules=a})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("../range").Range,o=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var n=e.getLine(t).match(/^(\s*\})/);if(!n)return 0;var o=n[1].length,r=e.findMatchingBracket({row:t,column:o});if(!r||r.row==t)return 0;var s=this.$getIndent(e.getLine(r.row));e.replace(new i(t,0,t,o-1),s)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(o.prototype),t.MatchingBraceOutdent=o})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){"use strict";var i=e("../../lib/oop"),o=e("../../range").Range,r=e("./fold_mode").FoldMode,s=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};i.inherits(s,r),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var o=this._getFoldWidgetBase(e,t,n);return!o&&this.startRegionRe.test(i)?"start":o},this.getFoldWidgetRange=function(e,t,n,i){var o,r=e.getLine(n);if(this.startRegionRe.test(r))return this.getCommentRegionBlock(e,r,n);if(o=r.match(this.foldingStartMarker)){var s=o.index;if(o[1])return this.openingBracketBlock(e,o[1],n,s);var a=e.getCommentFoldRange(n,s+o[0].length,1);return a&&!a.isMultiLine()&&(i?a=this.getSectionRange(e,n):"all"!=t&&(a=null)),a}if("markbegin"!==t&&(o=r.match(this.foldingStopMarker))){s=o.index+o[0].length;return o[1]?this.closingBracketBlock(e,o[1],n,s):e.getCommentFoldRange(n,s,-1)}},this.getSectionRange=function(e,t){for(var n=e.getLine(t),i=n.search(/\S/),r=t,s=n.length,a=t+=1,l=e.getLength();++t<l;){var c=(n=e.getLine(t)).search(/\S/);if(-1!==c){if(i>c)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=r)break;if(u.isMultiLine())t=u.end.row;else if(i==c)break}a=t}}return new o(r,s,a,e.getLine(a).length)},this.getCommentRegionBlock=function(e,t,n){for(var i=t.search(/\s*$/),r=e.getLength(),s=n,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<r;){t=e.getLine(n);var c=a.exec(t);if(c&&(c[1]?l--:l++,!l))break}if(n>s)return new o(s,i,n,t.length)}}.call(s.prototype)})),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],(function(e,t,n){"use strict";var i=e("../lib/oop"),o=e("./text").Mode,r=e("./javascript_highlight_rules").JavaScriptHighlightRules,s=e("./matching_brace_outdent").MatchingBraceOutdent,a=e("../worker/worker_client").WorkerClient,l=e("./behaviour/cstyle").CstyleBehaviour,c=e("./folding/cstyle").FoldMode,u=function(){this.HighlightRules=r,this.$outdent=new s,this.$behaviour=new l,this.foldingRules=new c};i.inherits(u,o),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),o=this.getTokenizer().getLineTokens(t,e),r=o.tokens,s=o.state;if(r.length&&"comment"==r[r.length-1].type)return i;if("start"==e||"no_regex"==e)(a=t.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/))&&(i+=n);else if("doc-start"==e){if("start"==s||"no_regex"==s)return"";var a;(a=t.match(/^\s*(\/?)\*/))&&(a[1]&&(i+=" "),i+="* ")}return i},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new a(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",(function(t){e.setAnnotations(t.data)})),t.on("terminate",(function(){e.clearAnnotations()})),t},this.$id="ace/mode/javascript"}.call(u.prototype),t.Mode=u})),ace.require(["ace/mode/javascript"],(function(t){e&&(e.exports=t)}))}).call(this,n(23)(e))},function(e,t,n){(function(e){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",e("../lib/dom").importCssString(t.cssText,t.cssClass)})),ace.require(["ace/theme/monokai"],(function(t){e&&(e.exports=t)}))}).call(this,n(23)(e))},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),r=n(42),s=n.n(r),a=n(4),l=n.n(a),c=n(19),u=n.n(c),h=n(1),d=n.n(h);function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function g(e){return"/"===e.charAt(0)}function m(e,t){for(var n=t,i=n+1,o=e.length;i<o;n+=1,i+=1)e[n]=e[i];e.pop()}var v=function(e,t){void 0===t&&(t="");var n,i=e&&e.split("/")||[],o=t&&t.split("/")||[],r=e&&g(e),s=t&&g(t),a=r||s;if(e&&g(e)?o=i:i.length&&(o.pop(),o=o.concat(i)),!o.length)return"/";if(o.length){var l=o[o.length-1];n="."===l||".."===l||""===l}else n=!1;for(var c=0,u=o.length;u>=0;u--){var h=o[u];"."===h?m(o,u):".."===h?(m(o,u),c++):c&&(m(o,u),c--)}if(!a)for(;c--;c)o.unshift("..");!a||""===o[0]||o[0]&&g(o[0])||o.unshift("");var d=o.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};var _=!0,y="Invariant failed";var b=function(e,t){if(!e)throw _?new Error(y):new Error(y+": "+(t||""))};function T(e){return"/"===e.charAt(0)?e:"/"+e}function E(e){return"/"===e.charAt(0)?e.substr(1):e}function w(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function k(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function S(e){var t=e.pathname,n=e.search,i=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(o+="#"===i.charAt(0)?i:"#"+i),o}function C(e,t,n,i){var o;"string"==typeof e?(o=function(e){var t=e||"/",n="",i="",o=t.indexOf("#");-1!==o&&(i=t.substr(o),t=t.substr(0,o));var r=t.indexOf("?");return-1!==r&&(n=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===n?"":n,hash:"#"===i?"":i}}(e)).state=t:(void 0===(o=f({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=v(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function x(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,i,o){if(null!=e){var r="function"==typeof e?e(t,n):e;"string"==typeof r?"function"==typeof i?i(r,o):o(!0):o(!1!==r)}else o(!0)},appendListener:function(e){var n=!0;function i(){n&&e.apply(void 0,arguments)}return t.push(i),function(){n=!1,t=t.filter((function(e){return e!==i}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach((function(e){return e.apply(void 0,n)}))}}}var A=!("undefined"==typeof window||!window.document||!window.document.createElement);function R(e,t){t(window.confirm(e))}var I="popstate",O="hashchange";function M(){try{return window.history.state||{}}catch(e){return{}}}function L(e){void 0===e&&(e={}),A||b(!1);var t,n=window.history,i=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,o=!(-1===window.navigator.userAgent.indexOf("Trident")),r=e,s=r.forceRefresh,a=void 0!==s&&s,l=r.getUserConfirmation,c=void 0===l?R:l,u=r.keyLength,h=void 0===u?6:u,d=e.basename?k(T(e.basename)):"";function p(e){var t=e||{},n=t.key,i=t.state,o=window.location,r=o.pathname+o.search+o.hash;return d&&(r=w(r,d)),C(r,i,n)}function g(){return Math.random().toString(36).substr(2,h)}var m=x();function v(e){f(U,e),U.length=n.length,m.notifyListeners(U.location,U.action)}function _(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||L(p(e.state))}function y(){L(p(M()))}var E=!1;function L(e){if(E)E=!1,v();else{m.confirmTransitionTo(e,"POP",c,(function(t){t?v({action:"POP",location:e}):function(e){var t=U.location,n=N.indexOf(t.key);-1===n&&(n=0);var i=N.indexOf(e.key);-1===i&&(i=0);var o=n-i;o&&(E=!0,B(o))}(e)}))}}var D=p(M()),N=[D.key];function P(e){return d+S(e)}function B(e){n.go(e)}var F=0;function W(e){1===(F+=e)&&1===e?(window.addEventListener(I,_),o&&window.addEventListener(O,y)):0===F&&(window.removeEventListener(I,_),o&&window.removeEventListener(O,y))}var H=!1;var U={length:n.length,action:"POP",location:D,createHref:P,push:function(e,t){var o=C(e,t,g(),U.location);m.confirmTransitionTo(o,"PUSH",c,(function(e){if(e){var t=P(o),r=o.key,s=o.state;if(i)if(n.pushState({key:r,state:s},null,t),a)window.location.href=t;else{var l=N.indexOf(U.location.key),c=N.slice(0,l+1);c.push(o.key),N=c,v({action:"PUSH",location:o})}else window.location.href=t}}))},replace:function(e,t){var o=C(e,t,g(),U.location);m.confirmTransitionTo(o,"REPLACE",c,(function(e){if(e){var t=P(o),r=o.key,s=o.state;if(i)if(n.replaceState({key:r,state:s},null,t),a)window.location.replace(t);else{var l=N.indexOf(U.location.key);-1!==l&&(N[l]=o.key),v({action:"REPLACE",location:o})}else window.location.replace(t)}}))},go:B,goBack:function(){B(-1)},goForward:function(){B(1)},block:function(e){void 0===e&&(e=!1);var t=m.setPrompt(e);return H||(W(1),H=!0),function(){return H&&(H=!1,W(-1)),t()}},listen:function(e){var t=m.appendListener(e);return W(1),function(){W(-1),t()}}};return U}var D="hashchange",N={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+E(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:E,decodePath:T},slash:{encodePath:T,decodePath:T}};function P(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function B(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function F(e){window.location.replace(P(window.location.href)+"#"+e)}function W(e){void 0===e&&(e={}),A||b(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,o=void 0===i?R:i,r=n.hashType,s=void 0===r?"slash":r,a=e.basename?k(T(e.basename)):"",l=N[s],c=l.encodePath,u=l.decodePath;function h(){var e=u(B());return a&&(e=w(e,a)),C(e)}var d=x();function p(e){f(H,e),H.length=t.length,d.notifyListeners(H.location,H.action)}var g=!1,m=null;function v(){var e,t,n=B(),i=c(n);if(n!==i)F(i);else{var r=h(),s=H.location;if(!g&&(t=r,(e=s).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(m===S(r))return;m=null,function(e){if(g)g=!1,p();else{d.confirmTransitionTo(e,"POP",o,(function(t){t?p({action:"POP",location:e}):function(e){var t=H.location,n=I.lastIndexOf(S(t));-1===n&&(n=0);var i=I.lastIndexOf(S(e));-1===i&&(i=0);var o=n-i;o&&(g=!0,O(o))}(e)}))}}(r)}}var _=B(),y=c(_);_!==y&&F(y);var E=h(),I=[S(E)];function O(e){t.go(e)}var M=0;function L(e){1===(M+=e)&&1===e?window.addEventListener(D,v):0===M&&window.removeEventListener(D,v)}var W=!1;var H={length:t.length,action:"POP",location:E,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=P(window.location.href)),n+"#"+c(a+S(e))},push:function(e,t){var n=C(e,void 0,void 0,H.location);d.confirmTransitionTo(n,"PUSH",o,(function(e){if(e){var t=S(n),i=c(a+t);if(B()!==i){m=t,function(e){window.location.hash=e}(i);var o=I.lastIndexOf(S(H.location)),r=I.slice(0,o+1);r.push(t),I=r,p({action:"PUSH",location:n})}else p()}}))},replace:function(e,t){var n=C(e,void 0,void 0,H.location);d.confirmTransitionTo(n,"REPLACE",o,(function(e){if(e){var t=S(n),i=c(a+t);B()!==i&&(m=t,F(i));var o=I.indexOf(S(H.location));-1!==o&&(I[o]=t),p({action:"REPLACE",location:n})}}))},go:O,goBack:function(){O(-1)},goForward:function(){O(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return W||(L(1),W=!0),function(){return W&&(W=!1,L(-1)),t()}},listen:function(e){var t=d.appendListener(e);return L(1),function(){L(-1),t()}}};return H}function H(e,t,n){return Math.min(Math.max(e,t),n)}var U=n(44),$=n.n(U),V=n(69),G=n.n(V),z=1073741823;var X=o.a.createContext||function(e,t){var n,o,r="__create-react-context-"+G()()+"__",s=function(e){function n(){var t,n,i;return(t=e.apply(this,arguments)||this).emitter=(n=t.props.value,i=[],{on:function(e){i.push(e)},off:function(e){i=i.filter((function(t){return t!==e}))},get:function(){return n},set:function(e,t){n=e,i.forEach((function(e){return e(n,t)}))}}),t}$()(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[r]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,i=this.props.value,o=e.value;((r=i)===(s=o)?0!==r||1/r==1/s:r!=r&&s!=s)?n=0:(n="function"==typeof t?t(i,o):z,0!==(n|=0)&&this.emitter.set(e.value,n))}var r,s},i.render=function(){return this.props.children},n}(i.Component);s.childContextTypes=((n={})[r]=d.a.object.isRequired,n);var a=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}$()(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?z:t},i.componentDidMount=function(){this.context[r]&&this.context[r].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?z:e},i.componentWillUnmount=function(){this.context[r]&&this.context[r].off(this.onUpdate)},i.getValue=function(){return this.context[r]?this.context[r].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return a.contextTypes=((o={})[r]=d.a.object,o),{Provider:s,Consumer:a}},j=n(45),K=n.n(j);n(34);function Y(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}n(70);var q=function(e){var t=X();return t.displayName=e,t}("Router"),J=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}p(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return o.a.createElement(q.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},t}(o.a.Component);o.a.Component;o.a.Component;var Z={},Q=1e4,ee=0;function te(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,i=n.path,o=n.exact,r=void 0!==o&&o,s=n.strict,a=void 0!==s&&s,l=n.sensitive,c=void 0!==l&&l;return[].concat(i).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var i=function(e,t){var n=""+t.end+t.strict+t.sensitive,i=Z[n]||(Z[n]={});if(i[e])return i[e];var o=[],r={regexp:K()(e,o,t),keys:o};return ee<Q&&(i[e]=r,ee++),r}(n,{end:r,strict:a,sensitive:c}),o=i.regexp,s=i.keys,l=o.exec(e);if(!l)return null;var u=l[0],h=l.slice(1),d=e===u;return r&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:s.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var ne=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.render=function(){var e=this;return o.a.createElement(q.Consumer,null,(function(t){t||b(!1);var n=e.props.location||t.location,i=f({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?te(n.pathname,e.props):t.match}),r=e.props,s=r.children,a=r.component,l=r.render;return Array.isArray(s)&&0===s.length&&(s=null),o.a.createElement(q.Provider,{value:i},i.match?s?"function"==typeof s?s(i):s:a?o.a.createElement(a,i):l?l(i):null:"function"==typeof s?s(i):null)}))},t}(o.a.Component);function ie(e){return"/"===e.charAt(0)?e:"/"+e}function oe(e,t){if(!e)return t;var n=ie(e);return 0!==t.pathname.indexOf(n)?t:f({},t,{pathname:t.pathname.substr(n.length)})}function re(e){return"string"==typeof e?e:S(e)}function se(e){return function(){b(!1)}}function ae(){}o.a.Component;var le=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.render=function(){var e=this;return o.a.createElement(q.Consumer,null,(function(t){t||b(!1);var n,i,r=e.props.location||t.location;return o.a.Children.forEach(e.props.children,(function(e){if(null==i&&o.a.isValidElement(e)){n=e;var s=e.props.path||e.props.from;i=s?te(r.pathname,f({},e.props,{path:s})):t.match}})),i?o.a.cloneElement(n,{location:r,computedMatch:i}):null}))},t}(o.a.Component);var ce=o.a.useContext;function ue(){return ce(q).history}function he(){return ce(q).location}var de=o.a.createContext(0);function pe(e){return o.a.createElement(de.Consumer,null,(function(t){var n="h".concat(Math.min(6,t));return o.a.createElement(n,e)}))}function fe(e){return o.a.createElement(de.Consumer,null,(function(t){return o.a.createElement(de.Provider,{value:t+1},o.a.createElement("section",e))}))}fe.propTypes={children:d.a.oneOfType([d.a.object,d.a.array]).isRequired};var ge=fe;var me=function(){return o.a.createElement(ge,null,o.a.createElement(pe,null,"Kvasir"),o.a.createElement("p",null,"Opinionated Kafka library."),o.a.createElement(ge,null,o.a.createElement(pe,null,"Components"),o.a.createElement(ge,null,o.a.createElement(pe,null,"Agent"),o.a.createElement("p",null,"Allows for aggregated state processes.")),o.a.createElement(ge,null,o.a.createElement(pe,null,"Blockly"),o.a.createElement("p",null,"Generate Event Source blocks for Google Blockly.")),o.a.createElement(ge,null,o.a.createElement(pe,null,"HTTP"),o.a.createElement("p",null,"HTTP2 Server Side Events combined with a documentation viewer.")),o.a.createElement(ge,null,o.a.createElement(pe,null,"Projector"),o.a.createElement("p",null,"Allow for event projection."))))},ve=function(e){var t=window.innerHeight||document.documentElement.clientHeight,n=e[0],i=e.slice(-1).pop(),o=i.getBoundingClientRect().bottom;return n.getBoundingClientRect().top>=0?n:o>=0&&o<=t?i:e.find((function(e){return function(e,t){var n=e.getBoundingClientRect(),i=n.top,o=n.bottom;return i>=0||5*o>t}(e,t)}))},_e=o.a.createContext((function(){}));function ye(e){var t=e.path,n=e.children;return o.a.createElement(_e.Consumer,null,(function(e){return o.a.createElement("div",{ref:function(t){return e(t)},"data-path":t},n)}))}ye.propTypes={path:d.a.string.isRequired,children:d.a.oneOfType([d.a.object,d.a.array])};var be={push:""};function Te(e){var t=e.children,n=[],r=Object(i.useState)(""),s=l()(r,2),a=s[0],c=s[1],u=ue().push,h=he().pathname,d=function(){var e=ve(n);if(e){var t=e.getAttribute("data-path");be.push=t,t!==h&&u(t)}};return Object(i.useEffect)((function(){if(2==h.split("/").length&&""===a&&h.split("/")[1]!==be.push.split("/")[1])window.scrollTo({top:0,left:0,behavior:"auto"});else if(h!==a&&be.push!==h){var e=document.querySelector("div[data-path='".concat(h,"']"));e&&e.scrollIntoView(),c(h)}return window.addEventListener("scroll",d),window.addEventListener("resize",d),function(){window.removeEventListener("resize",d),window.removeEventListener("scroll",d)}})),o.a.createElement(_e.Provider,{value:function(e){return e&&n.push(e)}},t)}Te.propTypes={children:d.a.oneOfType([d.a.object,d.a.array]).isRequired};var Ee=Te,we=n(15),ke=n(7),Se=n.n(ke),Ce=n(71),xe=n.n(Ce),Ae=n(72),Re=n.n(Ae),Ie=function(e){return e.replace(/(_|-)/g,"$1$1")},Oe=function(e,t,n){return"https://img.shields.io/badge/".concat(Ie(e),"-").concat(Ie(t),"-").concat(n||"orange",".svg")};function Me(e){var t=e.app,n=e.links,i=t.name,r=t.version;return o.a.createElement("div",{className:Re.a.info,style:{marginTop:"-1.1rem"}},n.hex&&o.a.createElement("a",{href:n.hex},o.a.createElement("img",{src:Oe(i,r)})),n.docs&&o.a.createElement(o.a.Fragment,null,"  ",o.a.createElement("a",{href:n.docs},o.a.createElement("img",{src:Oe("docs",new URL(n.docs).host.split(".").slice(-2).shift(),"green")}))),n.source&&o.a.createElement(o.a.Fragment,null,"  ",o.a.createElement("a",{href:n.source},o.a.createElement("img",{src:Oe("source",new URL(n.source).host.replace(/\.(org|com)$/,""),"blue")}))))}Me.propTypes={app:d.a.shape({name:d.a.string,version:d.a.string,source:d.a.string}),links:d.a.shape({docs:d.a.string,hex:d.a.string,source:d.a.string})};var Le=Me,De=n(73),Ne=n.n(De),Pe=n(74),Be=n.n(Pe),Fe=n(31),We=n.n(Fe);function He(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e.reduce((function(e,t){return We()({},e,n[t])}),t)}function Ue(e){return e.join(" ")}function $e(e){var t=e.node,n=e.stylesheet,i=e.style,r=void 0===i?{}:i,s=e.useInlineStyles,a=e.key,l=t.properties,c=t.type,u=t.tagName,h=t.value;if("text"===c)return h;if(u){var d=function(e,t){var n=0;return function(i){return n+=1,i.map((function(i,o){return $e({node:i,stylesheet:e,useInlineStyles:t,key:"code-segment-".concat(n,"-").concat(o)})}))}}(n,s),p=s&&l.className&&l.className.filter((function(e){return!n[e]})),f=p&&p.length?p:void 0,g=s?We()({},l,{className:f&&Ue(f)},{style:He(l.className,Object.assign({},l.style,r),n)}):We()({},l,{className:Ue(l.className)}),m=d(t.children);return o.a.createElement(u,Se()({key:a},g),m)}}var Ve=/\n/g;function Ge(e){var t=e.codeString,n=e.codeStyle,i=e.containerProps,r=void 0===i?{}:i,s=e.numberProps,a=e.startingLineNumber;return r.style=r.style||{float:"left",paddingRight:"10px"},o.a.createElement("code",Se()({},r,{style:Object.assign({},n,r.style)}),function(e){var t=e.lines,n=e.startingLineNumber,i=e.numberProps,r=void 0===i?{}:i;return t.map((function(e,t){var i=t+n,s="function"==typeof r?r(i):r;return o.a.createElement("span",Se()({key:"line-".concat(t),className:"react-syntax-highlighter-line-number"},s),"".concat(i,"\n"))}))}({lines:t.replace(/\n$/,"").split("\n"),numberProps:s,startingLineNumber:a}))}function ze(e){var t=e.children,n=e.lineNumber,i=e.lineProps,o=e.className,r=void 0===o?[]:o,s=("function"==typeof i?i(n):i)||{};return s.className=s.className?r.concat(s.className):r,{type:"element",tagName:"span",properties:s,children:t}}function Xe(e,t){for(var n=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=0;o<t.length;o++){var r=t[o];if("text"===r.type)i.push(ze({children:[r],className:n}));else if(r.children){var s=n.concat(r.properties.className);i=i.concat(e(r.children,s))}}return i}(e.value),i=[],o=-1,r=0,s=function(){var e=n[r],s=e.children[0].value;if(s.match(Ve)){var a=s.split("\n");a.forEach((function(s,l){var c=i.length+1,u={type:"text",value:"".concat(s,"\n")};if(0===l){var h=n.slice(o+1,r).concat(ze({children:[u],className:e.properties.className}));i.push(ze({children:h,lineNumber:c,lineProps:t}))}else if(l===a.length-1){if(n[r+1]&&n[r+1].children&&n[r+1].children[0]){var d=ze({children:[{type:"text",value:"".concat(s)}],className:e.properties.className});n.splice(r+1,0,d)}else i.push(ze({children:[u],lineNumber:c,lineProps:t,className:e.properties.className}))}else i.push(ze({children:[u],lineNumber:c,lineProps:t,className:e.properties.className}))})),o=r}r++};r<n.length;)s();if(o!==n.length-1){var a=n.slice(o+1,n.length);a&&a.length&&i.push(ze({children:a,lineNumber:i.length+1,lineProps:t}))}return i}function je(e){var t=e.rows,n=e.stylesheet,i=e.useInlineStyles;return t.map((function(e,t){return $e({node:e,stylesheet:n,useInlineStyles:i,key:"code-segement".concat(t)})}))}var Ke,Ye,qe=n(46),Je=n.n(qe),Ze=(Ke=Je.a,Ye={},function(e){var t=e.language,n=e.children,i=e.style,r=void 0===i?Ye:i,s=e.customStyle,a=void 0===s?{}:s,l=e.codeTagProps,c=void 0===l?{style:r['code[class*="language-"]']}:l,u=e.useInlineStyles,h=void 0===u||u,d=e.showLineNumbers,p=void 0!==d&&d,f=e.startingLineNumber,g=void 0===f?1:f,m=e.lineNumberContainerProps,v=e.lineNumberProps,_=e.wrapLines,y=e.lineProps,b=void 0===y?{}:y,T=e.renderer,E=e.PreTag,w=void 0===E?"pre":E,k=e.CodeTag,S=void 0===k?"code":k,C=e.code,x=void 0===C?Array.isArray(n)?n[0]:n:C,A=e.astGenerator,R=Be()(e,["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","startingLineNumber","lineNumberContainerProps","lineNumberProps","wrapLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"]);A=A||Ke;var I=p?o.a.createElement(Ge,{containerProps:m,codeStyle:c.style||{},numberProps:v,startingLineNumber:g,codeString:x}):null,O=r.hljs||r['pre[class*="language-"]']||{backgroundColor:"#fff"},M=h?Object.assign({},R,{style:Object.assign({},O,a)}):Object.assign({},R,{className:"hljs"});if(!A)return o.a.createElement(w,M,I,o.a.createElement(S,c,x));_=!(!T||void 0!==_)||_,T=T||je;var L=[{type:"text",value:x}],D=function(e){var t=e.astGenerator,n=e.language,i=e.code,o=e.defaultCodeValue;if(t.getLanguage){var r=n&&t.getLanguage(n);return"text"===n?{value:o,language:"text"}:r?t.highlight(n,i):t.highlightAuto(i)}try{return n&&"text"!==n?{value:t.highlight(i,n)}:{value:o}}catch(e){return{value:o}}}({astGenerator:A,language:t,code:x,defaultCodeValue:L});null===D.language&&(D.value=L);var N=_?Xe(D,b):D.value;return o.a.createElement(w,M,I,o.a.createElement(S,c,T({rows:N,stylesheet:r,useInlineStyles:h})))});Ze.registerLanguage=function(e,t){return Je.a.register(t)};var Qe=Ze,et=n(75),tt=n.n(et).a,nt=n(76),it=n.n(nt).a,ot={'code[class*="language-"]':{color:"#c5c8c6",textShadow:"0 1px rgba(0, 0, 0, 0.3)",fontFamily:"Inconsolata, Monaco, Consolas, 'Courier New', Courier, monospace",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{color:"#c5c8c6",textShadow:"0 1px rgba(0, 0, 0, 0.3)",fontFamily:"Inconsolata, Monaco, Consolas, 'Courier New', Courier, monospace",direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",borderRadius:"0.3em",background:"#1e1e1e"},':not(pre) > code[class*="language-"]':{background:"#1e1e1e",padding:".1em",borderRadius:".3em"},comment:{color:"#6a9955"},prolog:{color:"#6a9955"},doctype:{color:"#6a9955"},cdata:{color:"#6a9955"},punctuation:{color:"#569cd6"},".namespace":{Opacity:".7"},property:{color:"#ce9178"},keyword:{color:"#569cd6"},tag:{color:"#569cd6"},"class-name":{color:"#FFFFB6",textDecoration:"underline"},boolean:{color:"#99CC99"},constant:{color:"#99CC99"},symbol:{color:"#f92672"},deleted:{color:"#ce9178"},number:{color:"#FF73FD"},selector:{color:"#A8FF60"},"attr-name":{color:"@"},string:{color:"#ce9178"},char:{color:"#A8FF60"},builtin:{color:"#569cd6"},inserted:{color:"#A8FF60"},variable:{color:"#C6C5FE"},operator:{color:"##ce9178"},entity:{color:"#FFFFB6",cursor:"help"},url:{color:"#96CBFE"},".language-css .token.string":{color:"#99CC99"},".style .token.string":{color:"#99CC99"},atrule:{color:"#F9EE98"},"attr-value":{color:"#F9EE98"},function:{color:"#569cd6"},regex:{color:"#E9C062"},important:{color:"#fd971f",fontWeight:"bold"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"}};function rt(e,t){return"string"==typeof t?e+t:o.a.Children.toArray(t.props.children).reduce(rt,e)}function st(e){var t=o.a.Children.toArray(e.children).reduce(rt,"").toLowerCase().replace(/\W/g,"-");return o.a.createElement("h"+e.level,{id:t},e.children)}function at(e){return o.a.createElement(Qe,{language:e.language,style:ot},e.value)}function lt(e){var t=(e.source||"").replace(/\[([^\]]+)\]([^(]|$)/gm,"\\[$1\\]$2");return o.a.createElement(Ne.a,{renderers:{heading:st,code:at},source:t,escapeHtml:!1})}Qe.registerLanguage("shell",tt),Qe.registerLanguage("bash",tt),Qe.registerLanguage("json",it),st.propTypes={children:d.a.any,level:d.a.any},at.propTypes={language:d.a.any,value:d.a.any},lt.propTypes={source:d.a.string};var ct=lt;function ut(e){var t=e.type,n=e.version,i=e.opts.label||t,r=[];t!==i&&r.push(t),">= 0.0.0"!==n&&r.push(n);var s=0===r.length?"":" (".concat(r.join(", "),")");return o.a.createElement("li",{key:i},i,s)}function ht(e){var t=e.slug,n=e.application,i=Object.keys(n),r=n[Object.keys(n)[0]],s=r.name,a=r.description,l=r.version,c=r.homepage_url,u=r.source_url,h=r.dependencies;return o.a.createElement(ge,{className:xe.a.application},o.a.createElement(pe,null,s),o.a.createElement("div",null,o.a.createElement(Le,{app:{name:t,version:l},links:{hex:c,source:u}}),o.a.createElement(ct,{source:a}),o.a.createElement("h3",null,"Dependencies"),h.applications&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",null,"Applications"),o.a.createElement("ul",null,h.applications.map((function(e,t){return o.a.createElement(ut,Se()({key:t},e))})))),h.services&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",null,"Services"),o.a.createElement("ul",null,h.services.map((function(e,t){return o.a.createElement(ut,Se()({key:t},e))})))),h.storage&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",null,"Storages"),o.a.createElement("ul",null,h.storage.map((function(e,t){return o.a.createElement(ut,Se()({key:t},e))})))),o.a.createElement("h3",null,"Instances"),o.a.createElement("ul",null,i.map((function(e){return o.a.createElement("li",{key:e},e)})))))}ut.propTypes={type:d.a.any,version:d.a.any,opts:d.a.any},ht.propTypes={application:d.a.any,slug:d.a.any};var dt=ht,pt=n(77),ft=n.n(pt),gt={redis:"Redis",postgres:"PostgreSQL",kafka:"Kafka"};var mt=function(){var e=Object(we.b)().architecture,t=[],n=[],i=[];return Object.keys(e).forEach((function(o){var r=e[o],s=r[Object.keys(r)[0]],a=s.name,l=s.dependencies,c=s.type;n.push(o),t.push({data:{id:o,label:a,type:c}}),(l.applications||[]).forEach((function(e){var n=e.type;i.push(n),t.push({data:{source:o,target:n}})})),(l.services||[]).forEach((function(e){var n=e.type;i.push(n),t.push({data:{source:o,target:n}})})),(l.storage||[]).forEach((function(e){var n=e.type,r=e.opts;i.push(n),t.push({data:{source:o,target:n,label:r.label}})}))})),i.filter((function(e){return!n.includes(e)})).forEach((function(e){t.push({data:{id:e,label:gt[e]||e}})})),o.a.createElement(ft.a,{layout:{name:"breadthfirst"},stylesheet:[{selector:"node",style:{"background-color":"#666",label:"data(label)"}},{selector:"edge[label]",style:{label:"data(label)"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle"}}],elements:t,style:{backgroundColor:"#fff",width:"100%",height:"600px"}})};var vt=function(){var e=Object(we.b)().architecture;return console.log(e),o.a.createElement(ge,null,o.a.createElement(pe,null,"Architecture"),o.a.createElement(Ee,null,o.a.createElement(ge,{key:"overview"},o.a.createElement(pe,null,"Overview"),o.a.createElement(mt,null)),Object.keys(e).map((function(t){return o.a.createElement(dt,{key:t,slug:t,application:e[t]})}))))},_t=n(21),yt=n.n(_t),bt=function(e){return e.split("_").map((function(e){return function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(e)})).join(" ")};function Tt(e){var t={};return e.forEach((function(e){return function e(t,n,i,o){var r=yt()(n),s=r[0],a=r.slice(1);return o.push(s),0==a.length?t[s]={name:i.name,value:i,children:{}}:(t[s]=t[s]||{name:bt(s),children:{}},t[s].children=e(t[s].children,a,i,o)),t}(t,e.slug.split("."),e,[])})),t}function Et(e){var t=e.title,n=e.path,i=e.render,r=e.items;return o.a.createElement(ge,null,o.a.createElement(pe,null,t),o.a.createElement(Ee,null,function e(t,n,i){return Object.values(t).sort((function(e,t){var n=e.children,i=e.name,o=t.children,r=t.name,s=0===Object.entries(n).length;return s===(0===Object.entries(o).length)?i.localeCompare(r):s?-1:1})).map((function(t){var r=t.children,s=t.name,a=t.value;return 0===Object.entries(r).length?o.a.createElement(ye,{key:a.slug,path:"/".concat(i,"/")+a.slug.split(/\./).join("/")},n(a)):o.a.createElement(ge,{key:s},o.a.createElement(pe,null,s),e(r,n,i))}))}(Tt(r),i,n)))}Et.propTypes={title:d.a.string.isRequired,path:d.a.string.isRequired,render:d.a.func.isRequired,items:d.a.arrayOf(d.a.shape({slug:d.a.string.isRequired})).isRequired};var wt=Et,kt=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).history=L(t.props),t}return p(t,e),t.prototype.render=function(){return o.a.createElement(J,{history:this.history,children:this.props.children})},t}(o.a.Component);o.a.Component;var St=function(e,t){return"function"==typeof e?e(t):e},Ct=function(e,t){return"string"==typeof e?C(e,null,null,t):e},xt=function(e){return e},At=o.a.forwardRef;void 0===At&&(At=xt);var Rt=At((function(e,t){var n=e.innerRef,i=e.navigate,r=e.onClick,s=Y(e,["innerRef","navigate","onClick"]),a=s.target,l=f({},s,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return l.ref=xt!==At&&t||n,o.a.createElement("a",l)}));var It=At((function(e,t){var n=e.component,i=void 0===n?Rt:n,r=e.replace,s=e.to,a=e.innerRef,l=Y(e,["component","replace","to","innerRef"]);return o.a.createElement(q.Consumer,null,(function(e){e||b(!1);var n=e.history,c=Ct(St(s,e.location),e.location),u=c?n.createHref(c):"",h=f({},l,{href:u,navigate:function(){var t=St(s,e.location);(r?n.replace:n.push)(t)}});return xt!==At?h.ref=t||a:h.innerRef=a,o.a.createElement(i,h)}))})),Ot=function(e){return e},Mt=o.a.forwardRef;void 0===Mt&&(Mt=Ot);var Lt=Mt((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,r=e.activeClassName,s=void 0===r?"active":r,a=e.activeStyle,l=e.className,c=e.exact,u=e.isActive,h=e.location,d=e.strict,p=e.style,g=e.to,m=e.innerRef,v=Y(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return o.a.createElement(q.Consumer,null,(function(e){e||b(!1);var n=h||e.location,r=Ct(St(g,n),n),_=r.pathname,y=_&&_.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),T=y?te(n.pathname,{path:y,exact:c,strict:d}):null,E=!!(u?u(T,n):T),w=E?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(l,s):l,k=E?f({},p,{},a):p,S=f({"aria-current":E&&i||null,className:w,style:k,to:r},v);return Ot!==Mt?S.ref=t||m:S.innerRef=m,o.a.createElement(It,S)}))})),Dt=n(78),Nt=n.n(Dt),Pt=n(24),Bt=n.n(Pt),Ft=n(79),Wt=n.n(Ft).a,Ht=n(43),Ut=n.n(Ht).a,$t=n(28);Qe.registerLanguage("elixir",Wt),Qe.registerLanguage("javascript",Ut),Qe.registerLanguage("json",it);var Vt={elixir:"Elixir",javascript:"JavaScript",json:"JSON"};function Gt(e){var t=e.examples,n=e.languages;if(0===(n=n||Object.keys(t)).length)return null;var r=Object(i.useState)(),s=l()(r,2),a=s[0],c=s[1],u=Object($t.b)(),h=u.lang,d=u.setLang;if(h in t&&a in t[h])return o.a.createElement("div",null,o.a.createElement("div",null,n.map((function(e){return o.a.createElement("span",{className:"".concat(Bt.a["lang-button"]," ").concat(Bt.a[e===h?"lang-selected":"lang"]),key:e,onClick:function(){return d(e)}},Vt[e])}))),o.a.createElement("div",{className:Bt.a.example},o.a.createElement("span",{onClick:function(){return c(!1)},className:Bt.a.random},"🎲"),o.a.createElement(Qe,{language:h,style:ot},t[h][a])));if(h in t)c(t[h].length*Math.random()|0);else{var p=Object.keys(t).filter((function(e){return-1!==n.indexOf(e)}))[0];d(p),c(t[p].length*Math.random()|0)}return null}Gt.propTypes={examples:d.a.any.isRequired,languages:d.a.arrayOf(d.a.string)};var zt=Gt;function Xt(e){var t=e.schema,n=e.children,i=t.name,r=t.app,s=t.links,a=t.description,l=t.examples;return o.a.createElement(ge,{className:Nt.a.schema},o.a.createElement(pe,null,i),o.a.createElement("div",null,o.a.createElement(Le,{app:r,links:s}),o.a.createElement(ct,{source:a}),n,l&&o.a.createElement(ge,null,o.a.createElement(pe,null,"Examples"),o.a.createElement(zt,{examples:l}))))}Xt.propTypes={schema:d.a.object.isRequired,children:d.a.array};var jt=Xt,Kt=n(16),Yt=function(e){return e.replace(/(_|-)/g,"$1$1")},qt=function(e,t,n){return"https://img.shields.io/badge/".concat(Yt(e),"-").concat(Yt(t),"-").concat(n||"orange",".svg")};function Jt(e){var t=e.command,n=Object(Kt.b)().spec,i=t.emits.map((function(e){return n.event(e)})).filter((function(e){return!!e}));return o.a.createElement(jt,{schema:t},i.length>0&&o.a.createElement(o.a.Fragment,null," ",o.a.createElement("p",null,"The command potentially generates one or more of the following events:"),o.a.createElement("ul",null,i.map((function(e){return o.a.createElement("li",{key:e.slug},o.a.createElement(It,{to:"/events/".concat(e.slug.replace(/\./g,"/"))},e.name))})))),o.a.createElement("h3",null,"Fields"),t.fields.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return o.a.createElement("div",{key:e.name},o.a.createElement("h4",null,e.name,o.a.createElement(It,{to:"/types/".concat(e.type),style:{margin:".5rem"}},o.a.createElement("img",{style:{height:"1.1rem",position:"relative",top:".25rem"},src:qt("type",e.type)})),e.sensitive&&"(sensitive)"),o.a.createElement(ct,{source:e.description}))})))}Jt.propTypes={command:d.a.any};var Zt=Jt;function Qt(e){var t=e.spec;return o.a.createElement(wt,{title:"Commands",path:"commands",render:function(e){return o.a.createElement(Zt,{command:e})},items:t.commands})}Qt.propTypes={spec:d.a.object};var en=Qt,tn=function(e){return e.toLowerCase().replace(/\W+/,"_").replace(/[^a-z0-9_]/g,"")};function nn(e){var t=e.pages,n=he().pathname.split("/").slice(2),i=t.find((function(e){var t=e.title;return tn(t)==n[0]}));return i?o.a.createElement(Ee,null,function e(t,n){var i=t.title,r=t.content,s=t.sections,a=t.subsections,l=tn(i),c=(n||"/pages")+"/"+l;return o.a.createElement(ge,{key:l},o.a.createElement(ye,{path:c},o.a.createElement(pe,null,i),o.a.createElement(ct,{source:r})),(s||a).map((function(t){return e(t,c)})))}(i)):o.a.createElement("p",null,"Page not found...")}nn.propTypes={pages:d.a.array};var on=nn,rn=function(e){return e.replace(/(_|-)/g,"$1$1")},sn=function(e,t,n){return"https://img.shields.io/badge/".concat(rn(e),"-").concat(rn(t),"-").concat(n||"orange",".svg")};function an(e){var t=e.event;return o.a.createElement(jt,{schema:t},o.a.createElement("h3",null,"Fields"),t.fields.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return o.a.createElement("div",{key:e.name},o.a.createElement("h4",null,e.name,o.a.createElement(It,{to:"/types/".concat(e.type),style:{margin:".5rem"}},o.a.createElement("img",{style:{height:"1.1rem",position:"relative",top:".25rem"},src:sn("type",e.type)})),e.sensitive&&"(sensitive)"),o.a.createElement(ct,{source:e.description}))})),o.a.createElement("h3",null,"Changelog"),Object.entries(t.history).map((function(e){var t=l()(e,2),n=t[0],i=t[1],r=i.timestamp,s=i.description;return o.a.createElement("div",{key:n},o.a.createElement("h4",null,"v",n,r?" (".concat(r,")"):""),o.a.createElement(ct,{source:s}))})))}an.propTypes={event:d.a.any};var ln=an;function cn(e){var t=e.spec;return o.a.createElement(wt,{title:"Events",path:"events",render:function(e){return o.a.createElement(ln,{event:e})},items:t.events})}cn.propTypes={spec:d.a.object};var un=cn,hn=n(80),dn=n.n(hn);function pn(e){var t=e.key_;return o.a.createElement("div",{className:dn.a.key},o.a.createElement("h2",null," ",t.name),o.a.createElement("div",null,o.a.createElement(Le,{app:t.app,links:t.links}),o.a.createElement(ct,{source:t.description}),o.a.createElement(zt,{examples:t.examples,title:o.a.createElement("h3",null,"Examples")})))}pn.propTypes={key_:d.a.any};var fn=pn;function gn(e){var t=e.spec;return o.a.createElement(wt,{title:"Keys",path:"keys",render:function(e){return o.a.createElement(fn,{key_:e})},items:t.keys})}gn.propTypes={spec:d.a.object};var mn=gn,vn=n(13),_n=n.n(vn);Qe.registerLanguage("javascript",Ut);var yn={topic:null,source:null,events:[],disconnect:null};function bn(e){var t=e.spec,n=Object(i.useState)(""),r=l()(n,2),s=(r[0],r[1]),a=ue().push,c=he().search,u=t.topics.find((function(e){return"?topic=".concat(e.topic)===c}))||t.topics[0];return Object(i.useEffect)((function(){if(yn.disconnect&&clearTimeout(yn.disconnect),yn.topic!=u||null===yn.source){yn.source&&yn.source.close(),yn.events=[];var e=(document.querySelector("[name~=kvasir-host][content]")||{content:""}).content,n=new EventSource("".concat(e,"/api/v1/sse/").concat(u.topic));u.events.forEach((function(e){return n.addEventListener(e.type,(function(e){var n=t.Events.parse(JSON.parse(e.data));yn.events.unshift(n),s(e.lastEventId)}))})),yn.source=n,yn.topic=u}return function(){yn.disconnect=setTimeout((function(){yn.source.close(),yn.source=null,yn.topic=null}))}})),o.a.createElement(ge,null,o.a.createElement(pe,null,o.a.createElement("span",null,"Live View "),o.a.createElement("select",{className:_n.a["topic-select"],value:u.topic,onChange:function(e){return a("?topic=".concat(e.target.value))}},t.topics.map((function(e){return o.a.createElement("option",{key:e.slug,value:e.topic},e.name)})))),o.a.createElement("div",{className:_n.a.live},o.a.createElement("table",{className:_n.a.table},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{abbr:"P"},"Partition"),o.a.createElement("th",{abbr:"O"},"Offset"),o.a.createElement("th",{abbr:"K"},"Key"),o.a.createElement("th",null,"Event"),o.a.createElement("th",null,"Data"))),o.a.createElement("tbody",null,yn.events.map((function(e,t){return o.a.createElement("tr",{key:t,className:_n.a.row},o.a.createElement("td",{className:_n.a.column},e.getPartition()),o.a.createElement("td",{className:_n.a.column},e.getOffset()),o.a.createElement("td",{className:_n.a.column},e.getKey()),o.a.createElement("td",{className:_n.a.column,style:{whiteSpace:"nowrap"}},o.a.createElement(It,{to:"/events/".concat(e.getSpec().slug.replace(/\./g,"/"))},e.getSpec().name)),o.a.createElement("td",{className:_n.a.column},o.a.createElement(Qe,{language:"javascript",style:ot,customStyle:{padding:0,margin:0}},(i={},(n=e).getSpec().fields.forEach((function(e){i[e.name]=n.field(e.name)})),JSON.stringify(i,null,2)))));var n,i}))))))}bn.propTypes={spec:d.a.object};var Tn=bn,En=n(14),wn=n(81),kn=(n(205),function(e,t,n){e.Blocks.kvasir_state_set={init:function(){var t=this.workspace.getVariablesOfType("State").map((function(e){var t=e.name;return[t,t]}));this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField("Set ").appendField(new e.FieldDropdown(t,(function(){})),"state").appendField(" in state"),this.appendValueInput("value").setCheck(null),this.setColour(330),this.setHelpUrl("")}},e.Blocks.kvasir_event={init:function(){var i=this,o=Object.keys(t).map((function(e){return[t[e].name,e]})),r=Object.keys(n).map((function(e){return[n[e].name,e]}));this.appendDummyInput("event_header").setAlign(e.ALIGN_RIGHT).appendField("On ").appendField(new e.FieldDropdown(o,this.changeTopic.bind(this)),"topic").appendField(new e.FieldDropdown(r,this.changeEvent.bind(this)),"event"),this.setNextStatement(!0,null),this.topic=this.getFieldValue("topic"),this.event=this.getFieldValue("event"),this.setColour(230),this.setHelpUrl(""),this.updateShape(),this.getEvent=function(){return n.find((function(e){return e.slug===i.event}))}},changeTopic:function(e){this.topic!==e&&(this.topic=e,this.updateShape())},changeEvent:function(e){this.event!==e&&(this.event=e)},updateShape:function(){var n=t[this.topic].events.map((function(e){return[e.name,e.slug]})),i=this.getInput("event_header");i.removeField("event"),i.appendField(new e.FieldDropdown(n,this.changeEvent.bind(this)),"event"),this.event=this.getFieldValue("event"),this.setTooltip("AAAA")}},e.Blocks.kvasir_projection={init:function(){var n=Object.keys(t).map((function(e){return[t[e].name,e]}));this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField("Projection ").appendField(new e.FieldDropdown(n,this.changeTopic.bind(this)),"topic"),this.appendStatementInput("state").appendField("Global State").setAlign(e.ALIGN_RIGHT),this.topic=this.getFieldValue("topic"),this.setColour(230),this.setHelpUrl(""),this.updateShape()},changeTopic:function(e){this.topic!==e&&(this.topic=e,this.updateShape())},updateShape:function(){var n=this,i="".concat(t[this.topic].name,"\n \nEvents:");Object.keys(t).filter((function(e){return e!=n.topic})).map((function(e){return t[e]})).forEach((function(e){return e.events.forEach((function(e){return n.getInput("event_".concat(e.slug))&&n.removeInput("event_".concat(e.slug))}))})),t[this.topic].events.forEach((function(t){n.appendStatementInput("event_".concat(t.slug)).appendField(t.name).setCheck("Number").setAlign(e.ALIGN_RIGHT),i+="\n  ".concat(t.name," (").concat(t.slug,")")})),this.setTooltip(i)}},e.Blocks.kvasir_aggregate={init:function(){var n=Object.keys(t).map((function(e){return[t[e].name,e]}));this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField("Aggregate ").appendField(new e.FieldDropdown(n,this.changeTopic.bind(this)),"topic"),this.appendStatementInput("state").appendField("Init State").setAlign(e.ALIGN_RIGHT),this.topic=this.getFieldValue("topic"),this.setColour(230),this.setHelpUrl(""),this.updateShape()},getDeveloperVariables:function(){return["event","state"]},changeTopic:function(e){this.topic!==e&&(this.topic=e,this.updateShape())},updateShape:function(){var n=this,i="".concat(t[this.topic].name,"\n \nEvents:");Object.keys(t).filter((function(e){return e!=n.topic})).map((function(e){return t[e]})).forEach((function(e){return e.events.forEach((function(e){return n.getInput("event_".concat(e.slug))&&n.removeInput("event_".concat(e.slug))}))})),t[this.topic].events.forEach((function(t){n.appendStatementInput("event_".concat(t.slug)).appendField(t.name).setCheck("Number").setAlign(e.ALIGN_RIGHT),i+="\n  ".concat(t.name," (").concat(t.slug,")")})),this.setTooltip(i)}}}),Sn=function(e){e.Blocks.kvasir_event_topic={init:function(){this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField("Topic"),this.setOutput(!0,"String"),this.setColour(130),this.setHelpUrl("")}},e.Blocks.kvasir_event_partition={init:function(){this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField("Partition"),this.setOutput(!0,"Number"),this.setColour(130),this.setHelpUrl("")}},e.Blocks.kvasir_event_offset={init:function(){this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField("Offset"),this.setOutput(!0,"Number"),this.setColour(130),this.setHelpUrl("")}},e.Blocks.kvasir_event_key={init:function(){this.appendDummyInput().setAlign(e.ALIGN_RIGHT).appendField("Key"),this.setOutput(!0,null),this.setColour(130),this.setHelpUrl("")}};e.Blocks.kvasir_event_field={init:function(){var t=this;this.appendDummyInput("field_selection").setAlign(e.ALIGN_RIGHT).appendField("Field").appendField(new e.FieldDropdown([["Select Field","null"]],(function(){})),"field"),this.setOutput(!0,null),this.setColour(130),this.setHelpUrl("");var n={parent:null};this.setOnChange((function(i){var o=function e(t){return t.parentBlock_?e(t.parentBlock_):t}(t);if(n.parent!==o)if(n.parent=o,o.getEvent){var r=o.getEvent();if(r){var s=r.fields.map((function(e){return[e.name,e.name]})),a=t.getInput("field_selection");a&&(a.removeField("field"),a.appendField(new e.FieldDropdown(s,(function(){})),"field"))}}else{var l=t.getInput("field_selection");l&&(l.removeField("field"),l.appendField(new e.FieldDropdown([["Select Field","null"]],(function(){})),"field"))}}))}}},Cn=function(e){e.Blocks.console_log={init:function(){this.appendValueInput("MESSAGE").setCheck(null).appendField("Console Log"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(140),this.setHelpUrl("")}},e.Blocks.alert={init:function(){this.appendValueInput("MESSAGE").setCheck(null).appendField("Alert"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(140),this.setHelpUrl("")}}},xn=n(32),An=n.n(xn);function Rn(e){var t,n,r=e.expanded,s=Object(Kt.b)().spec,a=Object(i.useState)(),c=l()(a,2),u=c[0],h=c[1];return s?(t=s.topics,n=s.events,kn(En,t,n),Sn(En),Cn(En),Object(i.useEffect)((function(){if(u){var e=setInterval((function(){return window.dispatchEvent(new Event("resize"),25)}));setTimeout((function(){return clearInterval(e)}),550)}else h(En.inject(document.getElementById("blocks"),{theme:En.Themes.Dark,toolbox:document.getElementById("toolbox")}))})),o.a.createElement("div",null,o.a.createElement("div",{style:{display:"none"},dangerouslySetInnerHTML:{__html:'\n    <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox">\n      <category name="Event Sourcing" colour="200">\n        <block type="kvasir_aggregate"></block>\n        <block type="kvasir_projection"></block>\n        <block type="kvasir_event"></block>\n      </category>\n      <category name="Events" colour="0">\n        <block type="kvasir_event_field"></block>\n        <block type="kvasir_event_topic"></block>\n        <block type="kvasir_event_partition"></block>\n        <block type="kvasir_event_offset"></block>\n        <block type="kvasir_event_key"></block>\n      </category>\n      <category name="Output" colour="140">\n        <block type="console_log"></block>\n        <block type="alert"></block>\n      </category>\n      <category name="Control" colour="100">\n        <block type="controls_if"></block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_boolean"></block>\n        <block type="controls_repeat_ext"></block>\n        <block type="math_arithmetic"></block>\n        <block type="math_number"></block>\n      </category>\n      <category name="State" colour="330" custom="KVASIR_STATE"></category>\n      <category name="Variables" colour="330" custom="VARIABLE"></category>\n    </xml>'}}),o.a.createElement("div",{id:"blocks",className:[An.a.blocks,r?An.a.expanded:An.a.collapsed].join(" ")}))):null}En.setLocale(wn),Rn.propTypes={expanded:d.a.bool};var In=Rn;function On(e){var t=e.expanded;return o.a.createElement("div",null,o.a.createElement(In,{expanded:t}))}On.propTypes={expanded:d.a.bool};var Mn=On,Ln=(n(206),n(82)),Dn=n.n(Ln);n(212),n(213);var Nn=function(){var e=Object(i.useState)(""),t=l()(e,2),n=t[0],r=t[1];return o.a.createElement(Dn.a,{mode:"javascript",theme:"monokai",onChange:r,fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:n,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2}})};function Pn(e){var t=e.spec,n=t.events,r=t.topics,s=Object(i.useState)(Object.keys(r)[0]),a=l()(s,2),c=a[0],u=a[1],h=Object(i.useState)(Object.keys(n)[0]),d=l()(h,2);d[0],d[1];return o.a.createElement("div",null,o.a.createElement("select",{value:c,onChange:function(e){return u(e.target.value)}},Object.keys(r).map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement("select",{multiple:!0},Object.keys(n).filter((function(e){return-1!==r[c].events.indexOf(e)})).map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement(Nn,null))}Pn.propTypes={spec:d.a.shape({events:d.a.any,topics:d.a.any})};var Bn=Pn,Fn=function(e){return e.replace(/(_|-)/g,"$1$1")},Wn=function(e,t,n){return"https://img.shields.io/badge/".concat(Fn(e),"-").concat(Fn(t),"-").concat(n||"orange",".svg")};function Hn(e){var t=e.topic;return o.a.createElement("div",null,o.a.createElement("h2",null,t.name,o.a.createElement(It,{to:"/keys/".concat(t.key),style:{margin:".5rem"}},o.a.createElement("img",{style:{height:"1.1rem",position:"relative",top:".25rem"},src:Wn("key",t.key)})),o.a.createElement("img",{style:{height:"1.1rem",position:"relative",top:".25rem"},src:Wn("part","".concat(t.partitions),"blue")}),o.a.createElement(It,{to:"/liveview?topic=".concat(t.topic),style:{margin:".5rem"}},o.a.createElement("img",{style:{height:"1.1rem",position:"relative",top:".25rem"},src:Wn("live","🔴","green")}))),o.a.createElement(ct,{source:t.description}),"Events:",o.a.createElement("ul",null,t.events.map((function(e){return o.a.createElement("li",{key:e.slug},o.a.createElement(It,{to:"/events/".concat(e.slug.replace(/\./g,"/"))},e.name))}))))}Hn.propTypes={topic:d.a.any};var Un=Hn;function $n(e){var t=e.spec;return o.a.createElement(wt,{title:"Topics",path:"topics",render:function(e){return o.a.createElement(Un,{topic:e})},items:t.topics})}$n.propTypes={spec:d.a.object};var Vn=$n,Gn=n(83),zn=n.n(Gn);function Xn(e){var t=e.type;return o.a.createElement("div",{className:zn.a.type},o.a.createElement("h2",null," ",t.name),o.a.createElement("div",null,o.a.createElement(Le,{app:t.app,links:t.links}),o.a.createElement(ct,{source:t.description}),o.a.createElement(zt,{examples:t.examples,title:o.a.createElement("h3",null,"Examples")})))}Xn.propTypes={type:d.a.any};var jn=Xn;function Kn(e){var t=e.spec;return o.a.createElement(wt,{title:"Types",path:"types",render:function(e){return o.a.createElement(jn,{type:e})},items:t.types})}Kn.propTypes={spec:d.a.object};var Yn=Kn;function qn(e){var t=e.spec,n=e.pages,i=e.expanded;return o.a.createElement(le,null,o.a.createElement(ne,{path:"/commands"},o.a.createElement(en,{spec:t})),o.a.createElement(ne,{path:"/topics"},o.a.createElement(Vn,{spec:t})),o.a.createElement(ne,{path:"/events"},o.a.createElement(un,{spec:t})),o.a.createElement(ne,{path:"/keys"},o.a.createElement(mn,{spec:t})),o.a.createElement(ne,{path:"/types"},o.a.createElement(Yn,{spec:t})),o.a.createElement(ne,{path:"/architecture"},o.a.createElement(vt,null)),o.a.createElement(ne,{exact:!0,path:"/playground"},o.a.createElement(Mn,{spec:t,expanded:i})),o.a.createElement(ne,{exact:!0,path:"/sandbox"},o.a.createElement(Bn,{spec:t})),o.a.createElement(ne,{exact:!0,path:"/liveview"},o.a.createElement(Tn,{spec:t})),o.a.createElement(ne,{path:"/about"},o.a.createElement(me,null)),o.a.createElement(ne,{path:"/pages"},o.a.createElement(on,{pages:n})),o.a.createElement(ne,{path:"*"},o.a.createElement(Vn,{spec:t})))}qn.propTypes={pages:d.a.array,spec:d.a.any,expanded:d.a.bool};var Jn=qn,Zn=n(47),Qn=n.n(Zn),ei=n(10),ti=n.n(ei),ni=function(e){return e.split("_").map((function(e){return function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(e)})).join(" ")};function ii(e){var t={};return e.forEach((function(e){return function e(t,n,i,o){var r=yt()(n),s=r[0],a=r.slice(1);return o.push(s),0==a.length?t[s]={name:i.name,value:o.pop(),children:{}}:(t[s]=t[s]||{name:ni(s),value:o.pop(),children:{}},t[s].children=e(t[s].children,a,i,o)),t}(t,e.slug.split("."),e,[])})),t}var oi=function(e){return e.toLowerCase().replace(/\W+/,"_").replace(/[^a-z0-9_]/g,"")};function ri(e){var t=e.spec,n=e.pages,i=e.expanded,r=e.setExpanded,s=he().pathname,a=s.startsWith("/pages/")?"pages/"+s.split("/").slice(2).shift():s.split("/").slice(1).shift(),l={topics:{name:"Topics",value:"topics",children:ii(t.topics),order:0},commands:{name:"Commands",value:"commands",children:ii(t.commands),order:2},events:{name:"Events",value:"events",children:ii(t.events),order:3},keys:{name:"Keys",value:"keys",children:ii(t.keys),order:5},types:{name:"Types",value:"types",children:ii(t.types),order:6},architecture:{name:"Architecture",value:"architecture",children:ii([]),order:7},playground:{name:"Playground",value:"playground",children:{},order:11},about:{name:"About",value:"about",children:{kvasir:{name:"Kvasir",value:"kvasir",children:{components:{name:"Components",value:"components",children:{agent:{name:"Agent",value:"agent",children:{}},blockly:{name:"Blockly",value:"blockly",children:{}},http:{name:"HTTP",value:"http",children:{}},projector:{name:"Projector",value:"projector",children:{}}}}}}},order:12}};return function e(t,n,i){return n.forEach((function(n){var o=oi(n.title),r=e({},n.sections||n.subsections);t[o]={name:n.title,value:(i||"")+o,children:r,order:n.order||0}})),t}(l,n||[],"pages/"),o.a.createElement("div",{className:[ti.a.sidebar,i?ti.a.expanded:ti.a.collapsed].join(" ")},o.a.createElement("span",{className:ti.a["sidebar-toggle"],onClick:function(){return r(!i)}},i?"<":">"),o.a.createElement("div",{className:ti.a.menu},function e(t,n,i){return i=i||[],o.a.createElement("ul",{className:ti.a["menu-items"]},Object.keys(t).sort((function(e,n){var i=t[e],o=i.order,r=i.children,s=i.name,a=t[n],l=a.order,c=a.children,u=a.name,h=0===Object.entries(r).length,d=0===Object.entries(c).length;return void 0!==o&&void 0!==l?o<l?-1:1:void 0!==o?-1:void 0!==l?1:h===d?s.localeCompare(u):h?-1:1})).map((function(r){var s=t[r],a=s.name,l=s.value,c=s.children,u=Qn()(i),h=u.length+1;if(u.push(l),0===Object.entries(c).length||u[0].startsWith("pages/")&&3==u.length)return o.a.createElement("li",{key:a,className:ti.a["menu-item-".concat(h)]},o.a.createElement(Lt,{activeClassName:ti.a.selected,to:"/"+u.join("/")},a));var d=[ti.a["menu-sub-".concat(h)]];return 1===h&&d.push(ti.a[l===n?"sub-expanded":"sub-collapsed"]),o.a.createElement("li",{key:a,className:d.join(" ")},o.a.createElement(Lt,{activeClassName:ti.a.selected,to:"/"+u.join("/")},a),e(c,n,Qn()(u)))})))}(l,a)))}ri.propTypes={pages:d.a.array,spec:d.a.object,expanded:d.a.bool,setExpanded:d.a.func};var si=ri,ai=n(84),li={spec:function(e){return ai.a.fromJSON(e)}};window.Kvasir=li;var ci=li;var ui=function(){var e=Object(we.b)(),t=e.architecture,n=e.setArchitecture,r=Object(Kt.b)(),s=r.spec,a=r.setSpec,c=Object(i.useState)(),h=l()(c,2),d=h[0],p=h[1],f=Object(i.useState)(!0),g=l()(f,2),m=g[0],v=g[1];if(!t){var _=document.querySelector("[name~=kvasir-host][content]")||{content:""};fetch("".concat(_.content,"/api/v1/architecture"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){return n(e)}))}if(!s){var y=document.querySelector("[name~=kvasir-host][content]")||{content:""};fetch("".concat(y.content,"/api/v1/spec"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){return a(ci.spec(e))}))}if(!d){var b=document.querySelector("[name~=kvasir-host][content]")||{content:""};fetch("".concat(b.content,"/api/v1/pages"),{mode:"cors"}).then((function(e){return e.json()})).then((function(e){return p(e)}))}return s&&d?(window.spec=s,o.a.createElement("div",{className:u.a.app},o.a.createElement(kt,null,o.a.createElement(si,{spec:s,pages:d,expanded:m,setExpanded:v}),o.a.createElement("div",{className:[u.a.content,m?u.a.expanded:u.a.collapsed].join(" ")},o.a.createElement("div",{className:u.a.contents},o.a.createElement(Jn,{pages:d,spec:s,expanded:m})),o.a.createElement("div",{style:{position:"absolute",bottom:".5rem",left:0,right:0,textAlign:"center"}},o.a.createElement("span",{style:{float:"left"}},"↢ ..."),o.a.createElement("span",null,"Topics"),o.a.createElement("span",{style:{float:"right"}},"Events ↣")))))):o.a.createElement("div",{className:u.a.app},"Loading...")};s.a.render(o.a.createElement($t.a,null,o.a.createElement(we.a,null,o.a.createElement(Kt.a,null,o.a.createElement(ui,null)))),document.getElementById("kvasir-app"))}]);